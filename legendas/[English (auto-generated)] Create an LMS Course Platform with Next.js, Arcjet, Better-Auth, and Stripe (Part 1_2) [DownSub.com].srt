1
00:00:00,240 --> 00:00:03,600
Welcome to Marshall LMS, a complete

2
00:00:03,600 --> 00:00:06,080
featurerich learning management system

3
00:00:06,080 --> 00:00:09,120
built entirely from the ground up. This

4
00:00:09,120 --> 00:00:12,080
isn't just some basic platform. No, this

5
00:00:12,080 --> 00:00:14,719
is a full-blown system where you can

6
00:00:14,719 --> 00:00:17,600
create, manage, and sell your own online

7
00:00:17,600 --> 00:00:20,080
courses with a seamless experience for

8
00:00:20,080 --> 00:00:22,480
both you and your students. Sounds

9
00:00:22,480 --> 00:00:24,960
ambitious? Well, we are making it happen

10
00:00:24,960 --> 00:00:27,599
from scratch. Let's start with the

11
00:00:27,599 --> 00:00:30,400
basics. a beautiful public-f facing

12
00:00:30,400 --> 00:00:32,880
landing page and a course catalog

13
00:00:32,880 --> 00:00:35,840
designed to engage students right away.

14
00:00:35,840 --> 00:00:38,320
They can browse individual courses,

15
00:00:38,320 --> 00:00:41,040
explore detailed overviews, see the full

16
00:00:41,040 --> 00:00:43,280
curriculum, and thanks to a seamless

17
00:00:43,280 --> 00:00:45,760
Stripe integration, purchase access

18
00:00:45,760 --> 00:00:48,239
instantly. But before anything can be

19
00:00:48,239 --> 00:00:50,719
bought, users need to authenticate.

20
00:00:50,719 --> 00:00:53,600
Whether you are a creator or a customer,

21
00:00:53,600 --> 00:00:56,320
logging in is simple. Choose GitHub O

22
00:00:56,320 --> 00:00:58,879
off or go with your email. If you log in

23
00:00:58,879 --> 00:01:01,359
with your email, we will send a one-time

24
00:01:01,359 --> 00:01:05,199
passcode OTP to verify your identity

25
00:01:05,199 --> 00:01:08,400
fast and secure. Just copy paste it and

26
00:01:08,400 --> 00:01:10,479
you are authenticated.

27
00:01:10,479 --> 00:01:12,720
And that's just the beginning. As a

28
00:01:12,720 --> 00:01:15,680
creator, you get access to a powerful

29
00:01:15,680 --> 00:01:18,479
admin dashboard with beautiful analytics

30
00:01:18,479 --> 00:01:21,280
to help you track your success. You will

31
00:01:21,280 --> 00:01:24,240
have a fully custom course creation and

32
00:01:24,240 --> 00:01:27,040
editing suite complete with a slick

33
00:01:27,040 --> 00:01:29,520
modern rich text editor built from

34
00:01:29,520 --> 00:01:32,400
complete scratch. Uploading files, well,

35
00:01:32,400 --> 00:01:34,799
we've built a custom drag and drop zone

36
00:01:34,799 --> 00:01:36,720
to make it effortless. Behind the

37
00:01:36,720 --> 00:01:39,200
scenes, uploads are handled securely

38
00:01:39,200 --> 00:01:42,799
using pre-signed URLs and stored in a S3

39
00:01:42,799 --> 00:01:46,000
bucket. Production grade, scalable, and

40
00:01:46,000 --> 00:01:48,399
fast. And when it's time to edit a

41
00:01:48,399 --> 00:01:51,119
course, you have two powerful tabs. One

42
00:01:51,119 --> 00:01:53,840
to update your basic course info and

43
00:01:53,840 --> 00:01:56,000
another one to manage the course

44
00:01:56,000 --> 00:01:58,320
structure. The course structure page

45
00:01:58,320 --> 00:02:01,040
unlocks a whole new level of control.

46
00:02:01,040 --> 00:02:03,360
Using an intuitive drag and drop

47
00:02:03,360 --> 00:02:06,159
interface, you can reorder chapters and

48
00:02:06,159 --> 00:02:08,800
lessons with ease. Just drag and drop

49
00:02:08,800 --> 00:02:12,239
them into place. It's seamless. Oh, and

50
00:02:12,239 --> 00:02:15,120
of course, we take security seriously

51
00:02:15,120 --> 00:02:18,160
with Arkhat. Our platform is protected

52
00:02:18,160 --> 00:02:21,840
against bots, XSS, SQL injection, and

53
00:02:21,840 --> 00:02:24,080
other common attacks. We also

54
00:02:24,080 --> 00:02:26,080
implemented weight limits and bot

55
00:02:26,080 --> 00:02:29,680
detection so that our app stays fast and

56
00:02:29,680 --> 00:02:32,720
secure. Now, let's flip to the student

57
00:02:32,720 --> 00:02:35,680
experience. Once enrolled, students get

58
00:02:35,680 --> 00:02:38,160
a personalized dashboard showing the

59
00:02:38,160 --> 00:02:40,400
enrolled courses and the individual

60
00:02:40,400 --> 00:02:42,879
progress on each course. But the real

61
00:02:42,879 --> 00:02:45,760
magic happens in the course player page.

62
00:02:45,760 --> 00:02:48,959
A clean two panel layout with a sidebar

63
00:02:48,959 --> 00:02:52,000
for navigating chapters and lessons, a

64
00:02:52,000 --> 00:02:54,879
main area with a beautiful video player,

65
00:02:54,879 --> 00:02:58,160
and all lesson content, and of course, a

66
00:02:58,160 --> 00:03:00,640
completion button that lets users track

67
00:03:00,640 --> 00:03:03,280
their journey through your course.

68
00:03:03,280 --> 00:03:06,080
Progress tracking is critical and we've

69
00:03:06,080 --> 00:03:08,400
made it a breeze. And if you are

70
00:03:08,400 --> 00:03:10,560
wondering how we will make all of this

71
00:03:10,560 --> 00:03:12,959
possible, then let me break it down real

72
00:03:12,959 --> 00:03:15,840
quick. We are using NexJS15

73
00:03:15,840 --> 00:03:18,400
for smooth server rendered magic paired

74
00:03:18,400 --> 00:03:21,519
with taven CSS for a clean responsive UI

75
00:03:21,519 --> 00:03:24,560
and fully customized with shad and UI

76
00:03:24,560 --> 00:03:27,519
components. Authentication is powered by

77
00:03:27,519 --> 00:03:30,000
better off with both email OTP and

78
00:03:30,000 --> 00:03:32,400
GitHub ooth off support. Thanks to

79
00:03:32,400 --> 00:03:35,040
Arkjet, we are protected from the ground

80
00:03:35,040 --> 00:03:38,080
up. Payments are handled via Stripe with

81
00:03:38,080 --> 00:03:40,640
full checkout integration. And on the

82
00:03:40,640 --> 00:03:42,879
back end, we are using Prisma with a

83
00:03:42,879 --> 00:03:46,159
neon hosted Postgress database, modern,

84
00:03:46,159 --> 00:03:48,879
fast, and scalable. By the end of this

85
00:03:48,879 --> 00:03:51,920
tutorial, you won't just understand how

86
00:03:51,920 --> 00:03:54,720
to build an LMS. No, you will have built

87
00:03:54,720 --> 00:03:57,840
your own one ready for real users, real

88
00:03:57,840 --> 00:04:01,280
payments, and real impact. So, what do

89
00:04:01,280 --> 00:04:03,599
you think? Did you enjoy it? Are you

90
00:04:03,599 --> 00:04:06,319
excited to get started? I hope so. This

91
00:04:06,319 --> 00:04:08,640
is literally the biggest and most

92
00:04:08,640 --> 00:04:11,519
comprehensive video I have ever made. I

93
00:04:11,519 --> 00:04:14,640
rewrote the code seven times. Yes, seven

94
00:04:14,640 --> 00:04:17,040
times

95
00:04:17,040 --> 00:04:19,120
just to make sure that everything is

96
00:04:19,120 --> 00:04:21,759
clean, scalable, and secure. Throughout

97
00:04:21,759 --> 00:04:24,240
the video, I put a big focus on best

98
00:04:24,240 --> 00:04:27,040
practices and solid security measures so

99
00:04:27,040 --> 00:04:29,280
that you can build something rock solid

100
00:04:29,280 --> 00:04:31,120
which can make you millions of dollars

101
00:04:31,120 --> 00:04:33,520
per month without falling apart in the

102
00:04:33,520 --> 00:04:35,440
process. And here's the best thing.

103
00:04:35,440 --> 00:04:37,600
Everything that we will use in this

104
00:04:37,600 --> 00:04:41,520
video is 100% free and does not require

105
00:04:41,520 --> 00:04:44,000
any credit card. Now that you know what

106
00:04:44,000 --> 00:04:46,160
we are going to build and how we are

107
00:04:46,160 --> 00:04:48,240
going to build it, there are only three

108
00:04:48,240 --> 00:04:50,080
more things that you have to do before

109
00:04:50,080 --> 00:04:52,880
we can dive in. First of all, grab some

110
00:04:52,880 --> 00:04:55,280
water. Hydration is important. You want

111
00:04:55,280 --> 00:04:58,320
to drink a lot of water. Secondly, grab

112
00:04:58,320 --> 00:05:00,800
a keyboard and a mouse. You will write a

113
00:05:00,800 --> 00:05:03,199
lot of code. And lastly, please don't

114
00:05:03,199 --> 00:05:05,520
forget to like and subscribe. It takes

115
00:05:05,520 --> 00:05:07,919
only 1 second, but it would mean so much

116
00:05:07,919 --> 00:05:10,560
to me and my heart. So, please do it.

117
00:05:10,560 --> 00:05:12,960
Oh, and also, maybe you should consider

118
00:05:12,960 --> 00:05:15,360
becoming a channel member to get access

119
00:05:15,360 --> 00:05:17,520
to videos before they are released and

120
00:05:17,520 --> 00:05:20,479
to get access to more special videos.

121
00:05:20,479 --> 00:05:23,440
And finally, huge shout out to Ark Chat

122
00:05:23,440 --> 00:05:26,000
for making this huge video possible.

123
00:05:26,000 --> 00:05:28,160
Without them, none of this would have

124
00:05:28,160 --> 00:05:30,960
ever happened. So, thank you. And now

125
00:05:30,960 --> 00:05:33,520
it's time to get started. So let's roll

126
00:05:33,520 --> 00:05:35,759
the video which I recorded for you guys.

127
00:05:35,759 --> 00:05:38,960
Let's go. All right, friends. So let's

128
00:05:38,960 --> 00:05:42,080
get started. I'm already on the NexJS

129
00:05:42,080 --> 00:05:44,160
website. So let's head over to the

130
00:05:44,160 --> 00:05:46,800
documentation to installation. And right

131
00:05:46,800 --> 00:05:48,720
here they already provide us with an

132
00:05:48,720 --> 00:05:51,039
installation command to create a brand

133
00:05:51,039 --> 00:05:54,960
new Nex.js project. The only problem is

134
00:05:54,960 --> 00:05:58,240
it uses npm as a package manager and I

135
00:05:58,240 --> 00:06:00,560
don't want to use npm. The reason is

136
00:06:00,560 --> 00:06:02,800
quite simple. Later on, we will install

137
00:06:02,800 --> 00:06:05,759
dependencies and npm will throw version

138
00:06:05,759 --> 00:06:07,360
errors. It will say, "Hey, this

139
00:06:07,360 --> 00:06:09,520
dependency version is not compatible

140
00:06:09,520 --> 00:06:12,319
with React 19." Therefore, in this

141
00:06:12,319 --> 00:06:15,680
video, we will use PNPM. PNPM is a

142
00:06:15,680 --> 00:06:18,560
better alternative to npm, which is also

143
00:06:18,560 --> 00:06:20,960
faster and more efficient. And more

144
00:06:20,960 --> 00:06:22,720
importantly, once we install

145
00:06:22,720 --> 00:06:25,440
dependencies, it won't throw any version

146
00:06:25,440 --> 00:06:28,319
errors. You can still use npm. you will

147
00:06:28,319 --> 00:06:30,000
just have to force all of the

148
00:06:30,000 --> 00:06:33,280
installations. So, installing PNPM is

149
00:06:33,280 --> 00:06:35,360
quite simple. Just head over to the

150
00:06:35,360 --> 00:06:37,919
documentation to installation and here

151
00:06:37,919 --> 00:06:41,120
you will find all of the I guess ways on

152
00:06:41,120 --> 00:06:44,880
how to install PNPM. Either use npm or

153
00:06:44,880 --> 00:06:47,680
use homebrew. So, I think you have now

154
00:06:47,680 --> 00:06:50,479
installed PNPM. This means let's create

155
00:06:50,479 --> 00:06:53,600
a brand new project. So, in my terminal,

156
00:06:53,600 --> 00:06:56,160
I will cd into my YouTube directory. And

157
00:06:56,160 --> 00:06:58,639
then inside of here, let's run PNPM

158
00:06:58,639 --> 00:07:02,800
create next- app at latest. This will

159
00:07:02,800 --> 00:07:05,919
create a new Nex.js project. And using

160
00:07:05,919 --> 00:07:08,560
this at latest, we will also install the

161
00:07:08,560 --> 00:07:12,160
latest version of Next.js. This CLI will

162
00:07:12,160 --> 00:07:15,440
now ask us a few questions. So I want to

163
00:07:15,440 --> 00:07:18,240
name my project Marshall-Y

164
00:07:18,240 --> 00:07:21,039
or Marshall LMS-YouTube.

165
00:07:21,039 --> 00:07:23,440
Then I want to use TypeScript. I want to

166
00:07:23,440 --> 00:07:26,720
use ESLint. I want to use tent. I don't

167
00:07:26,720 --> 00:07:29,039
want to use the source directory. I will

168
00:07:29,039 --> 00:07:31,599
use the app router. I will use turbo

169
00:07:31,599 --> 00:07:34,240
pack. And I won't customize the default

170
00:07:34,240 --> 00:07:36,639
import alias. Now, here's one thing

171
00:07:36,639 --> 00:07:38,720
which I want to quickly mention and

172
00:07:38,720 --> 00:07:40,960
that's that you can still continue

173
00:07:40,960 --> 00:07:43,280
watching this tutorial. If you use

174
00:07:43,280 --> 00:07:45,919
JavaScript, it's fine. Nevertheless, my

175
00:07:45,919 --> 00:07:49,039
recommendation to you is to actually use

176
00:07:49,039 --> 00:07:52,000
TypeScript. It's a massive gamecher and

177
00:07:52,000 --> 00:07:54,319
it will help you a lot in your deaf

178
00:07:54,319 --> 00:07:56,639
workflow. So, it's great for developer

179
00:07:56,639 --> 00:07:59,680
experience. If you have zero experience

180
00:07:59,680 --> 00:08:02,240
with Typescript, then I will link a

181
00:08:02,240 --> 00:08:04,160
video on the top right or top left

182
00:08:04,160 --> 00:08:06,639
corner. Uh, I created a little primer

183
00:08:06,639 --> 00:08:08,400
and this will help you a lot to

184
00:08:08,400 --> 00:08:11,680
understand the basics of TypeScript. And

185
00:08:11,680 --> 00:08:14,560
also in this video, we will only use the

186
00:08:14,560 --> 00:08:17,520
basics. And as you see the CLI now

187
00:08:17,520 --> 00:08:19,759
created a brand new project. It

188
00:08:19,759 --> 00:08:22,240
installed a few dependencies which means

189
00:08:22,240 --> 00:08:25,199
we can open our project in our preferred

190
00:08:25,199 --> 00:08:28,000
editor. So as you see I already opened

191
00:08:28,000 --> 00:08:30,479
the project. If you want to do the same

192
00:08:30,479 --> 00:08:32,800
just go to the top click on file and

193
00:08:32,800 --> 00:08:35,200
then on open folder. And now on the

194
00:08:35,200 --> 00:08:37,360
right side you already see the project

195
00:08:37,360 --> 00:08:39,839
structure which was created when we

196
00:08:39,839 --> 00:08:42,080
created the project. Let's quickly

197
00:08:42,080 --> 00:08:45,120
analyze it. So we first of all have a TS

198
00:08:45,120 --> 00:08:47,519
config file. This is the configuration

199
00:08:47,519 --> 00:08:50,080
file for TypeScript. Then we have a

200
00:08:50,080 --> 00:08:52,399
readme file. If you want to, you can

201
00:08:52,399 --> 00:08:55,760
update it. We also have a post CSS file.

202
00:08:55,760 --> 00:08:58,480
This is for tin CSS. Then we have a

203
00:08:58,480 --> 00:09:01,200
package.json file. Inside of here, we

204
00:09:01,200 --> 00:09:04,000
list all of our dependencies. So as an

205
00:09:04,000 --> 00:09:07,120
example, we have React 19 installed and

206
00:09:07,120 --> 00:09:11,120
X.js 15.3 installed. It could be that

207
00:09:11,120 --> 00:09:13,279
once you watch this video that there's

208
00:09:13,279 --> 00:09:15,839
already a newer version of NexJS

209
00:09:15,839 --> 00:09:20,399
released. Let's say 15.5 or 15.6. It

210
00:09:20,399 --> 00:09:22,000
does not matter. This video is

211
00:09:22,000 --> 00:09:24,240
compatible with all of the NexJS

212
00:09:24,240 --> 00:09:26,080
versions. It does not matter what

213
00:09:26,080 --> 00:09:29,519
version of Nex.js you have installed.

214
00:09:29,519 --> 00:09:31,519
And then we also have a few dev

215
00:09:31,519 --> 00:09:33,760
dependencies. These are dependencies

216
00:09:33,760 --> 00:09:36,000
which only show up in your development

217
00:09:36,000 --> 00:09:38,160
environment. And once you publish your

218
00:09:38,160 --> 00:09:40,480
application or once you go production,

219
00:09:40,480 --> 00:09:42,880
these won't show up in your production

220
00:09:42,880 --> 00:09:45,519
bundle size. Then what else do we have

221
00:09:45,519 --> 00:09:48,080
right here? We have the next doconfig

222
00:09:48,080 --> 00:09:50,480
file inside of here. We will configure

223
00:09:50,480 --> 00:09:53,440
next.js. So as an example, we will use

224
00:09:53,440 --> 00:09:56,080
the image component later on which means

225
00:09:56,080 --> 00:09:58,399
we will also have to whitelist a few

226
00:09:58,399 --> 00:10:01,279
domains and we will do it right here.

227
00:10:01,279 --> 00:10:03,680
Then what else do we have? We have the

228
00:10:03,680 --> 00:10:06,480
eslint.config file. Later on we will

229
00:10:06,480 --> 00:10:09,200
update it a bit. Then we have our git

230
00:10:09,200 --> 00:10:12,399
ignore file. Please make sure that yourv

231
00:10:12,399 --> 00:10:14,560
file is added right here because you

232
00:10:14,560 --> 00:10:16,959
don't want to commit your secrets to

233
00:10:16,959 --> 00:10:19,279
your public GitHub repo. Even if it's

234
00:10:19,279 --> 00:10:21,839
private, please don't commit them. Then

235
00:10:21,839 --> 00:10:24,240
we also have a public folder and inside

236
00:10:24,240 --> 00:10:26,560
of here we will store all of our public

237
00:10:26,560 --> 00:10:29,360
assets. This means for example images,

238
00:10:29,360 --> 00:10:32,560
videos, fonts, stuff like that. Then we

239
00:10:32,560 --> 00:10:34,880
also have our app folder and this is

240
00:10:34,880 --> 00:10:37,440
literally the most important folder in

241
00:10:37,440 --> 00:10:39,519
this whole project directory because

242
00:10:39,519 --> 00:10:41,920
inside of here we will create our routes

243
00:10:41,920 --> 00:10:44,959
but also all of our logic and let's

244
00:10:44,959 --> 00:10:46,880
start from the top. We first of all have

245
00:10:46,880 --> 00:10:49,760
a faf icon. You can update it later on.

246
00:10:49,760 --> 00:10:53,040
We also have a globalscs file and inside

247
00:10:53,040 --> 00:10:56,079
of here we already configured t1 css.

248
00:10:56,079 --> 00:10:58,560
Then we have a layout file and a

249
00:10:58,560 --> 00:11:00,079
page.tsx.

250
00:11:00,079 --> 00:11:02,800
I expect you to know the absolute basics

251
00:11:02,800 --> 00:11:05,920
of Nex.js for this video. This means I

252
00:11:05,920 --> 00:11:07,360
think you should all know what a

253
00:11:07,360 --> 00:11:11,200
page.tsx is and what a layout.tsx is. In

254
00:11:11,200 --> 00:11:14,320
short, a page.tsx defines a route. A

255
00:11:14,320 --> 00:11:17,440
layout.tsx wraps your pages. This for

256
00:11:17,440 --> 00:11:19,839
example is the root layout which means

257
00:11:19,839 --> 00:11:22,240
all of our pages are rendered right here

258
00:11:22,240 --> 00:11:24,560
as children. Later on we will for

259
00:11:24,560 --> 00:11:26,959
example create a dashboard route. this

260
00:11:26,959 --> 00:11:29,200
dashboard route will be rendered as a

261
00:11:29,200 --> 00:11:31,360
child. This means if we render for

262
00:11:31,360 --> 00:11:34,480
example above our children a hello world

263
00:11:34,480 --> 00:11:36,959
then this hello world will be persisted

264
00:11:36,959 --> 00:11:39,680
on all routes which also means it won't

265
00:11:39,680 --> 00:11:42,079
be rerendered. And if we open our

266
00:11:42,079 --> 00:11:45,200
page.tsx you will also find a bit of

267
00:11:45,200 --> 00:11:48,399
demo code. So let's I guess see how it

268
00:11:48,399 --> 00:11:50,800
looks like. Let's start our dev server.

269
00:11:50,800 --> 00:11:52,720
So let's open our terminal. You can do

270
00:11:52,720 --> 00:11:55,040
that either with commandj. This is a

271
00:11:55,040 --> 00:11:57,519
shortcut or you can go to the top click

272
00:11:57,519 --> 00:12:00,079
on terminal and then new terminal and

273
00:12:00,079 --> 00:12:02,720
then in my terminal I will run pnpm

274
00:12:02,720 --> 00:12:05,279
rundef. This will start our def server

275
00:12:05,279 --> 00:12:08,720
on localhost 3000. Let's copy the URL

276
00:12:08,720 --> 00:12:11,200
and let's open it in a new tab in

277
00:12:11,200 --> 00:12:13,680
chrome. And voila, this is our index

278
00:12:13,680 --> 00:12:16,639
page. This is our I guess demo route

279
00:12:16,639 --> 00:12:20,000
which NexJS created. Yeah, it looks

280
00:12:20,000 --> 00:12:21,839
quite nice. But this is of course not

281
00:12:21,839 --> 00:12:24,240
what we want to render. So let's again

282
00:12:24,240 --> 00:12:27,680
go back and let's update our page.tsx.

283
00:12:27,680 --> 00:12:29,519
Let's go to the return statement and

284
00:12:29,519 --> 00:12:31,519
let's delete everything in the return

285
00:12:31,519 --> 00:12:34,560
statement. Let's create a diff an h1 and

286
00:12:34,560 --> 00:12:37,040
inside of here let's say hello world. If

287
00:12:37,040 --> 00:12:39,519
I again go back you will see on the top

288
00:12:39,519 --> 00:12:41,839
left corner hello world. And then let's

289
00:12:41,839 --> 00:12:44,480
also test out our layout. So if I go to

290
00:12:44,480 --> 00:12:47,279
my layout and if I render for example,

291
00:12:47,279 --> 00:12:50,079
hey this is the nav bar above our

292
00:12:50,079 --> 00:12:52,079
children, then you will also see it on

293
00:12:52,079 --> 00:12:54,240
the top. This means our layout works.

294
00:12:54,240 --> 00:12:57,920
Our H1 works. Let's also see if t1 CSS

295
00:12:57,920 --> 00:13:00,959
works. So let's style our H1. Let's say

296
00:13:00,959 --> 00:13:05,600
text to XL font bold text red 500. Let's

297
00:13:05,600 --> 00:13:07,920
save it. Let's go back. And yes, as you

298
00:13:07,920 --> 00:13:12,000
see, tin CSS works exactly as expected.

299
00:13:12,000 --> 00:13:14,639
And I guess we can get started with our

300
00:13:14,639 --> 00:13:17,120
application. So what's the first thing

301
00:13:17,120 --> 00:13:19,360
that I want to start with? Well, I want

302
00:13:19,360 --> 00:13:22,160
to start with our login page, with our

303
00:13:22,160 --> 00:13:24,880
authentication page. So let's again go

304
00:13:24,880 --> 00:13:27,200
back to our codebase. Let's first of all

305
00:13:27,200 --> 00:13:29,760
delete this H1 from our layout. We don't

306
00:13:29,760 --> 00:13:31,600
need it anymore. And let's create our

307
00:13:31,600 --> 00:13:34,480
authentication page. So let's go into

308
00:13:34,480 --> 00:13:36,480
our app folder. Let's create a new

309
00:13:36,480 --> 00:13:38,720
folder. And inside of here, I want to

310
00:13:38,720 --> 00:13:41,600
create a route group. Therefore, let's

311
00:13:41,600 --> 00:13:43,440
use parentheses and then in the

312
00:13:43,440 --> 00:13:46,480
parentheses, let's say off. And now we

313
00:13:46,480 --> 00:13:49,279
have a route group. But what even is a

314
00:13:49,279 --> 00:13:51,839
route group? Good question. Let's head

315
00:13:51,839 --> 00:13:53,920
over to the documentation. So, if you

316
00:13:53,920 --> 00:13:56,000
search for route groups, then you'll see

317
00:13:56,000 --> 00:13:58,000
that route groups are a folder

318
00:13:58,000 --> 00:14:00,240
convention that let you organize routes

319
00:14:00,240 --> 00:14:03,360
by category or team. This means these

320
00:14:03,360 --> 00:14:06,399
folders won't be mapped to the URL. So

321
00:14:06,399 --> 00:14:08,560
this convention indicates the folder is

322
00:14:08,560 --> 00:14:11,600
for organizational purposes and should

323
00:14:11,600 --> 00:14:14,800
not be included in the routes URL path.

324
00:14:14,800 --> 00:14:17,600
So we will only use it to organize our

325
00:14:17,600 --> 00:14:20,160
project directory but it won't be linked

326
00:14:20,160 --> 00:14:23,040
to our URL. So let's again go back and

327
00:14:23,040 --> 00:14:25,760
then in our off route group we want to

328
00:14:25,760 --> 00:14:28,160
create our lockin route the actual

329
00:14:28,160 --> 00:14:30,480
route. So let's create another child

330
00:14:30,480 --> 00:14:32,959
folder. This will be our login folder or

331
00:14:32,959 --> 00:14:35,440
our lockin route. And then in the lockin

332
00:14:35,440 --> 00:14:38,800
folder, we want to create a page.tsx to

333
00:14:38,800 --> 00:14:40,959
actually create our route. Because

334
00:14:40,959 --> 00:14:42,959
again, how do you create a route in

335
00:14:42,959 --> 00:14:45,920
nextJS? Well, you create a folder with a

336
00:14:45,920 --> 00:14:48,639
name and then you create a page.tsx. In

337
00:14:48,639 --> 00:14:51,279
this folder, this defines a route in

338
00:14:51,279 --> 00:14:54,320
next.js. And then in the page.tsx, we

339
00:14:54,320 --> 00:14:56,560
want to create an export default

340
00:14:56,560 --> 00:14:59,360
function. Let's call it lock in page.

341
00:14:59,360 --> 00:15:01,360
Let's invoke it. And then we can open

342
00:15:01,360 --> 00:15:03,519
it. Inside of here, I will create an

343
00:15:03,519 --> 00:15:05,360
return statement. And then I want to

344
00:15:05,360 --> 00:15:08,240
return a div h1. And I will say hello

345
00:15:08,240 --> 00:15:11,360
from the login page.

346
00:15:11,360 --> 00:15:13,760
If I save this and again go back, then

347
00:15:13,760 --> 00:15:15,680
you'll see that I don't see the login

348
00:15:15,680 --> 00:15:17,920
page right here. That's because we have

349
00:15:17,920 --> 00:15:20,720
to navigate to this new page. So let's

350
00:15:20,720 --> 00:15:23,120
go to the URL and let's navigate to

351
00:15:23,120 --> 00:15:26,000
/lockin. If I click on enter, you will

352
00:15:26,000 --> 00:15:28,079
see right here, hello from the login

353
00:15:28,079 --> 00:15:31,279
page. Nice. But now let's also style it.

354
00:15:31,279 --> 00:15:33,440
And inside of here, I want to render a

355
00:15:33,440 --> 00:15:35,120
card. Now, here's the thing. In this

356
00:15:35,120 --> 00:15:36,959
video, we will reuse a lot of

357
00:15:36,959 --> 00:15:40,160
components. We will use buttons, inputs,

358
00:15:40,160 --> 00:15:42,800
labels, uh, for example, cards, and

359
00:15:42,800 --> 00:15:45,040
stuff like that. These components should

360
00:15:45,040 --> 00:15:47,600
all be styled pretty much the same way.

361
00:15:47,600 --> 00:15:49,519
They should be accessible. They should

362
00:15:49,519 --> 00:15:52,000
look nice and stuff like that. You could

363
00:15:52,000 --> 00:15:54,079
create components yourself. Create them

364
00:15:54,079 --> 00:15:56,639
from the base. I guess create all of the

365
00:15:56,639 --> 00:16:00,000
HTML, style them with tin CSS and stuff

366
00:16:00,000 --> 00:16:02,160
like that. But this would be quite hard

367
00:16:02,160 --> 00:16:03,839
because you want to also make them

368
00:16:03,839 --> 00:16:06,320
accessible. It would take a lot of time

369
00:16:06,320 --> 00:16:08,480
and it's also something which I wouldn't

370
00:16:08,480 --> 00:16:11,120
recommend. Therefore, in this video, we

371
00:16:11,120 --> 00:16:15,199
will use shad and UI. Shatn UI is a

372
00:16:15,199 --> 00:16:18,079
component library which is styled and

373
00:16:18,079 --> 00:16:20,240
accessible. And the nice thing is it's

374
00:16:20,240 --> 00:16:23,279
also very very easy to customize. Also,

375
00:16:23,279 --> 00:16:25,680
they are not really a component library.

376
00:16:25,680 --> 00:16:27,519
rather they just provide the building

377
00:16:27,519 --> 00:16:30,000
blocks to create your own component

378
00:16:30,000 --> 00:16:32,560
library. So if you didn't know, Shatzi

379
00:16:32,560 --> 00:16:35,519
and UI is built on top of radics UI.

380
00:16:35,519 --> 00:16:38,959
Radics UI is also a component library

381
00:16:38,959 --> 00:16:41,120
with the only difference that it's not

382
00:16:41,120 --> 00:16:43,360
styled. It provides the base layer

383
00:16:43,360 --> 00:16:46,320
primitives which are accessible. Shhat

384
00:16:46,320 --> 00:16:49,440
CN UI takes these primitives, styles

385
00:16:49,440 --> 00:16:51,920
them, and pretty much gives them to you

386
00:16:51,920 --> 00:16:54,880
for free. And therefore we will use shad

387
00:16:54,880 --> 00:16:57,279
C and UI. So let's head over to the

388
00:16:57,279 --> 00:16:59,120
documentation. You can also right here

389
00:16:59,120 --> 00:17:00,800
check out all of the components. The

390
00:17:00,800 --> 00:17:02,880
accordion component, the badge

391
00:17:02,880 --> 00:17:05,199
component, the card component. The card

392
00:17:05,199 --> 00:17:07,120
component is for example what we will

393
00:17:07,120 --> 00:17:09,600
use in a second to create our login

394
00:17:09,600 --> 00:17:12,319
form. But let's first of all install SH

395
00:17:12,319 --> 00:17:15,199
CN UI. So let's click on installation.

396
00:17:15,199 --> 00:17:17,600
We want to pick our framework. In this

397
00:17:17,600 --> 00:17:20,000
case, this is Nex.js. And then the first

398
00:17:20,000 --> 00:17:22,640
step is to run the innit command. So,

399
00:17:22,640 --> 00:17:25,120
let me copy this installation command.

400
00:17:25,120 --> 00:17:27,120
Let's go back. Let's open the terminal.

401
00:17:27,120 --> 00:17:29,120
And then inside of here, I will just

402
00:17:29,120 --> 00:17:31,600
paste it. And also, it's important that

403
00:17:31,600 --> 00:17:34,480
you copy the PNPM command. If you use

404
00:17:34,480 --> 00:17:37,760
npm, then please copy the npm command.

405
00:17:37,760 --> 00:17:39,840
And also, I forgot to mention it at the

406
00:17:39,840 --> 00:17:41,840
start, but bun is also a good

407
00:17:41,840 --> 00:17:45,039
alternative to npm. It's also faster,

408
00:17:45,039 --> 00:17:47,120
it's more efficient, and it also does

409
00:17:47,120 --> 00:17:49,280
not have these installation problems

410
00:17:49,280 --> 00:17:52,559
with React 19. And let's again go back.

411
00:17:52,559 --> 00:17:55,120
As you see the CLI will ask us a few

412
00:17:55,120 --> 00:17:58,080
questions. So what base color would we

413
00:17:58,080 --> 00:18:00,400
like to use or which base color? I would

414
00:18:00,400 --> 00:18:02,640
like to use the neutral color. It will

415
00:18:02,640 --> 00:18:04,960
now check our registry. It will then

416
00:18:04,960 --> 00:18:07,120
update the CSS variables. It will

417
00:18:07,120 --> 00:18:08,960
install all of the necessary

418
00:18:08,960 --> 00:18:11,760
dependencies. And then our project was

419
00:18:11,760 --> 00:18:14,559
successfully initialized. So let's see

420
00:18:14,559 --> 00:18:18,240
what chat CNN UI created. So we first of

421
00:18:18,240 --> 00:18:20,080
all have a components file or

422
00:18:20,080 --> 00:18:22,640
components.json file. This is pretty

423
00:18:22,640 --> 00:18:25,600
much the configuration file for chats

424
00:18:25,600 --> 00:18:28,320
and ui. So as you see we use react

425
00:18:28,320 --> 00:18:31,120
server components typescript. Then we

426
00:18:31,120 --> 00:18:34,000
have the path to our CSS file and stuff

427
00:18:34,000 --> 00:18:36,320
like that. If you want to you can also

428
00:18:36,320 --> 00:18:38,640
update the configuration right in this

429
00:18:38,640 --> 00:18:41,120
file. Then we also installed a few

430
00:18:41,120 --> 00:18:43,679
dependencies. So for example, class

431
00:18:43,679 --> 00:18:47,520
variance authority clsx lucid react and

432
00:18:47,520 --> 00:18:50,400
lucid react for example is an icon

433
00:18:50,400 --> 00:18:52,640
library. So let's copy the URL. Let's

434
00:18:52,640 --> 00:18:55,039
open it in a new tab. This is the icon

435
00:18:55,039 --> 00:18:57,120
library. So as you see these are all of

436
00:18:57,120 --> 00:18:59,120
the icons. They look nice. They are

437
00:18:59,120 --> 00:19:01,200
consistent and that's probably also the

438
00:19:01,200 --> 00:19:05,039
reason why CN chose this icon library as

439
00:19:05,039 --> 00:19:07,760
a default. I for example also use this

440
00:19:07,760 --> 00:19:10,640
icon library on my website and it looks

441
00:19:10,640 --> 00:19:13,360
nice. So let's again go back then. What

442
00:19:13,360 --> 00:19:15,280
else has been added? Well, we also have

443
00:19:15,280 --> 00:19:18,240
a new lip folder with an utils file. And

444
00:19:18,240 --> 00:19:20,880
this is just our CN helper which we can

445
00:19:20,880 --> 00:19:23,440
then later on use to create dynamic

446
00:19:23,440 --> 00:19:26,400
styles. Let's also already install a few

447
00:19:26,400 --> 00:19:28,480
components. So let's again go back to

448
00:19:28,480 --> 00:19:31,600
shad CN UI and let's install the button

449
00:19:31,600 --> 00:19:34,160
component. So let's again use pnpm.

450
00:19:34,160 --> 00:19:36,559
Let's copy the um installation command

451
00:19:36,559 --> 00:19:38,960
and then let's paste it in our terminal.

452
00:19:38,960 --> 00:19:41,280
As you see, it created the component.

453
00:19:41,280 --> 00:19:43,840
And if we open our explorer, then you

454
00:19:43,840 --> 00:19:46,160
will find a new components folder. In

455
00:19:46,160 --> 00:19:48,160
the components folder, we now store all

456
00:19:48,160 --> 00:19:51,200
of the shad C and UI components which we

457
00:19:51,200 --> 00:19:53,760
install. So this is a huge difference to

458
00:19:53,760 --> 00:19:55,919
standard component libraries. For

459
00:19:55,919 --> 00:19:58,799
example, if you use MUI, all of the code

460
00:19:58,799 --> 00:20:01,280
will be abstracted in the note modules

461
00:20:01,280 --> 00:20:04,240
folder, but chat and UI literally gives

462
00:20:04,240 --> 00:20:07,200
you the code for you to use and update.

463
00:20:07,200 --> 00:20:09,600
So this is our button component. As you

464
00:20:09,600 --> 00:20:12,480
see, we use this uh radics UI primitive

465
00:20:12,480 --> 00:20:14,960
to make everything accessible and then

466
00:20:14,960 --> 00:20:18,000
chart C and UI styles everything using

467
00:20:18,000 --> 00:20:21,440
tin CSS. And I want to install a few

468
00:20:21,440 --> 00:20:24,000
components. So I want to use the card. I

469
00:20:24,000 --> 00:20:25,760
want to use the input component, the

470
00:20:25,760 --> 00:20:27,679
label component, and to not do

471
00:20:27,679 --> 00:20:29,679
everything manually. Please head over to

472
00:20:29,679 --> 00:20:31,600
my YouTube description and there you

473
00:20:31,600 --> 00:20:33,760
will find an installation command to

474
00:20:33,760 --> 00:20:35,760
literally install all of the components

475
00:20:35,760 --> 00:20:38,400
which we will need in this video. So I

476
00:20:38,400 --> 00:20:40,559
will just copy it from my notion file.

477
00:20:40,559 --> 00:20:42,400
Let's again go back. I will open my

478
00:20:42,400 --> 00:20:44,400
terminal and then I will paste it inside

479
00:20:44,400 --> 00:20:46,480
of here. So as you see these are all of

480
00:20:46,480 --> 00:20:48,480
our components like for example the

481
00:20:48,480 --> 00:20:50,720
alert dialogue component, the form

482
00:20:50,720 --> 00:20:53,600
component, the dialogue component, sona

483
00:20:53,600 --> 00:20:56,240
which is our toast library, the text

484
00:20:56,240 --> 00:20:58,559
area component. You can go through all

485
00:20:58,559 --> 00:21:00,480
of these components individually. Just

486
00:21:00,480 --> 00:21:03,360
copy the name, go to shhats and UI and

487
00:21:03,360 --> 00:21:06,640
for example type in sona. Again sona is

488
00:21:06,640 --> 00:21:09,679
for example our toast library. So if we

489
00:21:09,679 --> 00:21:12,000
click on show toast, this will be the

490
00:21:12,000 --> 00:21:14,080
library or this will be the toast which

491
00:21:14,080 --> 00:21:16,480
will be created. So let's click on

492
00:21:16,480 --> 00:21:18,640
enter. This will install all of these

493
00:21:18,640 --> 00:21:20,799
components as you see right here. And

494
00:21:20,799 --> 00:21:23,039
this means if I again open my components

495
00:21:23,039 --> 00:21:24,880
folder, you will find all of the

496
00:21:24,880 --> 00:21:26,559
components right here. So let's again

497
00:21:26,559 --> 00:21:28,480
close this. Let's close this. And then

498
00:21:28,480 --> 00:21:31,760
in our page.tsx, we can start by styling

499
00:21:31,760 --> 00:21:35,039
or by creating our UI for the login

500
00:21:35,039 --> 00:21:37,360
page. So let's delete everything in the

501
00:21:37,360 --> 00:21:39,280
return statement. And let's start with

502
00:21:39,280 --> 00:21:41,600
the cart component. The cart component

503
00:21:41,600 --> 00:21:43,919
is imported from the components folder.

504
00:21:43,919 --> 00:21:45,760
Then in the cart, I want to render my

505
00:21:45,760 --> 00:21:47,840
cart header component. In the cart

506
00:21:47,840 --> 00:21:49,840
header, I want to render the card title

507
00:21:49,840 --> 00:21:52,240
component. And then for the car title,

508
00:21:52,240 --> 00:21:55,039
let's just say welcome back exclamation

509
00:21:55,039 --> 00:21:57,600
mark. Let's also give the car title a

510
00:21:57,600 --> 00:22:00,559
class name and this will be text XL.

511
00:22:00,559 --> 00:22:02,799
Underneath the car title, I will render

512
00:22:02,799 --> 00:22:04,880
the car description. And inside of here,

513
00:22:04,880 --> 00:22:08,159
I will say log in with your GitHub or

514
00:22:08,159 --> 00:22:11,720
email account.

515
00:22:11,919 --> 00:22:14,080
If I again go back and do a hard

516
00:22:14,080 --> 00:22:16,799
refresh, I will see my card right here.

517
00:22:16,799 --> 00:22:19,679
Okay. Yeah, it's too big. And I guess it

518
00:22:19,679 --> 00:22:22,000
does not look very nice right now. So,

519
00:22:22,000 --> 00:22:24,000
we want to make the width a bit smaller.

520
00:22:24,000 --> 00:22:25,679
It should also be centered and stuff

521
00:22:25,679 --> 00:22:27,840
like that. Therefore, let's again go

522
00:22:27,840 --> 00:22:30,240
back and instead of applying the styles

523
00:22:30,240 --> 00:22:32,799
right here to our cart, we will instead

524
00:22:32,799 --> 00:22:35,440
create a layout file which will wrap all

525
00:22:35,440 --> 00:22:38,400
of the children in our off uh right here

526
00:22:38,400 --> 00:22:41,600
in our off route group. So in the off

527
00:22:41,600 --> 00:22:45,039
folder, let's create a layout.tsx file.

528
00:22:45,039 --> 00:22:46,799
And please make sure that you create a

529
00:22:46,799 --> 00:22:49,440
file in the off route group and not in

530
00:22:49,440 --> 00:22:51,919
the lockin folder because later on we

531
00:22:51,919 --> 00:22:54,559
will also create a verify request route

532
00:22:54,559 --> 00:22:57,600
in the off uh route group. And I want to

533
00:22:57,600 --> 00:23:00,000
also share the layout with this route.

534
00:23:00,000 --> 00:23:02,000
In the layout file, let's create an

535
00:23:02,000 --> 00:23:05,120
export default function. Let's call it

536
00:23:05,120 --> 00:23:07,440
off layout. Let's invoke it. And then

537
00:23:07,440 --> 00:23:09,600
let's open it. Inside of here, I will

538
00:23:09,600 --> 00:23:11,679
create a return statement. I will return

539
00:23:11,679 --> 00:23:13,760
a div. And then in the div I want to

540
00:23:13,760 --> 00:23:16,240
return my children. As you see right

541
00:23:16,240 --> 00:23:18,480
here, I get an error and it says cannot

542
00:23:18,480 --> 00:23:21,280
find name children. So we will get our

543
00:23:21,280 --> 00:23:23,360
children through the params. So let's

544
00:23:23,360 --> 00:23:25,440
destructure the params. Let's get our

545
00:23:25,440 --> 00:23:28,080
children. As you see, I get an error and

546
00:23:28,080 --> 00:23:30,240
it says binding element children

547
00:23:30,240 --> 00:23:33,520
implicitly has an any type and I already

548
00:23:33,520 --> 00:23:35,360
know what the type of children is and

549
00:23:35,360 --> 00:23:38,000
the type is react node. So let's give

550
00:23:38,000 --> 00:23:40,640
our children the type of React note

551
00:23:40,640 --> 00:23:43,280
which is imported from React. As you see

552
00:23:43,280 --> 00:23:45,760
the error is now gone which means if I

553
00:23:45,760 --> 00:23:48,240
again go back and do a hard refresh

554
00:23:48,240 --> 00:23:51,280
everything still works as expected. If I

555
00:23:51,280 --> 00:23:53,840
for example render an H1 above our

556
00:23:53,840 --> 00:23:57,600
children and say hey this is the nav or

557
00:23:57,600 --> 00:24:00,960
the off layout nav and again go back

558
00:24:00,960 --> 00:24:03,600
then you will see it above our cart. So

559
00:24:03,600 --> 00:24:06,240
this is how our layout works. And then I

560
00:24:06,240 --> 00:24:08,880
want to give my div a class name. Let's

561
00:24:08,880 --> 00:24:11,440
say this will be flex width of full,

562
00:24:11,440 --> 00:24:14,960
maximum width of SM, flex of call, and

563
00:24:14,960 --> 00:24:17,679
then gap of six. If I save this and

564
00:24:17,679 --> 00:24:20,159
again go back, you will see that the our

565
00:24:20,159 --> 00:24:22,480
cut now takes a smaller width. And this

566
00:24:22,480 --> 00:24:25,039
already looks way better. Nevertheless,

567
00:24:25,039 --> 00:24:27,039
it's not centered. And that's not quite

568
00:24:27,039 --> 00:24:29,840
what I want. So to fix it, let's wrap

569
00:24:29,840 --> 00:24:32,320
this div in another div. So let's create

570
00:24:32,320 --> 00:24:34,480
a div. Let's wrap this div in this div

571
00:24:34,480 --> 00:24:36,799
which we just created. And let's also

572
00:24:36,799 --> 00:24:39,120
give it a class name. This will be a

573
00:24:39,120 --> 00:24:42,000
position of relative. Let's say flex

574
00:24:42,000 --> 00:24:46,240
minimum height of svh. svh is pretty

575
00:24:46,240 --> 00:24:48,400
similar to viewport height. Then let's

576
00:24:48,400 --> 00:24:51,279
say flex of column and then items center

577
00:24:51,279 --> 00:24:53,440
and just the five center. This means we

578
00:24:53,440 --> 00:24:55,120
pretty much take the whole width and the

579
00:24:55,120 --> 00:24:56,880
whole height and then we center

580
00:24:56,880 --> 00:24:58,799
everything in the middle. Which means

581
00:24:58,799 --> 00:25:00,960
our card should now also be in the

582
00:25:00,960 --> 00:25:03,039
center. And that's exactly what

583
00:25:03,039 --> 00:25:05,520
happened. So let's again go back to our

584
00:25:05,520 --> 00:25:08,799
page.tsx and let's continue styling our

585
00:25:08,799 --> 00:25:11,279
lockin form. So underneath our cart

586
00:25:11,279 --> 00:25:13,840
header, we can render our cart content

587
00:25:13,840 --> 00:25:16,000
which is imported from the components.

588
00:25:16,000 --> 00:25:18,000
And then in the cart content, I want to

589
00:25:18,000 --> 00:25:20,480
render a button component. This is

590
00:25:20,480 --> 00:25:22,559
imported from the components. And inside

591
00:25:22,559 --> 00:25:26,320
of here, I will for now say signin with

592
00:25:26,320 --> 00:25:29,200
GitHub. If I save this and again go back

593
00:25:29,200 --> 00:25:30,799
then you will find the button right

594
00:25:30,799 --> 00:25:32,720
here. But let's be honest, it does not

595
00:25:32,720 --> 00:25:35,120
look very nice. Therefore, let's again

596
00:25:35,120 --> 00:25:37,279
go back and let's update the button a

597
00:25:37,279 --> 00:25:39,919
bit. So I want to also render the GitHub

598
00:25:39,919 --> 00:25:42,400
icon. So in the button, but I guess

599
00:25:42,400 --> 00:25:45,039
before the text, let's get our GitHub

600
00:25:45,039 --> 00:25:47,360
icon from Lucid React. This is

601
00:25:47,360 --> 00:25:49,440
self-closing. And let's also give it a

602
00:25:49,440 --> 00:25:52,000
class name which will be size four. This

603
00:25:52,000 --> 00:25:54,159
means width four and height four. This

604
00:25:54,159 --> 00:25:56,720
is pretty much just the short form. You

605
00:25:56,720 --> 00:25:59,520
could also say width four, height four.

606
00:25:59,520 --> 00:26:01,679
You just have to write more code. So

607
00:26:01,679 --> 00:26:04,400
let's again say size four. And then

608
00:26:04,400 --> 00:26:06,960
let's save it. And let's go back. And as

609
00:26:06,960 --> 00:26:09,360
you see, yes, this looks quite nice.

610
00:26:09,360 --> 00:26:11,600
Let's also give it the full width. So

611
00:26:11,600 --> 00:26:14,080
let's give our button a class name. And

612
00:26:14,080 --> 00:26:16,240
this will be width full. Let's give our

613
00:26:16,240 --> 00:26:18,799
button also a variant. This will be

614
00:26:18,799 --> 00:26:20,720
outline. And I think this should already

615
00:26:20,720 --> 00:26:22,960
look way better. And yes, it now takes

616
00:26:22,960 --> 00:26:25,039
the whole width. And we also have a

617
00:26:25,039 --> 00:26:27,120
different variant. One thing which

618
00:26:27,120 --> 00:26:29,600
currently annoys me quite a bit is white

619
00:26:29,600 --> 00:26:31,679
mode which means I want to implement

620
00:26:31,679 --> 00:26:34,159
dark mode. So let's head over back to

621
00:26:34,159 --> 00:26:36,400
shhatsy and UI let's go to the

622
00:26:36,400 --> 00:26:39,039
documentation and then in the navbar or

623
00:26:39,039 --> 00:26:40,880
I'm sorry in the sidebar on the left

624
00:26:40,880 --> 00:26:43,200
side you will find the dark mode

625
00:26:43,200 --> 00:26:45,679
section. So right here we can add dark

626
00:26:45,679 --> 00:26:49,039
mode as a framework we use next.js. So

627
00:26:49,039 --> 00:26:51,360
let's select this and then we want to

628
00:26:51,360 --> 00:26:54,640
first of all install next- themes. So

629
00:26:54,640 --> 00:26:56,720
let's copy the installation command and

630
00:26:56,720 --> 00:26:59,279
then I will paste it in my terminal. So

631
00:26:59,279 --> 00:27:02,240
next- themes will allow us to store the

632
00:27:02,240 --> 00:27:04,640
theme I guess preference in local

633
00:27:04,640 --> 00:27:06,960
storage. This means once the user does a

634
00:27:06,960 --> 00:27:08,880
hard refresh, we will keep the

635
00:27:08,880 --> 00:27:11,760
preference I guess saved. So if the user

636
00:27:11,760 --> 00:27:14,159
for example selected dark mode and if

637
00:27:14,159 --> 00:27:16,640
the user then does a hard refresh, dark

638
00:27:16,640 --> 00:27:18,799
mode will stay persisted. You can also

639
00:27:18,799 --> 00:27:21,600
see it in the charts and UI website. If

640
00:27:21,600 --> 00:27:23,600
I select light mode and do a hard

641
00:27:23,600 --> 00:27:26,559
refresh, the theme is kept persisted. So

642
00:27:26,559 --> 00:27:28,400
the next step is to create a theme

643
00:27:28,400 --> 00:27:30,720
provider. So let's copy the name theme

644
00:27:30,720 --> 00:27:33,279
provider.tsx. This will be the name of

645
00:27:33,279 --> 00:27:35,919
the component itself. Let's again go

646
00:27:35,919 --> 00:27:38,240
back. Let's open the explorer. Then I

647
00:27:38,240 --> 00:27:40,320
want to go to my components to the UI

648
00:27:40,320 --> 00:27:42,080
folder and let's create the theme

649
00:27:42,080 --> 00:27:44,880
provider.tsx file. Then I want to copy

650
00:27:44,880 --> 00:27:47,120
the code and then I will paste it into

651
00:27:47,120 --> 00:27:49,440
the theme provider file. And as you see

652
00:27:49,440 --> 00:27:51,600
this component is also marked as use

653
00:27:51,600 --> 00:27:53,919
client which means this component is a

654
00:27:53,919 --> 00:27:56,080
client component. What does this mean?

655
00:27:56,080 --> 00:27:57,600
Well, this means that this component

656
00:27:57,600 --> 00:28:00,080
will get a JavaScript bundle shipped to

657
00:28:00,080 --> 00:28:02,399
it because this component needs the

658
00:28:02,399 --> 00:28:05,279
client site to work as expected. So

659
00:28:05,279 --> 00:28:07,279
let's again close the theme provider and

660
00:28:07,279 --> 00:28:09,520
we want to wrap our children with this

661
00:28:09,520 --> 00:28:11,840
theme provider. So let's copy the theme

662
00:28:11,840 --> 00:28:14,080
provider. Let's go back and then I will

663
00:28:14,080 --> 00:28:15,919
wrap the children in this theme

664
00:28:15,919 --> 00:28:17,600
provider. Please make sure that you

665
00:28:17,600 --> 00:28:19,600
import the theme provider from your

666
00:28:19,600 --> 00:28:22,480
components not from next- themes. If you

667
00:28:22,480 --> 00:28:24,480
import it from next- themes, you will

668
00:28:24,480 --> 00:28:27,039
get errors because it will say hey this

669
00:28:27,039 --> 00:28:29,760
component does not work or I guess this

670
00:28:29,760 --> 00:28:31,520
package does not work in a server

671
00:28:31,520 --> 00:28:33,520
component and that's also the reason why

672
00:28:33,520 --> 00:28:35,679
we created this separate component.

673
00:28:35,679 --> 00:28:38,240
Next- themes needs a JavaScript bundle

674
00:28:38,240 --> 00:28:39,919
and therefore you have to mark the

675
00:28:39,919 --> 00:28:42,720
component as use client. Let's also mark

676
00:28:42,720 --> 00:28:45,760
or give this HTML tag a property which

677
00:28:45,760 --> 00:28:48,320
will be suppress hydration warning. And

678
00:28:48,320 --> 00:28:50,399
I guess this should already be it. So

679
00:28:50,399 --> 00:28:52,240
let's again go back. What's the next

680
00:28:52,240 --> 00:28:54,640
step? Well, the next step is to create a

681
00:28:54,640 --> 00:28:56,799
theme toggle or in other words a mode

682
00:28:56,799 --> 00:28:59,440
toggle. So let's click or let's test it

683
00:28:59,440 --> 00:29:01,520
out. So this is what we will create. If

684
00:29:01,520 --> 00:29:04,080
the user clicks on this theme toggle, he

685
00:29:04,080 --> 00:29:06,399
will get three options. Light theme,

686
00:29:06,399 --> 00:29:08,480
dark theme or system theme. And if the

687
00:29:08,480 --> 00:29:10,799
user does a selection, the theme will

688
00:29:10,799 --> 00:29:13,360
automatically update. So let's go to the

689
00:29:13,360 --> 00:29:15,840
code. Let's copy the code example. Let's

690
00:29:15,840 --> 00:29:18,080
open our explorer. And then in the

691
00:29:18,080 --> 00:29:20,720
components folder in the UI folder, I

692
00:29:20,720 --> 00:29:23,760
will create a new theme toggle.tsx

693
00:29:23,760 --> 00:29:26,000
file. Let's again paste the code inside

694
00:29:26,000 --> 00:29:28,880
of here. And as you see, it looks nice.

695
00:29:28,880 --> 00:29:31,200
Let's also update the function name. So

696
00:29:31,200 --> 00:29:33,679
instead of mode toggle, I will call it

697
00:29:33,679 --> 00:29:36,640
theme toggle. So let's open our index

698
00:29:36,640 --> 00:29:39,279
page. And then underneath the H1 I will

699
00:29:39,279 --> 00:29:42,240
render my theme toggle component which I

700
00:29:42,240 --> 00:29:44,559
will import from my components folder.

701
00:29:44,559 --> 00:29:46,559
This is self-closing. Let's again go

702
00:29:46,559 --> 00:29:49,360
back and if I go to the index page we

703
00:29:49,360 --> 00:29:51,279
will get an error. So let's again

704
00:29:51,279 --> 00:29:53,760
restart our dev server and then I will

705
00:29:53,760 --> 00:29:56,320
again do a hard refresh. And as you see

706
00:29:56,320 --> 00:29:58,559
right here on the left side I get my

707
00:29:58,559 --> 00:30:01,440
theme toggle. If I select light theme I

708
00:30:01,440 --> 00:30:03,840
get light theme. If I select dark theme

709
00:30:03,840 --> 00:30:05,919
I get my dark theme. And then let's

710
00:30:05,919 --> 00:30:08,080
continue with our lockin route or in

711
00:30:08,080 --> 00:30:10,720
other words with our lockin form. So

712
00:30:10,720 --> 00:30:12,640
underneath my button I want to render

713
00:30:12,640 --> 00:30:14,880
like a little separator line. It will be

714
00:30:14,880 --> 00:30:16,960
a separator line and then over the

715
00:30:16,960 --> 00:30:19,440
separator line we will say or continue

716
00:30:19,440 --> 00:30:21,679
with and then underneath the separator

717
00:30:21,679 --> 00:30:24,640
line we will render our email input. So

718
00:30:24,640 --> 00:30:27,120
the user can either log in using GitHub

719
00:30:27,120 --> 00:30:30,159
this means of off or using email. So

720
00:30:30,159 --> 00:30:32,159
underneath the button let's render a div

721
00:30:32,159 --> 00:30:34,320
element. Then I want to create a span

722
00:30:34,320 --> 00:30:36,480
element. And inside of here I will say

723
00:30:36,480 --> 00:30:39,279
or continue with. If I save this and

724
00:30:39,279 --> 00:30:41,279
again go back you will find this text

725
00:30:41,279 --> 00:30:43,440
right here. This does not look very nice

726
00:30:43,440 --> 00:30:46,159
right now. So let's style our div. Let's

727
00:30:46,159 --> 00:30:47,919
give it a class name. This will be

728
00:30:47,919 --> 00:30:53,279
relative text center text smol

729
00:30:53,279 --> 00:30:57,520
after colon insert zero after colon top

730
00:30:57,520 --> 00:31:00,240
1/2. Let's for now write the styles. I

731
00:31:00,240 --> 00:31:02,399
will explain them later on. Then let's

732
00:31:02,399 --> 00:31:06,880
also say after Z0 so the Z index. Then I

733
00:31:06,880 --> 00:31:08,960
want to also say after which will be

734
00:31:08,960 --> 00:31:11,279
flex. Then also after which will be

735
00:31:11,279 --> 00:31:14,399
items of center. Then also after which

736
00:31:14,399 --> 00:31:17,120
will be border top. And then also after

737
00:31:17,120 --> 00:31:19,440
which will be border border. This means

738
00:31:19,440 --> 00:31:22,320
the color of our border. If I save this

739
00:31:22,320 --> 00:31:24,399
and again go back you will find this

740
00:31:24,399 --> 00:31:26,399
separator line. And you know what it

741
00:31:26,399 --> 00:31:28,480
looks quite nice to be honest with you.

742
00:31:28,480 --> 00:31:30,960
So these after classes are there to

743
00:31:30,960 --> 00:31:33,120
create this line. That's also why we

744
00:31:33,120 --> 00:31:36,000
created so many. This is just I guess a

745
00:31:36,000 --> 00:31:37,919
little trick to create this line. And

746
00:31:37,919 --> 00:31:40,559
then to render the text over the line.

747
00:31:40,559 --> 00:31:42,960
Then let's again go back and let's also

748
00:31:42,960 --> 00:31:45,360
uh update our span. So let's give it a

749
00:31:45,360 --> 00:31:48,159
class name which will be relative Z 10.

750
00:31:48,159 --> 00:31:50,640
Let's also give it a bg color and this

751
00:31:50,640 --> 00:31:53,440
will be BG card. So background. And

752
00:31:53,440 --> 00:31:56,159
let's also say padding X of two. If I

753
00:31:56,159 --> 00:31:58,240
save this and again go back then you

754
00:31:58,240 --> 00:32:00,799
will see that this looks absolutely

755
00:32:00,799 --> 00:32:03,120
beautiful. So if I zoom in a bit you

756
00:32:03,120 --> 00:32:05,519
will see we have this separator line. So

757
00:32:05,519 --> 00:32:07,440
on the left side and then on the right

758
00:32:07,440 --> 00:32:09,600
side. And then we render the text pretty

759
00:32:09,600 --> 00:32:12,720
much over this separator line. It looks

760
00:32:12,720 --> 00:32:14,880
so nice to be honest with you. And let's

761
00:32:14,880 --> 00:32:17,279
maybe also darken the text a bit because

762
00:32:17,279 --> 00:32:19,360
it's currently too light. So let's again

763
00:32:19,360 --> 00:32:21,600
go back and let's give the text a color

764
00:32:21,600 --> 00:32:24,559
of muted foreground. If I save this and

765
00:32:24,559 --> 00:32:27,039
again go back you'll see yeah this looks

766
00:32:27,039 --> 00:32:29,600
beautiful and also as you see I use

767
00:32:29,600 --> 00:32:33,200
these classes muted foreground bgard

768
00:32:33,200 --> 00:32:35,279
border border these are not your

769
00:32:35,279 --> 00:32:38,399
standard tin CSS classes. So what is

770
00:32:38,399 --> 00:32:42,320
this? Well these are CSS labels. So if

771
00:32:42,320 --> 00:32:45,200
you open your globals CSS file you will

772
00:32:45,200 --> 00:32:48,320
see that shiy and UI configured this

773
00:32:48,320 --> 00:32:51,760
file. It created its own CSS labels and

774
00:32:51,760 --> 00:32:54,480
then it also added all of the colors for

775
00:32:54,480 --> 00:32:57,200
these CSS variables. So let me show you

776
00:32:57,200 --> 00:32:59,760
an example. So right here we have our

777
00:32:59,760 --> 00:33:03,279
popover foreground. This defines the CSS

778
00:33:03,279 --> 00:33:05,760
label but it does not define any color.

779
00:33:05,760 --> 00:33:08,320
The color itself is actually defined in

780
00:33:08,320 --> 00:33:11,120
the root object I guess. So if you

781
00:33:11,120 --> 00:33:13,519
search for our pop over foreground then

782
00:33:13,519 --> 00:33:15,360
you will see that we define the color

783
00:33:15,360 --> 00:33:17,519
using okch.

784
00:33:17,519 --> 00:33:21,840
So, OKLCH is the successor of HSL. It's

785
00:33:21,840 --> 00:33:25,120
a better alternative to HSL. It's better

786
00:33:25,120 --> 00:33:27,840
for colors and stuff like that. I also

787
00:33:27,840 --> 00:33:31,200
already made a video on OKLCH. So, if

788
00:33:31,200 --> 00:33:33,679
you go to YouTube and open my channel,

789
00:33:33,679 --> 00:33:36,080
then you will find this video right here

790
00:33:36,080 --> 00:33:38,399
which is called how to use Shhatzy and

791
00:33:38,399 --> 00:33:41,039
UI the right way. Inside of there I talk

792
00:33:41,039 --> 00:33:44,799
about oklcch how shad cy and UI works

793
00:33:44,799 --> 00:33:47,600
and how to customize your components the

794
00:33:47,600 --> 00:33:50,799
right way. And then in our lockin form I

795
00:33:50,799 --> 00:33:53,039
want to render my input or I want to

796
00:33:53,039 --> 00:33:55,600
render my email input. So underneath

797
00:33:55,600 --> 00:33:57,840
this div which we just created for our

798
00:33:57,840 --> 00:34:00,640
separator we can create another div. And

799
00:34:00,640 --> 00:34:02,960
let's give this div a class name which

800
00:34:02,960 --> 00:34:05,519
will be grid and then also gap 3. This

801
00:34:05,519 --> 00:34:08,000
will only create the spacing between our

802
00:34:08,000 --> 00:34:10,560
email input and then the submit button.

803
00:34:10,560 --> 00:34:12,399
But I will show it to you in a second.

804
00:34:12,399 --> 00:34:14,240
Don't worry. Then let's create another

805
00:34:14,240 --> 00:34:16,000
div inside of here. This will be the

806
00:34:16,000 --> 00:34:18,879
wrapper div for our label and our input.

807
00:34:18,879 --> 00:34:20,879
So let's give it a class name which will

808
00:34:20,879 --> 00:34:23,599
be grid and then also gap 2. In this

809
00:34:23,599 --> 00:34:25,919
div, let's render a label component.

810
00:34:25,919 --> 00:34:27,919
This is imported from the components

811
00:34:27,919 --> 00:34:29,679
folder. And here's the thing. Please

812
00:34:29,679 --> 00:34:32,399
listen to me. Please don't import your

813
00:34:32,399 --> 00:34:35,520
components from Radics UI. If you import

814
00:34:35,520 --> 00:34:38,079
your component from radics UI, you will

815
00:34:38,079 --> 00:34:41,040
get a lot of errors and also the UI or I

816
00:34:41,040 --> 00:34:43,200
guess the end result won't look as

817
00:34:43,200 --> 00:34:45,760
expected. So whenever I import

818
00:34:45,760 --> 00:34:48,240
components, I always import them from

819
00:34:48,240 --> 00:34:50,399
the components folder. Please do the

820
00:34:50,399 --> 00:34:52,240
same. And now let's import the label

821
00:34:52,240 --> 00:34:54,480
component from the components and I want

822
00:34:54,480 --> 00:34:56,639
to say email. And let's also give the

823
00:34:56,639 --> 00:34:59,839
label an HTML 4 property. And this will

824
00:34:59,839 --> 00:35:02,800
be equal to email. Underneath our label,

825
00:35:02,800 --> 00:35:04,720
I want to render the input component

826
00:35:04,720 --> 00:35:06,880
again imported from the components.

827
00:35:06,880 --> 00:35:09,280
Let's give this input a type which will

828
00:35:09,280 --> 00:35:11,920
be email and then also a placeholder.

829
00:35:11,920 --> 00:35:14,160
And for the placeholder, I will just say

830
00:35:14,160 --> 00:35:16,880
macample.com.

831
00:35:16,880 --> 00:35:19,200
If I save this and again go back, you

832
00:35:19,200 --> 00:35:21,280
will see this input right here which

833
00:35:21,280 --> 00:35:24,640
looks absolutely beautiful. Let's also

834
00:35:24,640 --> 00:35:26,720
render the submit button underneath our

835
00:35:26,720 --> 00:35:29,119
input. So let's go underneath this wpper

836
00:35:29,119 --> 00:35:31,599
div which has this gap too and then I

837
00:35:31,599 --> 00:35:33,520
can again render the button component

838
00:35:33,520 --> 00:35:36,079
which I already imported and inside of

839
00:35:36,079 --> 00:35:39,200
here I will just say lock in or continue

840
00:35:39,200 --> 00:35:42,160
with email. If I save this and again go

841
00:35:42,160 --> 00:35:44,320
back you will see yeah this looks quite

842
00:35:44,320 --> 00:35:46,480
nice but there's still one problem.

843
00:35:46,480 --> 00:35:49,200
Currently there's no gap between our

844
00:35:49,200 --> 00:35:51,920
separator and our content. So let's

845
00:35:51,920 --> 00:35:54,079
again go back. Let's scroll a bit to the

846
00:35:54,079 --> 00:35:56,400
top. And as you see, all of our content

847
00:35:56,400 --> 00:35:58,320
is rendered in the card content

848
00:35:58,320 --> 00:36:00,560
component. Therefore, it would also make

849
00:36:00,560 --> 00:36:02,800
a lot of sense to pretty much create

850
00:36:02,800 --> 00:36:06,079
like a I guess gap. So, let's give our

851
00:36:06,079 --> 00:36:08,560
card content a class name. And then this

852
00:36:08,560 --> 00:36:11,359
will be flex flex of column and gap

853
00:36:11,359 --> 00:36:13,680
four. If I save this and again go back,

854
00:36:13,680 --> 00:36:16,160
you will see that we now finally have a

855
00:36:16,160 --> 00:36:18,400
bit of spacing. Also, if you're

856
00:36:18,400 --> 00:36:20,400
wondering why I use right here flex

857
00:36:20,400 --> 00:36:22,160
column and then right here grid, well,

858
00:36:22,160 --> 00:36:24,320
honestly, there's no difference. You can

859
00:36:24,320 --> 00:36:26,800
either use grid or flex column. The

860
00:36:26,800 --> 00:36:28,960
result is the same. And honestly, I

861
00:36:28,960 --> 00:36:31,520
think our lock and form looks beautiful.

862
00:36:31,520 --> 00:36:33,200
Nevertheless, there are still a few

863
00:36:33,200 --> 00:36:35,760
things which I want to update. So, for

864
00:36:35,760 --> 00:36:38,000
example, on the top left corner, I want

865
00:36:38,000 --> 00:36:40,720
to render a go back button. Then above

866
00:36:40,720 --> 00:36:43,040
my card, I want to render my logo. And

867
00:36:43,040 --> 00:36:44,640
then underneath my card, I want to

868
00:36:44,640 --> 00:36:47,359
render like a little click on the terms

869
00:36:47,359 --> 00:36:49,520
and privacy policy to learn more or

870
00:36:49,520 --> 00:36:51,760
something like that. So therefore, let's

871
00:36:51,760 --> 00:36:54,400
again head over back to our layout and

872
00:36:54,400 --> 00:36:56,560
then let's update our layout. So

873
00:36:56,560 --> 00:36:58,960
currently we render two divs. One div

874
00:36:58,960 --> 00:37:01,280
which pretty much centers everything and

875
00:37:01,280 --> 00:37:03,359
then the other diff which gives our

876
00:37:03,359 --> 00:37:06,400
children this nice little maximum width.

877
00:37:06,400 --> 00:37:09,280
Let's go above this maximum width div

878
00:37:09,280 --> 00:37:11,119
and let's first of all create this back

879
00:37:11,119 --> 00:37:13,760
button. So let's use the link component.

880
00:37:13,760 --> 00:37:16,640
This is provided by next /link and this

881
00:37:16,640 --> 00:37:19,119
will allow us to redirect the user. Now

882
00:37:19,119 --> 00:37:21,119
you might ask me, hey John, why do we

883
00:37:21,119 --> 00:37:23,280
use the link component and why don't we

884
00:37:23,280 --> 00:37:25,520
just use the standard ATA tag? Well,

885
00:37:25,520 --> 00:37:27,359
it's quite simple. The link component

886
00:37:27,359 --> 00:37:30,079
provides us with two key benefits. First

887
00:37:30,079 --> 00:37:32,560
of all, prefetching and then also client

888
00:37:32,560 --> 00:37:35,119
side navigation. The A tag does not

889
00:37:35,119 --> 00:37:37,599
provide any prefetching and also when

890
00:37:37,599 --> 00:37:39,920
you navigate the user it will make a

891
00:37:39,920 --> 00:37:41,839
hard navigation or it will do a hard

892
00:37:41,839 --> 00:37:43,839
navigation which means the whole page

893
00:37:43,839 --> 00:37:46,240
will refresh. We don't want that. So

894
00:37:46,240 --> 00:37:48,240
let's delete the A tag and let's use the

895
00:37:48,240 --> 00:37:50,720
link component. And again, if you're not

896
00:37:50,720 --> 00:37:52,800
sure about all of the components or if

897
00:37:52,800 --> 00:37:55,280
you don't know everything, this is fine.

898
00:37:55,280 --> 00:37:57,920
The documentation is your best friend.

899
00:37:57,920 --> 00:38:00,400
Just go to the documentation and search,

900
00:38:00,400 --> 00:38:02,320
for example, for the link component.

901
00:38:02,320 --> 00:38:03,920
Right here, you will see the link

902
00:38:03,920 --> 00:38:06,000
component is a React component that

903
00:38:06,000 --> 00:38:09,119
extends the HTML element to provide

904
00:38:09,119 --> 00:38:11,599
prefetching and client side navigation

905
00:38:11,599 --> 00:38:14,400
between routes. As you see, quite

906
00:38:14,400 --> 00:38:16,960
simple. So let's again go back and our

907
00:38:16,960 --> 00:38:19,440
link component currently complains and

908
00:38:19,440 --> 00:38:20,960
that's because we are missing one

909
00:38:20,960 --> 00:38:23,599
property which is the href and if the

910
00:38:23,599 --> 00:38:25,280
user clicks on the link I want to

911
00:38:25,280 --> 00:38:27,760
redirect the user to the index page and

912
00:38:27,760 --> 00:38:30,000
then for our link I want to say or I

913
00:38:30,000 --> 00:38:32,640
want to render the arrow left icon arrow

914
00:38:32,640 --> 00:38:35,280
left is imported from lucid react this

915
00:38:35,280 --> 00:38:37,440
is self-closing and let's also give it a

916
00:38:37,440 --> 00:38:40,079
class name which will be size four and

917
00:38:40,079 --> 00:38:42,640
then after our arrow left icon I will

918
00:38:42,640 --> 00:38:45,200
also say back this means if I again go

919
00:38:45,200 --> 00:38:47,200
back, you will see this right here. And

920
00:38:47,200 --> 00:38:50,160
yeah, this link looks quite ugly. And

921
00:38:50,160 --> 00:38:52,320
you know what I mean? What did I expect?

922
00:38:52,320 --> 00:38:54,720
I did not add any class names. Of

923
00:38:54,720 --> 00:38:57,359
course, the link looks quite boring and

924
00:38:57,359 --> 00:38:59,200
ugly, I would say. So, here's the thing.

925
00:38:59,200 --> 00:39:02,160
I want you to style the link exactly as

926
00:39:02,160 --> 00:39:04,720
the chat and UI button. It should look

927
00:39:04,720 --> 00:39:07,200
exactly the same. The same rounding, the

928
00:39:07,200 --> 00:39:09,520
same paddings, the same shadow.

929
00:39:09,520 --> 00:39:11,440
Literally, everything should be the

930
00:39:11,440 --> 00:39:13,680
same. So, for example, we can go to the

931
00:39:13,680 --> 00:39:16,079
button component and how about we just

932
00:39:16,079 --> 00:39:18,480
copy all of these class names and paste

933
00:39:18,480 --> 00:39:20,720
them right here for our link component.

934
00:39:20,720 --> 00:39:22,800
Well, this will actually work. But you

935
00:39:22,800 --> 00:39:24,960
know what? This is quite annoying and

936
00:39:24,960 --> 00:39:27,440
not scalable. So, is there any other

937
00:39:27,440 --> 00:39:30,079
solution? Yes, there is. There is a even

938
00:39:30,079 --> 00:39:32,800
better solution and that's to also add a

939
00:39:32,800 --> 00:39:35,040
class name and then use the button

940
00:39:35,040 --> 00:39:37,119
variance function. So, let's import it

941
00:39:37,119 --> 00:39:39,280
from the components and let's invoke the

942
00:39:39,280 --> 00:39:41,200
function. So, here's the thing. This

943
00:39:41,200 --> 00:39:43,200
function as mentioned is imported from

944
00:39:43,200 --> 00:39:45,440
the components from the button component

945
00:39:45,440 --> 00:39:47,760
and it pretty much injects all of these

946
00:39:47,760 --> 00:39:50,880
styles right here into our link. This

947
00:39:50,880 --> 00:39:53,200
means if I again go back what do we have

948
00:39:53,200 --> 00:39:55,280
right here? Well, we have a link which

949
00:39:55,280 --> 00:39:58,800
is styled exactly the same as a shad CN

950
00:39:58,800 --> 00:40:01,839
button. And also from now on I will say

951
00:40:01,839 --> 00:40:05,920
CN and not shad CN UI. So this button

952
00:40:05,920 --> 00:40:07,760
looks quite nice but I want to position

953
00:40:07,760 --> 00:40:10,400
it uh on the top left corner. Therefore,

954
00:40:10,400 --> 00:40:12,079
let's again go back and then for the

955
00:40:12,079 --> 00:40:13,280
link or right here in the button

956
00:40:13,280 --> 00:40:15,680
variance, I will structure it. I want to

957
00:40:15,680 --> 00:40:18,240
give it a variant which will be outline

958
00:40:18,240 --> 00:40:21,119
and then also a class name and then for

959
00:40:21,119 --> 00:40:23,040
the class name I want to give it a

960
00:40:23,040 --> 00:40:25,440
position which will be absolute and then

961
00:40:25,440 --> 00:40:28,400
top four and left four. If I save this

962
00:40:28,400 --> 00:40:30,160
and again go back, you'll see this

963
00:40:30,160 --> 00:40:32,640
button and it looks beautiful. And if I

964
00:40:32,640 --> 00:40:34,079
click on the button, I will get

965
00:40:34,079 --> 00:40:36,800
redirected to the index page. So we are

966
00:40:36,800 --> 00:40:38,320
finished with the button and the next

967
00:40:38,320 --> 00:40:40,880
step is to render the logo and also the

968
00:40:40,880 --> 00:40:43,440
company name above this card. So right

969
00:40:43,440 --> 00:40:45,359
here. So I want you pretty much create a

970
00:40:45,359 --> 00:40:47,680
header and then also a footer and the

971
00:40:47,680 --> 00:40:49,760
footer will render a text which will say

972
00:40:49,760 --> 00:40:52,160
something like hey if you sign up you

973
00:40:52,160 --> 00:40:54,800
agree to the privacy uh policy and

974
00:40:54,800 --> 00:40:57,520
terms. Therefore, let's again go back uh

975
00:40:57,520 --> 00:40:59,599
let's go to our layout and then right

976
00:40:59,599 --> 00:41:02,079
here I want to go into this div where we

977
00:41:02,079 --> 00:41:04,480
have this maximum width and inside of

978
00:41:04,480 --> 00:41:06,319
here I want to again use the link

979
00:41:06,319 --> 00:41:08,480
component as you all know we already

980
00:41:08,480 --> 00:41:11,040
imported it. Let's give the link also an

981
00:41:11,040 --> 00:41:13,520
href and this will be the index page

982
00:41:13,520 --> 00:41:16,400
meaning an empty slash and then in the

983
00:41:16,400 --> 00:41:18,640
link I want to render the company image

984
00:41:18,640 --> 00:41:20,640
and or in other words the logo and the

985
00:41:20,640 --> 00:41:22,800
company name. So this will be Marshall

986
00:41:22,800 --> 00:41:25,520
LMS dot. If I again go back, you will

987
00:41:25,520 --> 00:41:27,440
see it right here. But you know what? I

988
00:41:27,440 --> 00:41:29,920
want to center it. Therefore, let's give

989
00:41:29,920 --> 00:41:32,400
our link component a class name. And

990
00:41:32,400 --> 00:41:34,720
then this will be flex items which will

991
00:41:34,720 --> 00:41:37,359
be center gap which will be two to have

992
00:41:37,359 --> 00:41:40,560
a bit of spacing self center and font

993
00:41:40,560 --> 00:41:42,800
medium to have a bit of a bigger font

994
00:41:42,800 --> 00:41:45,280
weight. If I again go back, you will see

995
00:41:45,280 --> 00:41:47,440
that the font weight is now a bit bigger

996
00:41:47,440 --> 00:41:50,400
and also the text, the logo, the company

997
00:41:50,400 --> 00:41:52,960
name is centered. And as already

998
00:41:52,960 --> 00:41:54,800
mentioned, I want to also render the

999
00:41:54,800 --> 00:41:57,680
company logo. So right here in front of

1000
00:41:57,680 --> 00:41:59,839
our text, I want to get the image

1001
00:41:59,839 --> 00:42:03,200
component imported from next/ image. And

1002
00:42:03,200 --> 00:42:05,359
this is self-closing. Right here, I have

1003
00:42:05,359 --> 00:42:07,359
to provide two properties. And this is

1004
00:42:07,359 --> 00:42:09,839
first of all the source of our image and

1005
00:42:09,839 --> 00:42:12,400
then also an alt. For the alt, I will

1006
00:42:12,400 --> 00:42:15,280
just say logo. So where will we get our

1007
00:42:15,280 --> 00:42:17,280
source from? Or in other words, where

1008
00:42:17,280 --> 00:42:20,079
will we store our source? Well, in our

1009
00:42:20,079 --> 00:42:22,400
explorer, we have this public folder.

1010
00:42:22,400 --> 00:42:24,640
And as mentioned in here, we want to

1011
00:42:24,640 --> 00:42:28,000
store all of our public assets, images,

1012
00:42:28,000 --> 00:42:31,119
videos, fonts, whatever. So, in my

1013
00:42:31,119 --> 00:42:33,200
YouTube description, I will have a link.

1014
00:42:33,200 --> 00:42:35,200
This will redirect you to a website

1015
00:42:35,200 --> 00:42:37,280
where you can download all of the public

1016
00:42:37,280 --> 00:42:39,920
assets. And one public asset and maybe

1017
00:42:39,920 --> 00:42:43,040
also the only public asset uh will be uh

1018
00:42:43,040 --> 00:42:45,680
the logo itself. This is the logo as you

1019
00:42:45,680 --> 00:42:47,680
see. So let's again close this and let's

1020
00:42:47,680 --> 00:42:50,480
import a logo on the top. So I will say

1021
00:42:50,480 --> 00:42:55,599
import logo from at /public/logo.

1022
00:42:55,599 --> 00:42:57,760
Then we can use this logo. So if I

1023
00:42:57,760 --> 00:43:00,000
scroll to the bottom I can pass the logo

1024
00:43:00,000 --> 00:43:02,880
as my source. If I again go back you

1025
00:43:02,880 --> 00:43:05,359
will see yeah I mean the logo looks

1026
00:43:05,359 --> 00:43:07,599
beautiful but it's way too big.

1027
00:43:07,599 --> 00:43:09,839
Therefore we can add a width and a

1028
00:43:09,839 --> 00:43:11,839
height. So for the width this will be

1029
00:43:11,839 --> 00:43:14,079
32. And then for the height, this will

1030
00:43:14,079 --> 00:43:17,520
also be 42. No, I'm joking. It will also

1031
00:43:17,520 --> 00:43:21,359
be 32. I want to have this square aspect

1032
00:43:21,359 --> 00:43:24,000
ratio. This means if I again go back,

1033
00:43:24,000 --> 00:43:26,240
you will see, yeah, it's now way smaller

1034
00:43:26,240 --> 00:43:28,640
and the proportions look way better. So,

1035
00:43:28,640 --> 00:43:30,800
we are finished with this header. And

1036
00:43:30,800 --> 00:43:32,640
the next step is to render this little

1037
00:43:32,640 --> 00:43:35,119
footer. So, let's again go back. I want

1038
00:43:35,119 --> 00:43:37,200
to go underneath my children, but still

1039
00:43:37,200 --> 00:43:39,599
in this div with the maximum width. And

1040
00:43:39,599 --> 00:43:41,760
I want to create another div inside of

1041
00:43:41,760 --> 00:43:44,240
here. I will render by clicking

1042
00:43:44,240 --> 00:43:49,359
continue, you agree agree uh to our then

1043
00:43:49,359 --> 00:43:51,760
let's render a span element. This will

1044
00:43:51,760 --> 00:43:54,960
be terms of service and then after the

1045
00:43:54,960 --> 00:43:58,400
span we can also say and so and then

1046
00:43:58,400 --> 00:44:00,400
let's again render a span element and

1047
00:44:00,400 --> 00:44:03,520
then in the span I will render privacy

1048
00:44:03,520 --> 00:44:05,839
policy and then at the end I can render

1049
00:44:05,839 --> 00:44:08,480
a dot. So the complete sentence will be

1050
00:44:08,480 --> 00:44:10,960
by clicking continue you agree to our

1051
00:44:10,960 --> 00:44:14,240
terms of service and privacy policy.

1052
00:44:14,240 --> 00:44:18,400
This means if I again go back yeah

1053
00:44:18,400 --> 00:44:21,680
not so nice no let's style this div. So

1054
00:44:21,680 --> 00:44:23,920
I will give the div a class name and

1055
00:44:23,920 --> 00:44:27,200
this will be text balance text center to

1056
00:44:27,200 --> 00:44:29,359
center it in the middle. By the way, I

1057
00:44:29,359 --> 00:44:31,760
also misspelled text balance. And text

1058
00:44:31,760 --> 00:44:35,200
balance is just text w. So it's kind of

1059
00:44:35,200 --> 00:44:37,280
balanced if you understand what I mean.

1060
00:44:37,280 --> 00:44:39,440
And then we want to also change the text

1061
00:44:39,440 --> 00:44:42,640
size. So text xs and then the color

1062
00:44:42,640 --> 00:44:45,280
should be text muted foreground. This

1063
00:44:45,280 --> 00:44:47,359
means if I save this and again go back,

1064
00:44:47,359 --> 00:44:49,520
you will see yeah this already looks way

1065
00:44:49,520 --> 00:44:51,680
better. And also right now we have this

1066
00:44:51,680 --> 00:44:54,319
terms of service span element and then

1067
00:44:54,319 --> 00:44:57,040
also the privacy policy span element.

1068
00:44:57,040 --> 00:44:59,359
The thing is when the user hovers over

1069
00:44:59,359 --> 00:45:01,599
these two span elements I want to

1070
00:45:01,599 --> 00:45:04,560
showcase a hover state. Therefore uh

1071
00:45:04,560 --> 00:45:06,720
let's again go back and for the span

1072
00:45:06,720 --> 00:45:09,040
element I want to add a class name and

1073
00:45:09,040 --> 00:45:12,000
then this will be hover of text primary

1074
00:45:12,000 --> 00:45:14,079
and then we can also say hover which

1075
00:45:14,079 --> 00:45:16,160
will be underline. So this means if the

1076
00:45:16,160 --> 00:45:19,119
user hovers over our span or over this

1077
00:45:19,119 --> 00:45:21,599
text I want to display the primary color

1078
00:45:21,599 --> 00:45:23,920
and then also little underline. Let's

1079
00:45:23,920 --> 00:45:26,160
copy this class name and then I want to

1080
00:45:26,160 --> 00:45:28,319
also paste it for the second span

1081
00:45:28,319 --> 00:45:30,800
element. This means if I again go back

1082
00:45:30,800 --> 00:45:33,440
and hover over terms of service. You see

1083
00:45:33,440 --> 00:45:35,920
we get this uh text color. So the text

1084
00:45:35,920 --> 00:45:38,160
color updates and we also get an

1085
00:45:38,160 --> 00:45:40,560
underline as you see right here. Then I

1086
00:45:40,560 --> 00:45:42,640
can again zoom out and what's the next

1087
00:45:42,640 --> 00:45:45,280
step? Well the next step is to finally

1088
00:45:45,280 --> 00:45:48,000
implement authentication. And in this

1089
00:45:48,000 --> 00:45:50,160
video we will use better off. And what

1090
00:45:50,160 --> 00:45:52,480
is better off? Well, better off is the

1091
00:45:52,480 --> 00:45:54,800
most comprehensive authentication

1092
00:45:54,800 --> 00:45:57,920
framework for Typescript. They support a

1093
00:45:57,920 --> 00:45:59,920
lot of frameworks. So, if you go to the

1094
00:45:59,920 --> 00:46:02,240
documentation, you can go to the plug-in

1095
00:46:02,240 --> 00:46:04,160
section. And here you will see, oh no,

1096
00:46:04,160 --> 00:46:05,920
not to the plugins, but to the

1097
00:46:05,920 --> 00:46:08,400
integrations. So, right here you will

1098
00:46:08,400 --> 00:46:11,280
see they have support for Astro, Remix,

1099
00:46:11,280 --> 00:46:14,160
Next. This is the framework that we use.

1100
00:46:14,160 --> 00:46:17,359
Next, Sweltkit, even Expo. So, Better

1101
00:46:17,359 --> 00:46:19,680
Off is a very nice open-source

1102
00:46:19,680 --> 00:46:22,160
authentication solution. Now, you might

1103
00:46:22,160 --> 00:46:24,480
ask me, "Hey, Jan, why don't we use

1104
00:46:24,480 --> 00:46:27,680
Offjs? In a lot of your previous videos,

1105
00:46:27,680 --> 00:46:30,400
you used Offjs." Well, the answer is

1106
00:46:30,400 --> 00:46:33,200
quite simple. Better Off is better than

1107
00:46:33,200 --> 00:46:35,760
OffJS. Who would have thought? Better

1108
00:46:35,760 --> 00:46:38,319
Off has a lot more features. Also,

1109
00:46:38,319 --> 00:46:40,720
errors and issues get fixed way faster.

1110
00:46:40,720 --> 00:46:42,560
And if you go to the change lock, you

1111
00:46:42,560 --> 00:46:44,800
see there are constantly new features.

1112
00:46:44,800 --> 00:46:46,480
And that's also the reason why I

1113
00:46:46,480 --> 00:46:48,640
personally started using better off and

1114
00:46:48,640 --> 00:46:51,280
also why we will use it in this video.

1115
00:46:51,280 --> 00:46:53,520
This does not mean that offjs is bad.

1116
00:46:53,520 --> 00:46:56,160
No, it's still a great framework and I

1117
00:46:56,160 --> 00:46:58,640
also use it right now for my website

1118
00:46:58,640 --> 00:47:01,119
marshallcode.com. So it's still fine.

1119
00:47:01,119 --> 00:47:03,040
You can still use it but in this video

1120
00:47:03,040 --> 00:47:05,680
we will use better off. Also what I'll

1121
00:47:05,680 --> 00:47:07,680
quickly mention is or maybe you will ask

1122
00:47:07,680 --> 00:47:10,240
me, hey Jan, why don't we use kind in

1123
00:47:10,240 --> 00:47:12,880
this video? The answer is simple. Kind

1124
00:47:12,880 --> 00:47:15,680
is my favorite of solution. I love it. I

1125
00:47:15,680 --> 00:47:17,680
use it pretty much daily. The only thing

1126
00:47:17,680 --> 00:47:20,960
is kind makes a lot of sense in a B2B

1127
00:47:20,960 --> 00:47:23,520
application. But our application will be

1128
00:47:23,520 --> 00:47:26,319
a B2C application. This means pretty

1129
00:47:26,319 --> 00:47:29,680
much 90% of our customers won't be

1130
00:47:29,680 --> 00:47:32,079
paying customers. This also means I

1131
00:47:32,079 --> 00:47:34,640
won't need advanced features. I won't

1132
00:47:34,640 --> 00:47:37,359
need multiffactor off. I won't need for

1133
00:47:37,359 --> 00:47:40,319
example SSO. I won't need ROS and

1134
00:47:40,319 --> 00:47:42,319
permissions. And that's also the reason

1135
00:47:42,319 --> 00:47:44,480
why I won't implement kind in this

1136
00:47:44,480 --> 00:47:46,319
video. Nevertheless, if this would be

1137
00:47:46,319 --> 00:47:49,040
some sort of B2B LMS, then I would

1138
00:47:49,040 --> 00:47:51,119
implement kind because implementing

1139
00:47:51,119 --> 00:47:54,400
organizations with kind is super easy.

1140
00:47:54,400 --> 00:47:57,599
And also I created a very detailed and a

1141
00:47:57,599 --> 00:48:00,079
very nice video on organizations. So

1142
00:48:00,079 --> 00:48:01,680
right here, if you go to my YouTube

1143
00:48:01,680 --> 00:48:03,680
channel, then you will find this video

1144
00:48:03,680 --> 00:48:05,920
right here. Multi-tenant SA SAS

1145
00:48:05,920 --> 00:48:08,720
architecture in three simple steps. In

1146
00:48:08,720 --> 00:48:11,040
this video, I showcase how to build a

1147
00:48:11,040 --> 00:48:13,920
nice multi-tenant SAS architecture while

1148
00:48:13,920 --> 00:48:15,760
also creating this nice little

1149
00:48:15,760 --> 00:48:17,839
organization switcher. So yeah, let's

1150
00:48:17,839 --> 00:48:19,359
again close this. Oh, and by the way,

1151
00:48:19,359 --> 00:48:21,839
watch this video on file uploads. Super

1152
00:48:21,839 --> 00:48:24,400
important and super cool video. So let's

1153
00:48:24,400 --> 00:48:26,480
implement better off. So let's head over

1154
00:48:26,480 --> 00:48:28,960
to the documentation and then I want to

1155
00:48:28,960 --> 00:48:30,960
click on installation. Oh, and by the

1156
00:48:30,960 --> 00:48:32,559
way, please also head over to the

1157
00:48:32,559 --> 00:48:34,720
website better off. Scroll through the

1158
00:48:34,720 --> 00:48:36,559
landing page. It's very detailed. It

1159
00:48:36,559 --> 00:48:38,640
will also tell you or it will showcase

1160
00:48:38,640 --> 00:48:40,800
all of the features and yeah let's get

1161
00:48:40,800 --> 00:48:42,880
started. So I will head over to the

1162
00:48:42,880 --> 00:48:45,359
documentation and then to installation.

1163
00:48:45,359 --> 00:48:47,599
The first step is to install the package

1164
00:48:47,599 --> 00:48:50,000
which is better off. Again I will use

1165
00:48:50,000 --> 00:48:52,640
PNPM so I can copy the installation

1166
00:48:52,640 --> 00:48:54,880
command and then in my terminal I will

1167
00:48:54,880 --> 00:48:56,800
stop my dev server and paste the

1168
00:48:56,800 --> 00:48:58,960
installation command inside of here. And

1169
00:48:58,960 --> 00:49:00,960
also some people might write in the

1170
00:49:00,960 --> 00:49:02,640
comments, hey Jan, you don't have to

1171
00:49:02,640 --> 00:49:05,119
stop the dev server every time. You can

1172
00:49:05,119 --> 00:49:07,760
also create a second terminal tab. Yes,

1173
00:49:07,760 --> 00:49:10,160
I know in theory it works and it

1174
00:49:10,160 --> 00:49:11,680
shouldn't create any problems.

1175
00:49:11,680 --> 00:49:13,760
Nevertheless, I want to play it safe and

1176
00:49:13,760 --> 00:49:15,520
I don't want to create any bundling

1177
00:49:15,520 --> 00:49:18,079
issues. Therefore, I will also stop my

1178
00:49:18,079 --> 00:49:21,119
dev server every time. But you in theory

1179
00:49:21,119 --> 00:49:23,200
can also just create a second terminal

1180
00:49:23,200 --> 00:49:25,280
tab and install all of the packages

1181
00:49:25,280 --> 00:49:27,839
inside of there without stopping your

1182
00:49:27,839 --> 00:49:30,160
dev server. And now I can again restart

1183
00:49:30,160 --> 00:49:32,000
my dev server since we installed the

1184
00:49:32,000 --> 00:49:34,319
package. And the next step is to update

1185
00:49:34,319 --> 00:49:36,480
our environment variables because right

1186
00:49:36,480 --> 00:49:38,640
here it says create a ENV file. We

1187
00:49:38,640 --> 00:49:40,559
already did that. And then we want to

1188
00:49:40,559 --> 00:49:42,720
pretty much create a secret key. This

1189
00:49:42,720 --> 00:49:45,119
random value. So this secret key will be

1190
00:49:45,119 --> 00:49:47,599
used by the library for encryption and

1191
00:49:47,599 --> 00:49:50,160
generating hashes. You can generate one

1192
00:49:50,160 --> 00:49:52,319
by using the button below. So let's

1193
00:49:52,319 --> 00:49:54,720
generate a secret. And then we can copy

1194
00:49:54,720 --> 00:49:57,599
this better off environment variable. Uh

1195
00:49:57,599 --> 00:49:59,760
I want to open my env file and as you

1196
00:49:59,760 --> 00:50:02,000
see I don't have one. So let's create a

1197
00:50:02,000 --> 00:50:04,559
new one in our root directory. I can

1198
00:50:04,559 --> 00:50:07,440
create a new file and this will be ourv

1199
00:50:07,440 --> 00:50:09,839
file. Inside of here we will store all

1200
00:50:09,839 --> 00:50:12,559
of our secrets like for example the

1201
00:50:12,559 --> 00:50:15,520
better of secret. Then the next step is

1202
00:50:15,520 --> 00:50:18,400
to also set the base URL. This is the

1203
00:50:18,400 --> 00:50:20,960
local or not the local this is the URL

1204
00:50:20,960 --> 00:50:23,200
of our application. Since we are

1205
00:50:23,200 --> 00:50:25,760
currently in development the URL or our

1206
00:50:25,760 --> 00:50:29,680
URL is localhost 3000. Therefore, we can

1207
00:50:29,680 --> 00:50:31,839
copy this environment variable and again

1208
00:50:31,839 --> 00:50:35,040
paste it right here in our env file. The

1209
00:50:35,040 --> 00:50:36,960
next step is to create a better off

1210
00:50:36,960 --> 00:50:39,440
instance. This means we want to create a

1211
00:50:39,440 --> 00:50:42,480
file named off.ts in one of these

1212
00:50:42,480 --> 00:50:45,119
locations either in your project root

1213
00:50:45,119 --> 00:50:48,079
directory in your lip folder or in a

1214
00:50:48,079 --> 00:50:50,800
utils folder. You can also nest any of

1215
00:50:50,800 --> 00:50:53,040
these folders. But yeah, let's just

1216
00:50:53,040 --> 00:50:55,520
create it in the lip folder. So, I can

1217
00:50:55,520 --> 00:50:57,839
create uh open my explorer. Then let's

1218
00:50:57,839 --> 00:50:59,839
go right here into the lip folder and

1219
00:50:59,839 --> 00:51:03,119
let's create a off.ts file. Then we can

1220
00:51:03,119 --> 00:51:04,960
scroll to the bottom and then I will

1221
00:51:04,960 --> 00:51:07,200
copy this code and paste it right into

1222
00:51:07,200 --> 00:51:10,240
this off.ts file. As mentioned again,

1223
00:51:10,240 --> 00:51:12,720
this will just create the server side of

1224
00:51:12,720 --> 00:51:15,440
or better off instance. Then we can

1225
00:51:15,440 --> 00:51:17,200
scroll to the bottom and the next step

1226
00:51:17,200 --> 00:51:19,920
is to configure our database. So better

1227
00:51:19,920 --> 00:51:22,720
off requires a database to store user

1228
00:51:22,720 --> 00:51:24,960
data. You can easily configure better

1229
00:51:24,960 --> 00:51:28,800
off to use SQLite, Postgress or MySQL

1230
00:51:28,800 --> 00:51:31,680
with this right here. I cannot pronounce

1231
00:51:31,680 --> 00:51:33,839
it. I'm sorry. Handling queries and

1232
00:51:33,839 --> 00:51:36,559
migrations for these databases. So,

1233
00:51:36,559 --> 00:51:38,400
here's the thing. I don't want to use

1234
00:51:38,400 --> 00:51:40,800
this tool. Sorry again. I have no clue

1235
00:51:40,800 --> 00:51:43,119
how to pronounce it correctly. Instead,

1236
00:51:43,119 --> 00:51:45,920
I want to use an OM. Now, there are a

1237
00:51:45,920 --> 00:51:48,160
lot of OM on the market. You have

1238
00:51:48,160 --> 00:51:51,280
drizzle, you have type OM and a lot of

1239
00:51:51,280 --> 00:51:54,079
other ORMs. But in this video, we will

1240
00:51:54,079 --> 00:51:56,319
use Prisma. And the reason is quite

1241
00:51:56,319 --> 00:51:59,839
simple. Prisma is a relatively highlevel

1242
00:51:59,839 --> 00:52:02,400
ORM. It's very easy to understand and

1243
00:52:02,400 --> 00:52:05,200
it's also very easy to write queries and

1244
00:52:05,200 --> 00:52:07,760
create mutations and just in general to

1245
00:52:07,760 --> 00:52:11,119
work with the OM. Drizzle is also a very

1246
00:52:11,119 --> 00:52:13,280
nice OM. So not drizzle.com, but

1247
00:52:13,280 --> 00:52:15,040
OM.rizle.te.

1248
00:52:15,040 --> 00:52:18,000
This is also a very nice OM. It's also

1249
00:52:18,000 --> 00:52:20,319
relatively easy to use, but it's way

1250
00:52:20,319 --> 00:52:22,319
more low-level. You have to know a bit

1251
00:52:22,319 --> 00:52:25,440
of SQL to use it. And that's not a

1252
00:52:25,440 --> 00:52:27,359
problem. The reason why I won't use

1253
00:52:27,359 --> 00:52:29,520
Drizzle in this video is because they

1254
00:52:29,520 --> 00:52:32,400
are currently doing a huge rewrite for

1255
00:52:32,400 --> 00:52:34,480
version one. And since I don't want to

1256
00:52:34,480 --> 00:52:36,960
deprecate this tutorial, we will use

1257
00:52:36,960 --> 00:52:39,119
Prisma. And also, let me quickly

1258
00:52:39,119 --> 00:52:41,680
summarize what Prisma is. So, Prisma, as

1259
00:52:41,680 --> 00:52:44,240
mentioned, is an ORM. to be specific,

1260
00:52:44,240 --> 00:52:47,200
it's a TypeScript ORM and it's very easy

1261
00:52:47,200 --> 00:52:49,440
to use. They also offer a lot of other

1262
00:52:49,440 --> 00:52:52,000
products like a database and uh I don't

1263
00:52:52,000 --> 00:52:54,400
know Optimize Accelerate. We won't use

1264
00:52:54,400 --> 00:52:57,040
these paid products. The OM is

1265
00:52:57,040 --> 00:52:59,920
completely free and opensource. So let's

1266
00:52:59,920 --> 00:53:02,000
get started. So I want to open my

1267
00:53:02,000 --> 00:53:03,839
terminal and then in my terminal I want

1268
00:53:03,839 --> 00:53:06,400
to first of all install the OM. So I

1269
00:53:06,400 --> 00:53:10,800
want to do a PNPMI at Prisma/client.

1270
00:53:10,800 --> 00:53:13,200
This will install the Prisma client. And

1271
00:53:13,200 --> 00:53:15,280
then we have to also install a second

1272
00:53:15,280 --> 00:53:19,280
package and this will be PNPMI uh-d

1273
00:53:19,280 --> 00:53:22,000
uppercase D Prisma. So this will install

1274
00:53:22,000 --> 00:53:24,559
Prisma as a development dependency. And

1275
00:53:24,559 --> 00:53:27,040
as mentioned, this won't show up in your

1276
00:53:27,040 --> 00:53:29,680
production bundle size. Once these two

1277
00:53:29,680 --> 00:53:32,160
packages are installed, we can also

1278
00:53:32,160 --> 00:53:35,760
initialize Prisma. So let's run PNPM DLX

1279
00:53:35,760 --> 00:53:38,480
Prisma in it. So, as you see right here,

1280
00:53:38,480 --> 00:53:40,960
hey, your Prisma schema was created. You

1281
00:53:40,960 --> 00:53:43,200
can open it in your favorite editor. And

1282
00:53:43,200 --> 00:53:45,280
the next steps are first of all to set

1283
00:53:45,280 --> 00:53:48,160
the database URL in our env file. Then

1284
00:53:48,160 --> 00:53:51,119
we want to also set a provider. And then

1285
00:53:51,119 --> 00:53:53,119
we can run a few commands. But let's

1286
00:53:53,119 --> 00:53:56,000
first of all look at what Prisma even

1287
00:53:56,000 --> 00:53:58,559
created. So first of all, we have a new

1288
00:53:58,559 --> 00:54:01,040
Prisma folder. In the Prisma folder, we

1289
00:54:01,040 --> 00:54:03,440
have a schema file. And then in the

1290
00:54:03,440 --> 00:54:06,160
schema file, we will create our schema.

1291
00:54:06,160 --> 00:54:07,760
This means we will create all of the

1292
00:54:07,760 --> 00:54:10,319
tables with all of the uh columns and

1293
00:54:10,319 --> 00:54:12,319
then we will also create all of the

1294
00:54:12,319 --> 00:54:14,720
relations and then also if you open your

1295
00:54:14,720 --> 00:54:17,280
env file you will see that Prisma right

1296
00:54:17,280 --> 00:54:20,240
here created a dummy database URL. Let's

1297
00:54:20,240 --> 00:54:21,680
delete these comments. We don't need

1298
00:54:21,680 --> 00:54:24,079
them. And what we want to do is we want

1299
00:54:24,079 --> 00:54:26,480
to now create a real database and then

1300
00:54:26,480 --> 00:54:29,040
we want to connect Prisma to our real

1301
00:54:29,040 --> 00:54:31,599
database. So there are a lot of options

1302
00:54:31,599 --> 00:54:34,400
for databases. free ones, paid ones,

1303
00:54:34,400 --> 00:54:36,880
good ones, bad ones. But in this video,

1304
00:54:36,880 --> 00:54:40,319
we will use Neon. Neon is a Postgress

1305
00:54:40,319 --> 00:54:42,640
provider which got recently acquired,

1306
00:54:42,640 --> 00:54:45,119
but I guess this has nothing to do with

1307
00:54:45,119 --> 00:54:47,520
this video. It's super cool and it has a

1308
00:54:47,520 --> 00:54:50,480
lot of fancy features like for example

1309
00:54:50,480 --> 00:54:53,119
autoscaling. This means it can scale to

1310
00:54:53,119 --> 00:54:56,000
zero and it also offers branching. Now

1311
00:54:56,000 --> 00:54:58,480
in this tutorial we won't need scaling,

1312
00:54:58,480 --> 00:55:00,880
we won't need branching but still if you

1313
00:55:00,880 --> 00:55:03,520
go into production at some point in the

1314
00:55:03,520 --> 00:55:05,680
future then it's nice to have these

1315
00:55:05,680 --> 00:55:08,240
features. If we also quickly look at the

1316
00:55:08,240 --> 00:55:10,559
pricing you will see that they have a

1317
00:55:10,559 --> 00:55:12,800
very generous suite here which again

1318
00:55:12,800 --> 00:55:15,920
does not require any credit card. So we

1319
00:55:15,920 --> 00:55:19,920
can create 10 projects 0.5 GB storage

1320
00:55:19,920 --> 00:55:22,160
190 computer hours this is more than

1321
00:55:22,160 --> 00:55:24,319
enough. And also if you want to have

1322
00:55:24,319 --> 00:55:26,319
some sort of alternative then you can

1323
00:55:26,319 --> 00:55:28,960
also use superbase. This is also a

1324
00:55:28,960 --> 00:55:31,520
postgress provider. But honestly neon is

1325
00:55:31,520 --> 00:55:34,079
just faster and easier to set up.

1326
00:55:34,079 --> 00:55:36,800
Therefore I will use neon in this video.

1327
00:55:36,800 --> 00:55:38,800
So step number one is to first of all

1328
00:55:38,800 --> 00:55:41,200
log in. And once logged in you will see

1329
00:55:41,200 --> 00:55:43,359
all of your projects right here. If you

1330
00:55:43,359 --> 00:55:45,359
don't have any don't worry. I have quite

1331
00:55:45,359 --> 00:55:47,839
a few as you see. And also I am on the

1332
00:55:47,839 --> 00:55:50,079
scale plan but this also is not

1333
00:55:50,079 --> 00:55:52,160
important for this video. So let's

1334
00:55:52,160 --> 00:55:54,319
create a new project. This means let's

1335
00:55:54,319 --> 00:55:56,559
create a new database. For the database

1336
00:55:56,559 --> 00:55:58,079
name, I will just call it

1337
00:55:58,079 --> 00:56:01,079
Marshall-LMS-YouTube-public.

1338
00:56:01,839 --> 00:56:03,839
Then for the Postgress version, I will

1339
00:56:03,839 --> 00:56:05,760
choose the latest one. In this case,

1340
00:56:05,760 --> 00:56:08,240
this is version 17. For the database

1341
00:56:08,240 --> 00:56:10,079
name, it will just generate a random

1342
00:56:10,079 --> 00:56:12,480
one. Then for the cloud provider, Azure

1343
00:56:12,480 --> 00:56:14,720
is fine enough. And for the region, I

1344
00:56:14,720 --> 00:56:16,960
will select the default one. Then let's

1345
00:56:16,960 --> 00:56:19,040
create our database. And you know what?

1346
00:56:19,040 --> 00:56:21,599
Our database has already been created.

1347
00:56:21,599 --> 00:56:24,559
So, Neon has a very fancy architecture

1348
00:56:24,559 --> 00:56:26,720
in the background which allows it to

1349
00:56:26,720 --> 00:56:29,839
spin up databases in milliseconds. So,

1350
00:56:29,839 --> 00:56:32,079
let's connect to our database. I will

1351
00:56:32,079 --> 00:56:34,000
click on connect. And then right here,

1352
00:56:34,000 --> 00:56:36,640
please select Prisma. Um, this is our

1353
00:56:36,640 --> 00:56:38,960
ORM. And then here we have a schema

1354
00:56:38,960 --> 00:56:40,960
file. We don't need it. We want to click

1355
00:56:40,960 --> 00:56:43,599
on env. And here we already get our

1356
00:56:43,599 --> 00:56:46,000
database URL. So you want to uncomment

1357
00:56:46,000 --> 00:56:48,559
the next line if your Prisma version is

1358
00:56:48,559 --> 00:56:51,760
lower than 5.1. So let's quickly check

1359
00:56:51,760 --> 00:56:54,720
if I open my package.json what version

1360
00:56:54,720 --> 00:56:57,520
of Prisma do we have installed 6.8.

1361
00:56:57,520 --> 00:57:00,240
Therefore we can leave it un commented.

1362
00:57:00,240 --> 00:57:02,160
And we want to just copy the first

1363
00:57:02,160 --> 00:57:04,880
database URL. I will then again open my

1364
00:57:04,880 --> 00:57:07,359
env file and I will delete this dummy

1365
00:57:07,359 --> 00:57:09,839
database URL and instead paste what I

1366
00:57:09,839 --> 00:57:12,720
just copied. So we already set up Neon.

1367
00:57:12,720 --> 00:57:14,880
We are already finished which means I

1368
00:57:14,880 --> 00:57:16,799
can close the website. So let's head

1369
00:57:16,799 --> 00:57:18,240
over back to the better off

1370
00:57:18,240 --> 00:57:20,559
documentation and I want to scroll to

1371
00:57:20,559 --> 00:57:23,200
the adapters section. So right here it

1372
00:57:23,200 --> 00:57:26,000
says if you prefer to use an ORM as we

1373
00:57:26,000 --> 00:57:28,640
do or if your database is not supported

1374
00:57:28,640 --> 00:57:31,440
by this tool you can use one of the

1375
00:57:31,440 --> 00:57:33,920
built-in adapters and Prisma is a

1376
00:57:33,920 --> 00:57:36,160
built-in adapter. So we want to pretty

1377
00:57:36,160 --> 00:57:38,559
much first of all import this adapter

1378
00:57:38,559 --> 00:57:41,359
Prisma adapter. So I will open my off

1379
00:57:41,359 --> 00:57:43,440
configuration file and I will paste the

1380
00:57:43,440 --> 00:57:45,599
import statement on the top and then we

1381
00:57:45,599 --> 00:57:47,599
want to also initialize this Prisma

1382
00:57:47,599 --> 00:57:50,400
adapter in the off configuration file.

1383
00:57:50,400 --> 00:57:52,319
So I will again just copy the code

1384
00:57:52,319 --> 00:57:54,640
example and paste it right here. So

1385
00:57:54,640 --> 00:57:56,799
let's quickly analyze the code. So again

1386
00:57:56,799 --> 00:57:58,480
right here this first of all creates the

1387
00:57:58,480 --> 00:58:00,799
off configuration file for the server

1388
00:58:00,799 --> 00:58:03,599
side. Inside of here we have a database

1389
00:58:03,599 --> 00:58:05,760
property and we set it equal to the

1390
00:58:05,760 --> 00:58:08,400
Prisma adapter. This Prisma adapter

1391
00:58:08,400 --> 00:58:10,960
accepts two arguments. First of all, the

1392
00:58:10,960 --> 00:58:12,960
Prisma instance itself which we

1393
00:58:12,960 --> 00:58:15,200
currently haven't created. We will do

1394
00:58:15,200 --> 00:58:17,839
that in a second and also the provider.

1395
00:58:17,839 --> 00:58:20,000
So what database do we use? Do we use

1396
00:58:20,000 --> 00:58:24,079
MongoDB, MySQL, SQLite? No, we are using

1397
00:58:24,079 --> 00:58:26,559
Neon and Neon in the background uses

1398
00:58:26,559 --> 00:58:28,559
Postgress. And the next step is to

1399
00:58:28,559 --> 00:58:31,040
create a Prisma instance. So please head

1400
00:58:31,040 --> 00:58:33,200
over to Chrome and then in Chrome search

1401
00:58:33,200 --> 00:58:37,040
for Nex.js JS uh Prisma best practices.

1402
00:58:37,040 --> 00:58:38,960
Here you will get a few results but

1403
00:58:38,960 --> 00:58:41,040
please click on the first one. This will

1404
00:58:41,040 --> 00:58:43,119
give you all of the best practices but

1405
00:58:43,119 --> 00:58:45,119
there's only one thing which we need. So

1406
00:58:45,119 --> 00:58:47,200
right here at the top they say avoid

1407
00:58:47,200 --> 00:58:49,920
multiple Prisma client instances when

1408
00:58:49,920 --> 00:58:52,480
developing an X.js application. One

1409
00:58:52,480 --> 00:58:55,200
common issue is accidentally creating

1410
00:58:55,200 --> 00:58:57,920
multiple instances of the Prisma client.

1411
00:58:57,920 --> 00:59:00,799
This often occurs due to Nex.js's hot

1412
00:59:00,799 --> 00:59:03,520
module reloading feature in development.

1413
00:59:03,520 --> 00:59:06,000
Nex.js's hot module reloading feature

1414
00:59:06,000 --> 00:59:08,720
reloads modules frequently to reflect

1415
00:59:08,720 --> 00:59:11,280
code changes instantly. However, this

1416
00:59:11,280 --> 00:59:13,680
can lead to multiple instances of Prisma

1417
00:59:13,680 --> 00:59:16,160
client being created. Which means we

1418
00:59:16,160 --> 00:59:18,799
have to somehow fix this problem. So

1419
00:59:18,799 --> 00:59:20,799
here's the recommended solution. To

1420
00:59:20,799 --> 00:59:22,640
avoid this, create a single Prisma

1421
00:59:22,640 --> 00:59:25,359
client instance using a global variable.

1422
00:59:25,359 --> 00:59:28,480
And this is exactly what we will do. So

1423
00:59:28,480 --> 00:59:30,799
in my codebase uh we can again open the

1424
00:59:30,799 --> 00:59:33,520
code structure or the project structure

1425
00:59:33,520 --> 00:59:35,520
and then in the lip folder I want to

1426
00:59:35,520 --> 00:59:38,480
create a db.ts file. This will be our

1427
00:59:38,480 --> 00:59:40,559
Prisma instance or inside of there we

1428
00:59:40,559 --> 00:59:42,960
will configure our global variable our

1429
00:59:42,960 --> 00:59:45,119
global Prisma variable. We can then copy

1430
00:59:45,119 --> 00:59:47,280
this code example. Let's go back and

1431
00:59:47,280 --> 00:59:49,599
then I will paste it inside of here. As

1432
00:59:49,599 --> 00:59:51,839
you see we get one error and it says

1433
00:59:51,839 --> 00:59:54,319
module Prisma client has no exported

1434
00:59:54,319 --> 00:59:57,200
member Prisma client. Hm. What's the

1435
00:59:57,200 --> 00:59:59,280
problem? We literally just copied the

1436
00:59:59,280 --> 01:00:01,680
code example right here from the

1437
01:00:01,680 --> 01:00:04,240
official docs as you see. So, sadly,

1438
01:00:04,240 --> 01:00:06,640
these docs haven't been updated in quite

1439
01:00:06,640 --> 01:00:08,880
some time. And this import statement is

1440
01:00:08,880 --> 01:00:10,960
incorrect. So, let's just delete it.

1441
01:00:10,960 --> 01:00:12,640
Right now, we still get a few errors.

1442
01:00:12,640 --> 01:00:14,960
Don't worry. Let's for now just uh close

1443
01:00:14,960 --> 01:00:17,680
this file. We will fix it in a second.

1444
01:00:17,680 --> 01:00:19,599
Now if we again go back to the off

1445
01:00:19,599 --> 01:00:22,000
configuration file, we can hover over

1446
01:00:22,000 --> 01:00:24,240
Prisma and as you see we can add the

1447
01:00:24,240 --> 01:00:27,280
import from the DB file. Let's do that.

1448
01:00:27,280 --> 01:00:29,839
And I think we now set up our database

1449
01:00:29,839 --> 01:00:32,079
provider. So if I go back to the

1450
01:00:32,079 --> 01:00:34,480
documentation, the next step is to add

1451
01:00:34,480 --> 01:00:37,440
or create the database tables. So better

1452
01:00:37,440 --> 01:00:40,000
off includes a CLI tool to help manage

1453
01:00:40,000 --> 01:00:42,960
the schema required by the library and

1454
01:00:42,960 --> 01:00:45,440
they provide a generate command and this

1455
01:00:45,440 --> 01:00:48,799
command generates an RM schema or SQL

1456
01:00:48,799 --> 01:00:51,520
migration file. So let's copy this code

1457
01:00:51,520 --> 01:00:54,000
example with this generate command and

1458
01:00:54,000 --> 01:00:56,079
then I can just copy it or not copy it

1459
01:00:56,079 --> 01:00:58,559
but paste it into my terminal. Again

1460
01:00:58,559 --> 01:01:00,799
this will generate this schema. As you

1461
01:01:00,799 --> 01:01:02,960
see I have to install the package so I

1462
01:01:02,960 --> 01:01:04,799
will do that quickly. Oh, and by the

1463
01:01:04,799 --> 01:01:06,640
way, friends, don't forget to stay

1464
01:01:06,640 --> 01:01:09,440
hydrated. Drink some water or drink a

1465
01:01:09,440 --> 01:01:11,440
Pepsi. No, this is not recommended.

1466
01:01:11,440 --> 01:01:14,400
Drink some water. Stay hydrated. Uh-huh.

1467
01:01:14,400 --> 01:01:16,559
We got an error. Couldn't read your off

1468
01:01:16,559 --> 01:01:19,200
config. Reference error. Prisma client

1469
01:01:19,200 --> 01:01:21,359
is not defined. So, what's the problem?

1470
01:01:21,359 --> 01:01:24,079
Well, again, if we open our off.ts file,

1471
01:01:24,079 --> 01:01:27,599
or not our off.ts, but our db.ts file,

1472
01:01:27,599 --> 01:01:29,839
we currently don't import Prisma client

1473
01:01:29,839 --> 01:01:31,839
because we currently don't have a Prisma

1474
01:01:31,839 --> 01:01:34,240
client. To generate a Prisma client, we

1475
01:01:34,240 --> 01:01:36,240
have to first of all push our schema.

1476
01:01:36,240 --> 01:01:38,400
But to create a schema, we have to

1477
01:01:38,400 --> 01:01:40,400
create a Prisma client. I know so

1478
01:01:40,400 --> 01:01:43,200
stupid. So let's open our schema. And in

1479
01:01:43,200 --> 01:01:45,520
our schema, we will just create a dummy

1480
01:01:45,520 --> 01:01:47,760
model. So I will create a model. I will

1481
01:01:47,760 --> 01:01:50,160
call it test. And then I will open it.

1482
01:01:50,160 --> 01:01:52,240
And then I will create an ID. This will

1483
01:01:52,240 --> 01:01:56,240
be of type string at id default UYU ID.

1484
01:01:56,240 --> 01:01:58,160
And then I will create a test property

1485
01:01:58,160 --> 01:02:00,400
or column which will be of type string.

1486
01:02:00,400 --> 01:02:02,640
That's it. Then we can open our terminal

1487
01:02:02,640 --> 01:02:05,520
and inside of here I will run pnpm dlx

1488
01:02:05,520 --> 01:02:07,920
prisma db push. This will push the

1489
01:02:07,920 --> 01:02:10,160
schema to our database or in other words

1490
01:02:10,160 --> 01:02:12,640
it will sync our database schema with

1491
01:02:12,640 --> 01:02:15,520
this local Prisma schema. So as you see

1492
01:02:15,520 --> 01:02:17,599
your database is now in sync with your

1493
01:02:17,599 --> 01:02:19,920
Prisma schema. Nice. Let's quickly head

1494
01:02:19,920 --> 01:02:22,079
over to the Neon dashboard and let's see

1495
01:02:22,079 --> 01:02:24,559
if everything worked. So right here in

1496
01:02:24,559 --> 01:02:26,960
the sidebar you will find the tables

1497
01:02:26,960 --> 01:02:29,680
tab. Let's click on it and as you see we

1498
01:02:29,680 --> 01:02:31,520
should get one table and this is the

1499
01:02:31,520 --> 01:02:33,839
test table. So everything worked as

1500
01:02:33,839 --> 01:02:36,079
expected. So we can again go back and

1501
01:02:36,079 --> 01:02:38,799
then in our DB file we can import our

1502
01:02:38,799 --> 01:02:40,960
Prisma client. So I will hover over

1503
01:02:40,960 --> 01:02:42,720
Prisma client. Then we can click on

1504
01:02:42,720 --> 01:02:45,200
quick fix and I want to add the import

1505
01:02:45,200 --> 01:02:48,240
from generated / Prisma. Then I will

1506
01:02:48,240 --> 01:02:50,000
click on enter. And as you see

1507
01:02:50,000 --> 01:02:52,559
everything now works as expected. So

1508
01:02:52,559 --> 01:02:55,440
here's the thing. In version five or

1509
01:02:55,440 --> 01:02:57,760
with Yeah, I think with version five, we

1510
01:02:57,760 --> 01:03:00,480
got a big update. In previous versions,

1511
01:03:00,480 --> 01:03:03,200
all of the client code got abstracted in

1512
01:03:03,200 --> 01:03:05,760
the node modules folder. Now in the lip

1513
01:03:05,760 --> 01:03:08,240
folder, we have a new generated folder.

1514
01:03:08,240 --> 01:03:10,559
This generated folder is pretty much all

1515
01:03:10,559 --> 01:03:13,119
of the code which is created by Prisma.

1516
01:03:13,119 --> 01:03:15,200
These are all of your types. Again, in

1517
01:03:15,200 --> 01:03:17,200
previous versions, this was abstracted

1518
01:03:17,200 --> 01:03:19,359
away in the note modules folder. they

1519
01:03:19,359 --> 01:03:21,440
now give you access to this generated

1520
01:03:21,440 --> 01:03:23,599
folder and that's also why we have to

1521
01:03:23,599 --> 01:03:26,480
import Prisma client from this generated

1522
01:03:26,480 --> 01:03:28,559
folder. So since this is finished we can

1523
01:03:28,559 --> 01:03:31,520
now finally generate also our better off

1524
01:03:31,520 --> 01:03:34,400
schema. So I can again copy this uh

1525
01:03:34,400 --> 01:03:36,480
command this script and then in my

1526
01:03:36,480 --> 01:03:39,039
terminal I will just paste it again. In

1527
01:03:39,039 --> 01:03:41,200
theory it should work and as you see it

1528
01:03:41,200 --> 01:03:43,760
says the file schema.prisisma already

1529
01:03:43,760 --> 01:03:45,920
exists. Do you want to override the

1530
01:03:45,920 --> 01:03:48,240
schema to the file? Yes, I want to do

1531
01:03:48,240 --> 01:03:50,480
that. So let's click on yes. And as you

1532
01:03:50,480 --> 01:03:53,359
see it was successful. And in our schema

1533
01:03:53,359 --> 01:03:56,319
we now have a few tables. So I can first

1534
01:03:56,319 --> 01:03:58,319
of all delete the test table. I don't

1535
01:03:58,319 --> 01:04:00,799
need it anymore. And now we have a user

1536
01:04:00,799 --> 01:04:03,440
table. We have a session table, an

1537
01:04:03,440 --> 01:04:05,520
account table and then also a

1538
01:04:05,520 --> 01:04:07,920
verification table. These are all of the

1539
01:04:07,920 --> 01:04:10,640
required tables and also the required

1540
01:04:10,640 --> 01:04:13,839
columns for uh better off to work as

1541
01:04:13,839 --> 01:04:15,839
expected. So I think we are finished

1542
01:04:15,839 --> 01:04:17,760
with the schema. So let's again head

1543
01:04:17,760 --> 01:04:19,920
over to the documentation and the next

1544
01:04:19,920 --> 01:04:21,760
step is to already configure our

1545
01:04:21,760 --> 01:04:24,319
authentication methods. So configure the

1546
01:04:24,319 --> 01:04:26,400
authentication methods you want to use.

1547
01:04:26,400 --> 01:04:28,559
Better off comes with built-in support

1548
01:04:28,559 --> 01:04:31,359
for email password and social login

1549
01:04:31,359 --> 01:04:34,079
providers. So we can again open our

1550
01:04:34,079 --> 01:04:36,720
off.ts configuration file. And as

1551
01:04:36,720 --> 01:04:38,480
mentioned I want to allow the user to

1552
01:04:38,480 --> 01:04:41,280
sign in uh either with GitHub or using

1553
01:04:41,280 --> 01:04:43,440
the user's email. And then we will send

1554
01:04:43,440 --> 01:04:46,160
a magic link to the user. So let's first

1555
01:04:46,160 --> 01:04:48,880
of all configure GitHub OF. So

1556
01:04:48,880 --> 01:04:50,960
underneath our database property, we can

1557
01:04:50,960 --> 01:04:53,359
get the social providers property. This

1558
01:04:53,359 --> 01:04:55,839
is an object and inside of here we get

1559
01:04:55,839 --> 01:04:58,720
quite a few options. So as mentioned, we

1560
01:04:58,720 --> 01:05:00,960
want to use GitHub and this is again an

1561
01:05:00,960 --> 01:05:03,039
object. And inside of here we have to

1562
01:05:03,039 --> 01:05:05,760
define two key properties. First of all,

1563
01:05:05,760 --> 01:05:07,839
the client ID. For now, this will be an

1564
01:05:07,839 --> 01:05:10,240
empty string. And then also the client

1565
01:05:10,240 --> 01:05:12,400
secret. Again, for now, this will be an

1566
01:05:12,400 --> 01:05:14,640
empty string. So, where do we get our

1567
01:05:14,640 --> 01:05:16,799
client ID from? And where do we get our

1568
01:05:16,799 --> 01:05:19,039
client secret from? Well, who would have

1569
01:05:19,039 --> 01:05:21,200
thought? From the GitHub website. So,

1570
01:05:21,200 --> 01:05:23,280
let's head over to github.com. I will

1571
01:05:23,280 --> 01:05:25,200
blur out a few things. And then I want

1572
01:05:25,200 --> 01:05:27,200
to go to the settings. Then we want to

1573
01:05:27,200 --> 01:05:29,359
scroll to the bottom. And here you will

1574
01:05:29,359 --> 01:05:31,760
find the developer settings. Then I want

1575
01:05:31,760 --> 01:05:34,480
to click on OF apps. And we want to

1576
01:05:34,480 --> 01:05:37,520
create a new O of app. So first of all,

1577
01:05:37,520 --> 01:05:40,079
we have to provide an application name.

1578
01:05:40,079 --> 01:05:42,160
This will be Marshall. So I will spell

1579
01:05:42,160 --> 01:05:44,880
it correctly. Marshall LMS. Then for the

1580
01:05:44,880 --> 01:05:47,440
homepage URL, this will be localhost

1581
01:05:47,440 --> 01:05:50,400
3000. So I will copy it and paste it.

1582
01:05:50,400 --> 01:05:51,920
And then we want to also add an

1583
01:05:51,920 --> 01:05:54,240
authorization callback URL. So let's

1584
01:05:54,240 --> 01:05:55,760
head over to the better of

1585
01:05:55,760 --> 01:05:57,599
documentation. And then I want to click

1586
01:05:57,599 --> 01:06:00,319
on authentication. And then right here I

1587
01:06:00,319 --> 01:06:02,559
want to click on GitHub. This is what we

1588
01:06:02,559 --> 01:06:04,559
are using right now. And as you see it

1589
01:06:04,559 --> 01:06:07,039
says, make sure to set the redirect URL

1590
01:06:07,039 --> 01:06:12,520
to localhost 3000/ AI/off/callback/Gitub

1591
01:06:13,039 --> 01:06:15,200
for local development. And since we are

1592
01:06:15,200 --> 01:06:17,599
in local development, we can copy this

1593
01:06:17,599 --> 01:06:20,160
URL. Let's again go back and then I will

1594
01:06:20,160 --> 01:06:23,440
paste it right here. So again, localhost

1595
01:06:23,440 --> 01:06:27,640
3000/ AI/off/callback/github.

1596
01:06:28,400 --> 01:06:30,799
Then I don't want to enable device flow.

1597
01:06:30,799 --> 01:06:33,440
And then I can register my application

1598
01:06:33,440 --> 01:06:35,760
right here. We will get a client ID. I

1599
01:06:35,760 --> 01:06:37,839
will copy it. Go back and instead of

1600
01:06:37,839 --> 01:06:40,240
pasting it right here, I will instead

1601
01:06:40,240 --> 01:06:42,799
paste it into my env file because this

1602
01:06:42,799 --> 01:06:45,920
at the end of the day is a secret. So I

1603
01:06:45,920 --> 01:06:49,520
will create a github_client

1604
01:06:49,520 --> 01:06:51,680
ID and this will be equal to the value

1605
01:06:51,680 --> 01:06:53,920
that I just copied. And then I want to

1606
01:06:53,920 --> 01:06:56,480
also generate a client secret. So let's

1607
01:06:56,480 --> 01:06:58,720
click on this button. So as you see my

1608
01:06:58,720 --> 01:07:01,039
client secret got generated and it's

1609
01:07:01,039 --> 01:07:03,599
important that you copy the secret now

1610
01:07:03,599 --> 01:07:05,599
because you won't be able to see it

1611
01:07:05,599 --> 01:07:08,000
again. So I will copy it then I can go

1612
01:07:08,000 --> 01:07:10,880
back and I want to create a new ID or a

1613
01:07:10,880 --> 01:07:12,480
new environment variable and this will

1614
01:07:12,480 --> 01:07:14,400
be the github

1615
01:07:14,400 --> 01:07:16,799
secret and you know what let me uh

1616
01:07:16,799 --> 01:07:18,799
rename these environment variables. So

1617
01:07:18,799 --> 01:07:20,720
this uh first one will be of

1618
01:07:20,720 --> 01:07:23,599
undersc_github_client

1619
01:07:23,599 --> 01:07:25,760
id and then the second one will be also

1620
01:07:25,760 --> 01:07:28,400
of un_github

1621
01:07:28,400 --> 01:07:30,480
secret and then this will be equal to

1622
01:07:30,480 --> 01:07:32,960
the value that I just copied. So this is

1623
01:07:32,960 --> 01:07:34,880
finished. Let me copy the off github

1624
01:07:34,880 --> 01:07:36,960
client ID. Let's go back and then for

1625
01:07:36,960 --> 01:07:39,760
the client ID I want to pass my process

1626
01:07:39,760 --> 01:07:42,000
uh env

1627
01:07:42,000 --> 01:07:44,319
client ID. Then for the client secret I

1628
01:07:44,319 --> 01:07:46,559
can also copy the name. I can go back

1629
01:07:46,559 --> 01:07:49,280
and again I want to pass it using my

1630
01:07:49,280 --> 01:07:51,440
process.env. So I will say

1631
01:07:51,440 --> 01:07:53,599
process.env.off

1632
01:07:53,599 --> 01:07:56,160
github secret. As you see I get two

1633
01:07:56,160 --> 01:07:58,000
errors and it says right here type

1634
01:07:58,000 --> 01:08:00,559
string or undefined is not assignable to

1635
01:08:00,559 --> 01:08:02,640
type string. So what's the problem?

1636
01:08:02,640 --> 01:08:04,720
Well, TypeScript currently does not know

1637
01:08:04,720 --> 01:08:07,760
if your secrets are defined or not. So

1638
01:08:07,760 --> 01:08:09,680
there are two ways to fix it. We could

1639
01:08:09,680 --> 01:08:11,920
either right here just say as string and

1640
01:08:11,920 --> 01:08:14,160
then also for the second one I could say

1641
01:08:14,160 --> 01:08:16,400
as string. And as you see the error goes

1642
01:08:16,400 --> 01:08:18,799
away. So you could say, "Hey Jan, let's

1643
01:08:18,799 --> 01:08:21,040
continue." Sure, we could do that. But

1644
01:08:21,040 --> 01:08:23,199
still, we don't verify right now that

1645
01:08:23,199 --> 01:08:25,199
the environment variable actually

1646
01:08:25,199 --> 01:08:28,000
exists. We just say, "Hey, in theory, it

1647
01:08:28,000 --> 01:08:30,400
should exist. Don't throw an error." But

1648
01:08:30,400 --> 01:08:32,640
honestly, I don't really know if we have

1649
01:08:32,640 --> 01:08:34,880
this environment variable. Therefore, in

1650
01:08:34,880 --> 01:08:38,239
this video, we will implement T3 env. So

1651
01:08:38,239 --> 01:08:40,880
T3 envy here says, "Forgetting

1652
01:08:40,880 --> 01:08:42,799
environment variables during build can

1653
01:08:42,799 --> 01:08:45,759
be a hassle and difficult to debug if a

1654
01:08:45,759 --> 01:08:47,839
buck is caused by a missing environment

1655
01:08:47,839 --> 01:08:50,319
varable. This package provides a simple

1656
01:08:50,319 --> 01:08:52,400
way to define environment varables

1657
01:08:52,400 --> 01:08:55,040
validation for your app. This library

1658
01:08:55,040 --> 01:08:57,520
does all the grunt work for you. Simply

1659
01:08:57,520 --> 01:08:59,679
define your schema and use your

1660
01:08:59,679 --> 01:09:02,640
environment vables safely. So in the

1661
01:09:02,640 --> 01:09:05,120
sidebar we can click on next.js because

1662
01:09:05,120 --> 01:09:08,640
we use Nex.js JS as our framework and we

1663
01:09:08,640 --> 01:09:10,880
have to install two dependencies. First

1664
01:09:10,880 --> 01:09:13,359
of all, the T3 package itself, the

1665
01:09:13,359 --> 01:09:16,080
dependency and also Zot. So what is

1666
01:09:16,080 --> 01:09:18,880
Zord? Well, Zot is a TypeScript first

1667
01:09:18,880 --> 01:09:21,600
schema validation library with static

1668
01:09:21,600 --> 01:09:24,400
type inference. Zot will help us to

1669
01:09:24,400 --> 01:09:27,279
create a Zot schema. So Zot at the end

1670
01:09:27,279 --> 01:09:29,120
of the day pretty much allows you to

1671
01:09:29,120 --> 01:09:31,440
write rules. So we will say in the Z

1672
01:09:31,440 --> 01:09:34,880
schema, hey our env schema will have a

1673
01:09:34,880 --> 01:09:37,600
GitHub ID, a GitHub secret, a database

1674
01:09:37,600 --> 01:09:40,719
URL, some sort of other secret and then

1675
01:09:40,719 --> 01:09:43,839
we will use T3 or T3 will take the Z

1676
01:09:43,839 --> 01:09:46,000
schema and then it will compare your Z

1677
01:09:46,000 --> 01:09:48,319
schema against your ENV file. So right

1678
01:09:48,319 --> 01:09:50,719
here if I open my ENV file, I have all

1679
01:09:50,719 --> 01:09:53,040
of these secrets. If I for example

1680
01:09:53,040 --> 01:09:55,040
delete the off GitHub secret, it will

1681
01:09:55,040 --> 01:09:57,199
throw an error and it will say, "Hey,

1682
01:09:57,199 --> 01:09:59,520
when I compare the Z schema against your

1683
01:09:59,520 --> 01:10:02,000
env file, I see that there's one

1684
01:10:02,000 --> 01:10:03,760
environment variable missing." In this

1685
01:10:03,760 --> 01:10:05,920
case, the off GitHub secret. And this is

1686
01:10:05,920 --> 01:10:08,000
a huge benefit for us because we will

1687
01:10:08,000 --> 01:10:10,320
now know definitively that our

1688
01:10:10,320 --> 01:10:12,719
environment variables are defined. So,

1689
01:10:12,719 --> 01:10:14,400
let's copy the first installation

1690
01:10:14,400 --> 01:10:17,440
command because we are not using JSR. So

1691
01:10:17,440 --> 01:10:19,600
I will just copy it and then in our

1692
01:10:19,600 --> 01:10:21,600
terminal I will just paste it right

1693
01:10:21,600 --> 01:10:23,520
here. And also right here they mention

1694
01:10:23,520 --> 01:10:25,840
although we'll use sort as examples

1695
01:10:25,840 --> 01:10:28,000
throughout these docs you can use any

1696
01:10:28,000 --> 01:10:30,400
validator. Honestly zord is pretty much

1697
01:10:30,400 --> 01:10:32,640
the industry standard and that's also

1698
01:10:32,640 --> 01:10:35,520
why we will use sort in this video. So

1699
01:10:35,520 --> 01:10:37,679
right here they already provide us with

1700
01:10:37,679 --> 01:10:40,159
an example schema. So let's just copy

1701
01:10:40,159 --> 01:10:42,320
it. Then let's go back and I want to

1702
01:10:42,320 --> 01:10:44,960
create in my lip folder. So right here a

1703
01:10:44,960 --> 01:10:48,400
new file which will be called env.ts.

1704
01:10:48,400 --> 01:10:50,640
Then I will paste what I just copied.

1705
01:10:50,640 --> 01:10:52,560
And again what do we do right here?

1706
01:10:52,560 --> 01:10:54,640
Well, first of all we create this env

1707
01:10:54,640 --> 01:10:56,880
variable. This constant. This is equal

1708
01:10:56,880 --> 01:11:00,960
to create env. Create env

1709
01:11:00,960 --> 01:11:03,440
schema. Right here we define all of our

1710
01:11:03,440 --> 01:11:05,679
variables. And as you see there's a

1711
01:11:05,679 --> 01:11:08,080
slight distinction. We can either define

1712
01:11:08,080 --> 01:11:10,560
server side variables or client side

1713
01:11:10,560 --> 01:11:13,440
variables. If we look at our env file,

1714
01:11:13,440 --> 01:11:15,360
you will see that all of these secrets

1715
01:11:15,360 --> 01:11:18,080
are server side specific. Therefore, our

1716
01:11:18,080 --> 01:11:20,320
client will be empty, which means I can

1717
01:11:20,320 --> 01:11:22,159
just delete the client. We won't have

1718
01:11:22,159 --> 01:11:24,320
any client secrets right now. This also

1719
01:11:24,320 --> 01:11:26,239
means we don't need the object. And

1720
01:11:26,239 --> 01:11:28,880
also, here's a very important comment.

1721
01:11:28,880 --> 01:11:31,360
If you're using Nex.js which has a

1722
01:11:31,360 --> 01:11:34,400
smaller version than 13.4, you will need

1723
01:11:34,400 --> 01:11:36,560
to specify the runtime environment

1724
01:11:36,560 --> 01:11:39,520
manually. But since we using a Nex.js JS

1725
01:11:39,520 --> 01:11:41,679
with a version which is bigger than

1726
01:11:41,679 --> 01:11:44,640
13.4. We only need to dstructure the

1727
01:11:44,640 --> 01:11:46,880
client variables. So let's delete this

1728
01:11:46,880 --> 01:11:49,440
one-time environment object and instead

1729
01:11:49,440 --> 01:11:51,760
let's uncomment this experimental

1730
01:11:51,760 --> 01:11:53,760
one-time env.

1731
01:11:53,760 --> 01:11:56,080
So again inside of here we have to only

1732
01:11:56,080 --> 01:11:58,719
destructure the client vables since we

1733
01:11:58,719 --> 01:12:00,719
don't have any right now. This will just

1734
01:12:00,719 --> 01:12:03,840
be an empty object. So let's also define

1735
01:12:03,840 --> 01:12:06,400
all of our server environment viables.

1736
01:12:06,400 --> 01:12:08,960
First of all, we have our database URL.

1737
01:12:08,960 --> 01:12:10,960
This is already defined right here. The

1738
01:12:10,960 --> 01:12:13,840
second secret is our better off secret.

1739
01:12:13,840 --> 01:12:15,760
So, I will copy it and paste it right

1740
01:12:15,760 --> 01:12:18,560
here. This will be of type Z.string. And

1741
01:12:18,560 --> 01:12:21,120
we want to have a minimum length of one.

1742
01:12:21,120 --> 01:12:24,239
The next secret is our better off URL.

1743
01:12:24,239 --> 01:12:26,400
Let's copy it, paste it, and this will

1744
01:12:26,400 --> 01:12:29,040
be equal or this will be of type Z dot

1745
01:12:29,040 --> 01:12:31,199
string. And to be specific, this will be

1746
01:12:31,199 --> 01:12:34,159
an URL, which means let's append the URL

1747
01:12:34,159 --> 01:12:37,199
method at the end. Then we also have the

1748
01:12:37,199 --> 01:12:40,000
off GitHub client ID secret. So I will

1749
01:12:40,000 --> 01:12:42,159
copy it, paste it and this will be equal

1750
01:12:42,159 --> 01:12:44,640
or this will be of type Z.string and

1751
01:12:44,640 --> 01:12:47,360
then I can also append dot minimum one.

1752
01:12:47,360 --> 01:12:49,520
So at least a minimum character length

1753
01:12:49,520 --> 01:12:52,000
of one and the last environment variable

1754
01:12:52,000 --> 01:12:54,719
for now is our of GitHub secret. I will

1755
01:12:54,719 --> 01:12:56,880
copy it, paste it and this will be of

1756
01:12:56,880 --> 01:12:59,840
type Z.string and then of course minimum

1757
01:12:59,840 --> 01:13:02,159
one. So this should be already it which

1758
01:13:02,159 --> 01:13:04,560
means I can close this env file. I can

1759
01:13:04,560 --> 01:13:06,960
close this env file and instead of now

1760
01:13:06,960 --> 01:13:09,840
getting our secret through this process

1761
01:13:09,840 --> 01:13:12,880
env we can use our env. So let's delete

1762
01:13:12,880 --> 01:13:14,960
this. Let's also delete this right here.

1763
01:13:14,960 --> 01:13:17,840
And right here I want to import env. ENV

1764
01:13:17,840 --> 01:13:20,320
is imported from the env file. Please

1765
01:13:20,320 --> 01:13:22,480
don't import it from process because it

1766
01:13:22,480 --> 01:13:25,199
won't work. Import it from the env file.

1767
01:13:25,199 --> 01:13:27,600
And then we want to get our client ID.

1768
01:13:27,600 --> 01:13:29,679
And as you see we also get auto

1769
01:13:29,679 --> 01:13:31,920
completion which is huge. I mean I

1770
01:13:31,920 --> 01:13:33,920
misspelled already so many environment

1771
01:13:33,920 --> 01:13:36,159
variables in my career. So this is a

1772
01:13:36,159 --> 01:13:38,719
huge timesaver. So we want to get our

1773
01:13:38,719 --> 01:13:40,960
off GitHub client ID. And then for our

1774
01:13:40,960 --> 01:13:43,760
client secret I can also say env dot and

1775
01:13:43,760 --> 01:13:45,920
again we get autocomp completion. And I

1776
01:13:45,920 --> 01:13:48,480
want to get my off GitHub secret. And as

1777
01:13:48,480 --> 01:13:50,640
you also see I don't have to mark these

1778
01:13:50,640 --> 01:13:53,679
secrets as string and that's because T3

1779
01:13:53,679 --> 01:13:56,679
envile

1780
01:13:57,040 --> 01:13:59,760
time. So at compile time it goes through

1781
01:13:59,760 --> 01:14:02,640
our env file. It see the user defined

1782
01:14:02,640 --> 01:14:04,400
all of these environment variables.

1783
01:14:04,400 --> 01:14:06,480
Let's check the Z schema. Does it

1784
01:14:06,480 --> 01:14:08,640
compare correctly? Yes, it compares

1785
01:14:08,640 --> 01:14:11,280
correctly which means all of the all of

1786
01:14:11,280 --> 01:14:13,280
the secrets are defined and that's why

1787
01:14:13,280 --> 01:14:15,679
also TypeScript and first them as type

1788
01:14:15,679 --> 01:14:17,760
string. So we are almost finished with

1789
01:14:17,760 --> 01:14:19,600
setting up better off and I want to

1790
01:14:19,600 --> 01:14:22,159
finally allow my users even though I

1791
01:14:22,159 --> 01:14:24,640
don't have any users to sign up or in

1792
01:14:24,640 --> 01:14:27,280
other words sign in with GitHub. So

1793
01:14:27,280 --> 01:14:28,640
let's head over back to the

1794
01:14:28,640 --> 01:14:30,640
documentation. I will go to the get

1795
01:14:30,640 --> 01:14:33,040
started guide and to be specific to the

1796
01:14:33,040 --> 01:14:35,199
installation guide. So we are finished

1797
01:14:35,199 --> 01:14:36,960
with step number one with step number

1798
01:14:36,960 --> 01:14:38,880
two with step number three with step

1799
01:14:38,880 --> 01:14:41,199
number four. Oh my god with step number

1800
01:14:41,199 --> 01:14:43,840
five with step number six and the next

1801
01:14:43,840 --> 01:14:46,320
step is step number seven and this is to

1802
01:14:46,320 --> 01:14:49,440
mount a route handler. So to handle API

1803
01:14:49,440 --> 01:14:51,440
requests you need to set up a route

1804
01:14:51,440 --> 01:14:53,920
handler on your server. This will then

1805
01:14:53,920 --> 01:14:56,880
allow the user to finally sign up, sign

1806
01:14:56,880 --> 01:14:59,760
in, sign out, uh create organizations,

1807
01:14:59,760 --> 01:15:01,520
even though we won't allow it, but just

1808
01:15:01,520 --> 01:15:03,679
in general, this is needed for all of

1809
01:15:03,679 --> 01:15:06,400
the operations. So right here, they have

1810
01:15:06,400 --> 01:15:08,560
a few examples for pretty much all of

1811
01:15:08,560 --> 01:15:12,000
the popular frameworks. We use Next.js.

1812
01:15:12,000 --> 01:15:13,760
And I want to first of all copy the

1813
01:15:13,760 --> 01:15:16,480
route structure. So if I zoom in uh

1814
01:15:16,480 --> 01:15:18,719
you'll see that the route structure is

1815
01:15:18,719 --> 01:15:21,120
slappi/off

1816
01:15:21,120 --> 01:15:23,840
/all/out.ts.

1817
01:15:23,840 --> 01:15:25,760
So here's a little trick. We can just

1818
01:15:25,760 --> 01:15:28,480
copy everything right here. So API of we

1819
01:15:28,480 --> 01:15:30,880
can just copy it. Then I can go back and

1820
01:15:30,880 --> 01:15:33,360
then in my explorer instead of creating

1821
01:15:33,360 --> 01:15:35,760
a separate folder or and first of all I

1822
01:15:35,760 --> 01:15:37,679
want to go into the app folder and then

1823
01:15:37,679 --> 01:15:39,920
instead of creating a new folder I want

1824
01:15:39,920 --> 01:15:42,080
to create a new file. And then if I

1825
01:15:42,080 --> 01:15:44,400
paste this route structure into this

1826
01:15:44,400 --> 01:15:46,960
route it or into this file it will

1827
01:15:46,960 --> 01:15:49,199
automatically create the correct folder

1828
01:15:49,199 --> 01:15:51,760
structure. So we now have an API folder

1829
01:15:51,760 --> 01:15:54,159
in all folder then this all folder and

1830
01:15:54,159 --> 01:15:56,719
then we have this route.ts. And again

1831
01:15:56,719 --> 01:15:58,719
please make sure that you create this

1832
01:15:58,719 --> 01:16:01,520
route handler in the app folder. And as

1833
01:16:01,520 --> 01:16:04,159
you see I also interchange the term

1834
01:16:04,159 --> 01:16:07,760
route handler and API route quite a bit.

1835
01:16:07,760 --> 01:16:09,600
So what's the difference? Well, there

1836
01:16:09,600 --> 01:16:11,760
literally is no difference. A route

1837
01:16:11,760 --> 01:16:14,880
handler is an API route. An API route is

1838
01:16:14,880 --> 01:16:17,679
a route handler. In my humble opinion,

1839
01:16:17,679 --> 01:16:20,080
route handler is just a term created by

1840
01:16:20,080 --> 01:16:23,600
the Nex.js team for marketing purposes

1841
01:16:23,600 --> 01:16:25,440
because at the end of the day, it's

1842
01:16:25,440 --> 01:16:28,080
literally just an API route. Therefore,

1843
01:16:28,080 --> 01:16:30,080
call it however you want to call it. It

1844
01:16:30,080 --> 01:16:32,560
does not matter. Then I want to copy

1845
01:16:32,560 --> 01:16:35,280
this code example. I then we can go back

1846
01:16:35,280 --> 01:16:37,440
and I will paste it inside of here. So

1847
01:16:37,440 --> 01:16:39,360
we have finished with our route handler

1848
01:16:39,360 --> 01:16:41,520
and let's see what the next step is and

1849
01:16:41,520 --> 01:16:44,239
step number eight is to create a client

1850
01:16:44,239 --> 01:16:46,719
instance. So the client site library

1851
01:16:46,719 --> 01:16:49,120
will help you to interact with the off

1852
01:16:49,120 --> 01:16:51,440
server. Better off comes with a client

1853
01:16:51,440 --> 01:16:53,920
for all the popular web frameworks

1854
01:16:53,920 --> 01:16:56,159
including vanilla JavaScript. So let's

1855
01:16:56,159 --> 01:16:57,600
scroll a bit to the bottom and right

1856
01:16:57,600 --> 01:17:00,000
here they already have a code example.

1857
01:17:00,000 --> 01:17:02,480
So I will just copy it and then we can

1858
01:17:02,480 --> 01:17:05,520
go back and then in my lip folder I will

1859
01:17:05,520 --> 01:17:09,679
create a new file called off-client.ts

1860
01:17:09,679 --> 01:17:11,360
and then I will just paste the code

1861
01:17:11,360 --> 01:17:13,520
inside of here. As you see we also have

1862
01:17:13,520 --> 01:17:15,280
a comment right here and it says the

1863
01:17:15,280 --> 01:17:18,159
base URL of the server optional if

1864
01:17:18,159 --> 01:17:20,320
you're using the same domain. As you

1865
01:17:20,320 --> 01:17:23,360
know we use Nex.js and the client and

1866
01:17:23,360 --> 01:17:26,159
server are both I guess routed to the

1867
01:17:26,159 --> 01:17:28,080
same domain. Therefore we can just

1868
01:17:28,080 --> 01:17:30,320
delete the space URL. We don't need it.

1869
01:17:30,320 --> 01:17:31,840
You can leave it there if you want to.

1870
01:17:31,840 --> 01:17:33,760
It does not matter. Then let's go back.

1871
01:17:33,760 --> 01:17:35,679
What's the next step? Well, there is no

1872
01:17:35,679 --> 01:17:38,159
next step. That's it. You are now ready

1873
01:17:38,159 --> 01:17:40,560
to use better off in your application.

1874
01:17:40,560 --> 01:17:43,120
Continue to basic usage to learn how to

1875
01:17:43,120 --> 01:17:46,159
use the off instance to sign in users.

1876
01:17:46,159 --> 01:17:48,159
Yeah, I mean, let's try it out. So,

1877
01:17:48,159 --> 01:17:50,400
let's go to basic usage. And if I scroll

1878
01:17:50,400 --> 01:17:52,239
a bit to the bottom, it will say right

1879
01:17:52,239 --> 01:17:54,719
here that we can use our off client to

1880
01:17:54,719 --> 01:17:58,320
sign up our users. So let's sign up our

1881
01:17:58,320 --> 01:18:01,440
users with GitHub. Let's go. So I will

1882
01:18:01,440 --> 01:18:04,800
go back to my uh page.tsx. So to my sign

1883
01:18:04,800 --> 01:18:07,280
in route or lockin route and then as you

1884
01:18:07,280 --> 01:18:09,360
all know we already render our button

1885
01:18:09,360 --> 01:18:11,199
right here. And when the user clicks on

1886
01:18:11,199 --> 01:18:13,679
this button we want to call pretty much

1887
01:18:13,679 --> 01:18:15,600
uh better off. And then better off

1888
01:18:15,600 --> 01:18:18,239
should sign in the user using GitHub or

1889
01:18:18,239 --> 01:18:19,840
it should pretty much manage the whole

1890
01:18:19,840 --> 01:18:22,000
authentication flow. So let's scroll a

1891
01:18:22,000 --> 01:18:23,600
bit to the top. Let's go above the

1892
01:18:23,600 --> 01:18:25,920
return statement and let's create a new

1893
01:18:25,920 --> 01:18:29,280
async function. So async function and I

1894
01:18:29,280 --> 01:18:32,480
will call it signin with GitHub and then

1895
01:18:32,480 --> 01:18:34,960
in the function I want to start the off

1896
01:18:34,960 --> 01:18:37,280
or in other words the signin flow using

1897
01:18:37,280 --> 01:18:40,400
the off client which we just created. So

1898
01:18:40,400 --> 01:18:43,199
inside of here I will say await off

1899
01:18:43,199 --> 01:18:45,840
client and off client is imported from

1900
01:18:45,840 --> 01:18:48,239
our lip folder and then I want to use

1901
01:18:48,239 --> 01:18:50,960
the signin method. But now you might ask

1902
01:18:50,960 --> 01:18:53,520
me, hey Jan, wouldn't it be smarter to

1903
01:18:53,520 --> 01:18:56,080
use the sign up method? I mean, there's

1904
01:18:56,080 --> 01:18:58,960
a quite big probability that the user

1905
01:18:58,960 --> 01:19:01,679
pretty much uses our application for the

1906
01:19:01,679 --> 01:19:04,480
very first time. Well, this is actually

1907
01:19:04,480 --> 01:19:06,800
a very good question and the simple

1908
01:19:06,800 --> 01:19:10,000
answer is no. But why is the answer no?

1909
01:19:10,000 --> 01:19:11,840
Well, the thing is right here, we want

1910
01:19:11,840 --> 01:19:13,520
to allow the user to sign in with

1911
01:19:13,520 --> 01:19:16,560
GitHub. GitHub is an ooth off provider.

1912
01:19:16,560 --> 01:19:19,040
And when using O of off, there's no such

1913
01:19:19,040 --> 01:19:22,159
thing as signing up a user. You can only

1914
01:19:22,159 --> 01:19:24,480
sign in a user. And that's also the

1915
01:19:24,480 --> 01:19:26,560
reason why we will use the sign-in

1916
01:19:26,560 --> 01:19:28,320
method. Because when you use the sign-in

1917
01:19:28,320 --> 01:19:31,120
method, you can call the social method.

1918
01:19:31,120 --> 01:19:33,520
But if you use the sign up method that

1919
01:19:33,520 --> 01:19:36,080
you can't call a social method, there's

1920
01:19:36,080 --> 01:19:38,800
only email. And the thing is signing up

1921
01:19:38,800 --> 01:19:41,520
a user only works with email and

1922
01:19:41,520 --> 01:19:44,239
password. It does not work with O off

1923
01:19:44,239 --> 01:19:46,400
and it also does not work with magic

1924
01:19:46,400 --> 01:19:48,480
links and that's why I right here use

1925
01:19:48,480 --> 01:19:51,040
the sign in method and then we want to

1926
01:19:51,040 --> 01:19:53,280
call the social method because I want to

1927
01:19:53,280 --> 01:19:55,920
allow the user to sign in using GitHub.

1928
01:19:55,920 --> 01:19:58,320
Then we want to invoke it the struct and

1929
01:19:58,320 --> 01:20:00,320
inside of here I have to provide a few

1930
01:20:00,320 --> 01:20:03,120
properties. First of all the provider I

1931
01:20:03,120 --> 01:20:05,040
want to allow the user to sign in with

1932
01:20:05,040 --> 01:20:08,000
GitHub. The next step is to provide the

1933
01:20:08,000 --> 01:20:10,719
call back URL. This is the URL where we

1934
01:20:10,719 --> 01:20:12,880
will redirect the user to after a

1935
01:20:12,880 --> 01:20:14,880
successful signin. And I want to

1936
01:20:14,880 --> 01:20:17,440
redirect the user to our index page.

1937
01:20:17,440 --> 01:20:20,320
This means an empty slash. Then we want

1938
01:20:20,320 --> 01:20:23,600
to also provide fetch options. And fetch

1939
01:20:23,600 --> 01:20:26,320
options or in the fetch options you can

1940
01:20:26,320 --> 01:20:28,880
listen for specific events like for

1941
01:20:28,880 --> 01:20:32,239
example the onsuccess event or the onour

1942
01:20:32,239 --> 01:20:35,040
event and we want to specifically listen

1943
01:20:35,040 --> 01:20:37,440
for these two events. So this is an

1944
01:20:37,440 --> 01:20:39,600
object. Let's open it. And I want you

1945
01:20:39,600 --> 01:20:42,640
first of all listen uh for the onsuccess

1946
01:20:42,640 --> 01:20:45,280
event. And then this will be equal to a

1947
01:20:45,280 --> 01:20:47,840
standard error function. And inside of

1948
01:20:47,840 --> 01:20:50,880
here if the signin was successful I want

1949
01:20:50,880 --> 01:20:53,280
to return a toast. And for our toast

1950
01:20:53,280 --> 01:20:55,920
library we installed sona. So let's

1951
01:20:55,920 --> 01:20:58,640
import our toast from sona. And then I

1952
01:20:58,640 --> 01:21:00,880
want to use the success method because I

1953
01:21:00,880 --> 01:21:03,600
want to showcase a success toast. And

1954
01:21:03,600 --> 01:21:06,000
then we can invoke it and as an argument

1955
01:21:06,000 --> 01:21:08,080
we can provide the message which will be

1956
01:21:08,080 --> 01:21:10,400
showcased when rendering the toast. And

1957
01:21:10,400 --> 01:21:13,679
I want to say hey signed in with GitHub

1958
01:21:13,679 --> 01:21:17,280
uh comma you will be redirected dot dot

1959
01:21:17,280 --> 01:21:19,840
dot. Then we can also listen uh for the

1960
01:21:19,840 --> 01:21:22,800
on event. This will be also equal to a

1961
01:21:22,800 --> 01:21:25,199
standard error function. And then inside

1962
01:21:25,199 --> 01:21:27,520
of here again I want to return a toast

1963
01:21:27,520 --> 01:21:29,600
dot error this time. And for the

1964
01:21:29,600 --> 01:21:31,760
message, you know what? Let's render the

1965
01:21:31,760 --> 01:21:34,159
actual error message. So, right here in

1966
01:21:34,159 --> 01:21:36,719
our params, we can get the error object

1967
01:21:36,719 --> 01:21:39,040
itself. And then uh we can return the

1968
01:21:39,040 --> 01:21:42,400
error. Eerror dossage. But here's the

1969
01:21:42,400 --> 01:21:44,560
thing. Currently, our toast library

1970
01:21:44,560 --> 01:21:46,719
won't work because if you head over to

1971
01:21:46,719 --> 01:21:50,480
the SH CN website and type in sona, uh

1972
01:21:50,480 --> 01:21:52,560
let me go right here, sona. And if you

1973
01:21:52,560 --> 01:21:54,480
scroll a bit to the bottom, you will see

1974
01:21:54,480 --> 01:21:56,560
that the first step is to first of all

1975
01:21:56,560 --> 01:21:58,480
add the toaster component or in other

1976
01:21:58,480 --> 01:22:01,600
words render it in our layout. So uh

1977
01:22:01,600 --> 01:22:03,840
let's go back. Uh then I want to open

1978
01:22:03,840 --> 01:22:06,239
the root layout and then in the theme

1979
01:22:06,239 --> 01:22:08,719
provider but underneath the children I

1980
01:22:08,719 --> 01:22:11,120
want to import the toaster component.

1981
01:22:11,120 --> 01:22:12,880
Please make sure that you import it from

1982
01:22:12,880 --> 01:22:15,280
the components and not from Sona. The

1983
01:22:15,280 --> 01:22:18,000
toast itself is imported from Sona but

1984
01:22:18,000 --> 01:22:20,480
the toaster is imported from the

1985
01:22:20,480 --> 01:22:22,880
components. This is self-closing and

1986
01:22:22,880 --> 01:22:25,040
later on we might also configure the

1987
01:22:25,040 --> 01:22:27,440
toaster a bit but for now we will just

1988
01:22:27,440 --> 01:22:30,800
leave it as is. So I can again close our

1989
01:22:30,800 --> 01:22:33,440
layout and you know what in theory this

1990
01:22:33,440 --> 01:22:35,199
should already be finished and it should

1991
01:22:35,199 --> 01:22:37,679
also work. So we want to now call this

1992
01:22:37,679 --> 01:22:39,679
function. So uh right here for the

1993
01:22:39,679 --> 01:22:42,400
button I can add a on click handler and

1994
01:22:42,400 --> 01:22:44,320
then this will be equal or I want to

1995
01:22:44,320 --> 01:22:46,480
then call the sign in with GitHub

1996
01:22:46,480 --> 01:22:48,960
function. Also currently there's one

1997
01:22:48,960 --> 01:22:51,760
problem. Before I test it out, I want to

1998
01:22:51,760 --> 01:22:54,320
pretty much also show a pending state

1999
01:22:54,320 --> 01:22:56,400
because currently if a user would click

2000
01:22:56,400 --> 01:22:58,719
on this button, there would be zero

2001
01:22:58,719 --> 01:23:00,480
pending states. We would just pretty

2002
01:23:00,480 --> 01:23:02,560
much wait until the request would be

2003
01:23:02,560 --> 01:23:04,639
finished and then we would redirect the

2004
01:23:04,639 --> 01:23:06,560
user. But I want to give the user

2005
01:23:06,560 --> 01:23:09,360
feedback and also if the submission is

2006
01:23:09,360 --> 01:23:11,440
currently pending, I want to make the

2007
01:23:11,440 --> 01:23:14,159
button disabled. So this means we want

2008
01:23:14,159 --> 01:23:16,560
to somehow uh keep track of the

2009
01:23:16,560 --> 01:23:18,719
progress. Now there are two options to

2010
01:23:18,719 --> 01:23:21,360
do that. Either the I guess standard way

2011
01:23:21,360 --> 01:23:23,679
of using a use state hook and then

2012
01:23:23,679 --> 01:23:25,679
having a pending or a getter which will

2013
01:23:25,679 --> 01:23:28,000
be pending and the setter set pending.

2014
01:23:28,000 --> 01:23:30,239
This works but you know what there's a

2015
01:23:30,239 --> 01:23:33,199
even better solution and this is the use

2016
01:23:33,199 --> 01:23:35,440
transition hook. Now if you have never

2017
01:23:35,440 --> 01:23:37,360
heard about the use transition hook then

2018
01:23:37,360 --> 01:23:39,920
let's head over to the React website. So

2019
01:23:39,920 --> 01:23:42,560
react.dev and then inside of here I will

2020
01:23:42,560 --> 01:23:44,320
search for use transition. Use

2021
01:23:44,320 --> 01:23:46,719
transition is a React hook that lets you

2022
01:23:46,719 --> 01:23:49,199
render a part of the UI in the

2023
01:23:49,199 --> 01:23:51,600
background. Here's the thing. React the

2024
01:23:51,600 --> 01:23:54,159
React documentation is sometimes great

2025
01:23:54,159 --> 01:23:57,120
and sometimes absolute trash because

2026
01:23:57,120 --> 01:23:59,760
this s has a lot of words but it does

2027
01:23:59,760 --> 01:24:02,400
not explain anything. So what is meant

2028
01:24:02,400 --> 01:24:04,320
by this gibberish? Well, at the end of

2029
01:24:04,320 --> 01:24:06,639
the day, the use transition hook will

2030
01:24:06,639 --> 01:24:09,440
can be used to show a pending state. So

2031
01:24:09,440 --> 01:24:11,920
you start a transition, the code is run

2032
01:24:11,920 --> 01:24:13,840
in the transition and while the

2033
01:24:13,840 --> 01:24:16,000
transition is pretty much pending, the

2034
01:24:16,000 --> 01:24:18,400
is pending boolean is set to true. And

2035
01:24:18,400 --> 01:24:20,719
now you might also ask me, hey Jan, why

2036
01:24:20,719 --> 01:24:22,719
should we use the use transition hook if

2037
01:24:22,719 --> 01:24:24,880
there's also the use state hook? I mean

2038
01:24:24,880 --> 01:24:27,120
the end result is pretty much the same,

2039
01:24:27,120 --> 01:24:29,840
right? Well, there are a few caveats and

2040
01:24:29,840 --> 01:24:32,159
for example, right now we won't use it,

2041
01:24:32,159 --> 01:24:34,400
but later on we will use a revalidate

2042
01:24:34,400 --> 01:24:36,960
path function. This will revalidate our

2043
01:24:36,960 --> 01:24:39,600
cache. And the thing is the normal use

2044
01:24:39,600 --> 01:24:41,840
state hook won't take this revalidate

2045
01:24:41,840 --> 01:24:44,320
path function into account. So it will

2046
01:24:44,320 --> 01:24:46,639
stop the pending state earlier. Our code

2047
01:24:46,639 --> 01:24:48,480
will still run but the pending state

2048
01:24:48,480 --> 01:24:50,480
won't work anymore. If this currently

2049
01:24:50,480 --> 01:24:53,280
sounds confusing, don't worry. I will I

2050
01:24:53,280 --> 01:24:55,840
guess show you a live example later on.

2051
01:24:55,840 --> 01:24:58,400
Let's copy this code example. Let's go

2052
01:24:58,400 --> 01:25:01,040
back and then above our async function

2053
01:25:01,040 --> 01:25:03,440
but still in the export default function

2054
01:25:03,440 --> 01:25:05,520
I can paste this code. I want to then

2055
01:25:05,520 --> 01:25:08,320
import use transition from react. And

2056
01:25:08,320 --> 01:25:10,639
then also I want to rename the getter

2057
01:25:10,639 --> 01:25:13,199
and setup. So instead of is pending this

2058
01:25:13,199 --> 01:25:15,840
will be GitHub uh pending and instead of

2059
01:25:15,840 --> 01:25:18,000
start transition this will be start

2060
01:25:18,000 --> 01:25:20,480
GitHub transition. And then it pretty

2061
01:25:20,480 --> 01:25:22,639
much works exactly the same as a

2062
01:25:22,639 --> 01:25:24,960
standard uh use state hook. What we can

2063
01:25:24,960 --> 01:25:26,800
do right now is first of all copy all of

2064
01:25:26,800 --> 01:25:29,280
the code in this async function sign in

2065
01:25:29,280 --> 01:25:31,520
with GitHub. I will delete it for now

2066
01:25:31,520 --> 01:25:33,760
but please keep it in your clipboard.

2067
01:25:33,760 --> 01:25:35,760
And then inside of here I want to first

2068
01:25:35,760 --> 01:25:37,679
of all initialize the start GitHub

2069
01:25:37,679 --> 01:25:40,080
transition function. So let's say right

2070
01:25:40,080 --> 01:25:42,560
here start GitHub transition. Then I

2071
01:25:42,560 --> 01:25:44,719
want to invoke it inside of here. I want

2072
01:25:44,719 --> 01:25:47,520
to then create an async arrow function.

2073
01:25:47,520 --> 01:25:49,840
So let's say async and as mentioned this

2074
01:25:49,840 --> 01:25:52,080
will be an arrow function and then

2075
01:25:52,080 --> 01:25:54,400
inside of here I can again paste my

2076
01:25:54,400 --> 01:25:56,719
code. And how does this exactly work?

2077
01:25:56,719 --> 01:25:59,120
Well, again this start GitHub transition

2078
01:25:59,120 --> 01:26:02,320
function will start right now instantly.

2079
01:26:02,320 --> 01:26:04,400
It will then wait until this code is

2080
01:26:04,400 --> 01:26:06,880
finished and once it's finished it the

2081
01:26:06,880 --> 01:26:09,120
start GitHub transition function will

2082
01:26:09,120 --> 01:26:11,360
also see hey the transition the

2083
01:26:11,360 --> 01:26:13,280
submission is finished. Let's set the

2084
01:26:13,280 --> 01:26:16,000
GitHub pending boolean to false. And now

2085
01:26:16,000 --> 01:26:17,920
let's use this GitHub uh pending

2086
01:26:17,920 --> 01:26:20,480
boolean. So if I scroll to the bottom I

2087
01:26:20,480 --> 01:26:22,880
can add a disabled state for our button

2088
01:26:22,880 --> 01:26:24,960
and it will be equal to our GitHub

2089
01:26:24,960 --> 01:26:27,440
pending boolean. So if it's true our

2090
01:26:27,440 --> 01:26:30,000
button will be disabled. And then also

2091
01:26:30,000 --> 01:26:32,239
instead of just rendering sign in with

2092
01:26:32,239 --> 01:26:34,800
GitHub I want to render or I want to

2093
01:26:34,800 --> 01:26:37,199
create a turnary. So I will copy the

2094
01:26:37,199 --> 01:26:39,120
code again. Leave it in your clipboard.

2095
01:26:39,120 --> 01:26:40,719
And then let's create a turnary. And

2096
01:26:40,719 --> 01:26:43,360
let's say hey if GitHub pending is true

2097
01:26:43,360 --> 01:26:45,760
then I want to use a question mark and I

2098
01:26:45,760 --> 01:26:48,480
want to render the loader to icon. So I

2099
01:26:48,480 --> 01:26:50,480
want to get this loader to icon from

2100
01:26:50,480 --> 01:26:53,040
lucid react. This is self-closing. And

2101
01:26:53,040 --> 01:26:55,280
then I want to also add a class name.

2102
01:26:55,280 --> 01:26:57,679
And then this icon will have a size of

2103
01:26:57,679 --> 01:26:59,840
four, which means width four and height

2104
01:26:59,840 --> 01:27:02,560
four. And then also animate spin. This

2105
01:27:02,560 --> 01:27:05,199
means our icon will pretty much animate

2106
01:27:05,199 --> 01:27:07,280
and spin. And then underneath the loader

2107
01:27:07,280 --> 01:27:09,520
icon, I want to render a span. And then

2108
01:27:09,520 --> 01:27:12,159
I will just say loading dot dot dot. And

2109
01:27:12,159 --> 01:27:14,400
if GitHub pending is not true, then we

2110
01:27:14,400 --> 01:27:16,560
can use a colon. And I want to render

2111
01:27:16,560 --> 01:27:18,719
what I just copied. So let's again use

2112
01:27:18,719 --> 01:27:20,800
empty tags. And then I will paste this

2113
01:27:20,800 --> 01:27:23,920
GitHub icon and sign in with GitHub. So

2114
01:27:23,920 --> 01:27:26,000
what did we just do? Well, we set up the

2115
01:27:26,000 --> 01:27:28,239
use transition hook for our pending

2116
01:27:28,239 --> 01:27:31,040
states. This uh GitHub pending boolean

2117
01:27:31,040 --> 01:27:33,440
is used to first of all set our disabled

2118
01:27:33,440 --> 01:27:35,600
state, but it's also used for our

2119
01:27:35,600 --> 01:27:38,080
turnary. If we are currently submitting,

2120
01:27:38,080 --> 01:27:40,400
then we will render loading dot dot dot.

2121
01:27:40,400 --> 01:27:42,400
If we are not submitting, then we will

2122
01:27:42,400 --> 01:27:45,280
render our initial default state. So

2123
01:27:45,280 --> 01:27:46,960
let's test it out. I will save

2124
01:27:46,960 --> 01:27:49,520
everything. I will restart my dev server

2125
01:27:49,520 --> 01:27:51,760
and I already know that we will get an

2126
01:27:51,760 --> 01:27:53,840
error. But don't worry, we will fix it

2127
01:27:53,840 --> 01:27:56,400
together. So right here it says you are

2128
01:27:56,400 --> 01:27:58,719
importing a component that needs use

2129
01:27:58,719 --> 01:28:01,199
transition. This react hook only works

2130
01:28:01,199 --> 01:28:04,080
in a client component. To fix it, mark

2131
01:28:04,080 --> 01:28:06,560
the file or its parent with the use

2132
01:28:06,560 --> 01:28:09,440
client directive. So what's the problem?

2133
01:28:09,440 --> 01:28:12,320
Well, right now we use two core things.

2134
01:28:12,320 --> 01:28:14,400
So first of all, I implemented the use

2135
01:28:14,400 --> 01:28:17,040
transition hook and also right here we

2136
01:28:17,040 --> 01:28:19,760
have this async function. So I'm not

2137
01:28:19,760 --> 01:28:22,320
sure if you knew it, but Nex.js builds

2138
01:28:22,320 --> 01:28:25,280
on top of two key principles, server

2139
01:28:25,280 --> 01:28:28,400
components and client components. What's

2140
01:28:28,400 --> 01:28:30,719
that? Good question. So if you go to the

2141
01:28:30,719 --> 01:28:32,960
documentation and if you search for how

2142
01:28:32,960 --> 01:28:35,360
to use server and client components,

2143
01:28:35,360 --> 01:28:37,360
then you will find this section. And

2144
01:28:37,360 --> 01:28:39,440
right here they say by default layouts

2145
01:28:39,440 --> 01:28:41,760
and pages are server components which

2146
01:28:41,760 --> 01:28:44,239
lets you fetch data and render parts of

2147
01:28:44,239 --> 01:28:47,440
your UI on the server. Optionally cache

2148
01:28:47,440 --> 01:28:50,080
the result and stream it to the client.

2149
01:28:50,080 --> 01:28:52,400
When you need interactivity or browser

2150
01:28:52,400 --> 01:28:55,679
APIs you can use client components to

2151
01:28:55,679 --> 01:28:58,320
layer in functionality. So here's the

2152
01:28:58,320 --> 01:29:02,159
thing. As a default all pages in XJS are

2153
01:29:02,159 --> 01:29:04,960
server components. Server components run

2154
01:29:04,960 --> 01:29:06,880
completely on the server side. This

2155
01:29:06,880 --> 01:29:08,960
means all of the content is rendered on

2156
01:29:08,960 --> 01:29:11,760
the server side with zero JavaScript.

2157
01:29:11,760 --> 01:29:14,000
This keeps your bundle size small and it

2158
01:29:14,000 --> 01:29:16,239
also makes your application super fast

2159
01:29:16,239 --> 01:29:18,320
because again there's no client side

2160
01:29:18,320 --> 01:29:20,880
JavaScript involved. The only problem is

2161
01:29:20,880 --> 01:29:23,600
you can't create any interactivity. The

2162
01:29:23,600 --> 01:29:25,040
use transition hook creates

2163
01:29:25,040 --> 01:29:27,600
interactivity. This async function

2164
01:29:27,600 --> 01:29:29,920
creates interactivity and this does not

2165
01:29:29,920 --> 01:29:32,560
work in a server component because again

2166
01:29:32,560 --> 01:29:35,600
these interactive I guess features need

2167
01:29:35,600 --> 01:29:37,840
a JavaScript bundle to use or to

2168
01:29:37,840 --> 01:29:40,000
implement interactivity you want to

2169
01:29:40,000 --> 01:29:42,080
implement client components. So right

2170
01:29:42,080 --> 01:29:44,080
here they have a section when to use

2171
01:29:44,080 --> 01:29:46,800
server and client components. The client

2172
01:29:46,800 --> 01:29:48,480
and server environment have different

2173
01:29:48,480 --> 01:29:50,800
capabilities. Server and client

2174
01:29:50,800 --> 01:29:52,960
components allow you to run logic in

2175
01:29:52,960 --> 01:29:55,520
each environment depending on your use

2176
01:29:55,520 --> 01:29:57,520
case. So you want to use client

2177
01:29:57,520 --> 01:29:59,440
components when you for example need

2178
01:29:59,440 --> 01:30:02,000
state event handler. So for example the

2179
01:30:02,000 --> 01:30:05,120
onclick handler life cycle logic browser

2180
01:30:05,120 --> 01:30:08,400
only APIs or custom hooks and then you

2181
01:30:08,400 --> 01:30:10,560
want to use server components when you

2182
01:30:10,560 --> 01:30:12,719
need to fetch data when you want to use

2183
01:30:12,719 --> 01:30:15,040
API keys when you want to reduce the

2184
01:30:15,040 --> 01:30:17,520
amount of JavaScript in the browser when

2185
01:30:17,520 --> 01:30:20,480
you want to imp uh improve FCP. So at

2186
01:30:20,480 --> 01:30:22,400
the end of the day, think of everything

2187
01:30:22,400 --> 01:30:24,480
like this. You want to use server

2188
01:30:24,480 --> 01:30:26,960
components. Whenever you fetch data,

2189
01:30:26,960 --> 01:30:30,080
every component, every page as a default

2190
01:30:30,080 --> 01:30:32,560
is a server component. If you need

2191
01:30:32,560 --> 01:30:34,880
interactivity, then you can either mark

2192
01:30:34,880 --> 01:30:38,000
the page itself as a client component or

2193
01:30:38,000 --> 01:30:40,320
you can create a separate component and

2194
01:30:40,320 --> 01:30:42,719
mark the component itself as a client

2195
01:30:42,719 --> 01:30:45,040
component. The thing is when you mark a

2196
01:30:45,040 --> 01:30:47,280
component as a client component or a

2197
01:30:47,280 --> 01:30:50,159
page then you won't be able to fetch any

2198
01:30:50,159 --> 01:30:52,560
data anymore in this page because it's

2199
01:30:52,560 --> 01:30:55,199
now a client component and it does not

2200
01:30:55,199 --> 01:30:57,600
only run on the server side anymore. So

2201
01:30:57,600 --> 01:30:58,800
that's something that you should

2202
01:30:58,800 --> 01:31:00,960
remember. So let's mark this whole page

2203
01:31:00,960 --> 01:31:04,080
as use client. And then if I again go

2204
01:31:04,080 --> 01:31:06,400
back you will see that this error will

2205
01:31:06,400 --> 01:31:08,719
go away. And also maybe before I test

2206
01:31:08,719 --> 01:31:10,880
out everything um we don't really want

2207
01:31:10,880 --> 01:31:13,440
to render this message generated from

2208
01:31:13,440 --> 01:31:15,840
better off. Instead let's just say right

2209
01:31:15,840 --> 01:31:18,159
here internal server error. This is a

2210
01:31:18,159 --> 01:31:20,239
bit better and I guess let's test it

2211
01:31:20,239 --> 01:31:22,560
out. So I will click on sign in with

2212
01:31:22,560 --> 01:31:24,639
GitHub. We have this nice pending state

2213
01:31:24,639 --> 01:31:27,679
and we get an error toast internal

2214
01:31:27,679 --> 01:31:30,560
server error. What what's the problem?

2215
01:31:30,560 --> 01:31:32,800
So let's go back and if I open my

2216
01:31:32,800 --> 01:31:35,280
terminal, it says right here, better off

2217
01:31:35,280 --> 01:31:38,000
error model verification does not exist

2218
01:31:38,000 --> 01:31:40,960
in the database. If I open my schema, I

2219
01:31:40,960 --> 01:31:43,120
literally have right here a verification

2220
01:31:43,120 --> 01:31:45,520
model. So what's the problem? Well,

2221
01:31:45,520 --> 01:31:47,679
actually the problem is a very simple

2222
01:31:47,679 --> 01:31:50,159
one. So let's head over back to the Neon

2223
01:31:50,159 --> 01:31:52,560
console to the Neon dashboard and let's

2224
01:31:52,560 --> 01:31:54,880
click right here on overview or not on

2225
01:31:54,880 --> 01:31:58,239
overview but on tables. If you wait for

2226
01:31:58,239 --> 01:32:00,480
the loading spinner, you will see, huh,

2227
01:32:00,480 --> 01:32:02,880
we only have one table. What's the

2228
01:32:02,880 --> 01:32:05,120
problem? Well, when we generated our

2229
01:32:05,120 --> 01:32:08,080
schema, our new tables, we did not sync

2230
01:32:08,080 --> 01:32:10,960
with uh our schema with our database.

2231
01:32:10,960 --> 01:32:12,960
Therefore, let's open our terminal. And

2232
01:32:12,960 --> 01:32:15,760
then inside of here, I will run PNPM DLX

2233
01:32:15,760 --> 01:32:18,560
Prisma DB push. This will now take my

2234
01:32:18,560 --> 01:32:21,199
local schema and it will sync it with my

2235
01:32:21,199 --> 01:32:23,120
database schema or it will pretty much

2236
01:32:23,120 --> 01:32:26,719
push these new tables into the uh remote

2237
01:32:26,719 --> 01:32:29,120
real database schema. This means if I

2238
01:32:29,120 --> 01:32:31,679
again go back and do a hard refresh, you

2239
01:32:31,679 --> 01:32:33,600
will see the new tables right here. And

2240
01:32:33,600 --> 01:32:35,520
this also means that our authentication

2241
01:32:35,520 --> 01:32:38,480
flow should now finally work. So let's

2242
01:32:38,480 --> 01:32:40,560
again go back and then in my terminal I

2243
01:32:40,560 --> 01:32:42,719
will again restart my dev server. And

2244
01:32:42,719 --> 01:32:45,360
then I can also do a hard refresh right

2245
01:32:45,360 --> 01:32:48,239
here. So my server has restarted. And if

2246
01:32:48,239 --> 01:32:50,159
I click on the button on the magic

2247
01:32:50,159 --> 01:32:53,040
button, we have a pending state and we

2248
01:32:53,040 --> 01:32:55,520
got redirected. So I will write here

2249
01:32:55,520 --> 01:32:58,080
authorize myself. And let's see. I

2250
01:32:58,080 --> 01:33:00,639
should get redirected to the index page.

2251
01:33:00,639 --> 01:33:03,679
Wow, I got redirected. But was this

2252
01:33:03,679 --> 01:33:06,159
successful? Well, I got an email on my

2253
01:33:06,159 --> 01:33:07,920
phone, which means I in theory

2254
01:33:07,920 --> 01:33:10,880
authenticated. Um maybe we can open our

2255
01:33:10,880 --> 01:33:13,440
inspector and then we can go to our

2256
01:33:13,440 --> 01:33:15,760
application. Let's see what do we have

2257
01:33:15,760 --> 01:33:18,800
right here. Uhhuh. Better off session.

2258
01:33:18,800 --> 01:33:20,960
So if you open your inspector and go to

2259
01:33:20,960 --> 01:33:22,639
the application and then go to the

2260
01:33:22,639 --> 01:33:24,960
cookies, you will find this better off

2261
01:33:24,960 --> 01:33:28,080
session cookie. And this means that our

2262
01:33:28,080 --> 01:33:31,120
authentication flow was successful. So

2263
01:33:31,120 --> 01:33:32,880
let's close this again. And you know

2264
01:33:32,880 --> 01:33:35,040
what? I want to kind of render my

2265
01:33:35,040 --> 01:33:37,120
session data right here in the index

2266
01:33:37,120 --> 01:33:40,159
page. So uh we can go back to our

2267
01:33:40,159 --> 01:33:43,920
page.tsx to our root index page. And

2268
01:33:43,920 --> 01:33:45,679
right here I want to get my user

2269
01:33:45,679 --> 01:33:47,600
session. Now here's the thing. Better

2270
01:33:47,600 --> 01:33:50,080
off is a very nice authentication

2271
01:33:50,080 --> 01:33:52,320
library because it allows you to get the

2272
01:33:52,320 --> 01:33:54,960
user session natively both on the server

2273
01:33:54,960 --> 01:33:57,600
side but also on the client side. Let's

2274
01:33:57,600 --> 01:33:59,440
for now first of all get the user

2275
01:33:59,440 --> 01:34:01,679
session on the server side. So let's

2276
01:34:01,679 --> 01:34:03,760
again head over to the documentation.

2277
01:34:03,760 --> 01:34:06,800
Then I want to click on integrations and

2278
01:34:06,800 --> 01:34:09,840
I want to click on next.js right here.

2279
01:34:09,840 --> 01:34:11,600
If you scroll a bit to the bottom, then

2280
01:34:11,600 --> 01:34:13,600
you will see right here react server

2281
01:34:13,600 --> 01:34:16,239
components and server actions. And to

2282
01:34:16,239 --> 01:34:18,320
get the user session, we want to use

2283
01:34:18,320 --> 01:34:20,560
this code right here. So we want to call

2284
01:34:20,560 --> 01:34:23,120
the API, then this get session method.

2285
01:34:23,120 --> 01:34:25,600
And then we want to pass headers. So I

2286
01:34:25,600 --> 01:34:27,600
will just copy this code example and

2287
01:34:27,600 --> 01:34:29,679
paste it right here above our return

2288
01:34:29,679 --> 01:34:32,239
statement. Again, constant session is

2289
01:34:32,239 --> 01:34:35,760
equal to await. Aapi get session. And

2290
01:34:35,760 --> 01:34:37,679
then we will pass our headers right

2291
01:34:37,679 --> 01:34:40,159
here. As you see, we get quite a few

2292
01:34:40,159 --> 01:34:42,239
errors. What's the problem? First of

2293
01:34:42,239 --> 01:34:45,199
all, we want to uh import off from our

2294
01:34:45,199 --> 01:34:48,000
lip folder. The next error is for our

2295
01:34:48,000 --> 01:34:49,920
await expression. So, it says right

2296
01:34:49,920 --> 01:34:52,480
here, await expressions are only allowed

2297
01:34:52,480 --> 01:34:54,960
with an async functions. And at the top

2298
01:34:54,960 --> 01:34:57,600
levels of modules and right here, we

2299
01:34:57,600 --> 01:34:59,520
also already have a quick fix. And it

2300
01:34:59,520 --> 01:35:01,679
says, did you mean to mark this function

2301
01:35:01,679 --> 01:35:04,400
as async? And yes, I want to mark this

2302
01:35:04,400 --> 01:35:07,120
function as an export default async

2303
01:35:07,120 --> 01:35:09,520
function. But now you might ask me, hey

2304
01:35:09,520 --> 01:35:12,560
Jan, is this even safe? Should you even

2305
01:35:12,560 --> 01:35:14,960
mark a function as asynchronous,

2306
01:35:14,960 --> 01:35:17,840
especially an export default function?

2307
01:35:17,840 --> 01:35:20,239
And the answer or the simple answer is

2308
01:35:20,239 --> 01:35:22,880
yes. This is completely safe to do. The

2309
01:35:22,880 --> 01:35:25,199
thing is this is a server component. As

2310
01:35:25,199 --> 01:35:27,920
mentioned, every page as a default is a

2311
01:35:27,920 --> 01:35:30,239
server component. It only becomes the

2312
01:35:30,239 --> 01:35:32,560
client component if you mark it with

2313
01:35:32,560 --> 01:35:35,280
this use client directive. But if it's a

2314
01:35:35,280 --> 01:35:37,760
server component, everything on the

2315
01:35:37,760 --> 01:35:39,760
server side, which also means you can

2316
01:35:39,760 --> 01:35:42,880
mark your function as a sync. Let's also

2317
01:35:42,880 --> 01:35:45,040
import headers. And headers is imported

2318
01:35:45,040 --> 01:35:48,080
from next/ headers and then we can

2319
01:35:48,080 --> 01:35:50,480
render our user session. So underneath

2320
01:35:50,480 --> 01:35:52,960
the theme toggle I will create a turnary

2321
01:35:52,960 --> 01:35:55,440
and I will say hey if we have a session

2322
01:35:55,440 --> 01:35:57,679
then let's use the question mark and I

2323
01:35:57,679 --> 01:36:01,040
want to render the session do user dot

2324
01:36:01,040 --> 01:36:03,760
name and if we don't have a session then

2325
01:36:03,760 --> 01:36:05,520
I will just render a button which is

2326
01:36:05,520 --> 01:36:07,840
imported from the components and I will

2327
01:36:07,840 --> 01:36:10,480
say lock out. If I save this and again

2328
01:36:10,480 --> 01:36:12,719
go back and do a hard refresh you will

2329
01:36:12,719 --> 01:36:15,280
see on the top left corner my name I

2330
01:36:15,280 --> 01:36:16,719
will also create a bit of padding

2331
01:36:16,719 --> 01:36:18,480
because right now it's quite hard to see

2332
01:36:18,480 --> 01:36:20,960
something. So padding let's say 24. And

2333
01:36:20,960 --> 01:36:23,280
if I go back yeah Jan. So this worked

2334
01:36:23,280 --> 01:36:25,920
exactly as expected. Let's again head

2335
01:36:25,920 --> 01:36:28,719
over back to our login page. And here we

2336
01:36:28,719 --> 01:36:30,880
have one problem. So as you see I'm

2337
01:36:30,880 --> 01:36:32,800
authenticated right? I render my name

2338
01:36:32,800 --> 01:36:35,600
Jan. But if I'm authenticated I don't

2339
01:36:35,600 --> 01:36:37,920
want to be able or the user shouldn't be

2340
01:36:37,920 --> 01:36:40,480
able to reach the login route. Therefore

2341
01:36:40,480 --> 01:36:42,880
we want to also check if the user has a

2342
01:36:42,880 --> 01:36:44,880
valid session. But now we have a huge

2343
01:36:44,880 --> 01:36:46,719
problem because again if I open this

2344
01:36:46,719 --> 01:36:49,119
page.tsx tsx then you will probably

2345
01:36:49,119 --> 01:36:51,520
remember that I marked this component as

2346
01:36:51,520 --> 01:36:54,000
a client component and also if you

2347
01:36:54,000 --> 01:36:56,320
remember I said if we have a client

2348
01:36:56,320 --> 01:36:58,719
component then we cannot fetch data on

2349
01:36:58,719 --> 01:37:02,000
the server side in this component that's

2350
01:37:02,000 --> 01:37:04,239
a huge problem and the thing is I want

2351
01:37:04,239 --> 01:37:06,480
to still fetch the ser or the session on

2352
01:37:06,480 --> 01:37:08,320
the server side I know I could fetch it

2353
01:37:08,320 --> 01:37:10,239
on the client side but I want to do it

2354
01:37:10,239 --> 01:37:12,639
on the server side so how can we fix

2355
01:37:12,639 --> 01:37:14,960
this problem well the answer or the

2356
01:37:14,960 --> 01:37:17,520
solution is quite simple we want to uh

2357
01:37:17,520 --> 01:37:19,520
create a separate component for our

2358
01:37:19,520 --> 01:37:21,520
login form and then render all of the

2359
01:37:21,520 --> 01:37:23,520
code inside of there. We will mark the

2360
01:37:23,520 --> 01:37:26,000
component as a client component. But the

2361
01:37:26,000 --> 01:37:28,960
page itself, this page.tsx should be a

2362
01:37:28,960 --> 01:37:30,880
server component and then we will fetch

2363
01:37:30,880 --> 01:37:34,000
the user session in this page. So let's

2364
01:37:34,000 --> 01:37:36,320
do that. So in this dockin folder, I

2365
01:37:36,320 --> 01:37:38,480
will create another folder and this will

2366
01:37:38,480 --> 01:37:40,960
be called underscore components. Why do

2367
01:37:40,960 --> 01:37:43,280
I call it underscore components? Good

2368
01:37:43,280 --> 01:37:45,119
question. So if you go to the

2369
01:37:45,119 --> 01:37:47,199
documentation and search for private

2370
01:37:47,199 --> 01:37:49,920
folders, you will find this section. And

2371
01:37:49,920 --> 01:37:52,000
right here it says private folders can

2372
01:37:52,000 --> 01:37:55,040
be created by prefixing a folder with an

2373
01:37:55,040 --> 01:37:57,920
underscore underscore folder name. This

2374
01:37:57,920 --> 01:37:59,920
indicates the folder is a private

2375
01:37:59,920 --> 01:38:02,239
implementation detail and should not be

2376
01:38:02,239 --> 01:38:04,960
considered by the routing system thereby

2377
01:38:04,960 --> 01:38:07,679
opting the folder and all its subfolders

2378
01:38:07,679 --> 01:38:10,639
out of routing. So this means that this

2379
01:38:10,639 --> 01:38:12,639
folder right here is just a private

2380
01:38:12,639 --> 01:38:15,360
folder. And to be specific, this folder

2381
01:38:15,360 --> 01:38:17,760
will only store very specific

2382
01:38:17,760 --> 01:38:20,400
components. So as you see or as you all

2383
01:38:20,400 --> 01:38:22,320
know, we have already a components

2384
01:38:22,320 --> 01:38:25,119
folder in our root directory. Inside of

2385
01:38:25,119 --> 01:38:27,199
here, we store all of our general

2386
01:38:27,199 --> 01:38:29,520
components, our card component, the

2387
01:38:29,520 --> 01:38:31,520
button component, the checkbox

2388
01:38:31,520 --> 01:38:34,080
component. These components are reused

2389
01:38:34,080 --> 01:38:36,960
all throughout the application. But all

2390
01:38:36,960 --> 01:38:40,000
of the components which are very I guess

2391
01:38:40,000 --> 01:38:42,320
feature specific well I want to store

2392
01:38:42,320 --> 01:38:44,560
them right alongside the code. So for

2393
01:38:44,560 --> 01:38:46,480
example this component which we will

2394
01:38:46,480 --> 01:38:48,880
create in a second will only be used in

2395
01:38:48,880 --> 01:38:51,840
this login page. It won't be reused and

2396
01:38:51,840 --> 01:38:54,080
that's also why I create a components

2397
01:38:54,080 --> 01:38:56,960
folder right in this login folder. So

2398
01:38:56,960 --> 01:38:58,960
right here let's create a new file and

2399
01:38:58,960 --> 01:39:01,760
this will be the lockin form.tsx

2400
01:39:01,760 --> 01:39:04,159
file. As mentioned we need a JavaScript

2401
01:39:04,159 --> 01:39:06,719
bundle. So let's mark this component as

2402
01:39:06,719 --> 01:39:09,199
use client and then I can go back to my

2403
01:39:09,199 --> 01:39:12,320
page.tsx and I can literally copy

2404
01:39:12,320 --> 01:39:14,800
everything in the return statement. So I

2405
01:39:14,800 --> 01:39:16,480
will just copy it, go back and then

2406
01:39:16,480 --> 01:39:18,639
right here we can create an export

2407
01:39:18,639 --> 01:39:21,040
function. This will be lockin form and

2408
01:39:21,040 --> 01:39:23,360
then I can just open this function.

2409
01:39:23,360 --> 01:39:25,119
Let's create a return statement and then

2410
01:39:25,119 --> 01:39:27,040
I will paste everything that I just

2411
01:39:27,040 --> 01:39:29,520
copied. As you see we currently get a

2412
01:39:29,520 --> 01:39:32,080
few errors but that's not important.

2413
01:39:32,080 --> 01:39:34,400
Let's go back to the login page. I can

2414
01:39:34,400 --> 01:39:35,840
delete everything in the return

2415
01:39:35,840 --> 01:39:38,320
statement. And then I can instead render

2416
01:39:38,320 --> 01:39:41,040
or import the lockin form component.

2417
01:39:41,040 --> 01:39:43,280
This is self-closing. And then I want to

2418
01:39:43,280 --> 01:39:45,920
also copy this async function and the

2419
01:39:45,920 --> 01:39:48,159
use transition hook. I will copy it and

2420
01:39:48,159 --> 01:39:50,480
then paste it right here into my lockin

2421
01:39:50,480 --> 01:39:52,880
form. And as you see I still get quite a

2422
01:39:52,880 --> 01:39:54,719
few errors. And that's because we have

2423
01:39:54,719 --> 01:39:56,960
to import all of these I guess

2424
01:39:56,960 --> 01:39:59,199
components, features and stuff like

2425
01:39:59,199 --> 01:40:01,199
that. So let's go back to the login

2426
01:40:01,199 --> 01:40:03,360
page. And then I will just copy all of

2427
01:40:03,360 --> 01:40:05,760
these import paths. I will go back and

2428
01:40:05,760 --> 01:40:08,159
paste them right here on the top. As you

2429
01:40:08,159 --> 01:40:10,560
see, I don't get any errors anymore. And

2430
01:40:10,560 --> 01:40:13,760
if I go back to my page.tsx, everything

2431
01:40:13,760 --> 01:40:16,639
will still work as expected. And then in

2432
01:40:16,639 --> 01:40:19,280
my login page, I can now finally fetch

2433
01:40:19,280 --> 01:40:21,520
my user session. So I will create a

2434
01:40:21,520 --> 01:40:23,600
constant session and this will be equal

2435
01:40:23,600 --> 01:40:27,760
to a of is imported from the lip folder

2436
01:40:27,760 --> 01:40:30,560
API and then get session. This is the

2437
01:40:30,560 --> 01:40:32,639
method which I want to use. Then let's

2438
01:40:32,639 --> 01:40:34,719
invoke it. That's the structure. And

2439
01:40:34,719 --> 01:40:36,560
inside of here we have to pass our

2440
01:40:36,560 --> 01:40:39,199
headers. So headers will be equal to

2441
01:40:39,199 --> 01:40:41,840
await headers. And headers is imported

2442
01:40:41,840 --> 01:40:44,480
from next/ headers. I want to also

2443
01:40:44,480 --> 01:40:46,880
invoke it. And now we get one error. And

2444
01:40:46,880 --> 01:40:49,360
it says hey await expressions are only

2445
01:40:49,360 --> 01:40:51,760
allowed with an async functions. So

2446
01:40:51,760 --> 01:40:53,440
let's mark this function as

2447
01:40:53,440 --> 01:40:55,760
asynchronous. And this error will go

2448
01:40:55,760 --> 01:40:57,840
away. But now we have a new error.

2449
01:40:57,840 --> 01:41:00,080
What's the problem? Well, prevent client

2450
01:41:00,080 --> 01:41:02,560
components from being async functions.

2451
01:41:02,560 --> 01:41:04,880
Right now, this page is still marked as

2452
01:41:04,880 --> 01:41:07,119
use client. So, let's delete the use

2453
01:41:07,119 --> 01:41:09,600
client directive. And this error is also

2454
01:41:09,600 --> 01:41:11,760
gone. As mentioned right here, I want to

2455
01:41:11,760 --> 01:41:14,560
check if the user has a valid session.

2456
01:41:14,560 --> 01:41:16,400
Therefore, let's create an if statement.

2457
01:41:16,400 --> 01:41:18,400
And let's say, hey, if we have a

2458
01:41:18,400 --> 01:41:20,960
session, then let's open this and I want

2459
01:41:20,960 --> 01:41:23,840
to redirect the user to the index page.

2460
01:41:23,840 --> 01:41:26,159
So, let's create a return redirect. and

2461
01:41:26,159 --> 01:41:28,560
redirect is imported from next

2462
01:41:28,560 --> 01:41:31,440
slashnavigation and then as an argument

2463
01:41:31,440 --> 01:41:34,000
I have to provide the URL to redirect

2464
01:41:34,000 --> 01:41:36,159
to. So in this case this will be the

2465
01:41:36,159 --> 01:41:39,360
index page. So an empty slash. If I

2466
01:41:39,360 --> 01:41:41,920
again go back and do a hard refresh you

2467
01:41:41,920 --> 01:41:44,080
will see that I will get redirected to

2468
01:41:44,080 --> 01:41:46,480
the index page. Let's again try to

2469
01:41:46,480 --> 01:41:49,840
navigate to /lockin. If I click on enter

2470
01:41:49,840 --> 01:41:52,480
I will instantly get redirected back to

2471
01:41:52,480 --> 01:41:55,040
the index page. And also what is this

2472
01:41:55,040 --> 01:41:58,159
redirect uh function? Good question. If

2473
01:41:58,159 --> 01:42:00,080
you hover over it, you will see this

2474
01:42:00,080 --> 01:42:02,159
function allows you to redirect the user

2475
01:42:02,159 --> 01:42:05,119
to another URL. It can be used in server

2476
01:42:05,119 --> 01:42:07,760
components, route handlers, and server

2477
01:42:07,760 --> 01:42:10,480
actions. So this only works on the

2478
01:42:10,480 --> 01:42:12,719
server side, but since this is a server

2479
01:42:12,719 --> 01:42:15,760
component, everything works as expected.

2480
01:42:15,760 --> 01:42:18,000
In a client component, you would use the

2481
01:42:18,000 --> 01:42:20,000
use router hook, but we will come to

2482
01:42:20,000 --> 01:42:23,199
that a bit later on. So I have currently

2483
01:42:23,199 --> 01:42:25,360
one problem. If I try to reach the

2484
01:42:25,360 --> 01:42:27,679
lockin route, I will get redirected back

2485
01:42:27,679 --> 01:42:30,000
to the index page. This is fine. This is

2486
01:42:30,000 --> 01:42:32,239
expected. But there's currently no way

2487
01:42:32,239 --> 01:42:34,239
for me to lock out. I mean, there's no

2488
01:42:34,239 --> 01:42:35,920
button. As you see right here, I render

2489
01:42:35,920 --> 01:42:38,880
my name Jan, but I want to render also a

2490
01:42:38,880 --> 01:42:41,119
lockout button and then I want to also

2491
01:42:41,119 --> 01:42:44,320
be able to lock out. So if we go back to

2492
01:42:44,320 --> 01:42:46,719
our codebase right here, we get the user

2493
01:42:46,719 --> 01:42:48,960
session on the server side and then we

2494
01:42:48,960 --> 01:42:51,360
have this turnary where I say hey if we

2495
01:42:51,360 --> 01:42:53,040
have a valid session then let's render

2496
01:42:53,040 --> 01:42:55,119
the username and if there's no valid

2497
01:42:55,119 --> 01:42:57,040
user session then instead of rendering

2498
01:42:57,040 --> 01:42:58,960
lock out I want you of course render

2499
01:42:58,960 --> 01:43:01,199
lockin. I mean if there's no session how

2500
01:43:01,199 --> 01:43:03,840
could a user lock out? So yeah the thing

2501
01:43:03,840 --> 01:43:06,480
is to lock out we have to use the off

2502
01:43:06,480 --> 01:43:08,719
client. So again, if I open it quickly,

2503
01:43:08,719 --> 01:43:10,719
this is our off client and we want to

2504
01:43:10,719 --> 01:43:13,360
use the off client to log out. But the

2505
01:43:13,360 --> 01:43:15,600
off client only works in client

2506
01:43:15,600 --> 01:43:17,679
components, but currently we get the

2507
01:43:17,679 --> 01:43:20,400
user session on the server side and you

2508
01:43:20,400 --> 01:43:22,800
can't use a client or something that

2509
01:43:22,800 --> 01:43:24,800
needs the client side in a server

2510
01:43:24,800 --> 01:43:26,960
environment. So what am I trying to tell

2511
01:43:26,960 --> 01:43:29,360
you? Well, we have to mark this page as

2512
01:43:29,360 --> 01:43:31,520
a client component and then we want to

2513
01:43:31,520 --> 01:43:34,000
get the user session on the client uh on

2514
01:43:34,000 --> 01:43:36,719
the client side instead uh instead of on

2515
01:43:36,719 --> 01:43:39,360
the server side. So let's go back to the

2516
01:43:39,360 --> 01:43:41,600
better off documentation. Then I want to

2517
01:43:41,600 --> 01:43:44,639
add over to the docs to basic usage and

2518
01:43:44,639 --> 01:43:46,400
then right here they have a section

2519
01:43:46,400 --> 01:43:49,040
called client side. So better off

2520
01:43:49,040 --> 01:43:51,440
provides a use session hook to easily

2521
01:43:51,440 --> 01:43:54,159
access session data on the client side.

2522
01:43:54,159 --> 01:43:56,719
This hook is implemented using nano

2523
01:43:56,719 --> 01:43:59,040
store and has support for each supported

2524
01:43:59,040 --> 01:44:01,760
framework and vanilla client ensuring

2525
01:44:01,760 --> 01:44:04,400
that any changes to the session such as

2526
01:44:04,400 --> 01:44:07,679
signing out are immediately reflected in

2527
01:44:07,679 --> 01:44:11,119
your UI. So right here we can just copy

2528
01:44:11,119 --> 01:44:13,679
this code example. I can go back and

2529
01:44:13,679 --> 01:44:15,600
then instead of rendering the or instead

2530
01:44:15,600 --> 01:44:17,520
of having this constant session I will

2531
01:44:17,520 --> 01:44:20,080
delete it and paste what I just copied.

2532
01:44:20,080 --> 01:44:22,320
Uh I can also delete this headers import

2533
01:44:22,320 --> 01:44:24,960
the off import and I will make or mark

2534
01:44:24,960 --> 01:44:28,639
this page as use client. If I again go

2535
01:44:28,639 --> 01:44:30,800
back we get one error. That's because we

2536
01:44:30,800 --> 01:44:33,119
have to delete this async modifier. And

2537
01:44:33,119 --> 01:44:35,840
then I want to also import my off client

2538
01:44:35,840 --> 01:44:38,080
from the lip folder. As you see we

2539
01:44:38,080 --> 01:44:40,159
structure right here four properties.

2540
01:44:40,159 --> 01:44:42,080
First of all the data itself. This means

2541
01:44:42,080 --> 01:44:44,000
the session and this could be either

2542
01:44:44,000 --> 01:44:46,800
defined or undefined. Then we also have

2543
01:44:46,800 --> 01:44:49,280
an error object. This will be again

2544
01:44:49,280 --> 01:44:51,280
defined if we have an error. If there's

2545
01:44:51,280 --> 01:44:53,360
no error, this will be undefined. And

2546
01:44:53,360 --> 01:44:56,320
then we also have this refetch function.

2547
01:44:56,320 --> 01:44:58,400
And with that, we can then refetch the

2548
01:44:58,400 --> 01:45:00,400
session. But we don't want to refetch

2549
01:45:00,400 --> 01:45:02,159
the session. We don't need this error.

2550
01:45:02,159 --> 01:45:04,239
And we also don't need the is pending

2551
01:45:04,239 --> 01:45:07,040
boolean. And we only need our session.

2552
01:45:07,040 --> 01:45:08,960
So since we now get our session on the

2553
01:45:08,960 --> 01:45:11,040
client side, it in theory should work.

2554
01:45:11,040 --> 01:45:13,600
So if I go back and do a hard refresh,

2555
01:45:13,600 --> 01:45:15,840
we see for a split second the login

2556
01:45:15,840 --> 01:45:17,840
button. That's because again we fetch on

2557
01:45:17,840 --> 01:45:19,119
the client side. This means on the

2558
01:45:19,119 --> 01:45:21,040
client side there's a little delay and

2559
01:45:21,040 --> 01:45:23,440
since we don't get a session instantly

2560
01:45:23,440 --> 01:45:25,760
we have a fall back and the fallback is

2561
01:45:25,760 --> 01:45:28,480
at the start false. So as a default the

2562
01:45:28,480 --> 01:45:31,119
session is false while our off client

2563
01:45:31,119 --> 01:45:33,440
fetches the user session. That's why we

2564
01:45:33,440 --> 01:45:35,520
render this lockin button for a split

2565
01:45:35,520 --> 01:45:37,840
second. But once we fetched our user

2566
01:45:37,840 --> 01:45:40,000
session and once better off sees that

2567
01:45:40,000 --> 01:45:42,400
the user has a valid session it renders

2568
01:45:42,400 --> 01:45:44,400
the username. So that's why you have the

2569
01:45:44,400 --> 01:45:46,719
splitsecond delay. Again, if I go back

2570
01:45:46,719 --> 01:45:49,119
and do a hard refresh for a millisecond,

2571
01:45:49,119 --> 01:45:51,119
we see this lock in button and then we

2572
01:45:51,119 --> 01:45:53,520
see, hey Jan, because I have a valid

2573
01:45:53,520 --> 01:45:55,920
session. Okay, I think you all know that

2574
01:45:55,920 --> 01:45:58,000
that's nothing groundbreaking. Uh let's

2575
01:45:58,000 --> 01:46:00,239
also render our lockout buttons. So I

2576
01:46:00,239 --> 01:46:03,280
can wrap this P tag in a div element or

2577
01:46:03,280 --> 01:46:05,520
with a div element. And then underneath

2578
01:46:05,520 --> 01:46:07,920
the P tag, I will again render a button

2579
01:46:07,920 --> 01:46:10,719
component and I will say lockout. This

2580
01:46:10,719 --> 01:46:13,280
lockout button should call a function.

2581
01:46:13,280 --> 01:46:15,600
So above the return statement, I will

2582
01:46:15,600 --> 01:46:18,639
create a function, an async function. It

2583
01:46:18,639 --> 01:46:21,440
will be called a sign out. And then I

2584
01:46:21,440 --> 01:46:23,920
can just open it inside of here or let's

2585
01:46:23,920 --> 01:46:25,280
again head over back to the

2586
01:46:25,280 --> 01:46:27,679
documentation. If you scroll a bit to

2587
01:46:27,679 --> 01:46:30,000
the top, you will find the section sign

2588
01:46:30,000 --> 01:46:32,639
out. So to sign out a user, you can use

2589
01:46:32,639 --> 01:46:35,040
the sign out function provided by the

2590
01:46:35,040 --> 01:46:37,760
client. So again, I can just copy this

2591
01:46:37,760 --> 01:46:40,400
code example. I can go back and paste it

2592
01:46:40,400 --> 01:46:42,880
inside of here. So as you see we just

2593
01:46:42,880 --> 01:46:45,679
say await offclients sign out. This is

2594
01:46:45,679 --> 01:46:47,840
the function and then again this sign

2595
01:46:47,840 --> 01:46:51,199
out function exposes fetch options and

2596
01:46:51,199 --> 01:46:53,920
fetch options as you know uh pretty much

2597
01:46:53,920 --> 01:46:56,719
gives you a few events. So on success,

2598
01:46:56,719 --> 01:46:59,040
on error and stuff like that, we want to

2599
01:46:59,040 --> 01:47:01,119
listen for the on success event because

2600
01:47:01,119 --> 01:47:03,600
if the user signed out successfully, we

2601
01:47:03,600 --> 01:47:05,760
want to redirect the user to the login

2602
01:47:05,760 --> 01:47:07,520
route or you know what, let me delete

2603
01:47:07,520 --> 01:47:09,840
the /loin. I want to redirect the user

2604
01:47:09,840 --> 01:47:12,239
to the index page. And also right here

2605
01:47:12,239 --> 01:47:14,960
they use router. What is router? So

2606
01:47:14,960 --> 01:47:17,199
again, let's head over to the next JS

2607
01:47:17,199 --> 01:47:19,520
documentation. And I know I could also

2608
01:47:19,520 --> 01:47:21,440
explain it without the documentation,

2609
01:47:21,440 --> 01:47:23,199
but I want to teach you that the

2610
01:47:23,199 --> 01:47:25,920
documentation is literally your best

2611
01:47:25,920 --> 01:47:28,719
friend. You want to always use it. So in

2612
01:47:28,719 --> 01:47:30,880
the documentation, we can s we can

2613
01:47:30,880 --> 01:47:33,440
search for use router. And then inside

2614
01:47:33,440 --> 01:47:35,440
of here, you will see the use router

2615
01:47:35,440 --> 01:47:37,600
hook allows you to programmatically

2616
01:47:37,600 --> 01:47:40,880
change routes inside client components.

2617
01:47:40,880 --> 01:47:43,440
Again, this page.tsx is marked with the

2618
01:47:43,440 --> 01:47:45,840
useclient directive. This means this is

2619
01:47:45,840 --> 01:47:48,560
a client component. And as you all know

2620
01:47:48,560 --> 01:47:50,800
uh for example we have this redirect

2621
01:47:50,800 --> 01:47:53,280
function. The redirect function only

2622
01:47:53,280 --> 01:47:55,600
works on the server side in the server

2623
01:47:55,600 --> 01:47:57,920
component in the server action and stuff

2624
01:47:57,920 --> 01:48:00,159
like that. And since this is a client

2625
01:48:00,159 --> 01:48:02,719
component we need to use the use router

2626
01:48:02,719 --> 01:48:04,880
hook. So let's go back and then above

2627
01:48:04,880 --> 01:48:06,800
this constant session I can create a

2628
01:48:06,800 --> 01:48:08,960
constant router and then this will be

2629
01:48:08,960 --> 01:48:11,840
equal to use router. Use router is

2630
01:48:11,840 --> 01:48:14,239
imported from next navigation. Please

2631
01:48:14,239 --> 01:48:16,080
make sure that you don't import it from

2632
01:48:16,080 --> 01:48:19,199
next slouter. It has to be imported from

2633
01:48:19,199 --> 01:48:22,080
next slashnavigation. Then I can invoke

2634
01:48:22,080 --> 01:48:24,960
it. And as you see this error is gone. I

2635
01:48:24,960 --> 01:48:27,119
want to now call this sign out function.

2636
01:48:27,119 --> 01:48:29,520
So right here for the lockout button I

2637
01:48:29,520 --> 01:48:31,760
can use an on click handler. And this

2638
01:48:31,760 --> 01:48:35,040
will be equal to sign out. So if I again

2639
01:48:35,040 --> 01:48:37,920
go back and do a hot uh refresh, I see

2640
01:48:37,920 --> 01:48:40,000
this lockout button right here. If I

2641
01:48:40,000 --> 01:48:42,320
click on lock out, I get locked out and

2642
01:48:42,320 --> 01:48:44,719
I again get my initial state which says

2643
01:48:44,719 --> 01:48:47,520
lock in. So I will again navigate to

2644
01:48:47,520 --> 01:48:50,239
/lockin and then I can again sign in

2645
01:48:50,239 --> 01:48:52,400
with GitHub and I got redirected back to

2646
01:48:52,400 --> 01:48:54,639
the index page. Let's also render a

2647
01:48:54,639 --> 01:48:56,880
toast for our sign out function. So

2648
01:48:56,880 --> 01:48:59,760
underneath the router I will call or I

2649
01:48:59,760 --> 01:49:02,080
will use uh my toast. So I will import

2650
01:49:02,080 --> 01:49:05,199
it from sona dosuccess and I will say

2651
01:49:05,199 --> 01:49:08,239
hey signed out successfully. This means

2652
01:49:08,239 --> 01:49:10,880
if I again go back and log out, signed

2653
01:49:10,880 --> 01:49:13,119
out successfully and as you see

2654
01:49:13,119 --> 01:49:16,000
everything worked as expected. So I can

2655
01:49:16,000 --> 01:49:18,639
again navigate to my login route and

2656
01:49:18,639 --> 01:49:20,719
then we can finally finish off this

2657
01:49:20,719 --> 01:49:23,199
authentication page by implementing

2658
01:49:23,199 --> 01:49:25,840
email signin. So, as mentioned already

2659
01:49:25,840 --> 01:49:28,239
at the start, when a user inputs his

2660
01:49:28,239 --> 01:49:30,480
email right here into the input, I want

2661
01:49:30,480 --> 01:49:33,280
to send an OTP, a little six-digit code

2662
01:49:33,280 --> 01:49:35,440
that then the user has to again type

2663
01:49:35,440 --> 01:49:38,080
into this website to verify that the

2664
01:49:38,080 --> 01:49:40,639
email belongs to this user. Also, I just

2665
01:49:40,639 --> 01:49:42,320
realized that I made a few spelling

2666
01:49:42,320 --> 01:49:44,239
mistakes. So, I will fix this quickly.

2667
01:49:44,239 --> 01:49:46,400
So, for the login form, I want to say

2668
01:49:46,400 --> 01:49:49,600
login with your GitHub or email account.

2669
01:49:49,600 --> 01:49:51,840
And then let's finally implement email

2670
01:49:51,840 --> 01:49:54,320
signin. So for that I want to go back to

2671
01:49:54,320 --> 01:49:56,800
the better of documentation and then we

2672
01:49:56,800 --> 01:49:59,199
can head over to the integrations or not

2673
01:49:59,199 --> 01:50:01,600
to the integrations but to the plugins.

2674
01:50:01,600 --> 01:50:03,199
So right here they offer a few

2675
01:50:03,199 --> 01:50:05,600
authentication plugins to factor

2676
01:50:05,600 --> 01:50:08,880
username anonymous magic link but I want

2677
01:50:08,880 --> 01:50:12,239
to use email OTP. So, the email OTP

2678
01:50:12,239 --> 01:50:15,199
plug-in allows users to sign in, verify

2679
01:50:15,199 --> 01:50:17,520
their email, or reset their password

2680
01:50:17,520 --> 01:50:20,560
using a one-time password, which is sent

2681
01:50:20,560 --> 01:50:23,280
to their email address. So, how can we

2682
01:50:23,280 --> 01:50:25,760
start using the email OTP? Well, the

2683
01:50:25,760 --> 01:50:28,159
first step is to add the plug-in to our

2684
01:50:28,159 --> 01:50:31,679
off config. So, to enable email OTP in

2685
01:50:31,679 --> 01:50:34,159
your app, you need to add the email OTP

2686
01:50:34,159 --> 01:50:36,560
plugin to your off config. So, let's

2687
01:50:36,560 --> 01:50:38,880
copy the import statement for the

2688
01:50:38,880 --> 01:50:40,960
plugin. Then I can open my off

2689
01:50:40,960 --> 01:50:43,199
configuration file. I will paste it on

2690
01:50:43,199 --> 01:50:44,880
top. And then underneath the social

2691
01:50:44,880 --> 01:50:47,040
providers, I want to get a plugins

2692
01:50:47,040 --> 01:50:49,360
property. And this will be equal to an

2693
01:50:49,360 --> 01:50:51,360
array. And then inside of here, I want

2694
01:50:51,360 --> 01:50:54,800
to initialize this email OTP. So I want

2695
01:50:54,800 --> 01:50:56,880
to invoke it. And then the structure.

2696
01:50:56,880 --> 01:50:59,280
And inside of here, we want to now send

2697
01:50:59,280 --> 01:51:02,239
a verification email to the user. So we

2698
01:51:02,239 --> 01:51:04,800
can right here say async. And then if I

2699
01:51:04,800 --> 01:51:07,040
click on control spacebar you will see

2700
01:51:07,040 --> 01:51:10,719
that I get the send verification OTP um

2701
01:51:10,719 --> 01:51:12,880
function then I can open this function

2702
01:51:12,880 --> 01:51:14,800
and inside of here for now I will just

2703
01:51:14,800 --> 01:51:16,960
create a comment and I will say hey

2704
01:51:16,960 --> 01:51:19,840
implement um I get I don't know sending

2705
01:51:19,840 --> 01:51:23,199
the email to the user also I can

2706
01:51:23,199 --> 01:51:25,440
destructure my params and I want to get

2707
01:51:25,440 --> 01:51:27,840
the email property itself this means the

2708
01:51:27,840 --> 01:51:29,920
email of the user and then I want to

2709
01:51:29,920 --> 01:51:32,159
also get the OTP which better off

2710
01:51:32,159 --> 01:51:34,719
generates. So the email is what the user

2711
01:51:34,719 --> 01:51:37,040
provides in our input right here. So

2712
01:51:37,040 --> 01:51:38,960
john@acample.com

2713
01:51:38,960 --> 01:51:41,199
and then the OTP is what better off

2714
01:51:41,199 --> 01:51:43,440
generates and what we will send to the

2715
01:51:43,440 --> 01:51:46,560
user itself. So to send emails to the

2716
01:51:46,560 --> 01:51:49,119
user we of course have to use some sort

2717
01:51:49,119 --> 01:51:51,760
of email service. Now there are a lot of

2718
01:51:51,760 --> 01:51:54,239
services on the market again good ones

2719
01:51:54,239 --> 01:51:57,599
bad ones very expensive ones very cheap

2720
01:51:57,599 --> 01:52:00,080
ones but in this video we will use

2721
01:52:00,080 --> 01:52:03,280
resend. So, Recent is an email service

2722
01:52:03,280 --> 01:52:06,239
and as they say, email for developers.

2723
01:52:06,239 --> 01:52:08,960
They offer both transactional and also

2724
01:52:08,960 --> 01:52:11,440
marketing emails. But in this video, we

2725
01:52:11,440 --> 01:52:14,159
will of course use transactional emails

2726
01:52:14,159 --> 01:52:16,000
because I mean marketing emails. We

2727
01:52:16,000 --> 01:52:17,920
don't even have any users right now. So,

2728
01:52:17,920 --> 01:52:19,599
let's scroll a bit to the bottom. So,

2729
01:52:19,599 --> 01:52:21,520
they have a lot of features and they are

2730
01:52:21,520 --> 01:52:23,280
very developer focused. This is by the

2731
01:52:23,280 --> 01:52:25,280
way not sponsored. You can also use any

2732
01:52:25,280 --> 01:52:27,599
other service. I honestly don't care to

2733
01:52:27,599 --> 01:52:30,320
be honest with you. And also it would be

2734
01:52:30,320 --> 01:52:32,800
nice if you provide your own email. So

2735
01:52:32,800 --> 01:52:35,840
if you have your own domain xyz.com then

2736
01:52:35,840 --> 01:52:37,679
please configure it in the dashboard.

2737
01:52:37,679 --> 01:52:40,320
But in this video I will use this demo

2738
01:52:40,320 --> 01:52:44,320
resent.deaf domain because I ex because

2739
01:52:44,320 --> 01:52:46,880
I probably think most people or a few

2740
01:52:46,880 --> 01:52:48,719
people won't have domains. Therefore I

2741
01:52:48,719 --> 01:52:50,719
will use this default one. But if you

2742
01:52:50,719 --> 01:52:52,320
have your own domain then please

2743
01:52:52,320 --> 01:52:55,360
configure it in the recent dashboard.

2744
01:52:55,360 --> 01:52:56,960
And I think that's already it. Let's

2745
01:52:56,960 --> 01:52:59,760
sign in. So I will click on sign in and

2746
01:52:59,760 --> 01:53:02,400
then I will continue with Google. Then

2747
01:53:02,400 --> 01:53:04,639
once signed in this is the dashboard. As

2748
01:53:04,639 --> 01:53:07,520
you see I haven't sent any emails yet.

2749
01:53:07,520 --> 01:53:10,239
And I want to first of all create an API

2750
01:53:10,239 --> 01:53:12,400
key. So right here I will click on

2751
01:53:12,400 --> 01:53:14,880
create API key. For the name this will

2752
01:53:14,880 --> 01:53:17,679
be Marshall uh LMS-Y.

2753
01:53:17,679 --> 01:53:19,360
Then for the permission this will be

2754
01:53:19,360 --> 01:53:21,920
full access. And for the domain I will

2755
01:53:21,920 --> 01:53:24,400
select all domains. Then I can click on

2756
01:53:24,400 --> 01:53:27,119
add. And right here we get our API key.

2757
01:53:27,119 --> 01:53:28,880
Now, please make sure that you copy it

2758
01:53:28,880 --> 01:53:31,679
because you can only see this key once.

2759
01:53:31,679 --> 01:53:33,760
So, I will copy it. I will go back and

2760
01:53:33,760 --> 01:53:36,639
then in our env file, I want to create a

2761
01:53:36,639 --> 01:53:38,639
new environment variable. So, this will

2762
01:53:38,639 --> 01:53:42,000
be the resend API_key.

2763
01:53:42,000 --> 01:53:44,080
And then this will be equal to the value

2764
01:53:44,080 --> 01:53:46,719
which I just copied. I can then click on

2765
01:53:46,719 --> 01:53:48,880
done. And honestly, we are already

2766
01:53:48,880 --> 01:53:51,440
finished with this dashboard. So, I can

2767
01:53:51,440 --> 01:53:54,000
head over to the documentation. So, I

2768
01:53:54,000 --> 01:53:56,719
will click on next.js quick start. And

2769
01:53:56,719 --> 01:53:59,040
the first step is to install the recent

2770
01:53:59,040 --> 01:54:02,639
SDK. Uh this is the NodeJS SDK. So it

2771
01:54:02,639 --> 01:54:06,560
also works in other NodeJS projects. So

2772
01:54:06,560 --> 01:54:08,639
I will copy it. I will go back and then

2773
01:54:08,639 --> 01:54:11,520
in my terminal I can paste it. Then once

2774
01:54:11,520 --> 01:54:13,760
installed I can again restart my def

2775
01:54:13,760 --> 01:54:16,400
server with pnpm rune defaf. And then

2776
01:54:16,400 --> 01:54:18,239
let's see what the next step is. The

2777
01:54:18,239 --> 01:54:20,639
next step is to already create an email

2778
01:54:20,639 --> 01:54:22,880
template. Let's for now skip this step.

2779
01:54:22,880 --> 01:54:25,199
And the third step is to send an email

2780
01:54:25,199 --> 01:54:27,360
using react. So right here we have to

2781
01:54:27,360 --> 01:54:30,719
first of all configure the recent SDK.

2782
01:54:30,719 --> 01:54:33,119
So I can copy this code example. Then I

2783
01:54:33,119 --> 01:54:35,360
will open my explorer. And then in the

2784
01:54:35,360 --> 01:54:38,880
lip folder I want to create a recent.ts

2785
01:54:38,880 --> 01:54:40,880
file. Inside of here I will create a

2786
01:54:40,880 --> 01:54:43,119
export constant or let me just paste

2787
01:54:43,119 --> 01:54:45,119
what I just copied. And as you see we

2788
01:54:45,119 --> 01:54:47,840
right here create a new resend instance.

2789
01:54:47,840 --> 01:54:49,679
Sadly resent does not import

2790
01:54:49,679 --> 01:54:52,159
automatically. So I will do it manually.

2791
01:54:52,159 --> 01:54:54,239
import I can then d the structure and

2792
01:54:54,239 --> 01:54:56,719
this will be done then from recent and

2793
01:54:56,719 --> 01:54:58,719
then where I destructure it I want to

2794
01:54:58,719 --> 01:55:01,599
get uppercase to recent so this is now

2795
01:55:01,599 --> 01:55:04,400
imported then for our env or for our

2796
01:55:04,400 --> 01:55:06,080
environment variable I don't want to use

2797
01:55:06,080 --> 01:55:09,690
this process envable

2798
01:55:09,690 --> 01:55:12,760
[Music]

2799
01:55:12,960 --> 01:55:15,599
from the env file and I want to get my

2800
01:55:15,599 --> 01:55:18,320
recent key as you see it's not defined

2801
01:55:18,320 --> 01:55:21,920
so we want to open our env file And

2802
01:55:21,920 --> 01:55:23,840
inside of here I want to define my

2803
01:55:23,840 --> 01:55:26,239
recent key. So I named the environment

2804
01:55:26,239 --> 01:55:29,040
variable recent API key. I can paste it

2805
01:55:29,040 --> 01:55:30,639
inside of here. And then this will be

2806
01:55:30,639 --> 01:55:33,599
equal to Z dot string. And I want to add

2807
01:55:33,599 --> 01:55:36,480
further validation meaning dot minimum.

2808
01:55:36,480 --> 01:55:38,400
And this will be a character length of

2809
01:55:38,400 --> 01:55:40,880
one. So a minimum character length of

2810
01:55:40,880 --> 01:55:43,119
one. I can then close this and then in

2811
01:55:43,119 --> 01:55:44,800
recent itself in the recent

2812
01:55:44,800 --> 01:55:47,360
configuration file I can get the recent

2813
01:55:47,360 --> 01:55:50,560
API key. Also I want to export this

2814
01:55:50,560 --> 01:55:52,480
constant. And we have now configured

2815
01:55:52,480 --> 01:55:54,960
resend. So what's the next step? Well,

2816
01:55:54,960 --> 01:55:57,599
the next step is to send an email in the

2817
01:55:57,599 --> 01:56:01,119
send verification uh OTP function. So I

2818
01:56:01,119 --> 01:56:02,960
can go back and right here they already

2819
01:56:02,960 --> 01:56:05,679
have a code example. So I will just copy

2820
01:56:05,679 --> 01:56:08,239
it. Go back and paste it inside of here.

2821
01:56:08,239 --> 01:56:09,840
As you see, we have to first of all

2822
01:56:09,840 --> 01:56:13,040
import. I will import resend from my

2823
01:56:13,040 --> 01:56:15,599
recent configuration file. And then we

2824
01:56:15,599 --> 01:56:19,440
want to send an email. So resend.s.end.

2825
01:56:19,440 --> 01:56:21,760
Then the first property is from and here

2826
01:56:21,760 --> 01:56:24,080
we define the sender itself. In this

2827
01:56:24,080 --> 01:56:26,719
case we are the sender. So instead of

2828
01:56:26,719 --> 01:56:28,960
having a company name or whatever of

2829
01:56:28,960 --> 01:56:32,639
ACMA this will be Marshall LMS. Uh for

2830
01:56:32,639 --> 01:56:34,880
the email I will leave it as onboarding

2831
01:56:34,880 --> 01:56:37,920
at.deaf. But if you configured your own

2832
01:56:37,920 --> 01:56:39,920
domain then please also add it right

2833
01:56:39,920 --> 01:56:41,840
here. And you can configure your domain

2834
01:56:41,840 --> 01:56:44,080
quite easily. Just again head over back

2835
01:56:44,080 --> 01:56:46,400
to the dashboard click on domains and

2836
01:56:46,400 --> 01:56:48,800
then you can add your domain right here.

2837
01:56:48,800 --> 01:56:50,719
But I will again go back. Then right

2838
01:56:50,719 --> 01:56:52,560
here we have the two property and I

2839
01:56:52,560 --> 01:56:54,639
don't want to send the email to this

2840
01:56:54,639 --> 01:56:56,960
domain but instead to the email which

2841
01:56:56,960 --> 01:56:59,440
the user provided. So I will just pass

2842
01:56:59,440 --> 01:57:01,520
the email right here in the array. And

2843
01:57:01,520 --> 01:57:03,280
it's also important that the two

2844
01:57:03,280 --> 01:57:05,520
property is an array with the email

2845
01:57:05,520 --> 01:57:07,760
added in the array. Now here's one

2846
01:57:07,760 --> 01:57:10,159
important thing. If you don't verify

2847
01:57:10,159 --> 01:57:12,159
your domain with resend, then you have

2848
01:57:12,159 --> 01:57:14,560
to use this onboarding email. This is

2849
01:57:14,560 --> 01:57:16,639
not new. You already know that. But the

2850
01:57:16,639 --> 01:57:18,560
problem is if you use the onboarding

2851
01:57:18,560 --> 01:57:21,199
email, you can only send emails to

2852
01:57:21,199 --> 01:57:23,760
yourself. So as an example, if I go

2853
01:57:23,760 --> 01:57:26,239
again to the uh recent dashboard, then

2854
01:57:26,239 --> 01:57:28,080
you will see that I'm signed in with

2855
01:57:28,080 --> 01:57:29,679
this email right here on the top uh

2856
01:57:29,679 --> 01:57:32,080
bottom left corner. This means if I use

2857
01:57:32,080 --> 01:57:34,800
this on boarding domain, I can only send

2858
01:57:34,800 --> 01:57:37,440
emails to this specific email. If you

2859
01:57:37,440 --> 01:57:39,440
have verified your domain, then you can

2860
01:57:39,440 --> 01:57:42,080
send emails to anyone. But in this case,

2861
01:57:42,080 --> 01:57:45,199
I can only send emails to myself. Then

2862
01:57:45,199 --> 01:57:47,199
for the subject I don't want to say

2863
01:57:47,199 --> 01:57:49,440
hello world. Instead I will say right

2864
01:57:49,440 --> 01:57:52,719
here uh Marshall LMS

2865
01:57:52,719 --> 01:57:56,239
and then I want to say dash verify your

2866
01:57:56,239 --> 01:57:58,960
email. Then right here they have a react

2867
01:57:58,960 --> 01:58:01,119
property and that's if you want to send

2868
01:58:01,119 --> 01:58:04,080
an email using a react component. But I

2869
01:58:04,080 --> 01:58:05,920
don't want to do that. I want to send a

2870
01:58:05,920 --> 01:58:08,800
blank HTM or not a blank but a standard

2871
01:58:08,800 --> 01:58:11,760
HTML email or an email with HTML

2872
01:58:11,760 --> 01:58:14,800
content. So we can use the HTML property

2873
01:58:14,800 --> 01:58:16,960
this will be equal to optics and inside

2874
01:58:16,960 --> 01:58:19,760
of here I want to get a P tag and I will

2875
01:58:19,760 --> 01:58:23,199
say hey your OTP uppercase is and then I

2876
01:58:23,199 --> 01:58:25,520
want to use this strong element and then

2877
01:58:25,520 --> 01:58:27,920
in this strong element I will render

2878
01:58:27,920 --> 01:58:32,080
this OTP. So again P tag your OTP strong

2879
01:58:32,080 --> 01:58:34,880
OTP finished. I can also delete this d

2880
01:58:34,880 --> 01:58:36,960
the structuring we won't need it. I will

2881
01:58:36,960 --> 01:58:40,639
just say hey await we send emails. And

2882
01:58:40,639 --> 01:58:42,239
in theory, this should already be

2883
01:58:42,239 --> 01:58:44,400
enough. So I can go back to the

2884
01:58:44,400 --> 01:58:46,159
dashboard. Let's see what the next step

2885
01:58:46,159 --> 01:58:49,199
is. So we added our configuration in the

2886
01:58:49,199 --> 01:58:51,840
off.ts file. And the next step is to

2887
01:58:51,840 --> 01:58:55,280
also add the plug-in to our off client.

2888
01:58:55,280 --> 01:58:57,360
So I can copy the import statement. I

2889
01:58:57,360 --> 01:58:59,840
can open the off client itself. So off

2890
01:58:59,840 --> 01:59:02,320
client, I will import it on top. And

2891
01:59:02,320 --> 01:59:04,400
then inside of here, I will just add the

2892
01:59:04,400 --> 01:59:07,119
email OTP. And also we want to get our

2893
01:59:07,119 --> 01:59:09,119
plugins right here. This is again equal

2894
01:59:09,119 --> 01:59:11,280
to an array. And then in the array, I

2895
01:59:11,280 --> 01:59:13,920
want to pass my email OTP client. And I

2896
01:59:13,920 --> 01:59:16,320
want to also invoke it. Then what's the

2897
01:59:16,320 --> 01:59:18,159
next step? Well, the next step is to

2898
01:59:18,159 --> 01:59:21,440
already send an OTP to the user's email.

2899
01:59:21,440 --> 01:59:23,520
So let's go back and let's again open

2900
01:59:23,520 --> 01:59:25,840
our login form. Inside of here, we have

2901
01:59:25,840 --> 01:59:28,239
to first of all keep track of the user's

2902
01:59:28,239 --> 01:59:30,400
email. Therefore, I can go a bit to the

2903
01:59:30,400 --> 01:59:32,480
top and then underneath this transition,

2904
01:59:32,480 --> 01:59:34,560
I will create a constant. Then I want to

2905
01:59:34,560 --> 01:59:36,960
get a getter and setter. So this will be

2906
01:59:36,960 --> 01:59:39,440
email and set email and then this will

2907
01:59:39,440 --> 01:59:42,239
be equal to use state. Use state is

2908
01:59:42,239 --> 01:59:44,480
imported from react and the default

2909
01:59:44,480 --> 01:59:47,040
state the initial state will be an empty

2910
01:59:47,040 --> 01:59:49,199
string. Then I can scroll a bit to the

2911
01:59:49,199 --> 01:59:51,679
bottom and right here for my input I

2912
01:59:51,679 --> 01:59:54,320
want to add a value and an onchange

2913
01:59:54,320 --> 01:59:56,560
handler. So for the value this will be

2914
01:59:56,560 --> 01:59:58,880
equal to my email and then we can also

2915
01:59:58,880 --> 02:00:01,679
get an onchange handler. Then uh this

2916
02:00:01,679 --> 02:00:04,400
will be an inline callback function as a

2917
02:00:04,400 --> 02:00:06,560
param I want to get the event and then

2918
02:00:06,560 --> 02:00:09,360
we can call or we can use our setter set

2919
02:00:09,360 --> 02:00:12,000
email and as an argument I want to

2920
02:00:12,000 --> 02:00:15,360
provide the value. So e.target dot

2921
02:00:15,360 --> 02:00:17,599
value.

2922
02:00:17,599 --> 02:00:20,080
Then for the input I will also add a

2923
02:00:20,080 --> 02:00:22,320
required property. Is there anything

2924
02:00:22,320 --> 02:00:24,639
else? Uh type is already email.

2925
02:00:24,639 --> 02:00:26,800
Everything is added. I think this is it.

2926
02:00:26,800 --> 02:00:28,719
And I want to now create an async

2927
02:00:28,719 --> 02:00:31,599
function to sign in with email. So I

2928
02:00:31,599 --> 02:00:33,679
will go underneath this async function

2929
02:00:33,679 --> 02:00:36,080
sign in with GitHub and I will create a

2930
02:00:36,080 --> 02:00:39,840
new one. So async signin with email. I

2931
02:00:39,840 --> 02:00:41,920
can then again open this function and

2932
02:00:41,920 --> 02:00:43,679
inside of here I want to first of all

2933
02:00:43,679 --> 02:00:46,000
again start a transition. So this means

2934
02:00:46,000 --> 02:00:47,920
I want to create a new transition. I can

2935
02:00:47,920 --> 02:00:50,159
copy this GitHub pending transition.

2936
02:00:50,159 --> 02:00:51,760
Then for the getter, this will be the

2937
02:00:51,760 --> 02:00:54,239
email transition. And for the setter,

2938
02:00:54,239 --> 02:00:56,800
this will be the start email transition.

2939
02:00:56,800 --> 02:00:59,360
Also, this does not have to be an async

2940
02:00:59,360 --> 02:01:01,360
function. This can just be a standard

2941
02:01:01,360 --> 02:01:03,840
function sign in with email. And then

2942
02:01:03,840 --> 02:01:05,920
inside of here, I can call my start

2943
02:01:05,920 --> 02:01:08,159
email transition function. I want to

2944
02:01:08,159 --> 02:01:10,320
then invoke it. And inside of here, I

2945
02:01:10,320 --> 02:01:12,000
want to create a standard arrow

2946
02:01:12,000 --> 02:01:14,400
function. This means async. And then I

2947
02:01:14,400 --> 02:01:16,719
can just open it inside of here. And

2948
02:01:16,719 --> 02:01:18,639
then in this function start email

2949
02:01:18,639 --> 02:01:20,560
transition we can now finally

2950
02:01:20,560 --> 02:01:23,199
authenticate the user. So we can say

2951
02:01:23,199 --> 02:01:25,920
await of client of client is already

2952
02:01:25,920 --> 02:01:29,280
imported dot email OTP dot send

2953
02:01:29,280 --> 02:01:32,159
verification OTP I can invoke it the

2954
02:01:32,159 --> 02:01:34,239
structured and inside of here we have to

2955
02:01:34,239 --> 02:01:36,480
provide a few properties. First of all

2956
02:01:36,480 --> 02:01:39,520
the email itself we get our email or we

2957
02:01:39,520 --> 02:01:42,320
store our email in the state. So use

2958
02:01:42,320 --> 02:01:44,719
state which means I can just pass my

2959
02:01:44,719 --> 02:01:47,360
email right here. The next property is

2960
02:01:47,360 --> 02:01:49,920
the type and you get two or you get

2961
02:01:49,920 --> 02:01:52,560
three properties email verification

2962
02:01:52,560 --> 02:01:55,199
forget password and sign in. In this

2963
02:01:55,199 --> 02:01:58,000
case we want to sign in and then we also

2964
02:01:58,000 --> 02:02:00,400
get our fetch options and I want to

2965
02:02:00,400 --> 02:02:02,960
listen for two events. The onsuccess

2966
02:02:02,960 --> 02:02:05,520
event and the on event. So let's first

2967
02:02:05,520 --> 02:02:07,599
of all get the on success event. This

2968
02:02:07,599 --> 02:02:10,159
will be a standard error function. And

2969
02:02:10,159 --> 02:02:12,719
if it was successful I want to again

2970
02:02:12,719 --> 02:02:15,440
return a toast dosuccess. And for the

2971
02:02:15,440 --> 02:02:18,560
message I will say email sent. Then we

2972
02:02:18,560 --> 02:02:20,960
want to also redirect the user. So we

2973
02:02:20,960 --> 02:02:23,679
can say router.push. And as you see we

2974
02:02:23,679 --> 02:02:25,440
currently don't have access to the

2975
02:02:25,440 --> 02:02:27,920
router. This means I can scroll again to

2976
02:02:27,920 --> 02:02:30,080
the top. And then above this transition

2977
02:02:30,080 --> 02:02:32,719
I can create a constant router. And this

2978
02:02:32,719 --> 02:02:35,840
will be equal to use router. Use router

2979
02:02:35,840 --> 02:02:38,560
is imported from next/navigation.

2980
02:02:38,560 --> 02:02:40,880
Please don't import it from next/

2981
02:02:40,880 --> 02:02:43,040
routouter. And then again if I scroll to

2982
02:02:43,040 --> 02:02:46,159
the bottom I can say router.push

2983
02:02:46,159 --> 02:02:48,000
I want to invoke it. And then as an

2984
02:02:48,000 --> 02:02:50,320
argument I want to pass uh optics

2985
02:02:50,320 --> 02:02:52,880
because I want to pass a dynamic value.

2986
02:02:52,880 --> 02:02:55,040
And then as an argument itself I will

2987
02:02:55,040 --> 02:02:57,119
say /verify

2988
02:02:57,119 --> 02:02:58,880
request.

2989
02:02:58,880 --> 02:03:01,280
Later on we will also pass the email of

2990
02:03:01,280 --> 02:03:03,920
the user as a param but for now let's

2991
02:03:03,920 --> 02:03:06,159
leave it as is. Then I want to also

2992
02:03:06,159 --> 02:03:08,000
listen for the on error event. Again

2993
02:03:08,000 --> 02:03:09,760
this will be an error function. And

2994
02:03:09,760 --> 02:03:12,400
inside of here I want to return a toast

2995
02:03:12,400 --> 02:03:14,320
error. And for the message I will say

2996
02:03:14,320 --> 02:03:17,440
hey error sending email. So this in

2997
02:03:17,440 --> 02:03:19,599
theory should already be finished. So I

2998
02:03:19,599 --> 02:03:22,080
can copy the name sign in with email.

2999
02:03:22,080 --> 02:03:23,679
And then I can scroll a bit to the

3000
02:03:23,679 --> 02:03:25,760
bottom. Right here we have this button

3001
02:03:25,760 --> 02:03:28,400
continue with email. And if this is and

3002
02:03:28,400 --> 02:03:30,800
for the button I want to add an onclick

3003
02:03:30,800 --> 02:03:32,800
handler. And if the user clicks on the

3004
02:03:32,800 --> 02:03:35,280
button I want to call the signin with

3005
02:03:35,280 --> 02:03:38,320
email function. Also, we get uh access

3006
02:03:38,320 --> 02:03:40,800
to the email pending boolean. This means

3007
02:03:40,800 --> 02:03:43,840
we can set the uh button to disabled if

3008
02:03:43,840 --> 02:03:46,560
email pending is true. So, disabled will

3009
02:03:46,560 --> 02:03:49,679
be equal to email pending. As you see, I

3010
02:03:49,679 --> 02:03:51,599
don't get an email pending. So, I

3011
02:03:51,599 --> 02:03:53,679
probably misspelled something. And yes,

3012
02:03:53,679 --> 02:03:55,679
this shouldn't be email transition, but

3013
02:03:55,679 --> 02:03:59,040
instead email pending. If I save this

3014
02:03:59,040 --> 02:04:01,040
and again go back, you will see that

3015
02:04:01,040 --> 02:04:03,920
this error will go away. Also instead of

3016
02:04:03,920 --> 02:04:06,880
just rendering uh continue with email, I

3017
02:04:06,880 --> 02:04:09,119
want to render the content dynamically.

3018
02:04:09,119 --> 02:04:11,599
This means if email pending is true, I

3019
02:04:11,599 --> 02:04:13,760
want to render loading dot dot dot. If

3020
02:04:13,760 --> 02:04:15,840
email pending is not true, I want to

3021
02:04:15,840 --> 02:04:18,560
render continue with email. So I will

3022
02:04:18,560 --> 02:04:20,560
just copy this text and then I want to

3023
02:04:20,560 --> 02:04:23,199
create a turnary. If email pending is

3024
02:04:23,199 --> 02:04:25,679
true, I can use a question mark. Then I

3025
02:04:25,679 --> 02:04:27,599
want to return these empty tags. And

3026
02:04:27,599 --> 02:04:29,840
inside of here, I want to get a loader

3027
02:04:29,840 --> 02:04:32,719
to icon imported from Lucid React. Let's

3028
02:04:32,719 --> 02:04:34,560
provide a class name and this will be

3029
02:04:34,560 --> 02:04:37,040
size four. Again size four is the short

3030
02:04:37,040 --> 02:04:39,360
form of width four and height four and

3031
02:04:39,360 --> 02:04:42,480
this means about 16 pixels uh width and

3032
02:04:42,480 --> 02:04:45,199
height. Then we want to also say animate

3033
02:04:45,199 --> 02:04:47,199
spin and this means this loader will

3034
02:04:47,199 --> 02:04:49,360
spin. And then underneath the loader I

3035
02:04:49,360 --> 02:04:51,599
want to render a span and I want to say

3036
02:04:51,599 --> 02:04:54,400
loading dot dot dot. If email pending is

3037
02:04:54,400 --> 02:04:56,800
not true then we can use the colon and I

3038
02:04:56,800 --> 02:04:58,960
want to render what I just copied. This

3039
02:04:58,960 --> 02:05:01,760
means continue with email. Also I want

3040
02:05:01,760 --> 02:05:04,400
to render an icon. So I will again use

3041
02:05:04,400 --> 02:05:06,800
empty tags. Then I want to get the send

3042
02:05:06,800 --> 02:05:09,679
icon from lucid react. I want to also

3043
02:05:09,679 --> 02:05:12,159
add a class name and this will be size

3044
02:05:12,159 --> 02:05:14,480
4. And then underneath the icon I can

3045
02:05:14,480 --> 02:05:16,719
paste a span or I can pass a span

3046
02:05:16,719 --> 02:05:19,599
element and paste continue with email

3047
02:05:19,599 --> 02:05:21,760
inside of here. And I guess let's test

3048
02:05:21,760 --> 02:05:24,159
it out. And again please remember since

3049
02:05:24,159 --> 02:05:26,400
I use the onboarding email I have to

3050
02:05:26,400 --> 02:05:28,960
provide the email with which I signed up

3051
02:05:28,960 --> 02:05:31,679
to resend itself. If your domain is

3052
02:05:31,679 --> 02:05:33,840
verified then you can pass right here

3053
02:05:33,840 --> 02:05:36,560
any email. But if you use the onboarding

3054
02:05:36,560 --> 02:05:38,800
email then you have to send an email to

3055
02:05:38,800 --> 02:05:41,520
yourself. So I will add my email right

3056
02:05:41,520 --> 02:05:43,360
here. And then if I click on continue

3057
02:05:43,360 --> 02:05:45,440
with email, we have this nice pending

3058
02:05:45,440 --> 02:05:47,360
state and in theory I should get

3059
02:05:47,360 --> 02:05:50,400
redirected to verify request. And that's

3060
02:05:50,400 --> 02:05:52,960
exactly what happened. If I open my

3061
02:05:52,960 --> 02:05:55,280
Gmail client, I should also get an

3062
02:05:55,280 --> 02:05:57,360
email. And that's exactly what happened.

3063
02:05:57,360 --> 02:06:00,480
If I zoom in a bit, it says your OTP is

3064
02:06:00,480 --> 02:06:03,040
this number right here. But again, if I

3065
02:06:03,040 --> 02:06:05,280
go back to my web application, there's

3066
02:06:05,280 --> 02:06:09,040
no way to add this uh digit or this OTP

3067
02:06:09,040 --> 02:06:11,520
right here because currently we don't

3068
02:06:11,520 --> 02:06:14,239
have a verify request route. This means

3069
02:06:14,239 --> 02:06:16,239
we can go back again. Let's open the

3070
02:06:16,239 --> 02:06:18,639
explorer and then in the app folder in

3071
02:06:18,639 --> 02:06:21,679
the all folder I want to create a new

3072
02:06:21,679 --> 02:06:24,320
route. Who would have thought? So I will

3073
02:06:24,320 --> 02:06:27,599
create a new folder verify- request and

3074
02:06:27,599 --> 02:06:29,599
then in the folder I want to create a

3075
02:06:29,599 --> 02:06:32,400
new file page.tsx. tsx. Since this is

3076
02:06:32,400 --> 02:06:34,400
the route, I will create an export

3077
02:06:34,400 --> 02:06:36,719
default function and I will call it

3078
02:06:36,719 --> 02:06:40,239
verify request.

3079
02:06:40,239 --> 02:06:42,159
I want to create a return statement.

3080
02:06:42,159 --> 02:06:44,320
Inside of here, I want to start with the

3081
02:06:44,320 --> 02:06:46,400
cart component. The cart is imported

3082
02:06:46,400 --> 02:06:48,320
from the components. And then in the

3083
02:06:48,320 --> 02:06:50,719
cart, I want to render a cart header. In

3084
02:06:50,719 --> 02:06:52,800
the cart header, I want to render a card

3085
02:06:52,800 --> 02:06:55,199
title. And in the cart title, I want to

3086
02:06:55,199 --> 02:06:58,560
say uh please check your email. Then

3087
02:06:58,560 --> 02:07:00,480
underneath the card title, I want to

3088
02:07:00,480 --> 02:07:02,560
render a card description. And then for

3089
02:07:02,560 --> 02:07:04,960
the card description, I want to say we

3090
02:07:04,960 --> 02:07:09,840
have sent a or a verification email a

3091
02:07:09,840 --> 02:07:14,159
code to your email address dot please

3092
02:07:14,159 --> 02:07:20,520
open the email and paste the code below.

3093
02:07:20,560 --> 02:07:22,639
So this is finished, which means if I go

3094
02:07:22,639 --> 02:07:24,719
back and do a hard refresh, we should

3095
02:07:24,719 --> 02:07:26,639
see this card right here. And yes, it

3096
02:07:26,639 --> 02:07:28,639
says, "Please check your email." And

3097
02:07:28,639 --> 02:07:31,280
then we have this nice little text, this

3098
02:07:31,280 --> 02:07:33,440
nice little description. Then we can go

3099
02:07:33,440 --> 02:07:35,520
back and for the cart, I want to also

3100
02:07:35,520 --> 02:07:37,679
add a class name. And then this will be

3101
02:07:37,679 --> 02:07:41,040
width of full and MX auto. So if I again

3102
02:07:41,040 --> 02:07:43,920
go back, nothing changes. Then I want to

3103
02:07:43,920 --> 02:07:46,719
also style my header a bit because I

3104
02:07:46,719 --> 02:07:49,280
want to center this text. So for the

3105
02:07:49,280 --> 02:07:51,679
cart header, I can give it a class name

3106
02:07:51,679 --> 02:07:54,159
and this will be text center to center

3107
02:07:54,159 --> 02:07:56,880
everything in the middle. Also the card

3108
02:07:56,880 --> 02:07:59,440
title should be a bit bigger. So I can

3109
02:07:59,440 --> 02:08:02,079
add a class name and this will be text

3110
02:08:02,079 --> 02:08:04,800
XL. So the font size will be bigger.

3111
02:08:04,800 --> 02:08:06,639
Then underneath the card header I want

3112
02:08:06,639 --> 02:08:09,280
to start by rendering my card content.

3113
02:08:09,280 --> 02:08:10,960
So let's go underneath the cart header

3114
02:08:10,960 --> 02:08:12,880
and I want to get the card content

3115
02:08:12,880 --> 02:08:15,840
component. Inside of here I can first of

3116
02:08:15,840 --> 02:08:18,159
all render a div. And then in this div I

3117
02:08:18,159 --> 02:08:21,119
want to render an input OTP component.

3118
02:08:21,119 --> 02:08:23,440
So I will head over to the shad CN

3119
02:08:23,440 --> 02:08:25,760
website and inside of here you can

3120
02:08:25,760 --> 02:08:28,800
search for input OTP. This component is

3121
02:08:28,800 --> 02:08:30,880
an accessible one-time password

3122
02:08:30,880 --> 02:08:33,840
component with copy paste functionality.

3123
02:08:33,840 --> 02:08:35,760
So this is already installed which means

3124
02:08:35,760 --> 02:08:38,159
I can go back and inside of here we want

3125
02:08:38,159 --> 02:08:40,480
to first of all get the input OTP

3126
02:08:40,480 --> 02:08:43,040
component from the components. Then in

3127
02:08:43,040 --> 02:08:46,000
the input OTP I want to get the input

3128
02:08:46,000 --> 02:08:49,040
group or the input OTP group. Then I can

3129
02:08:49,040 --> 02:08:52,079
open it and in the input OTP group I

3130
02:08:52,079 --> 02:08:54,960
want to render the input OTP slot. This

3131
02:08:54,960 --> 02:08:56,800
is imported from the components and this

3132
02:08:56,800 --> 02:09:00,239
is self-closing. This input OTP requires

3133
02:09:00,239 --> 02:09:03,040
one key property which is the index and

3134
02:09:03,040 --> 02:09:05,280
the index defines the position of the

3135
02:09:05,280 --> 02:09:08,560
input OTP slot. So JavaScript is zero

3136
02:09:08,560 --> 02:09:11,599
indexed which means we start with zero 0

3137
02:09:11,599 --> 02:09:15,840
1 2 3 4 and then five. So I can go back

3138
02:09:15,840 --> 02:09:17,520
and for the index again this will be

3139
02:09:17,520 --> 02:09:19,840
zero. Then I can copy paste this input

3140
02:09:19,840 --> 02:09:22,800
OTP slot two more times. The second uh

3141
02:09:22,800 --> 02:09:24,960
index will be one and then the third

3142
02:09:24,960 --> 02:09:27,360
index will be two. Then we can again

3143
02:09:27,360 --> 02:09:30,000
copy this input OTP group. Paste it down

3144
02:09:30,000 --> 02:09:32,560
below and this index will be three. This

3145
02:09:32,560 --> 02:09:34,800
one will be four and then this one will

3146
02:09:34,800 --> 02:09:37,679
be five. So if I again go back and do a

3147
02:09:37,679 --> 02:09:39,760
hard refresh you will see that this is

3148
02:09:39,760 --> 02:09:42,880
our input OTP. It looks quite nice.

3149
02:09:42,880 --> 02:09:44,960
Nevertheless, we still get an error for

3150
02:09:44,960 --> 02:09:47,840
our input OTP. That's because we have to

3151
02:09:47,840 --> 02:09:50,560
provide a few key properties. First of

3152
02:09:50,560 --> 02:09:53,040
all, the maximum length. The maximum

3153
02:09:53,040 --> 02:09:55,760
length will be six. We can only pass six

3154
02:09:55,760 --> 02:09:58,639
digits. Then we want to also add a class

3155
02:09:58,639 --> 02:10:01,679
name. This will be gap 2. Then I want to

3156
02:10:01,679 --> 02:10:05,119
also add a value and onchange handler.

3157
02:10:05,119 --> 02:10:07,360
This means we want to store the value in

3158
02:10:07,360 --> 02:10:09,599
state. So I will scroll to the top and

3159
02:10:09,599 --> 02:10:11,840
then above the return statement I will

3160
02:10:11,840 --> 02:10:13,840
create a constant again we want to

3161
02:10:13,840 --> 02:10:16,079
create a getter and setter. So this will

3162
02:10:16,079 --> 02:10:19,520
be OTP and set OTP and this will be

3163
02:10:19,520 --> 02:10:22,000
equal to use state. Use state is

3164
02:10:22,000 --> 02:10:24,079
imported from react and the initial

3165
02:10:24,079 --> 02:10:26,719
state will be an empty string. So again

3166
02:10:26,719 --> 02:10:29,199
if I go back to the input OTP for the

3167
02:10:29,199 --> 02:10:32,079
value this will be equal to our OTP the

3168
02:10:32,079 --> 02:10:34,400
getter and then for the onchange I want

3169
02:10:34,400 --> 02:10:37,040
to create an inline call back function

3170
02:10:37,040 --> 02:10:39,199
and then as a param I want to get the

3171
02:10:39,199 --> 02:10:41,760
value itself and then we can call our

3172
02:10:41,760 --> 02:10:44,719
set OTP uh getter or setter I'm sorry

3173
02:10:44,719 --> 02:10:46,560
and then as an argument I want to

3174
02:10:46,560 --> 02:10:48,800
provide the value which we get from the

3175
02:10:48,800 --> 02:10:52,320
input OTP. So in theory we now uh

3176
02:10:52,320 --> 02:10:54,960
configured our input OTP which means if

3177
02:10:54,960 --> 02:10:57,360
I go back and do a hard refresh we get

3178
02:10:57,360 --> 02:11:00,480
an error. Nice. So you're importing a

3179
02:11:00,480 --> 02:11:02,880
component that needs use state. That's

3180
02:11:02,880 --> 02:11:04,800
because so right here we use this use

3181
02:11:04,800 --> 02:11:06,960
state hook. And as you all know if we

3182
02:11:06,960 --> 02:11:09,040
want interactivity then we have to mark

3183
02:11:09,040 --> 02:11:11,440
the file the component whatever with the

3184
02:11:11,440 --> 02:11:14,400
use client directive. So use client. And

3185
02:11:14,400 --> 02:11:16,560
if I go back then you will see the input

3186
02:11:16,560 --> 02:11:19,599
OTP right here. The only problem is it's

3187
02:11:19,599 --> 02:11:22,239
not uh centered right now. So I will go

3188
02:11:22,239 --> 02:11:24,639
back again and then for the stiff which

3189
02:11:24,639 --> 02:11:27,520
uh wraps my input OTP I will give it a

3190
02:11:27,520 --> 02:11:30,159
class name and this will be flex flex of

3191
02:11:30,159 --> 02:11:32,719
column items which will be center and

3192
02:11:32,719 --> 02:11:36,199
space Y2.

3193
02:11:36,239 --> 02:11:38,480
As you see this is now centered and it

3194
02:11:38,480 --> 02:11:40,639
already looks way better. Underneath the

3195
02:11:40,639 --> 02:11:43,040
input OTP I want to render a little

3196
02:11:43,040 --> 02:11:45,840
description text. So I will go back and

3197
02:11:45,840 --> 02:11:48,079
then underneath the input OTP but still

3198
02:11:48,079 --> 02:11:50,800
in the diff I will render a P tag and I

3199
02:11:50,800 --> 02:11:54,159
will say enter the six uh dash digit

3200
02:11:54,159 --> 02:11:58,159
code sent to your email. As you see yeah

3201
02:11:58,159 --> 02:12:00,639
it looks good but it's too big and it

3202
02:12:00,639 --> 02:12:03,360
should also be darker. So I can add a

3203
02:12:03,360 --> 02:12:06,320
class name and this will be text SM and

3204
02:12:06,320 --> 02:12:09,040
text muted foreground. Again this is a

3205
02:12:09,040 --> 02:12:13,280
CSS vable provided by SHA CN UI. So if I

3206
02:12:13,280 --> 02:12:15,520
go back, yeah, this looks way better.

3207
02:12:15,520 --> 02:12:17,760
You can make it even smaller if you want

3208
02:12:17,760 --> 02:12:20,400
to, but honestly, I think this is fine

3209
02:12:20,400 --> 02:12:22,400
enough. And then underneath the input

3210
02:12:22,400 --> 02:12:25,199
OTP, I want to render a button. So I

3211
02:12:25,199 --> 02:12:27,520
will go back underneath the P tag and

3212
02:12:27,520 --> 02:12:29,199
underneath the div, but still in the

3213
02:12:29,199 --> 02:12:31,599
cart content, I want to render a button

3214
02:12:31,599 --> 02:12:34,000
component imported from the components.

3215
02:12:34,000 --> 02:12:36,480
And inside of here, I will just say uh

3216
02:12:36,480 --> 02:12:40,079
verify request. Then for the button, I

3217
02:12:40,079 --> 02:12:42,639
want to also add a class name. And this

3218
02:12:42,639 --> 02:12:44,880
will be width or full. And this is our

3219
02:12:44,880 --> 02:12:47,599
button. But as you see, yeah, it looks

3220
02:12:47,599 --> 02:12:49,840
nice, but we don't have any spacing. I

3221
02:12:49,840 --> 02:12:52,239
need some gap. So, we can go back. How

3222
02:12:52,239 --> 02:12:54,719
is this route structured? How is the UI

3223
02:12:54,719 --> 02:12:56,800
structured? Well, we have our cart

3224
02:12:56,800 --> 02:12:58,880
content. And in the cart content, we

3225
02:12:58,880 --> 02:13:01,199
have two sections, you could say. First

3226
02:13:01,199 --> 02:13:03,520
of all, the OTP and then the button,

3227
02:13:03,520 --> 02:13:05,599
which means we can pass a class name for

3228
02:13:05,599 --> 02:13:07,920
the card content, which will be spaced

3229
02:13:07,920 --> 02:13:10,800
Y6. It already looks way better. Then

3230
02:13:10,800 --> 02:13:13,280
let's finish off our button and also

3231
02:13:13,280 --> 02:13:15,520
this shouldn't be verify request but

3232
02:13:15,520 --> 02:13:18,719
instead verify account. And now I want

3233
02:13:18,719 --> 02:13:21,199
to also implement the functionality so

3234
02:13:21,199 --> 02:13:23,920
that the user can actually verify uh

3235
02:13:23,920 --> 02:13:26,239
their account. So I will go to the top

3236
02:13:26,239 --> 02:13:28,960
and then underneath this constant OTP I

3237
02:13:28,960 --> 02:13:31,199
will create a new function which I will

3238
02:13:31,199 --> 02:13:34,639
name verify OTP and then I can just open

3239
02:13:34,639 --> 02:13:37,040
it. Inside of here I want to again start

3240
02:13:37,040 --> 02:13:39,840
a transition. So underneath my state I

3241
02:13:39,840 --> 02:13:41,360
can create a constant again for the

3242
02:13:41,360 --> 02:13:44,000
getter this will be email pending and

3243
02:13:44,000 --> 02:13:46,400
then I want to also create a start

3244
02:13:46,400 --> 02:13:49,199
transition and then this will be equal

3245
02:13:49,199 --> 02:13:52,079
to use transition. I can import it from

3246
02:13:52,079 --> 02:13:54,400
react and then inside of here I can

3247
02:13:54,400 --> 02:13:57,440
again call or use my start transition. I

3248
02:13:57,440 --> 02:13:59,760
want to invoke it and as an argument I

3249
02:13:59,760 --> 02:14:02,159
want to create a standard async arrow

3250
02:14:02,159 --> 02:14:04,560
function. I can open it and then inside

3251
02:14:04,560 --> 02:14:07,199
of here we can use our off client to

3252
02:14:07,199 --> 02:14:10,800
verify the OTP. So I will say await of

3253
02:14:10,800 --> 02:14:12,960
client which is imported from the lip

3254
02:14:12,960 --> 02:14:16,000
folder dot sign in. And again we have

3255
02:14:16,000 --> 02:14:19,840
three methods email OTP and social. In

3256
02:14:19,840 --> 02:14:22,480
this case we want to use email OTP. Then

3257
02:14:22,480 --> 02:14:25,199
I can invoke it and structure it inside

3258
02:14:25,199 --> 02:14:27,280
of here. We want to first of all provide

3259
02:14:27,280 --> 02:14:29,520
our email. But now here's the question.

3260
02:14:29,520 --> 02:14:32,000
Where will we get our email from? I mean

3261
02:14:32,000 --> 02:14:34,400
right here. I don't get my email. If I

3262
02:14:34,400 --> 02:14:36,800
go back in the URL, I don't store my

3263
02:14:36,800 --> 02:14:39,679
email. How can I sign in or how can I

3264
02:14:39,679 --> 02:14:42,320
verify the request if I don't have the

3265
02:14:42,320 --> 02:14:44,639
email? So, here's the thing. We want to

3266
02:14:44,639 --> 02:14:47,520
store the email in the URL itself. This

3267
02:14:47,520 --> 02:14:49,760
means I can go back and open the lock in

3268
02:14:49,760 --> 02:14:52,239
form component itself. Then I want to

3269
02:14:52,239 --> 02:14:54,719
scroll a bit to the top. And here we uh

3270
02:14:54,719 --> 02:14:57,199
redirect the user to the verify request

3271
02:14:57,199 --> 02:14:59,760
route. And I want pend a query

3272
02:14:59,760 --> 02:15:02,480
parameter. And this query parameter will

3273
02:15:02,480 --> 02:15:05,360
be the email. So we can add right here a

3274
02:15:05,360 --> 02:15:08,000
question mark. And then I want to add an

3275
02:15:08,000 --> 02:15:10,880
email. And this will be equal to dynamic

3276
02:15:10,880 --> 02:15:13,599
value which will be the email itself.

3277
02:15:13,599 --> 02:15:16,079
This means if I again go back and I want

3278
02:15:16,079 --> 02:15:19,119
to again sign in. So I will navigate to

3279
02:15:19,119 --> 02:15:22,560
/loin and I will again paste my email

3280
02:15:22,560 --> 02:15:24,320
inside of here. And if I click on

3281
02:15:24,320 --> 02:15:26,480
continue with email, I will get

3282
02:15:26,480 --> 02:15:29,360
redirected in my domain or in my URL.

3283
02:15:29,360 --> 02:15:31,360
You will now see something interesting.

3284
02:15:31,360 --> 02:15:33,760
First of all, the path itself, verify

3285
02:15:33,760 --> 02:15:35,920
request. And then we have this query

3286
02:15:35,920 --> 02:15:38,400
parameter email which is equal to the

3287
02:15:38,400 --> 02:15:41,280
email which I used to sign in. This

3288
02:15:41,280 --> 02:15:43,679
means I can go back to my email client.

3289
02:15:43,679 --> 02:15:46,239
And as you see, I get a new message. And

3290
02:15:46,239 --> 02:15:48,880
my new OTP is this one. So I can just

3291
02:15:48,880 --> 02:15:51,199
copy it and paste it inside of here. But

3292
02:15:51,199 --> 02:15:53,199
this won't help us right now because we

3293
02:15:53,199 --> 02:15:55,520
have to configure or finish off our

3294
02:15:55,520 --> 02:15:58,000
function. So I want to get my email from

3295
02:15:58,000 --> 02:16:00,960
the URL. So I want to get my params uh

3296
02:16:00,960 --> 02:16:04,000
my query param. So underneath this email

3297
02:16:04,000 --> 02:16:06,400
pending I can create a constant params

3298
02:16:06,400 --> 02:16:09,040
and this will be equal to use search

3299
02:16:09,040 --> 02:16:11,520
params and then I can invoke it. Use

3300
02:16:11,520 --> 02:16:13,199
search params is imported from

3301
02:16:13,199 --> 02:16:14,880
next/navigation

3302
02:16:14,880 --> 02:16:17,440
and it allows us or it gives us access

3303
02:16:17,440 --> 02:16:20,079
to the query or search parameters and

3304
02:16:20,079 --> 02:16:22,079
then underneath the params I can create

3305
02:16:22,079 --> 02:16:24,320
a constant email and then this will be

3306
02:16:24,320 --> 02:16:26,880
equal to params.get get because I want

3307
02:16:26,880 --> 02:16:29,840
to get a param and not set a param we

3308
02:16:29,840 --> 02:16:32,479
can then invoke it and as an argument I

3309
02:16:32,479 --> 02:16:34,559
have to provide the name itself and

3310
02:16:34,559 --> 02:16:36,479
again what is the name well if I go

3311
02:16:36,479 --> 02:16:38,719
right here to the URL you will see that

3312
02:16:38,719 --> 02:16:41,679
it's email so I can just paste email as

3313
02:16:41,679 --> 02:16:44,319
an argument also I will mark this as

3314
02:16:44,319 --> 02:16:46,240
string and then I can pass this new

3315
02:16:46,240 --> 02:16:49,679
email uh for my email itself so the next

3316
02:16:49,679 --> 02:16:52,800
property is the OTP and our OTP is

3317
02:16:52,800 --> 02:16:56,240
stored in state so OTP will be equal to

3318
02:16:56,240 --> 02:16:58,719
OTP and then I want to again use my

3319
02:16:58,719 --> 02:17:01,120
fetch options because I want to listen

3320
02:17:01,120 --> 02:17:03,760
for two events the onsuccess event and

3321
02:17:03,760 --> 02:17:06,240
the onour event. So this will be equal

3322
02:17:06,240 --> 02:17:08,639
to an object inside of here I will get

3323
02:17:08,639 --> 02:17:11,280
the onsuccess event this is a standard

3324
02:17:11,280 --> 02:17:13,760
error function and then I want to return

3325
02:17:13,760 --> 02:17:17,040
a toast dosuccess for the message I will

3326
02:17:17,040 --> 02:17:19,920
say email verified and then I want to

3327
02:17:19,920 --> 02:17:22,160
also redirect the user which means we

3328
02:17:22,160 --> 02:17:24,800
have to again use the use router hook.

3329
02:17:24,800 --> 02:17:26,880
So at the top I can create a constant

3330
02:17:26,880 --> 02:17:29,359
router and this will be equal to use

3331
02:17:29,359 --> 02:17:31,120
router which is imported for

3332
02:17:31,120 --> 02:17:33,280
next/navigation.

3333
02:17:33,280 --> 02:17:35,359
Then again if I scroll to the bottom I

3334
02:17:35,359 --> 02:17:37,840
can say or a bit to the bottom I can say

3335
02:17:37,840 --> 02:17:40,399
right here router.push and I want to

3336
02:17:40,399 --> 02:17:42,880
redirect the user to the index page.

3337
02:17:42,880 --> 02:17:45,359
Then I want to also listen for the onour

3338
02:17:45,359 --> 02:17:47,920
event. This is also a standard error

3339
02:17:47,920 --> 02:17:50,000
function. And inside of here I want to

3340
02:17:50,000 --> 02:17:53,519
return a toast. And I want to say our

3341
02:17:53,519 --> 02:17:57,519
verifying email or OTP email OTP

3342
02:17:57,519 --> 02:17:59,359
email/OOTTP.

3343
02:17:59,359 --> 02:18:02,240
Yeah, this is a diplomatic answer. So

3344
02:18:02,240 --> 02:18:04,639
this looks great and we can now use this

3345
02:18:04,639 --> 02:18:07,760
verify OTP function uh in our button or

3346
02:18:07,760 --> 02:18:09,679
in other words, our button should now

3347
02:18:09,679 --> 02:18:11,599
call this function which we just

3348
02:18:11,599 --> 02:18:14,479
created. So we can add an on click

3349
02:18:14,479 --> 02:18:17,040
handler. This will be equal to verify

3350
02:18:17,040 --> 02:18:19,760
OTP. And then I want to also add a

3351
02:18:19,760 --> 02:18:22,639
disabled state. And this OTP or this

3352
02:18:22,639 --> 02:18:25,040
button should be disabled if we are

3353
02:18:25,040 --> 02:18:27,599
submitting. So we can add our email

3354
02:18:27,599 --> 02:18:29,760
pending state. If this is true, then

3355
02:18:29,760 --> 02:18:31,679
this button will be disabled. But I want

3356
02:18:31,679 --> 02:18:34,000
to also disable this button if we

3357
02:18:34,000 --> 02:18:36,960
haven't added all of the digits. So as

3358
02:18:36,960 --> 02:18:39,200
an example, if the user only fills out

3359
02:18:39,200 --> 02:18:41,519
three digits, then this button should be

3360
02:18:41,519 --> 02:18:44,080
disabled. So if I again scroll to the

3361
02:18:44,080 --> 02:18:46,399
top, we can create a new constant called

3362
02:18:46,399 --> 02:18:49,679
is OTP completed. And then here I want

3363
02:18:49,679 --> 02:18:52,559
to check that the OTP length is equal to

3364
02:18:52,559 --> 02:18:55,439
six. So we can say OTP.length should be

3365
02:18:55,439 --> 02:18:58,639
equal to six. So I can now use OTP

3366
02:18:58,639 --> 02:19:00,960
completed. This is a boolean. I can

3367
02:19:00,960 --> 02:19:02,880
scroll to the bottom and then for the

3368
02:19:02,880 --> 02:19:04,880
disabled state I will say this will be

3369
02:19:04,880 --> 02:19:08,000
disabled if email pending is true or so

3370
02:19:08,000 --> 02:19:10,479
I can use two vertical lines if is

3371
02:19:10,479 --> 02:19:12,719
completed is not true and for that we

3372
02:19:12,719 --> 02:19:15,040
have to also add this question mark at

3373
02:19:15,040 --> 02:19:17,120
the start because we don't want to uh

3374
02:19:17,120 --> 02:19:20,160
disable this button if OTP is completed

3375
02:19:20,160 --> 02:19:23,439
we want to disable it if is OTP is not

3376
02:19:23,439 --> 02:19:26,479
completed so if I again go back and do a

3377
02:19:26,479 --> 02:19:28,479
hard refresh you will see that this

3378
02:19:28,479 --> 02:19:31,760
button is disabled If I add six digits,

3379
02:19:31,760 --> 02:19:34,000
then this button will be again available

3380
02:19:34,000 --> 02:19:36,719
because we added all of the digits. So I

3381
02:19:36,719 --> 02:19:38,479
think it's time to test out everything

3382
02:19:38,479 --> 02:19:40,880
again. I think our OTP won't work

3383
02:19:40,880 --> 02:19:43,359
because there's like a 5minut time

3384
02:19:43,359 --> 02:19:46,000
window. So I will again log in. So I

3385
02:19:46,000 --> 02:19:48,800
will head over to /loin and then inside

3386
02:19:48,800 --> 02:19:52,160
of here I will again paste my email

3387
02:19:52,160 --> 02:19:54,160
and then I will click on continue with

3388
02:19:54,160 --> 02:19:57,040
email and then as you see email sent I

3389
02:19:57,040 --> 02:19:59,520
got redirected to the verify request

3390
02:19:59,520 --> 02:20:02,640
page and if I open Gmail I also got a

3391
02:20:02,640 --> 02:20:05,439
new email. This is my OTP code. I will

3392
02:20:05,439 --> 02:20:07,920
copy it and paste it right here. If I

3393
02:20:07,920 --> 02:20:10,240
click on verify account I should get a

3394
02:20:10,240 --> 02:20:12,080
pending state. I did not get one. That's

3395
02:20:12,080 --> 02:20:14,319
because I haven't implemented one. And

3396
02:20:14,319 --> 02:20:16,960
we also get a toast which says email

3397
02:20:16,960 --> 02:20:19,520
verified. So as you saw right now I

3398
02:20:19,520 --> 02:20:21,600
haven't implemented uh any pending

3399
02:20:21,600 --> 02:20:24,240
states. That's not quite what I want. So

3400
02:20:24,240 --> 02:20:26,800
instead of just rendering verify email,

3401
02:20:26,800 --> 02:20:29,600
we can use our email pending boolean. So

3402
02:20:29,600 --> 02:20:32,399
if email pending is true, we can add a

3403
02:20:32,399 --> 02:20:34,160
question mark. And for now I want to

3404
02:20:34,160 --> 02:20:36,880
return empty tags. And inside of here I

3405
02:20:36,880 --> 02:20:39,359
want to again render this loader to icon

3406
02:20:39,359 --> 02:20:41,680
which is imported from Lucid React. I

3407
02:20:41,680 --> 02:20:43,680
want to give it a class name which will

3408
02:20:43,680 --> 02:20:48,319
be size 4 and then also animate spin.

3409
02:20:48,319 --> 02:20:50,240
Underneath the loader icon I want to

3410
02:20:50,240 --> 02:20:52,720
render a span element and I will say

3411
02:20:52,720 --> 02:20:55,760
loading dot dot dot and if email pending

3412
02:20:55,760 --> 02:20:58,880
is not true then we can render verify

3413
02:20:58,880 --> 02:21:00,880
account again. So if I save this and

3414
02:21:00,880 --> 02:21:03,040
again go back I will have to again first

3415
02:21:03,040 --> 02:21:06,640
of all log out then I can go to /lo or

3416
02:21:06,640 --> 02:21:10,240
navigate to /lo then I will again add my

3417
02:21:10,240 --> 02:21:12,319
email. If I click on continue with

3418
02:21:12,319 --> 02:21:14,240
email, we have this nice pending state.

3419
02:21:14,240 --> 02:21:16,560
I got redirected. I have this nice

3420
02:21:16,560 --> 02:21:19,120
toast. And then if I again go back to my

3421
02:21:19,120 --> 02:21:21,760
email client, I should get a new email.

3422
02:21:21,760 --> 02:21:24,160
Let's see. Yes, I got a new one. I can

3423
02:21:24,160 --> 02:21:26,319
just copy the code, paste it inside of

3424
02:21:26,319 --> 02:21:28,720
here. I get this nice pending state. My

3425
02:21:28,720 --> 02:21:31,359
email is verified and I have a valid

3426
02:21:31,359 --> 02:21:33,600
session. Let's maybe also quickly go

3427
02:21:33,600 --> 02:21:36,560
into the recent dashboard. And if you go

3428
02:21:36,560 --> 02:21:39,680
for example to your metrics, uh is this

3429
02:21:39,680 --> 02:21:41,840
the correct one? Yes, metrics, you will

3430
02:21:41,840 --> 02:21:44,000
see that we delivered four emails

3431
02:21:44,000 --> 02:21:46,399
successfully. And if we go to the logs,

3432
02:21:46,399 --> 02:21:48,160
you will see them right here. Four

3433
02:21:48,160 --> 02:21:50,560
emails with all of the timestamps right

3434
02:21:50,560 --> 02:21:52,800
here. So, we are finally finished with

3435
02:21:52,800 --> 02:21:56,240
authentication. Users can sign in with

3436
02:21:56,240 --> 02:21:59,600
email with GitHub. We sent OTPs. The

3437
02:21:59,600 --> 02:22:01,920
login form looks beautiful. It works

3438
02:22:01,920 --> 02:22:04,800
great. Everything works exactly as

3439
02:22:04,800 --> 02:22:07,600
expected or as I wanted it to. But

3440
02:22:07,600 --> 02:22:09,520
here's the thing. Let's look at our

3441
02:22:09,520 --> 02:22:12,960
application from a security standpoint.

3442
02:22:12,960 --> 02:22:14,960
So right here next to me I have my

3443
02:22:14,960 --> 02:22:16,880
friend John. I don't really have a

3444
02:22:16,880 --> 02:22:18,960
friend John, but let's just imagine that

3445
02:22:18,960 --> 02:22:20,800
right here my friend John sits next to

3446
02:22:20,800 --> 02:22:23,680
me and John is a malicious user and he

3447
02:22:23,680 --> 02:22:26,240
wants to attack your application and

3448
02:22:26,240 --> 02:22:29,600
this login form gives John quite a big

3449
02:22:29,600 --> 02:22:32,080
surface for attacking if this makes

3450
02:22:32,080 --> 02:22:34,399
sense. So what I mean by that is for

3451
02:22:34,399 --> 02:22:36,800
example users right here can sign in

3452
02:22:36,800 --> 02:22:40,080
with email. So John for example will see

3453
02:22:40,080 --> 02:22:43,200
this and say hey how about I just spam

3454
02:22:43,200 --> 02:22:45,760
this application with fake emails some

3455
02:22:45,760 --> 02:22:48,399
gibberish atj gibberish.com and if I

3456
02:22:48,399 --> 02:22:50,560
click on continue with email it will

3457
02:22:50,560 --> 02:22:53,359
work because I don't validate the emails

3458
02:22:53,359 --> 02:22:55,840
and also I don't have weight limits set

3459
02:22:55,840 --> 02:22:58,560
up. So John could just uh create some

3460
02:22:58,560 --> 02:23:01,680
sort of bot which spams our application

3461
02:23:01,680 --> 02:23:04,560
with hundreds of requests per minute.

3462
02:23:04,560 --> 02:23:06,880
And again, John could also create a bot.

3463
02:23:06,880 --> 02:23:09,200
I don't want to allow bots to sign up.

3464
02:23:09,200 --> 02:23:11,840
Only real users should be able to sign

3465
02:23:11,840 --> 02:23:14,560
up to my application. This means we want

3466
02:23:14,560 --> 02:23:17,680
to set up rate limits. A user a real

3467
02:23:17,680 --> 02:23:21,120
user will probably only as a maximum

3468
02:23:21,120 --> 02:23:23,520
make five requests per minute. This

3469
02:23:23,520 --> 02:23:25,120
means everything which is bigger than

3470
02:23:25,120 --> 02:23:27,840
that should be blocked. Also I want to

3471
02:23:27,840 --> 02:23:29,760
protect this login form and also later

3472
02:23:29,760 --> 02:23:32,399
on in general my application against

3473
02:23:32,399 --> 02:23:35,359
bots. And then also I want to validate

3474
02:23:35,359 --> 02:23:38,080
this email. Currently any email can be

3475
02:23:38,080 --> 02:23:40,960
passed right here. But only real emails

3476
02:23:40,960 --> 02:23:43,680
should be able to sign up if this makes

3477
02:23:43,680 --> 02:23:46,560
sense or users with real emails like

3478
02:23:46,560 --> 02:23:49,520
john@gmail.com. This is a real email.

3479
02:23:49,520 --> 02:23:52,560
Johnas asdfasdf.com

3480
02:23:52,560 --> 02:23:55,520
is not a real email. So in this video we

3481
02:23:55,520 --> 02:23:58,000
will set up arc chat. Arcjet is the

3482
02:23:58,000 --> 02:24:00,720
sponsor of this video and also a tool

3483
02:24:00,720 --> 02:24:02,960
which I have been using in my own

3484
02:24:02,960 --> 02:24:05,520
personal web applications but we will

3485
02:24:05,520 --> 02:24:08,399
come to that in a second. So as they say

3486
02:24:08,399 --> 02:24:11,120
security doesn't have to be a pain.

3487
02:24:11,120 --> 02:24:13,280
ARJet allows you to implement bot

3488
02:24:13,280 --> 02:24:15,280
detection, rate limiting, email

3489
02:24:15,280 --> 02:24:18,000
validation, attack protection, data

3490
02:24:18,000 --> 02:24:20,160
reduction, and at the end of the day,

3491
02:24:20,160 --> 02:24:22,640
it's a developer first approach to

3492
02:24:22,640 --> 02:24:25,120
security. So before we go through the

3493
02:24:25,120 --> 02:24:27,920
landing page, let's quickly look at my

3494
02:24:27,920 --> 02:24:30,319
personal web application. So this is

3495
02:24:30,319 --> 02:24:31,920
marshallcode.com

3496
02:24:31,920 --> 02:24:33,840
and if you go to the navbar, you will

3497
02:24:33,840 --> 02:24:37,439
find this link, ultimate next.js course.

3498
02:24:37,439 --> 02:24:40,399
here. Users, visitors can sign up to the

3499
02:24:40,399 --> 02:24:42,960
weight list to get notified once it's

3500
02:24:42,960 --> 02:24:44,960
released. And you know what? I

3501
02:24:44,960 --> 02:24:47,600
implemented arjhat right here. So if I

3502
02:24:47,600 --> 02:24:50,319
add my email right here and then click

3503
02:24:50,319 --> 02:24:53,120
on uh reserve my spot, I will get an

3504
02:24:53,120 --> 02:24:55,200
error. You have already been added to

3505
02:24:55,200 --> 02:24:57,120
the weight list. If I spam my

3506
02:24:57,120 --> 02:24:58,960
application, so I will click this button

3507
02:24:58,960 --> 02:25:01,439
multiple times as you see right here. I

3508
02:25:01,439 --> 02:25:03,439
will get a different error and it says

3509
02:25:03,439 --> 02:25:06,080
it seems like you are a bot. If this was

3510
02:25:06,080 --> 02:25:08,800
an error, please try again or contact

3511
02:25:08,800 --> 02:25:10,720
support. So right here I set up rate

3512
02:25:10,720 --> 02:25:13,439
limits with arcjet. So arcjet sees the

3513
02:25:13,439 --> 02:25:15,760
weight limit has been hit. This means

3514
02:25:15,760 --> 02:25:17,600
probably we want to block the request

3515
02:25:17,600 --> 02:25:20,000
and that's why arjet blocks the request

3516
02:25:20,000 --> 02:25:22,560
and the user in this case I myself am

3517
02:25:22,560 --> 02:25:25,120
not able to reserve my spot and that's

3518
02:25:25,120 --> 02:25:27,439
also exactly what we want to do for our

3519
02:25:27,439 --> 02:25:30,000
application. So let's quickly go through

3520
02:25:30,000 --> 02:25:32,560
the landing page and let's see what ark

3521
02:25:32,560 --> 02:25:35,280
chat offers. So here they uh list all of

3522
02:25:35,280 --> 02:25:37,600
their primitives, all of their defense

3523
02:25:37,600 --> 02:25:40,560
primitives. First of all, arcjet shield

3524
02:25:40,560 --> 02:25:43,840
W AF which stands for web application

3525
02:25:43,840 --> 02:25:46,800
firewall. So this archet shield protects

3526
02:25:46,800 --> 02:25:49,359
your application against the most common

3527
02:25:49,359 --> 02:25:52,800
attacks including the OASP top 10. If

3528
02:25:52,800 --> 02:25:55,200
you never heard about the OWOSP top 10,

3529
02:25:55,200 --> 02:25:57,600
then in short, the OASP top 10 is a

3530
02:25:57,600 --> 02:25:59,439
standard awareness document for

3531
02:25:59,439 --> 02:26:02,720
developers and web application security.

3532
02:26:02,720 --> 02:26:05,280
It represents a broad consensus about

3533
02:26:05,280 --> 02:26:07,920
the most critical security risks. And

3534
02:26:07,920 --> 02:26:10,080
for example, here you see the evolution

3535
02:26:10,080 --> 02:26:13,200
of security risks. So in 2017, the

3536
02:26:13,200 --> 02:26:16,000
biggest security risk was injection. In

3537
02:26:16,000 --> 02:26:18,640
2021, the biggest security risk was

3538
02:26:18,640 --> 02:26:21,600
broken access control. And against what

3539
02:26:21,600 --> 02:26:24,319
does a arcjet shield specifically

3540
02:26:24,319 --> 02:26:26,560
protect you against? Well, it protects

3541
02:26:26,560 --> 02:26:29,280
you against common categories such as

3542
02:26:29,280 --> 02:26:32,160
SQL injection, cross-ite scripting,

3543
02:26:32,160 --> 02:26:34,880
local file inclusion, PHP code

3544
02:26:34,880 --> 02:26:38,479
injection, HTTP proxy, shellshock, and

3545
02:26:38,479 --> 02:26:41,200
much more. Then what else do they offer?

3546
02:26:41,200 --> 02:26:43,280
They also offer weight limiting. This is

3547
02:26:43,280 --> 02:26:45,439
what I have set up for my own web

3548
02:26:45,439 --> 02:26:47,760
application. So define rules which limit

3549
02:26:47,760 --> 02:26:50,160
the number of requests a client can make

3550
02:26:50,160 --> 02:26:52,399
over a period of time. And the nice

3551
02:26:52,399 --> 02:26:54,640
thing is these weight limits can also be

3552
02:26:54,640 --> 02:26:57,120
set dynamically. So if a user has a

3553
02:26:57,120 --> 02:26:59,600
valid session, we can say this user can

3554
02:26:59,600 --> 02:27:01,920
create 10 requests per minute. If the

3555
02:27:01,920 --> 02:27:04,240
user does not have a valid session, then

3556
02:27:04,240 --> 02:27:07,439
a user can only create uh five requests

3557
02:27:07,439 --> 02:27:09,359
per minute or something like that. This

3558
02:27:09,359 --> 02:27:12,319
is very very powerful. Then archet also

3559
02:27:12,319 --> 02:27:14,800
offers bot detection. This means we can

3560
02:27:14,800 --> 02:27:17,680
detect and manage traffic by automated

3561
02:27:17,680 --> 02:27:20,399
clients and bots. So for example, for

3562
02:27:20,399 --> 02:27:22,560
our sign up form, I don't want to allow

3563
02:27:22,560 --> 02:27:25,439
bots to uh sign up right here or sign

3564
02:27:25,439 --> 02:27:28,399
in. Then Arkjet also offers email

3565
02:27:28,399 --> 02:27:30,960
validation. So we can validate and

3566
02:27:30,960 --> 02:27:33,840
verify email addresses to reduce spam

3567
02:27:33,840 --> 02:27:36,640
and target fraudulent accounts. We will

3568
02:27:36,640 --> 02:27:39,120
also set up email validation later on.

3569
02:27:39,120 --> 02:27:41,200
And then they also offer protect a

3570
02:27:41,200 --> 02:27:43,359
signup form. And this is like a

3571
02:27:43,359 --> 02:27:45,920
consolidation of email validation, bot

3572
02:27:45,920 --> 02:27:48,399
protection and weight limiting. So you

3573
02:27:48,399 --> 02:27:50,800
can protect your signup form from abuse

3574
02:27:50,800 --> 02:27:52,640
by combining rate limiting, bot

3575
02:27:52,640 --> 02:27:55,359
detection and email validation. And this

3576
02:27:55,359 --> 02:27:57,439
is exactly what we will do because what

3577
02:27:57,439 --> 02:27:59,200
is this right here? Well, this is a

3578
02:27:59,200 --> 02:28:01,280
signup form. And they have already a

3579
02:28:01,280 --> 02:28:04,160
rule, a primitive which exactly targets

3580
02:28:04,160 --> 02:28:07,040
what we need. And then they also offer

3581
02:28:07,040 --> 02:28:09,680
PII detection. What's that? Well, you

3582
02:28:09,680 --> 02:28:11,760
can protect against clients sending

3583
02:28:11,760 --> 02:28:14,479
personal information such as credit card

3584
02:28:14,479 --> 02:28:17,120
numbers or email addresses that you do

3585
02:28:17,120 --> 02:28:19,200
not wish to handle. So, let's imagine

3586
02:28:19,200 --> 02:28:21,760
the following. You have some sort of um

3587
02:28:21,760 --> 02:28:23,840
contact us form and you don't want to

3588
02:28:23,840 --> 02:28:26,560
allow a user to send you private info

3589
02:28:26,560 --> 02:28:28,560
like credit card data. You don't want to

3590
02:28:28,560 --> 02:28:31,120
store it because for example, you maybe

3591
02:28:31,120 --> 02:28:33,520
have some sort of company internal

3592
02:28:33,520 --> 02:28:36,240
policies or data retention or whatever.

3593
02:28:36,240 --> 02:28:38,399
I'm not sure what rules you have, but

3594
02:28:38,399 --> 02:28:40,080
you don't want to store or you don't

3595
02:28:40,080 --> 02:28:42,560
want to handle this private data. Using

3596
02:28:42,560 --> 02:28:45,280
PII detection, you can filter it out and

3597
02:28:45,280 --> 02:28:48,080
then block it. We won't implement PII

3598
02:28:48,080 --> 02:28:50,640
detection in this video because a user

3599
02:28:50,640 --> 02:28:53,280
can't really add any fake or sensitive

3600
02:28:53,280 --> 02:28:55,760
data in our application. Nevertheless,

3601
02:28:55,760 --> 02:28:58,640
this is a very very powerful primitive.

3602
02:28:58,640 --> 02:29:00,479
And you know what? Before we implement

3603
02:29:00,479 --> 02:29:02,319
Arkjet, I want to look at the

3604
02:29:02,319 --> 02:29:04,880
architecture of Arkjet because this is a

3605
02:29:04,880 --> 02:29:07,680
huge differentiator to its competitors

3606
02:29:07,680 --> 02:29:09,760
because it allows you to do things that

3607
02:29:09,760 --> 02:29:12,640
the competitors don't. So, Arcjet has

3608
02:29:12,640 --> 02:29:15,040
been architected around a few key

3609
02:29:15,040 --> 02:29:17,200
principles. First of all, proper

3610
02:29:17,200 --> 02:29:19,439
security protection needs the full

3611
02:29:19,439 --> 02:29:22,080
context of the application, which is why

3612
02:29:22,080 --> 02:29:24,720
security rules and protections should be

3613
02:29:24,720 --> 02:29:27,200
located alongside the code they are

3614
02:29:27,200 --> 02:29:30,399
protecting. Most security solutions live

3615
02:29:30,399 --> 02:29:32,800
in some sort of cloud and they don't

3616
02:29:32,800 --> 02:29:35,520
live in your code. Arcjet directly lives

3617
02:29:35,520 --> 02:29:38,000
in your code and you define arcjet in

3618
02:29:38,000 --> 02:29:40,640
your code which means it also gets the

3619
02:29:40,640 --> 02:29:43,920
full context of your code. Also security

3620
02:29:43,920 --> 02:29:46,319
rules should be easy to test. You should

3621
02:29:46,319 --> 02:29:48,720
be able to run them in development as

3622
02:29:48,720 --> 02:29:51,840
well as in production and arcjet should

3623
02:29:51,840 --> 02:29:53,840
not interfere with the rest of the

3624
02:29:53,840 --> 02:29:55,840
application. It should be easy to

3625
02:29:55,840 --> 02:29:58,080
install, must not add significant

3626
02:29:58,080 --> 02:30:00,479
latency to requests, and it also does

3627
02:30:00,479 --> 02:30:02,800
not add any latency or very minimal

3628
02:30:02,800 --> 02:30:04,720
latency because it's built on top of

3629
02:30:04,720 --> 02:30:07,200
Rust and it should not require changes

3630
02:30:07,200 --> 02:30:10,080
to the application's architecture. So

3631
02:30:10,080 --> 02:30:12,960
quickly uh regarding performance, ArcJet

3632
02:30:12,960 --> 02:30:14,880
is super fast. It's built on top of

3633
02:30:14,880 --> 02:30:18,080
Rust. It it makes its decision in

3634
02:30:18,080 --> 02:30:21,120
milliseconds. So how does exactly Arkjet

3635
02:30:21,120 --> 02:30:23,040
analyze your request? Well, right here

3636
02:30:23,040 --> 02:30:25,280
they have an example. In this example

3637
02:30:25,280 --> 02:30:28,160
flow, a client makes an HTTP request to

3638
02:30:28,160 --> 02:30:30,720
your application. Now, our application

3639
02:30:30,720 --> 02:30:33,439
or our platform will apply standard DOS

3640
02:30:33,439 --> 02:30:36,240
protection through our network firewall.

3641
02:30:36,240 --> 02:30:38,399
So if you for example later on and we

3642
02:30:38,399 --> 02:30:40,640
will also do that if we later on deploy

3643
02:30:40,640 --> 02:30:43,040
our application to Versel we will

3644
02:30:43,040 --> 02:30:45,359
automatically already have a network

3645
02:30:45,359 --> 02:30:47,840
firewall configured and this network

3646
02:30:47,840 --> 02:30:50,479
firewall will already apply standard DOS

3647
02:30:50,479 --> 02:30:52,880
protection and most platforms provide

3648
02:30:52,880 --> 02:30:56,160
DOS uh protection transparently and out

3649
02:30:56,160 --> 02:30:59,280
of the box for no extra cost. Then our

3650
02:30:59,280 --> 02:31:01,680
server receives the request and then the

3651
02:31:01,680 --> 02:31:04,319
arcjet SDK is configured as middleware.

3652
02:31:04,319 --> 02:31:06,160
Now this is an example. We won't

3653
02:31:06,160 --> 02:31:08,160
configure Arcjet right now in our

3654
02:31:08,160 --> 02:31:10,399
middleware. Maybe later on, but for now

3655
02:31:10,399 --> 02:31:12,399
it will live in our route handler. So it

3656
02:31:12,399 --> 02:31:14,560
intercepts the request before it reaches

3657
02:31:14,560 --> 02:31:17,439
your application code. Arjet analyzes

3658
02:31:17,439 --> 02:31:19,760
the request locally based on the rules

3659
02:31:19,760 --> 02:31:21,680
you configured. For example, weight

3660
02:31:21,680 --> 02:31:24,080
limiting or bot detection and then it

3661
02:31:24,080 --> 02:31:26,880
decides to allow the request or deny it.

3662
02:31:26,880 --> 02:31:29,120
Arcjet returns the result and your

3663
02:31:29,120 --> 02:31:32,080
application code continues to execute as

3664
02:31:32,080 --> 02:31:34,560
normally. You can inspect the decision

3665
02:31:34,560 --> 02:31:37,280
to understand why arjet came to that

3666
02:31:37,280 --> 02:31:39,840
conclusion. An asynchronous report is

3667
02:31:39,840 --> 02:31:42,880
made to the arcjet API for post request

3668
02:31:42,880 --> 02:31:45,040
analysis. So right here they have a

3669
02:31:45,040 --> 02:31:47,280
little diagram. So here we have a

3670
02:31:47,280 --> 02:31:49,760
client. Let's say I'm the client and I

3671
02:31:49,760 --> 02:31:52,720
make a request to Marshall LMS. The

3672
02:31:52,720 --> 02:31:54,720
client makes a request. The network

3673
02:31:54,720 --> 02:31:57,359
firewall. So for example the one which

3674
02:31:57,359 --> 02:31:59,520
provides will already analyze the

3675
02:31:59,520 --> 02:32:02,720
request. It applies very very standard

3676
02:32:02,720 --> 02:32:05,760
DOS protection. If this passes, our

3677
02:32:05,760 --> 02:32:08,240
request hits our server. Our server will

3678
02:32:08,240 --> 02:32:10,640
now get a request and arcjet will

3679
02:32:10,640 --> 02:32:13,040
evaluate the request. It will check is

3680
02:32:13,040 --> 02:32:15,680
the user a bot. Uh is the user still in

3681
02:32:15,680 --> 02:32:18,000
the weight limit which we have defined.

3682
02:32:18,000 --> 02:32:20,399
Is the or has the user provided a real

3683
02:32:20,399 --> 02:32:22,479
email address. It will validate

3684
02:32:22,479 --> 02:32:24,640
everything and then it will come to a

3685
02:32:24,640 --> 02:32:26,640
decision. This decision will either be

3686
02:32:26,640 --> 02:32:29,120
allow or deny. If the decision is

3687
02:32:29,120 --> 02:32:30,960
allowed, then the request hits our

3688
02:32:30,960 --> 02:32:33,280
application, our code. If the decision

3689
02:32:33,280 --> 02:32:36,479
is denied, then we will deny the request

3690
02:32:36,479 --> 02:32:39,200
and we won't even continue analyzing

3691
02:32:39,200 --> 02:32:41,680
anything. So that's how arcjet works and

3692
02:32:41,680 --> 02:32:43,840
it's super super powerful. And let's

3693
02:32:43,840 --> 02:32:45,680
also quickly look at this one more

3694
02:32:45,680 --> 02:32:47,520
section and then we will finally

3695
02:32:47,520 --> 02:32:50,319
implement arcad. So traditional CDN

3696
02:32:50,319 --> 02:32:52,479
security services are typically

3697
02:32:52,479 --> 02:32:55,040
implemented as a reverse proxy in front

3698
02:32:55,040 --> 02:32:57,359
of your application. The security

3699
02:32:57,359 --> 02:33:00,080
service is a separate entity from your

3700
02:33:00,080 --> 02:33:02,399
application. Rules can't be adjusted

3701
02:33:02,399 --> 02:33:04,479
dynamically because it does not have

3702
02:33:04,479 --> 02:33:06,800
access to the full context of the

3703
02:33:06,800 --> 02:33:09,680
request and it can't be tested locally.

3704
02:33:09,680 --> 02:33:12,399
And this is exactly where archet comes

3705
02:33:12,399 --> 02:33:14,800
into play. Arcjet is not a reverse

3706
02:33:14,800 --> 02:33:17,520
proxy. No, it lives in your code. It

3707
02:33:17,520 --> 02:33:19,680
gets the full context of your code which

3708
02:33:19,680 --> 02:33:22,560
also means it has way or it creates way

3709
02:33:22,560 --> 02:33:24,880
better decisions. It has way less false

3710
02:33:24,880 --> 02:33:28,080
positives and false negatives. So since

3711
02:33:28,080 --> 02:33:30,319
we now know what arcjet is, I think we

3712
02:33:30,319 --> 02:33:32,960
can get started by implementing arcjet.

3713
02:33:32,960 --> 02:33:34,880
Nevertheless, I would recommend you to

3714
02:33:34,880 --> 02:33:37,280
read through this architecture page.

3715
02:33:37,280 --> 02:33:40,000
It's very in-depth and it's also super

3716
02:33:40,000 --> 02:33:42,160
helpful to understand arcjet even

3717
02:33:42,160 --> 02:33:44,640
better. But for now, let's go to the get

3718
02:33:44,640 --> 02:33:46,720
started guide. And the first step is to

3719
02:33:46,720 --> 02:33:49,920
create a next.js project. We already did

3720
02:33:49,920 --> 02:33:52,080
that. And the next step is to install

3721
02:33:52,080 --> 02:33:54,800
Arkjet. So I will copy this installation

3722
02:33:54,800 --> 02:33:57,280
command and we will install the arcjet

3723
02:33:57,280 --> 02:34:00,720
SDK and arcjet inspect. What is arcjet

3724
02:34:00,720 --> 02:34:02,880
inspect? Well in the sidebar if you

3725
02:34:02,880 --> 02:34:05,359
click on archet inspect it will say the

3726
02:34:05,359 --> 02:34:07,920
arcjet decision inspection library

3727
02:34:07,920 --> 02:34:10,399
provides a set of utilities to more

3728
02:34:10,399 --> 02:34:12,560
easily interact with the decision

3729
02:34:12,560 --> 02:34:14,960
returned from the arcjet SDK. Then let's

3730
02:34:14,960 --> 02:34:16,880
continue with the get started guide.

3731
02:34:16,880 --> 02:34:18,800
What's the next step? We install we did

3732
02:34:18,800 --> 02:34:20,880
not install anything. Uh let's head over

3733
02:34:20,880 --> 02:34:22,800
to our application. I will open my

3734
02:34:22,800 --> 02:34:25,040
terminal. I will stop the dev server and

3735
02:34:25,040 --> 02:34:26,960
I will paste the installation command

3736
02:34:26,960 --> 02:34:29,439
right here into our terminal. The next

3737
02:34:29,439 --> 02:34:32,640
step is to then set our key. So I will

3738
02:34:32,640 --> 02:34:34,880
copy this environment vable. I will go

3739
02:34:34,880 --> 02:34:37,040
back and then I will paste it into my

3740
02:34:37,040 --> 02:34:39,520
env file. And then the next step is to

3741
02:34:39,520 --> 02:34:41,760
get our key. So please head over to my

3742
02:34:41,760 --> 02:34:43,680
YouTube description and click on the

3743
02:34:43,680 --> 02:34:46,000
first link. This will show arcad that

3744
02:34:46,000 --> 02:34:47,840
you came for my video and this would

3745
02:34:47,840 --> 02:34:50,160
help me to create more of these super

3746
02:34:50,160 --> 02:34:52,399
cool videos. So please, it would mean a

3747
02:34:52,399 --> 02:34:54,479
lot to me. But now let's head over first

3748
02:34:54,479 --> 02:34:56,880
of all again to the Arcjet landing page

3749
02:34:56,880 --> 02:34:59,680
and then I will sign in. I will sign in

3750
02:34:59,680 --> 02:35:02,000
with Google. And as you see I'm in the

3751
02:35:02,000 --> 02:35:04,080
dashboard and I want to first of all

3752
02:35:04,080 --> 02:35:06,319
create a new site. A new site is like a

3753
02:35:06,319 --> 02:35:08,479
new project. So I will click on new

3754
02:35:08,479 --> 02:35:10,319
site. We want to give it a name. This

3755
02:35:10,319 --> 02:35:13,439
will be Marshall LMS YouTube. And then I

3756
02:35:13,439 --> 02:35:15,840
can create this new site. As you see we

3757
02:35:15,840 --> 02:35:18,319
got redirected into this project. And

3758
02:35:18,319 --> 02:35:20,800
here we already have the arcad key. I

3759
02:35:20,800 --> 02:35:22,880
can just click on it. This will copy the

3760
02:35:22,880 --> 02:35:24,880
key and then I will paste it for the

3761
02:35:24,880 --> 02:35:26,800
environment variable. So for the arcjet

3762
02:35:26,800 --> 02:35:29,280
key itself. Then we can again close the

3763
02:35:29,280 --> 02:35:31,840
CNV file. And then I want to head over

3764
02:35:31,840 --> 02:35:33,760
back to the documentation. And then

3765
02:35:33,760 --> 02:35:35,439
what's the next step? Well, the next

3766
02:35:35,439 --> 02:35:37,600
step is to add all of the rules, all of

3767
02:35:37,600 --> 02:35:40,160
the primitives. But we don't we won't

3768
02:35:40,160 --> 02:35:42,160
follow this guide. Instead, let's go to

3769
02:35:42,160 --> 02:35:44,319
the sidebar. Let's scroll a bit to the

3770
02:35:44,319 --> 02:35:46,560
bottom. And here you will find the SDK

3771
02:35:46,560 --> 02:35:49,200
reference section. Let's click on it.

3772
02:35:49,200 --> 02:35:52,000
And I want to click on next.js. Here it

3773
02:35:52,000 --> 02:35:53,680
will again give you a little quick start

3774
02:35:53,680 --> 02:35:55,439
guide. But if I scroll a bit to the

3775
02:35:55,439 --> 02:35:57,200
bottom, you will find the single

3776
02:35:57,200 --> 02:36:00,560
instance section. So we arcjet recommend

3777
02:36:00,560 --> 02:36:03,200
creating a single instance of the arcjet

3778
02:36:03,200 --> 02:36:06,000
object and reusing it throughout your

3779
02:36:06,000 --> 02:36:08,560
application. This is because the SDK

3780
02:36:08,560 --> 02:36:11,280
caches decisions and configuration to

3781
02:36:11,280 --> 02:36:13,520
improve performance. The pattern we use

3782
02:36:13,520 --> 02:36:16,479
is to create a utility file that exports

3783
02:36:16,479 --> 02:36:19,200
the arcjet object and then we import it

3784
02:36:19,200 --> 02:36:22,080
wherever we need to. So let's again head

3785
02:36:22,080 --> 02:36:24,399
over back to our application. I will

3786
02:36:24,399 --> 02:36:26,560
open the explorer. I want to go into the

3787
02:36:26,560 --> 02:36:28,960
lip folder and I want to create a new

3788
02:36:28,960 --> 02:36:32,080
arcad.ts file and again this will be the

3789
02:36:32,080 --> 02:36:35,520
configuration file for arcjet. Inside of

3790
02:36:35,520 --> 02:36:37,200
here we can first of all create an

3791
02:36:37,200 --> 02:36:39,439
import statement and I want you also the

3792
02:36:39,439 --> 02:36:42,160
structured this will be imported from at

3793
02:36:42,160 --> 02:36:45,200
archet / next and then where I

3794
02:36:45,200 --> 02:36:48,000
structured I want to get a few rules a

3795
02:36:48,000 --> 02:36:50,240
few primitives I want to get the detect

3796
02:36:50,240 --> 02:36:52,800
bot rule I want to get the fixed window

3797
02:36:52,800 --> 02:36:56,000
then also protect signup uh sensitive

3798
02:36:56,000 --> 02:36:58,399
info we won't use it but let's still uh

3799
02:36:58,399 --> 02:37:01,200
import it then I want to also get shield

3800
02:37:01,200 --> 02:37:03,760
and also the sliding window algorithm

3801
02:37:03,760 --> 02:37:06,080
and then Uh underneath this import we

3802
02:37:06,080 --> 02:37:09,040
want to reexport these rules. Uh so

3803
02:37:09,040 --> 02:37:11,680
let's create an export. I will open an

3804
02:37:11,680 --> 02:37:14,479
object and I want to reexport my detect

3805
02:37:14,479 --> 02:37:18,240
bot then fixed window protect signup and

3806
02:37:18,240 --> 02:37:21,840
then sensitive info shield and also

3807
02:37:21,840 --> 02:37:24,399
sliding window. So now I just reexport

3808
02:37:24,399 --> 02:37:27,040
everything to simplify the imports later

3809
02:37:27,040 --> 02:37:29,200
on. And then as the next step I want to

3810
02:37:29,200 --> 02:37:31,840
create a base arc chat instance which we

3811
02:37:31,840 --> 02:37:34,399
will reuse throughout our application

3812
02:37:34,399 --> 02:37:36,240
because again it will then cache

3813
02:37:36,240 --> 02:37:38,880
everything. So let's create an export

3814
02:37:38,880 --> 02:37:41,520
default this will be called arcjet and

3815
02:37:41,520 --> 02:37:44,160
then I want to also import arcjet. So

3816
02:37:44,160 --> 02:37:48,000
arcjet is imported from at archet / next

3817
02:37:48,000 --> 02:37:49,840
and then I can invoke it and the

3818
02:37:49,840 --> 02:37:52,000
structure inside of here I have to

3819
02:37:52,000 --> 02:37:54,800
provide a few key properties. First of

3820
02:37:54,800 --> 02:37:57,200
all the key the secret this will be

3821
02:37:57,200 --> 02:37:59,760
equal to our env. So we want to import

3822
02:37:59,760 --> 02:38:03,120
our env variable from the env file

3823
02:38:03,120 --> 02:38:05,840
arcjet key. As you see I don't get it.

3824
02:38:05,840 --> 02:38:09,280
So I want to open my env.ts file and I

3825
02:38:09,280 --> 02:38:11,200
want to add this environment variable

3826
02:38:11,200 --> 02:38:14,160
into my server object. So I will open

3827
02:38:14,160 --> 02:38:16,800
the standard env file. I will copy the

3828
02:38:16,800 --> 02:38:19,280
name arcjet key and then I can paste it

3829
02:38:19,280 --> 02:38:21,200
right here and it will be equal to

3830
02:38:21,200 --> 02:38:24,000
z.string string minimum one because I

3831
02:38:24,000 --> 02:38:25,840
want to have a minimum character length

3832
02:38:25,840 --> 02:38:28,319
of one. And then for our key, I can now

3833
02:38:28,319 --> 02:38:30,640
get the arcjet key as you see. And then

3834
02:38:30,640 --> 02:38:32,560
as a next property, I want to add

3835
02:38:32,560 --> 02:38:34,640
characteristics and this will be equal

3836
02:38:34,640 --> 02:38:36,800
to an array. And then in the array, I

3837
02:38:36,800 --> 02:38:38,880
will pass a string and I will just say

3838
02:38:38,880 --> 02:38:41,200
fingerprint. You can also call it some

3839
02:38:41,200 --> 02:38:43,439
other name. Uh it does not matter but I

3840
02:38:43,439 --> 02:38:45,200
will say fingerprint. But now you might

3841
02:38:45,200 --> 02:38:46,880
ask me, hey Jan, what is this

3842
02:38:46,880 --> 02:38:49,280
characteristics property? What is this

3843
02:38:49,280 --> 02:38:51,280
array fingerprint? What does this

3844
02:38:51,280 --> 02:38:54,000
characteristics thing do? Well, here's

3845
02:38:54,000 --> 02:38:56,960
the thing. Arcjet has to somehow track

3846
02:38:56,960 --> 02:38:59,439
and identify the requests and as a

3847
02:38:59,439 --> 02:39:02,399
default, it uses the IP address. The

3848
02:39:02,399 --> 02:39:05,120
thing is an IP address is easily

3849
02:39:05,120 --> 02:39:07,680
spoofable. Therefore, in most cases, you

3850
02:39:07,680 --> 02:39:10,240
don't really want to use an IP. Instead,

3851
02:39:10,240 --> 02:39:12,240
you want to use something which is

3852
02:39:12,240 --> 02:39:14,880
identifiable. As an example, the user

3853
02:39:14,880 --> 02:39:16,880
ID. So, if I don't add this

3854
02:39:16,880 --> 02:39:18,880
characteristics property, everything

3855
02:39:18,880 --> 02:39:21,280
will still work. and it will identify

3856
02:39:21,280 --> 02:39:24,000
and track the request using the user's

3857
02:39:24,000 --> 02:39:26,800
IP. But if I add the characteristics

3858
02:39:26,800 --> 02:39:29,439
property right here, I can define my own

3859
02:39:29,439 --> 02:39:31,439
characteristics like for example the

3860
02:39:31,439 --> 02:39:34,160
user ID. If I don't pass anything again,

3861
02:39:34,160 --> 02:39:36,800
it will use the user's IP as a default.

3862
02:39:36,800 --> 02:39:38,720
But if I then later on want to use

3863
02:39:38,720 --> 02:39:40,720
something to track the request, I can

3864
02:39:40,720 --> 02:39:43,040
then add for example a user ID. And then

3865
02:39:43,040 --> 02:39:45,600
the next property is rules. And this is

3866
02:39:45,600 --> 02:39:47,760
interesting because this is an array and

3867
02:39:47,760 --> 02:39:50,160
inside of here I can define base rules.

3868
02:39:50,160 --> 02:39:52,800
This means whenever I use this archet

3869
02:39:52,800 --> 02:39:54,640
instance all of the rules which are

3870
02:39:54,640 --> 02:39:56,960
defined in this rules array will also

3871
02:39:56,960 --> 02:39:59,200
run as a default. This means if I leave

3872
02:39:59,200 --> 02:40:01,359
this rules array empty then there will

3873
02:40:01,359 --> 02:40:04,000
be nothing run as a default. If I for

3874
02:40:04,000 --> 02:40:06,880
example add shield as an example then

3875
02:40:06,880 --> 02:40:09,520
this shield will run every time we use

3876
02:40:09,520 --> 02:40:11,920
archet. So inside of here we can create

3877
02:40:11,920 --> 02:40:16,960
a comment. Um define base rules here can

3878
02:40:16,960 --> 02:40:21,760
also be empty if you don't want to have

3879
02:40:21,760 --> 02:40:25,040
any base rules. So if we think through

3880
02:40:25,040 --> 02:40:27,200
our application what would uh what would

3881
02:40:27,200 --> 02:40:30,319
make sense to have as a base rule rate

3882
02:40:30,319 --> 02:40:33,200
limiting? Not really because every you

3883
02:40:33,200 --> 02:40:35,760
could say instance or every feature of

3884
02:40:35,760 --> 02:40:37,680
our application will have a different

3885
02:40:37,680 --> 02:40:40,160
rate limit. For example, our sign-in

3886
02:40:40,160 --> 02:40:42,160
form could have a weight limit of five,

3887
02:40:42,160 --> 02:40:44,960
but then some sort of let's say for now

3888
02:40:44,960 --> 02:40:47,439
a course creation route could have a

3889
02:40:47,439 --> 02:40:49,359
weight limit of 10. Therefore, it does

3890
02:40:49,359 --> 02:40:52,000
not really make sense to add a base rate

3891
02:40:52,000 --> 02:40:54,319
limit. So, what could make sense? Well,

3892
02:40:54,319 --> 02:40:56,399
for example, shield. So, in the rules

3893
02:40:56,399 --> 02:40:58,880
array, I will uh get shield. I want to

3894
02:40:58,880 --> 02:41:01,200
invoke it the structure and inside of

3895
02:41:01,200 --> 02:41:03,600
here, I have to provide one key property

3896
02:41:03,600 --> 02:41:05,680
and that's the mode. And if I click on

3897
02:41:05,680 --> 02:41:08,160
control spacebar, I get two options

3898
02:41:08,160 --> 02:41:11,359
either dry one or live. Dry one will

3899
02:41:11,359 --> 02:41:13,920
only console lock the decision. Live

3900
02:41:13,920 --> 02:41:16,240
will also block the request. So it makes

3901
02:41:16,240 --> 02:41:18,399
a lot of sense to set the mode to dry

3902
02:41:18,399 --> 02:41:21,280
one in development. But since I want to

3903
02:41:21,280 --> 02:41:23,280
really test out everything, I will set

3904
02:41:23,280 --> 02:41:25,359
it to live. And now we already

3905
02:41:25,359 --> 02:41:27,439
implemented shield. And again, what is

3906
02:41:27,439 --> 02:41:29,439
shield? Well, if you hover over it, you

3907
02:41:29,439 --> 02:41:31,359
will find nice comments. And right here

3908
02:41:31,359 --> 02:41:34,160
it says the ArcJet shield analyzes every

3909
02:41:34,160 --> 02:41:36,720
request to your application to detect

3910
02:41:36,720 --> 02:41:39,040
suspicious activity. Once a certain

3911
02:41:39,040 --> 02:41:41,120
suspicion threshold is reached,

3912
02:41:41,120 --> 02:41:43,760
subsequent requests from that client are

3913
02:41:43,760 --> 02:41:46,399
blocked for a period of time. And again,

3914
02:41:46,399 --> 02:41:48,479
this is a base rule which means it will

3915
02:41:48,479 --> 02:41:51,120
run everywhere where we use the arcjet

3916
02:41:51,120 --> 02:41:54,399
instance. So I can close this arc file.

3917
02:41:54,399 --> 02:41:56,479
We don't need it anymore. And we want to

3918
02:41:56,479 --> 02:41:59,040
combine or connect uh better off to

3919
02:41:59,040 --> 02:42:01,760
arcad because we want to use the sign up

3920
02:42:01,760 --> 02:42:03,600
form protection. We want to implement

3921
02:42:03,600 --> 02:42:05,359
weight limiting. We want to implement

3922
02:42:05,359 --> 02:42:08,399
bot detection and email validation. So

3923
02:42:08,399 --> 02:42:10,560
where would it make sense to track this

3924
02:42:10,560 --> 02:42:13,040
request to analyze it? Well, our route

3925
02:42:13,040 --> 02:42:15,040
handler as mentioned all of the better

3926
02:42:15,040 --> 02:42:17,600
off requests are funneled through this

3927
02:42:17,600 --> 02:42:19,840
route handler. This route handler allows

3928
02:42:19,840 --> 02:42:22,319
the user to sign in, sign out, create

3929
02:42:22,319 --> 02:42:24,640
ors and stuff like that. This means we

3930
02:42:24,640 --> 02:42:26,640
want you also get a request right here,

3931
02:42:26,640 --> 02:42:28,960
analyze it with arcjet and then either

3932
02:42:28,960 --> 02:42:31,920
allow it or deny it. So if you go to the

3933
02:42:31,920 --> 02:42:34,319
arcjet documentation and scroll a bit to

3934
02:42:34,319 --> 02:42:36,160
the bottom, then you will find this

3935
02:42:36,160 --> 02:42:37,920
section called better off. So

3936
02:42:37,920 --> 02:42:40,080
integrations better off. And here they

3937
02:42:40,080 --> 02:42:42,319
say arcjet can protect your better off

3938
02:42:42,319 --> 02:42:45,040
routes from brute force attacks, signup

3939
02:42:45,040 --> 02:42:47,600
spam and other abuse. You can also use

3940
02:42:47,600 --> 02:42:50,399
the authenticated user ID to implement

3941
02:42:50,399 --> 02:42:52,720
user specific rate limits because as

3942
02:42:52,720 --> 02:42:55,120
mentioned again arjet can be used to

3943
02:42:55,120 --> 02:42:57,600
create dynamic rate limits. If a user is

3944
02:42:57,600 --> 02:42:59,680
signed up we can give the user a rate

3945
02:42:59,680 --> 02:43:01,760
limit of 10. If we don't have a valid

3946
02:43:01,760 --> 02:43:03,920
user session we will give the user a

3947
02:43:03,920 --> 02:43:06,399
rate limit of four as an example. And

3948
02:43:06,399 --> 02:43:08,640
right here they already have an example

3949
02:43:08,640 --> 02:43:11,760
application. So let's open it. And also

3950
02:43:11,760 --> 02:43:13,600
right here they have a nice little

3951
02:43:13,600 --> 02:43:15,439
section and they say we recommend

3952
02:43:15,439 --> 02:43:17,920
integrating arcjet in the off route

3953
02:43:17,920 --> 02:43:20,720
handler rather than in a better off hook

3954
02:43:20,720 --> 02:43:23,280
because hooks do not provide sufficient

3955
02:43:23,280 --> 02:43:25,840
request context in server only

3956
02:43:25,840 --> 02:43:28,000
environments. So we will use the route

3957
02:43:28,000 --> 02:43:30,160
handler to analyze the request because

3958
02:43:30,160 --> 02:43:32,080
it gives us all of the info. This

3959
02:43:32,080 --> 02:43:34,319
request gives us everything and that's

3960
02:43:34,319 --> 02:43:36,800
what arcjet needs. It needs the full

3961
02:43:36,800 --> 02:43:39,359
context of the request. So let's again

3962
02:43:39,359 --> 02:43:41,760
go back to this GitHub repo and we want

3963
02:43:41,760 --> 02:43:44,160
to go into the app directory into this

3964
02:43:44,160 --> 02:43:47,279
API folder and then into this route.ts.

3965
02:43:47,279 --> 02:43:49,840
And here we already have a demo code

3966
02:43:49,840 --> 02:43:52,000
example. And you know what I will just

3967
02:43:52,000 --> 02:43:54,240
copy this file and paste it right here

3968
02:43:54,240 --> 02:43:57,120
for my route.ts. Don't worry I will

3969
02:43:57,120 --> 02:43:59,120
explain everything. As you see we have

3970
02:43:59,120 --> 02:44:01,600
two errors. So first of all we import

3971
02:44:01,600 --> 02:44:04,080
all from the wrong location. So I can

3972
02:44:04,080 --> 02:44:06,479
delete it. And also we want to import IP

3973
02:44:06,479 --> 02:44:08,960
from archet IP. But this package does

3974
02:44:08,960 --> 02:44:10,960
not exist. So here's the thing. As

3975
02:44:10,960 --> 02:44:13,520
mentioned, if I again open my arcjet

3976
02:44:13,520 --> 02:44:16,560
base instance, we added characteristics.

3977
02:44:16,560 --> 02:44:18,240
We can add our own custom

3978
02:44:18,240 --> 02:44:20,479
characteristics, but as a default, it

3979
02:44:20,479 --> 02:44:23,200
will use the user's IP. Next.js does not

3980
02:44:23,200 --> 02:44:25,439
give you access to the user's IP

3981
02:44:25,439 --> 02:44:27,520
natively. This means we have to use a

3982
02:44:27,520 --> 02:44:29,920
separate function. And thankfully, Arjet

3983
02:44:29,920 --> 02:44:32,479
created the Archet IP detection library

3984
02:44:32,479 --> 02:44:35,120
and it provides a utility to find the

3985
02:44:35,120 --> 02:44:38,080
public IP of a request. So we want to

3986
02:44:38,080 --> 02:44:40,080
install it. I can scroll to the bottom.

3987
02:44:40,080 --> 02:44:42,160
I will copy the installation command and

3988
02:44:42,160 --> 02:44:45,279
then paste it into my terminal.

3989
02:44:45,279 --> 02:44:47,600
And also they say the IP should not be

3990
02:44:47,600 --> 02:44:50,080
trusted as it can be spoofed in most

3991
02:44:50,080 --> 02:44:52,960
cases, especially when loaded via the

3992
02:44:52,960 --> 02:44:55,520
headers object. We apply additional

3993
02:44:55,520 --> 02:44:57,520
platform guards. If a platform is

3994
02:44:57,520 --> 02:45:00,399
supplied in the options argument, then

3995
02:45:00,399 --> 02:45:02,479
we can continue. So right here they set

3996
02:45:02,479 --> 02:45:05,040
up an arc chat instance. But as you all

3997
02:45:05,040 --> 02:45:07,600
know, we already created our own base

3998
02:45:07,600 --> 02:45:09,359
instance. This means I can just delete

3999
02:45:09,359 --> 02:45:12,399
this constant AJ equals to arjet. We

4000
02:45:12,399 --> 02:45:14,399
don't need it. Then what else do we have

4001
02:45:14,399 --> 02:45:16,240
right here? Well, we create a few

4002
02:45:16,240 --> 02:45:18,160
objects. First of all, the email

4003
02:45:18,160 --> 02:45:20,399
options. So as mentioned, if we again

4004
02:45:20,399 --> 02:45:22,800
head over back to the documentation, I

4005
02:45:22,800 --> 02:45:24,800
want to set up this rule which is called

4006
02:45:24,800 --> 02:45:27,120
signup form protection. And this signup

4007
02:45:27,120 --> 02:45:29,920
form protection is a combination of rate

4008
02:45:29,920 --> 02:45:32,399
limiting, bot protection, and email

4009
02:45:32,399 --> 02:45:34,479
validation. This means I want to also

4010
02:45:34,479 --> 02:45:36,479
create these objects. First of all,

4011
02:45:36,479 --> 02:45:38,720
email options. The mode will be set to

4012
02:45:38,720 --> 02:45:40,960
live. This means we will block all

4013
02:45:40,960 --> 02:45:43,520
requests. And then we can also add a

4014
02:45:43,520 --> 02:45:45,920
block property. And this is an array.

4015
02:45:45,920 --> 02:45:47,680
And inside of here, we can define the

4016
02:45:47,680 --> 02:45:50,560
types of emails which we want to block.

4017
02:45:50,560 --> 02:45:52,240
So for example, I want to block

4018
02:45:52,240 --> 02:45:55,040
disposable emails, invalid emails, and

4019
02:45:55,040 --> 02:45:58,720
emails which don't have any valid MX

4020
02:45:58,720 --> 02:46:01,279
records. Then we want to also use bots.

4021
02:46:01,279 --> 02:46:03,680
So we create a constant bot options

4022
02:46:03,680 --> 02:46:06,240
object. The mode is set to live. I want

4023
02:46:06,240 --> 02:46:08,640
to block requests. And then we also have

4024
02:46:08,640 --> 02:46:11,120
an allow property which is an array.

4025
02:46:11,120 --> 02:46:12,960
Inside of here I could say I want to

4026
02:46:12,960 --> 02:46:15,520
allow search engines for example to make

4027
02:46:15,520 --> 02:46:17,920
a request or I want to allow for example

4028
02:46:17,920 --> 02:46:20,880
open AI to make a request the open AI

4029
02:46:20,880 --> 02:46:24,479
crawler or open host or whatever. So we

4030
02:46:24,479 --> 02:46:26,960
can define right here bots which are uh

4031
02:46:26,960 --> 02:46:29,200
allowed to interact with our signup

4032
02:46:29,200 --> 02:46:31,520
form. But I don't want to allow any bots

4033
02:46:31,520 --> 02:46:33,680
to interact with our signup form.

4034
02:46:33,680 --> 02:46:35,600
Therefore, this allow property will just

4035
02:46:35,600 --> 02:46:38,000
be an empty array. No bots will be

4036
02:46:38,000 --> 02:46:40,720
allowed to submit the form. Then we also

4037
02:46:40,720 --> 02:46:43,439
have this weight limit options object.

4038
02:46:43,439 --> 02:46:45,600
And again, the mode is set to life. And

4039
02:46:45,600 --> 02:46:48,080
then we have an interval and a maximum

4040
02:46:48,080 --> 02:46:50,080
property. And as you see, this is a

4041
02:46:50,080 --> 02:46:53,120
sliding window weight limit option. What

4042
02:46:53,120 --> 02:46:54,960
does this mean? Well, there are three

4043
02:46:54,960 --> 02:46:57,120
key algorithms which you can use for

4044
02:46:57,120 --> 02:46:59,200
weight limiting. So if you go back to

4045
02:46:59,200 --> 02:47:01,439
the documentation and go to the sidebar,

4046
02:47:01,439 --> 02:47:03,279
you can click on algorithms. And right

4047
02:47:03,279 --> 02:47:05,200
here they say arcat weight limiting

4048
02:47:05,200 --> 02:47:07,200
allows you to define rules which limit

4049
02:47:07,200 --> 02:47:09,439
the number of requests a client can make

4050
02:47:09,439 --> 02:47:12,000
over a period of time. It supports three

4051
02:47:12,000 --> 02:47:14,080
different weight limit algorithms. Fixed

4052
02:47:14,080 --> 02:47:16,240
window, sliding window, and token

4053
02:47:16,240 --> 02:47:18,560
bucket. Currently we set up sliding

4054
02:47:18,560 --> 02:47:20,399
window. So let's go through them

4055
02:47:20,399 --> 02:47:22,240
quickly. Let's start with the fixed

4056
02:47:22,240 --> 02:47:24,479
window. This is the simplest algorithm.

4057
02:47:24,479 --> 02:47:26,640
It tracks the number of requests made by

4058
02:47:26,640 --> 02:47:29,439
a client over a fixed time window. As an

4059
02:47:29,439 --> 02:47:32,000
example, 60 seconds. If the client

4060
02:47:32,000 --> 02:47:34,319
exceeds the limit, all requests are

4061
02:47:34,319 --> 02:47:36,960
blocked until the window expires. So, if

4062
02:47:36,960 --> 02:47:38,960
we have a 1 minute time window and I

4063
02:47:38,960 --> 02:47:41,279
make 50 requests and also the maximum

4064
02:47:41,279 --> 02:47:43,760
limit is 50 requests. Then I will be

4065
02:47:43,760 --> 02:47:45,920
blocked for this 1 minute. After this 1

4066
02:47:45,920 --> 02:47:48,640
minute passes, I can again create 50 or

4067
02:47:48,640 --> 02:47:50,640
100 or whatever the limit is uh

4068
02:47:50,640 --> 02:47:53,120
requests. Then we also have the sliding

4069
02:47:53,120 --> 02:47:55,359
window and that's what we implemented.

4070
02:47:55,359 --> 02:47:57,359
This algorithm tracks the number of

4071
02:47:57,359 --> 02:48:00,160
requests uh made by a client over a

4072
02:48:00,160 --> 02:48:02,720
sliding window so that the window moves

4073
02:48:02,720 --> 02:48:05,439
with time. So this is a very interesting

4074
02:48:05,439 --> 02:48:07,840
algorithm and it's also a more advanced

4075
02:48:07,840 --> 02:48:10,240
algorithm. It's a bit more complicated.

4076
02:48:10,240 --> 02:48:12,560
So what's the problem with a with the

4077
02:48:12,560 --> 02:48:14,800
fixed window algorithm? So let's say you

4078
02:48:14,800 --> 02:48:17,439
allow 100 requests per minute. With the

4079
02:48:17,439 --> 02:48:19,920
fixed window algorithm, a user could

4080
02:48:19,920 --> 02:48:24,240
send 100 requests at 120059

4081
02:48:24,240 --> 02:48:27,520
and then another 100 at 1201. That means

4082
02:48:27,520 --> 02:48:30,640
a user can send 200 requests in 1

4083
02:48:30,640 --> 02:48:32,720
second. And right here, I meant 59

4084
02:48:32,720 --> 02:48:35,040
seconds. A sliding window is the better

4085
02:48:35,040 --> 02:48:37,040
solution because the sliding window

4086
02:48:37,040 --> 02:48:39,520
algorithm smooths this out by tracking

4087
02:48:39,520 --> 02:48:42,319
request timestamps more precisely,

4088
02:48:42,319 --> 02:48:44,720
sliding across time rather than jumping

4089
02:48:44,720 --> 02:48:47,680
in fixed chunks. So, how does it work?

4090
02:48:47,680 --> 02:48:49,760
Well, imagine you want to allow 100

4091
02:48:49,760 --> 02:48:53,279
requests per 60 seconds. For each user,

4092
02:48:53,279 --> 02:48:55,520
IP or token, whatever, whatever you use

4093
02:48:55,520 --> 02:48:58,000
for your characteristics, you store a

4094
02:48:58,000 --> 02:49:00,560
list of timestamps for their recent

4095
02:49:00,560 --> 02:49:03,040
requests. On each new request, you

4096
02:49:03,040 --> 02:49:05,680
remove all timestamps older than 60

4097
02:49:05,680 --> 02:49:08,240
seconds from the list. If the remaining

4098
02:49:08,240 --> 02:49:11,040
list has fewer than 100 entries, allow

4099
02:49:11,040 --> 02:49:13,920
the request. Otherwise, reject or delay

4100
02:49:13,920 --> 02:49:16,399
it. I know this sounds super confusing

4101
02:49:16,399 --> 02:49:18,800
and at first it's also I will be honest

4102
02:49:18,800 --> 02:49:21,279
with you uh quite confusing. So let's

4103
02:49:21,279 --> 02:49:23,920
look at this uh diagram. So as you see

4104
02:49:23,920 --> 02:49:27,359
the time is 12:00 and a user sends a

4105
02:49:27,359 --> 02:49:30,160
request one request and this is allowed

4106
02:49:30,160 --> 02:49:32,800
and right here we have a limit of 100 in

4107
02:49:32,800 --> 02:49:36,080
a 1 minute window. Then after 10 seconds

4108
02:49:36,080 --> 02:49:38,960
the user sends 50 more requests. So in

4109
02:49:38,960 --> 02:49:42,800
total we now send 51 requests. Then at

4110
02:49:42,800 --> 02:49:45,520
uh 59 seconds, so 59 seconds have now

4111
02:49:45,520 --> 02:49:48,800
passed, a user sends 49 requests, which

4112
02:49:48,800 --> 02:49:51,520
means we now hit the limit of uh 100

4113
02:49:51,520 --> 02:49:55,200
requests. Then at 12:01 and 1 second,

4114
02:49:55,200 --> 02:49:57,760
one request is now older than 60

4115
02:49:57,760 --> 02:50:01,359
seconds. So the list now has 99 entries

4116
02:50:01,359 --> 02:50:04,080
because after 1 minute, I deleted this

4117
02:50:04,080 --> 02:50:06,960
entry and this entry only had one

4118
02:50:06,960 --> 02:50:09,200
request, which means we can also now

4119
02:50:09,200 --> 02:50:11,439
make another request. And then let's say

4120
02:50:11,439 --> 02:50:13,920
1 second after that a user tries to

4121
02:50:13,920 --> 02:50:15,840
again make a request. This is now

4122
02:50:15,840 --> 02:50:18,000
denied. We will only be allowed to

4123
02:50:18,000 --> 02:50:21,200
create again a request at 1201 and 10

4124
02:50:21,200 --> 02:50:23,840
seconds because then we will again free

4125
02:50:23,840 --> 02:50:26,800
up 50 requests. So right here they say

4126
02:50:26,800 --> 02:50:29,359
this algorithm is useful to avoid the

4127
02:50:29,359 --> 02:50:31,760
stampage problem because a user can't

4128
02:50:31,760 --> 02:50:34,080
really now spam your application. We

4129
02:50:34,080 --> 02:50:36,479
have a sliding window. And then there's

4130
02:50:36,479 --> 02:50:38,880
also the token bucket algorithm. And

4131
02:50:38,880 --> 02:50:41,279
this is honestly my favorite algorithm.

4132
02:50:41,279 --> 02:50:43,359
This algorithm is based on a bucket

4133
02:50:43,359 --> 02:50:46,000
filled with a specific number of tokens.

4134
02:50:46,000 --> 02:50:48,319
Each request withdraws a token from the

4135
02:50:48,319 --> 02:50:50,640
bucket and the bucket is refilled at a

4136
02:50:50,640 --> 02:50:52,960
fixed rate. Once the bucket is empty,

4137
02:50:52,960 --> 02:50:55,279
the client is blocked until the bucket

4138
02:50:55,279 --> 02:50:57,600
refills. So this means as an example

4139
02:50:57,600 --> 02:51:01,040
right here, we have a capacity of 100.

4140
02:51:01,040 --> 02:51:04,240
So our bucket can have a maximum of 100

4141
02:51:04,240 --> 02:51:07,680
tokens. Every 60 seconds we will refill

4142
02:51:07,680 --> 02:51:10,160
this bucket with 10 tokens and then

4143
02:51:10,160 --> 02:51:12,720
after some time our capacity will be hit

4144
02:51:12,720 --> 02:51:15,359
100 which means we won't create any new

4145
02:51:15,359 --> 02:51:18,000
tokens. If we then again use up a bit of

4146
02:51:18,000 --> 02:51:21,120
our already uh created tokens then we

4147
02:51:21,120 --> 02:51:23,840
will again refill them every uh 60

4148
02:51:23,840 --> 02:51:26,720
seconds. So 10 tokens per interval. It's

4149
02:51:26,720 --> 02:51:29,200
a very interesting algorithm but I know

4150
02:51:29,200 --> 02:51:31,279
most people will probably use the fixed

4151
02:51:31,279 --> 02:51:33,680
window or the sliding window. But now

4152
02:51:33,680 --> 02:51:35,920
let's again continue. So we implemented

4153
02:51:35,920 --> 02:51:38,080
already the sliding window. The mode is

4154
02:51:38,080 --> 02:51:40,880
set to live and a user can make five

4155
02:51:40,880 --> 02:51:43,600
submissions in a twominut sliding

4156
02:51:43,600 --> 02:51:45,680
window. Then we also right here create

4157
02:51:45,680 --> 02:51:48,720
our signup options object which means we

4158
02:51:48,720 --> 02:51:51,439
combine our email rule, our bots rule

4159
02:51:51,439 --> 02:51:53,600
and our rate limit rule. And then the

4160
02:51:53,600 --> 02:51:55,439
next step is to create a protect

4161
02:51:55,439 --> 02:51:57,279
function as they did right here. And

4162
02:51:57,279 --> 02:51:58,960
then inside of here they first of all

4163
02:51:58,960 --> 02:52:01,680
fetch the user session. So we can import

4164
02:52:01,680 --> 02:52:05,040
off from our lip from our off file. Uh

4165
02:52:05,040 --> 02:52:07,760
so from the lip folder and here we have

4166
02:52:07,760 --> 02:52:10,160
an if statement. So if the user is

4167
02:52:10,160 --> 02:52:13,040
locked in we will use their ID as the

4168
02:52:13,040 --> 02:52:15,600
identifier. This allows limits to be

4169
02:52:15,600 --> 02:52:18,960
applied across all devices and sessions.

4170
02:52:18,960 --> 02:52:20,960
Otherwise we will fall back to the

4171
02:52:20,960 --> 02:52:23,680
user's IP. So if we have a valid user

4172
02:52:23,680 --> 02:52:26,319
session then we will use the user ID as

4173
02:52:26,319 --> 02:52:29,040
a characteristic. If there's no user, if

4174
02:52:29,040 --> 02:52:31,120
we don't have a valid user session, then

4175
02:52:31,120 --> 02:52:33,760
we will just use the IP using the IP

4176
02:52:33,760 --> 02:52:36,000
package which we just installed. And

4177
02:52:36,000 --> 02:52:37,760
then we have an if statement. And this

4178
02:52:37,760 --> 02:52:40,640
checks if the request is a signup. If

4179
02:52:40,640 --> 02:52:42,960
so, then we will use the protect signup

4180
02:52:42,960 --> 02:52:44,960
rule. And the signup rule is a

4181
02:52:44,960 --> 02:52:47,439
combination of email validation, bot

4182
02:52:47,439 --> 02:52:49,840
protection, and weight limiting. Then we

4183
02:52:49,840 --> 02:52:52,160
get our body. Then as a next step, we

4184
02:52:52,160 --> 02:52:55,279
check that we also get an email. If so,

4185
02:52:55,279 --> 02:52:57,680
we want to then use our protect signup

4186
02:52:57,680 --> 02:53:00,240
rule. So, let's import arcjet from our

4187
02:53:00,240 --> 02:53:02,479
lip folder. So, we want to get our base

4188
02:53:02,479 --> 02:53:04,880
instance. Then we can use this with rule

4189
02:53:04,880 --> 02:53:06,640
method and we want to use protect

4190
02:53:06,640 --> 02:53:08,720
signup. As you see, we get one error for

4191
02:53:08,720 --> 02:53:10,880
the user ID and that's because we want

4192
02:53:10,880 --> 02:53:13,040
to get our fingerprint and this will be

4193
02:53:13,040 --> 02:53:15,840
equal to the user ID. Then if this is

4194
02:53:15,840 --> 02:53:17,920
not true, this means if we don't get an

4195
02:53:17,920 --> 02:53:20,479
email, then we want to also validate the

4196
02:53:20,479 --> 02:53:22,240
request, but we don't want to use the

4197
02:53:22,240 --> 02:53:24,640
protect signup method because there's no

4198
02:53:24,640 --> 02:53:26,720
email to validate. This means we will

4199
02:53:26,720 --> 02:53:29,200
now chain two rules. First of all, the

4200
02:53:29,200 --> 02:53:31,439
detect bot rule and then also the

4201
02:53:31,439 --> 02:53:33,920
sliding window algorithm rule. So let's

4202
02:53:33,920 --> 02:53:36,479
again import arcad from our lip folder

4203
02:53:36,479 --> 02:53:38,479
or it's already imported. And then right

4204
02:53:38,479 --> 02:53:40,800
here for our user ID, I want to get my

4205
02:53:40,800 --> 02:53:42,720
fingerprint and this will be equal to

4206
02:53:42,720 --> 02:53:45,200
the user ID. And then we also have an

4207
02:53:45,200 --> 02:53:47,680
else statement and this is for all other

4208
02:53:47,680 --> 02:53:50,800
of requests. Let's again get arcjet. We

4209
02:53:50,800 --> 02:53:52,800
want to use the with rule method and we

4210
02:53:52,800 --> 02:53:55,760
will use the detect bot rule also. Again

4211
02:53:55,760 --> 02:53:57,680
I want to get my fingerprint and this

4212
02:53:57,680 --> 02:54:00,000
will be equal to the user ID. And that's

4213
02:54:00,000 --> 02:54:01,840
already it. Then the next step is to

4214
02:54:01,840 --> 02:54:04,240
wrap the post handler with the arcjet

4215
02:54:04,240 --> 02:54:06,800
protections. So we get our decision. So

4216
02:54:06,800 --> 02:54:09,279
we call this protect function. This gen

4217
02:54:09,279 --> 02:54:11,760
uh generates a decision. we console lock

4218
02:54:11,760 --> 02:54:13,600
the decision and then we create an if

4219
02:54:13,600 --> 02:54:15,840
statement. If the decision is denied

4220
02:54:15,840 --> 02:54:18,560
then we can check what the reason was.

4221
02:54:18,560 --> 02:54:20,479
So if it was weight limit then we just

4222
02:54:20,479 --> 02:54:23,520
return a new error. If the decision was

4223
02:54:23,520 --> 02:54:26,160
an invalid email then we return a

4224
02:54:26,160 --> 02:54:28,800
message. If it's invalid then we return

4225
02:54:28,800 --> 02:54:31,040
this error message. If it's disposable

4226
02:54:31,040 --> 02:54:32,640
we return this error message. If there

4227
02:54:32,640 --> 02:54:35,279
are no MX records then we return this

4228
02:54:35,279 --> 02:54:37,600
error message. And if nothing works then

4229
02:54:37,600 --> 02:54:39,439
we just return this default error

4230
02:54:39,439 --> 02:54:41,359
message. And that's it. So to summarize

4231
02:54:41,359 --> 02:54:43,439
it, we have a protect function. In the

4232
02:54:43,439 --> 02:54:46,319
protect function, we implemented arcjet.

4233
02:54:46,319 --> 02:54:48,479
And then this protect function is called

4234
02:54:48,479 --> 02:54:51,279
in our post request. This gets us a

4235
02:54:51,279 --> 02:54:53,040
decision. And then we check if the

4236
02:54:53,040 --> 02:54:55,279
decision is denied. If so, we throw a

4237
02:54:55,279 --> 02:54:57,439
new error. If the decision is allowed,

4238
02:54:57,439 --> 02:54:59,680
then we just return a new response or in

4239
02:54:59,680 --> 02:55:02,080
other words, we let off or better off

4240
02:55:02,080 --> 02:55:04,479
handle the request and authenticate the

4241
02:55:04,479 --> 02:55:07,120
user. So this in theory should work. So

4242
02:55:07,120 --> 02:55:09,920
I will go back do a hard refresh and I

4243
02:55:09,920 --> 02:55:12,560
will hope for the best. So I will sign

4244
02:55:12,560 --> 02:55:15,600
in with GitHub. We have a pending state

4245
02:55:15,600 --> 02:55:19,120
du signed in redirecting. Okay. Okay.

4246
02:55:19,120 --> 02:55:22,080
Okay. We got redirected. So in theory

4247
02:55:22,080 --> 02:55:24,000
everything worked. And then if we open

4248
02:55:24,000 --> 02:55:26,399
our terminal you will also see a console

4249
02:55:26,399 --> 02:55:28,800
lock right here. And the arcjet decision

4250
02:55:28,800 --> 02:55:31,680
was allow. This means everything worked

4251
02:55:31,680 --> 02:55:34,000
as expected. Let's also quickly head

4252
02:55:34,000 --> 02:55:36,399
over to the arcjet dashboard. And in the

4253
02:55:36,399 --> 02:55:38,720
arcad dashboard you will see this is our

4254
02:55:38,720 --> 02:55:41,359
request with the time the host the path

4255
02:55:41,359 --> 02:55:43,760
and the reason is allow. So if I go

4256
02:55:43,760 --> 02:55:46,160
right here conclusion allow reason there

4257
02:55:46,160 --> 02:55:48,399
is no reason everything was allowed and

4258
02:55:48,399 --> 02:55:50,560
that's great. You can also for example

4259
02:55:50,560 --> 02:55:53,359
go to the analytics and again no denies

4260
02:55:53,359 --> 02:55:55,840
no errors only requests which got

4261
02:55:55,840 --> 02:55:58,319
allowed very cool. So since we are

4262
02:55:58,319 --> 02:56:00,479
finally finished with authentication and

4263
02:56:00,479 --> 02:56:03,200
also with arcjet I want to continue with

4264
02:56:03,200 --> 02:56:05,760
a few other interesting things. So

4265
02:56:05,760 --> 02:56:08,479
here's a little road map of what we will

4266
02:56:08,479 --> 02:56:11,439
do in the very near future. Uh which

4267
02:56:11,439 --> 02:56:14,000
means in the next couple of hours. So I

4268
02:56:14,000 --> 02:56:15,760
want to start with a landing page. Right

4269
02:56:15,760 --> 02:56:18,000
now this is my index page and as you see

4270
02:56:18,000 --> 02:56:19,840
it does not look very nice. I want to

4271
02:56:19,840 --> 02:56:22,080
make it beautiful. After that we will

4272
02:56:22,080 --> 02:56:24,319
create an admin dashboard. Inside of the

4273
02:56:24,319 --> 02:56:26,479
admin dashboard we will be able to

4274
02:56:26,479 --> 02:56:29,359
create courses. After that I will finish

4275
02:56:29,359 --> 02:56:32,800
off our public facing page. This means

4276
02:56:32,800 --> 02:56:35,840
we will create a course ID page and we

4277
02:56:35,840 --> 02:56:38,399
will allow customers to buy the course.

4278
02:56:38,399 --> 02:56:40,240
After that we will create a customerf

4279
02:56:40,240 --> 02:56:43,359
facing dashboard uh to view the course

4280
02:56:43,359 --> 02:56:46,160
and I think we will then be finished. I

4281
02:56:46,160 --> 02:56:48,240
hope so. But for now I want to start

4282
02:56:48,240 --> 02:56:50,800
with my landing page. So my landing page

4283
02:56:50,800 --> 02:56:53,359
is my index page. So if I go back to my

4284
02:56:53,359 --> 02:56:55,200
codebase right here we have our

4285
02:56:55,200 --> 02:56:57,439
page.tsx. Here's the thing. As

4286
02:56:57,439 --> 02:56:59,520
mentioned, we will have like you could

4287
02:56:59,520 --> 02:57:03,040
say three separate spheres if this makes

4288
02:57:03,040 --> 02:57:06,000
sense. We will have the public facing

4289
02:57:06,000 --> 02:57:08,560
pages. This means the index page, the

4290
02:57:08,560 --> 02:57:11,520
courses um overview page and then the

4291
02:57:11,520 --> 02:57:13,760
courses lock page which is then the

4292
02:57:13,760 --> 02:57:16,240
overview page for the individual course.

4293
02:57:16,240 --> 02:57:19,200
Then we we will have the admin section

4294
02:57:19,200 --> 02:57:21,600
and then we will have the public facing

4295
02:57:21,600 --> 02:57:24,160
dashboard for customers. This means I

4296
02:57:24,160 --> 02:57:26,240
want to create another route group and

4297
02:57:26,240 --> 02:57:28,560
this will be a public route group. This

4298
02:57:28,560 --> 02:57:30,560
means inside of there I will store all

4299
02:57:30,560 --> 02:57:32,640
of the routes which will be public

4300
02:57:32,640 --> 02:57:34,880
facing which don't require any

4301
02:57:34,880 --> 02:57:37,520
authorization. So in the app folder I

4302
02:57:37,520 --> 02:57:39,520
can create a new folder. Then I want to

4303
02:57:39,520 --> 02:57:41,760
use parentheses and I will call it

4304
02:57:41,760 --> 02:57:44,080
public. I will be honest with you. I

4305
02:57:44,080 --> 02:57:47,120
think public is not a great name because

4306
02:57:47,120 --> 02:57:49,600
it kind of has a conflict with our

4307
02:57:49,600 --> 02:57:52,080
normal public folder. But since this is

4308
02:57:52,080 --> 02:57:53,840
a route group, it does not create any

4309
02:57:53,840 --> 02:57:55,680
errors. Nevertheless, if you have a

4310
02:57:55,680 --> 02:57:57,840
better naming convention, then please

4311
02:57:57,840 --> 02:58:00,720
name it differently. If I would sit here

4312
02:58:00,720 --> 02:58:02,640
for a few hours, I would probably rename

4313
02:58:02,640 --> 02:58:04,640
it, but honestly, who cares? We will

4314
02:58:04,640 --> 02:58:07,200
leave it as is. Then inside of here, I

4315
02:58:07,200 --> 02:58:09,840
want to create a page.tsx. And I want to

4316
02:58:09,840 --> 02:58:12,080
delete this page.tsx. we don't need it

4317
02:58:12,080 --> 02:58:13,920
anymore since we have this new public

4318
02:58:13,920 --> 02:58:16,240
route. So what I will do is just copy

4319
02:58:16,240 --> 02:58:18,560
all of the code, paste it inside of here

4320
02:58:18,560 --> 02:58:20,880
and delete this index page which we have

4321
02:58:20,880 --> 02:58:24,240
in our root app directory. This page.tsx

4322
02:58:24,240 --> 02:58:26,399
in the public route group will now be

4323
02:58:26,399 --> 02:58:29,120
our new index page. This means if I go

4324
02:58:29,120 --> 02:58:31,760
back and do a hard refresh, everything

4325
02:58:31,760 --> 02:58:34,640
still works. Then we can go back and I

4326
02:58:34,640 --> 02:58:36,800
want to update my code a bit. So I want

4327
02:58:36,800 --> 02:58:38,560
to delete everything in the return

4328
02:58:38,560 --> 02:58:40,880
statement and I want to start with empty

4329
02:58:40,880 --> 02:58:43,279
tags. Inside of here I want to create a

4330
02:58:43,279 --> 02:58:46,080
section element and I will also give it

4331
02:58:46,080 --> 02:58:48,479
a class name which will be relative. So

4332
02:58:48,479 --> 02:58:51,120
the position and padding Y20. This means

4333
02:58:51,120 --> 02:58:53,520
padding on the top and bottom and this

4334
02:58:53,520 --> 02:58:56,720
corresponds to about 80 pixels. Then in

4335
02:58:56,720 --> 02:58:58,720
this section I want to render a div

4336
02:58:58,720 --> 02:59:01,120
element and in the div I want to get my

4337
02:59:01,120 --> 02:59:03,600
batch component which I import from my

4338
02:59:03,600 --> 02:59:05,760
components. Please make sure that you

4339
02:59:05,760 --> 02:59:08,399
don't import it from Lucid React. Lucid

4340
02:59:08,399 --> 02:59:10,960
React will render an icon, but we want

4341
02:59:10,960 --> 02:59:13,600
to render a component. So, I will import

4342
02:59:13,600 --> 02:59:15,600
it from the components. And inside of

4343
02:59:15,600 --> 02:59:18,640
here, I want to say the future of

4344
02:59:18,640 --> 02:59:21,600
online. You could learning education.

4345
02:59:21,600 --> 02:59:23,520
Yeah, education.

4346
02:59:23,520 --> 02:59:25,520
If I save this and again go back, you

4347
02:59:25,520 --> 02:59:28,160
will see right here this batch. It looks

4348
02:59:28,160 --> 02:59:30,240
good. But you know what? I want you

4349
02:59:30,240 --> 02:59:33,200
centered. So I will again go back and I

4350
02:59:33,200 --> 02:59:35,760
will first of all update this div. So I

4351
02:59:35,760 --> 02:59:37,680
will give it a class name and this will

4352
02:59:37,680 --> 02:59:40,800
be flex flex of column items which will

4353
02:59:40,800 --> 02:59:43,439
be center text which will be center and

4354
02:59:43,439 --> 02:59:46,240
then space Y of eight because here's the

4355
02:59:46,240 --> 02:59:48,720
thing we will render a badge as we do

4356
02:59:48,720 --> 02:59:50,880
right now. Then we will render a nice

4357
02:59:50,880 --> 02:59:54,000
big title, a little description and then

4358
02:59:54,000 --> 02:59:56,160
two links. That's why we created this

4359
02:59:56,160 --> 02:59:58,399
flex column layout because we want to

4360
02:59:58,399 --> 03:00:00,960
have a column if this makes sense. Then

4361
03:00:00,960 --> 03:00:03,520
I want to also update my batch. So I

4362
03:00:03,520 --> 03:00:05,600
want to give it a variant and this will

4363
03:00:05,600 --> 03:00:08,080
be outline. So as you see this is

4364
03:00:08,080 --> 03:00:10,080
already a bit better. Then underneath

4365
03:00:10,080 --> 03:00:12,960
the batch I want to render an H1. And

4366
03:00:12,960 --> 03:00:16,399
for the H1 I want to say elevate your

4367
03:00:16,399 --> 03:00:20,319
learning experience.

4368
03:00:20,319 --> 03:00:22,640
As you see this is not centered. This is

4369
03:00:22,640 --> 03:00:24,880
not quite what I want. So this means I

4370
03:00:24,880 --> 03:00:27,680
can give the H1 a class name and this

4371
03:00:27,680 --> 03:00:30,800
will be text for Excel. Then on MD or

4372
03:00:30,800 --> 03:00:34,319
bigger, this will be text 6 XL. And MD

4373
03:00:34,319 --> 03:00:36,560
or bigger means that the screen size has

4374
03:00:36,560 --> 03:00:39,120
to have a minimum width of what do we

4375
03:00:39,120 --> 03:00:42,800
have right here? 768 pixels. If it's

4376
03:00:42,800 --> 03:00:44,960
smaller, so if the width is smaller than

4377
03:00:44,960 --> 03:00:48,640
768 pixels, then we render text for

4378
03:00:48,640 --> 03:00:51,920
Excel. Then I want to also say a font

4379
03:00:51,920 --> 03:00:53,760
which will be bold, so a bigger font

4380
03:00:53,760 --> 03:00:55,840
weight. And then also tracking which

4381
03:00:55,840 --> 03:00:58,479
will be tight. So as you see this is our

4382
03:00:58,479 --> 03:01:02,080
title but I don't know it's not

4383
03:01:02,080 --> 03:01:04,800
centered. It does not look good. So we

4384
03:01:04,800 --> 03:01:07,040
want to again go back and then let's see

4385
03:01:07,040 --> 03:01:08,720
it's not centered. What's the problem?

4386
03:01:08,720 --> 03:01:10,800
We have our section relative. Then we

4387
03:01:10,800 --> 03:01:13,040
have our div. Ah that's the here's the

4388
03:01:13,040 --> 03:01:15,200
problem. The H1 is not rendered in the

4389
03:01:15,200 --> 03:01:17,040
div. But of course we want to rendered

4390
03:01:17,040 --> 03:01:19,359
in the div because this div is a flex

4391
03:01:19,359 --> 03:01:22,560
column or has a flex column layout with

4392
03:01:22,560 --> 03:01:25,120
gap and also text center. So let's again

4393
03:01:25,120 --> 03:01:26,880
paste it inside of here. And now it's

4394
03:01:26,880 --> 03:01:29,040
centered. And we also have the gap to

4395
03:01:29,040 --> 03:01:31,520
the top. Then underneath the H1 I want

4396
03:01:31,520 --> 03:01:34,319
to render a P tag. And inside of here I

4397
03:01:34,319 --> 03:01:37,600
will say discover. So discover

4398
03:01:37,600 --> 03:01:42,240
a new way to learn with our modern comma

4399
03:01:42,240 --> 03:01:47,120
interactive learning management system

4400
03:01:47,120 --> 03:01:51,120
dot and then access high-quality

4401
03:01:51,120 --> 03:01:54,960
courses anytime, anywhere. So the full

4402
03:01:54,960 --> 03:01:56,960
sentence will be discover a new way to

4403
03:01:56,960 --> 03:01:58,880
learn with our modern interactive

4404
03:01:58,880 --> 03:02:01,120
learning management system. Access

4405
03:02:01,120 --> 03:02:04,640
highquality courses anytime anywhere. If

4406
03:02:04,640 --> 03:02:06,399
I go back, you will see the description

4407
03:02:06,399 --> 03:02:08,160
right here. But there are two key

4408
03:02:08,160 --> 03:02:10,560
problems. It's a too big, so it takes

4409
03:02:10,560 --> 03:02:13,040
too much width. And secondly, the color

4410
03:02:13,040 --> 03:02:14,960
is too light. It should be like a

4411
03:02:14,960 --> 03:02:17,040
grayish color. This means I can give

4412
03:02:17,040 --> 03:02:19,600
this P tag a class name. And this will

4413
03:02:19,600 --> 03:02:21,680
have a maximum width. And here's the

4414
03:02:21,680 --> 03:02:24,080
thing. I want to add a custom width. So

4415
03:02:24,080 --> 03:02:25,600
right here, we already have like these

4416
03:02:25,600 --> 03:02:30,080
predefined tin CSS classes, 2.5, 2XL,

4417
03:02:30,080 --> 03:02:32,000
and stuff like that. And they have their

4418
03:02:32,000 --> 03:02:34,640
own maximum width. Uh but what I will do

4419
03:02:34,640 --> 03:02:37,200
is add a custom width. So for that you

4420
03:02:37,200 --> 03:02:39,200
can use these array brackets and inside

4421
03:02:39,200 --> 03:02:42,800
of here I will say 700 pixels. Then I

4422
03:02:42,800 --> 03:02:44,960
want to also update the text color and

4423
03:02:44,960 --> 03:02:47,359
this will be text muted foreground. And

4424
03:02:47,359 --> 03:02:50,000
then on MD or bigger this will be text

4425
03:02:50,000 --> 03:02:52,720
XL. If I again go back you will see that

4426
03:02:52,720 --> 03:02:54,720
this has a grayish color. And then I

4427
03:02:54,720 --> 03:02:56,560
want to also render two buttons

4428
03:02:56,560 --> 03:02:59,200
underneath this content. A button to

4429
03:02:59,200 --> 03:03:01,600
explore courses and then a button to

4430
03:03:01,600 --> 03:03:04,240
sign in. So we can go back. We want to

4431
03:03:04,240 --> 03:03:06,640
go underneath this P tag and then inside

4432
03:03:06,640 --> 03:03:08,880
of here or underneath the P tag I want

4433
03:03:08,880 --> 03:03:11,279
to create a new div. Then for the div I

4434
03:03:11,279 --> 03:03:13,359
will give it also a class name and this

4435
03:03:13,359 --> 03:03:16,319
will be flex flex of column. And then if

4436
03:03:16,319 --> 03:03:18,880
the device is bigger than this SM break

4437
03:03:18,880 --> 03:03:22,160
point I want to say flex row. So on a

4438
03:03:22,160 --> 03:03:24,399
mobile screen we will stack the buttons

4439
03:03:24,399 --> 03:03:26,800
vertically. On a desktop screen we will

4440
03:03:26,800 --> 03:03:29,279
align them horizontally. Then I want to

4441
03:03:29,279 --> 03:03:32,080
also say gap four and margin top of

4442
03:03:32,080 --> 03:03:34,560
eight. Inside of here I want to render a

4443
03:03:34,560 --> 03:03:37,760
link component imported from next/link.

4444
03:03:37,760 --> 03:03:40,479
And inside of here I will say explore

4445
03:03:40,479 --> 03:03:43,040
courses. Uh as you see the link

4446
03:03:43,040 --> 03:03:45,040
component currently complains and that's

4447
03:03:45,040 --> 03:03:47,520
because I'm missing one key property and

4448
03:03:47,520 --> 03:03:49,840
that's the href. So I will provide an

4449
03:03:49,840 --> 03:03:52,640
href and this should navigate or for the

4450
03:03:52,640 --> 03:03:55,840
href I will provide slashcourses.

4451
03:03:55,840 --> 03:03:57,760
If I save this and again go back, you

4452
03:03:57,760 --> 03:03:59,760
will see the link right here. But this

4453
03:03:59,760 --> 03:04:02,000
is not styled nicely. The link does not

4454
03:04:02,000 --> 03:04:04,560
look nice. So we want to add a class

4455
03:04:04,560 --> 03:04:06,800
name. And then of course again we could

4456
03:04:06,800 --> 03:04:09,120
style this link by ourselves. We could

4457
03:04:09,120 --> 03:04:11,359
add padding. We could add a background

4458
03:04:11,359 --> 03:04:14,319
color rounding stuff like that. But I

4459
03:04:14,319 --> 03:04:15,760
want to use the button variance

4460
03:04:15,760 --> 03:04:18,000
function. I want to make my life a bit

4461
03:04:18,000 --> 03:04:20,080
easier. So I can import it from the

4462
03:04:20,080 --> 03:04:21,840
components. I can invoke it. I can

4463
03:04:21,840 --> 03:04:24,000
destructure it. And then I want to also

4464
03:04:24,000 --> 03:04:26,800
provide a size which will be LG. So this

4465
03:04:26,800 --> 03:04:28,800
button will be a bit bigger than the

4466
03:04:28,800 --> 03:04:31,279
default shad CN button. And then I want

4467
03:04:31,279 --> 03:04:34,000
to also create a second link to sign in.

4468
03:04:34,000 --> 03:04:35,840
So I will go underneath this link. And

4469
03:04:35,840 --> 03:04:37,840
to be honest I can just copy paste the

4470
03:04:37,840 --> 03:04:39,600
link. We don't have to write it again.

4471
03:04:39,600 --> 03:04:42,000
Uh for the size this will be LG. I want

4472
03:04:42,000 --> 03:04:44,080
to update the variant. This will be

4473
03:04:44,080 --> 03:04:46,640
outline. And then for the href this will

4474
03:04:46,640 --> 03:04:49,279
be /lock in. And instead of saying

4475
03:04:49,279 --> 03:04:52,800
explore courses, I will say sign in. If

4476
03:04:52,800 --> 03:04:54,640
I save this and again go back, you'll

4477
03:04:54,640 --> 03:04:56,720
see two buttons. And if I click on sign

4478
03:04:56,720 --> 03:04:59,520
in, I will get redirected to our login

4479
03:04:59,520 --> 03:05:03,040
page. Then underneath this landing page,

4480
03:05:03,040 --> 03:05:04,880
if you want to call it like that, I want

4481
03:05:04,880 --> 03:05:07,840
to render like a feature section. So I

4482
03:05:07,840 --> 03:05:10,319
want to say something like comprehensive

4483
03:05:10,319 --> 03:05:13,680
courses, interactive learning, progress

4484
03:05:13,680 --> 03:05:15,920
tracking, something like that, you know.

4485
03:05:15,920 --> 03:05:18,560
So we can go back and I want to go

4486
03:05:18,560 --> 03:05:21,279
underneath our div. So under which div?

4487
03:05:21,279 --> 03:05:23,200
Well, I want to actually go underneath

4488
03:05:23,200 --> 03:05:25,520
the section. So I want to use again my

4489
03:05:25,520 --> 03:05:27,920
section element. We can open it and I

4490
03:05:27,920 --> 03:05:30,319
want to also give it a class name. So if

4491
03:05:30,319 --> 03:05:31,920
this currently confuses you, if you

4492
03:05:31,920 --> 03:05:33,600
don't really understand what I'm trying

4493
03:05:33,600 --> 03:05:35,840
to do right here, then let me uh show it

4494
03:05:35,840 --> 03:05:38,240
to you with a little diagram. So this is

4495
03:05:38,240 --> 03:05:40,240
our page right now. As you know, right

4496
03:05:40,240 --> 03:05:42,160
here we have a little batch. Then we

4497
03:05:42,160 --> 03:05:44,399
have a huge title. So let me just for

4498
03:05:44,399 --> 03:05:47,040
example use a text and this is a huge

4499
03:05:47,040 --> 03:05:49,520
title. Then underneath this big title we

4500
03:05:49,520 --> 03:05:51,840
have a small description. So this is

4501
03:05:51,840 --> 03:05:53,840
this right here. Oh of course we also

4502
03:05:53,840 --> 03:05:56,000
have two buttons. But yeah this is our

4503
03:05:56,000 --> 03:05:58,560
hero. But underneath my hero I want to

4504
03:05:58,560 --> 03:06:01,680
render three or four cards. So one then

4505
03:06:01,680 --> 03:06:04,720
also two three and four. In these four

4506
03:06:04,720 --> 03:06:06,880
cards I want to render like fe core

4507
03:06:06,880 --> 03:06:08,960
features like comprehensive courses

4508
03:06:08,960 --> 03:06:10,640
again interactive learning and stuff

4509
03:06:10,640 --> 03:06:12,640
like that. So this will be our landing

4510
03:06:12,640 --> 03:06:15,200
page. It will consist of this hero and

4511
03:06:15,200 --> 03:06:17,600
then these feature cards. So we can

4512
03:06:17,600 --> 03:06:20,000
again go back and then for the section I

4513
03:06:20,000 --> 03:06:21,840
want to create a grid layout because

4514
03:06:21,840 --> 03:06:24,399
again we will have four cards which

4515
03:06:24,399 --> 03:06:26,240
means we want to create a grid layout

4516
03:06:26,240 --> 03:06:29,120
with four columns. So I can go back I

4517
03:06:29,120 --> 03:06:31,200
can add a class name and then this will

4518
03:06:31,200 --> 03:06:33,840
be grid grid columns of one for the

4519
03:06:33,840 --> 03:06:36,560
mobile screen because on a mobile screen

4520
03:06:36,560 --> 03:06:38,800
we want to stack them vertically. Then

4521
03:06:38,800 --> 03:06:41,040
on MD or bigger, this will be grid

4522
03:06:41,040 --> 03:06:44,000
columns of two. And on LG or bigger,

4523
03:06:44,000 --> 03:06:46,160
this means on a desktop device, this

4524
03:06:46,160 --> 03:06:48,479
will be grid columns four. I want to

4525
03:06:48,479 --> 03:06:50,960
also add a gap, which will be six. And

4526
03:06:50,960 --> 03:06:53,040
inside of here, I want to map over my

4527
03:06:53,040 --> 03:06:55,680
features. Currently, I don't have any.

4528
03:06:55,680 --> 03:06:57,840
So, let's create a new array. I want to

4529
03:06:57,840 --> 03:07:00,319
go above my return statement, above this

4530
03:07:00,319 --> 03:07:02,720
export default function, and then inside

4531
03:07:02,720 --> 03:07:04,560
of here, I want to create a constant

4532
03:07:04,560 --> 03:07:06,960
features. And this will be equal to an

4533
03:07:06,960 --> 03:07:09,359
empty array. In this array, I want to

4534
03:07:09,359 --> 03:07:12,000
create an object. And this object will

4535
03:07:12,000 --> 03:07:14,800
have uh three properties, a title,

4536
03:07:14,800 --> 03:07:17,359
description, and icon. So, let's start

4537
03:07:17,359 --> 03:07:19,760
with the title. And for the title, I

4538
03:07:19,760 --> 03:07:22,880
will say comprehensive courses. Then I

4539
03:07:22,880 --> 03:07:25,279
want to also add a description. And for

4540
03:07:25,279 --> 03:07:27,680
the description, I want to say access a

4541
03:07:27,680 --> 03:07:30,800
wide range of carefully curated courses

4542
03:07:30,800 --> 03:07:33,520
designed by industry experts. This means

4543
03:07:33,520 --> 03:07:36,479
by me since I'm an expert. Then

4544
03:07:36,479 --> 03:07:38,319
underneath the description, I want to

4545
03:07:38,319 --> 03:07:41,359
also provide an icon property. And the

4546
03:07:41,359 --> 03:07:44,560
icon will be equal to this Mac OS icon.

4547
03:07:44,560 --> 03:07:46,720
So if you use Windows, I'm not sure how

4548
03:07:46,720 --> 03:07:49,279
you use the icons, but with Mac OS, you

4549
03:07:49,279 --> 03:07:51,439
want to click on command and then also

4550
03:07:51,439 --> 03:07:54,560
Fn or whatever it is and spacebar. And I

4551
03:07:54,560 --> 03:07:56,880
want to get the books icon right here.

4552
03:07:56,880 --> 03:07:58,880
Then I want to create another object

4553
03:07:58,880 --> 03:08:01,439
again with a title. For the title, I

4554
03:08:01,439 --> 03:08:04,080
will say interactive learning. Then I

4555
03:08:04,080 --> 03:08:06,399
want you also provide a description and

4556
03:08:06,399 --> 03:08:08,560
for the description I want to say engage

4557
03:08:08,560 --> 03:08:11,200
with interactive content quizzes and

4558
03:08:11,200 --> 03:08:13,439
assignments to enhance your learning

4559
03:08:13,439 --> 03:08:16,160
experience. Then I want to also provide

4560
03:08:16,160 --> 03:08:19,200
an icon and for the icon I will use this

4561
03:08:19,200 --> 03:08:21,680
game play gamepad I don't know

4562
03:08:21,680 --> 03:08:23,760
PlayStation controller. Then we can

4563
03:08:23,760 --> 03:08:25,840
create another object and you know what

4564
03:08:25,840 --> 03:08:27,840
currently we have a big problem. There's

4565
03:08:27,840 --> 03:08:30,000
no type safety. What I mean by that is

4566
03:08:30,000 --> 03:08:32,560
if I misspel title I don't get any

4567
03:08:32,560 --> 03:08:34,399
errors. So let's create a little

4568
03:08:34,399 --> 03:08:36,640
interface on the top. So interface I

4569
03:08:36,640 --> 03:08:39,600
will call it a feature props and then

4570
03:08:39,600 --> 03:08:41,920
this will be an object and inside of

4571
03:08:41,920 --> 03:08:44,080
here we will have a title which will be

4572
03:08:44,080 --> 03:08:46,000
of type string. We will have a

4573
03:08:46,000 --> 03:08:48,240
description which will be of type string

4574
03:08:48,240 --> 03:08:50,720
and then we will also have an icon which

4575
03:08:50,720 --> 03:08:52,880
will be of type string. Then I can use

4576
03:08:52,880 --> 03:08:54,960
this feature props for my constant

4577
03:08:54,960 --> 03:08:57,040
features. This means I can add a type

4578
03:08:57,040 --> 03:08:58,960
with this colon and this will be equal

4579
03:08:58,960 --> 03:09:01,760
to feature props. But feature props is

4580
03:09:01,760 --> 03:09:04,240
an object which means we want to append

4581
03:09:04,240 --> 03:09:06,960
this array symbol. So if I again go back

4582
03:09:06,960 --> 03:09:09,359
and now click on control spacebar I get

4583
03:09:09,359 --> 03:09:11,760
all of my types right here. So I want to

4584
03:09:11,760 --> 03:09:15,200
get my title and the third title will be

4585
03:09:15,200 --> 03:09:18,240
progress tracking. Then I want to also

4586
03:09:18,240 --> 03:09:20,240
add a description and for the

4587
03:09:20,240 --> 03:09:22,640
description I want to say monitor your

4588
03:09:22,640 --> 03:09:25,200
progress and achievements with detailed

4589
03:09:25,200 --> 03:09:28,160
analytics and personalized dashboards.

4590
03:09:28,160 --> 03:09:30,560
Then I want to also add an icon which

4591
03:09:30,560 --> 03:09:33,040
will be of type string. And for the icon

4592
03:09:33,040 --> 03:09:35,200
I want to provide this icon right here.

4593
03:09:35,200 --> 03:09:37,760
So the statistics icon. And then I want

4594
03:09:37,760 --> 03:09:40,080
to create one more object a fourth

4595
03:09:40,080 --> 03:09:42,640
feature. And again we want to provide a

4596
03:09:42,640 --> 03:09:46,160
title which will say community support.

4597
03:09:46,160 --> 03:09:47,840
Then I want to also provide a

4598
03:09:47,840 --> 03:09:50,080
description. For the description I will

4599
03:09:50,080 --> 03:09:52,640
say join a vibrant community of learners

4600
03:09:52,640 --> 03:09:55,040
and instructors to collaborate and share

4601
03:09:55,040 --> 03:09:57,040
knowledge. And then we are also missing

4602
03:09:57,040 --> 03:09:59,600
the icon. And for the icon I want to

4603
03:09:59,600 --> 03:10:02,240
just render a user icon. So right here

4604
03:10:02,240 --> 03:10:04,160
you can just say users and then you

4605
03:10:04,160 --> 03:10:07,120
should find this icon. So we now created

4606
03:10:07,120 --> 03:10:09,200
our features array which means I can

4607
03:10:09,200 --> 03:10:11,600
scroll again to the bottom and I can map

4608
03:10:11,600 --> 03:10:14,640
over my features in this section. So I

4609
03:10:14,640 --> 03:10:17,040
will get my features. Then I want to use

4610
03:10:17,040 --> 03:10:19,680
the map method as a param. I will get

4611
03:10:19,680 --> 03:10:22,720
the feature and also an index. And then

4612
03:10:22,720 --> 03:10:25,359
I can just return this. Then inside of

4613
03:10:25,359 --> 03:10:27,920
here, I want to use the cart component.

4614
03:10:27,920 --> 03:10:29,840
And as you all know, whenever you map

4615
03:10:29,840 --> 03:10:32,560
over items in React, you have to provide

4616
03:10:32,560 --> 03:10:35,040
a key. And what is unique right here?

4617
03:10:35,040 --> 03:10:37,279
Well, the index is unique. And also,

4618
03:10:37,279 --> 03:10:39,359
some people might say, "Hey, Jan, you

4619
03:10:39,359 --> 03:10:41,200
shouldn't use an index. You should use

4620
03:10:41,200 --> 03:10:43,680
an unique ID. You should go back to your

4621
03:10:43,680 --> 03:10:47,200
array, add ID, stuff like that." Yes, in

4622
03:10:47,200 --> 03:10:49,520
theory, you want to always use custom

4623
03:10:49,520 --> 03:10:53,040
IDs or unique IDs. An index is unique,

4624
03:10:53,040 --> 03:10:56,080
but whenever you start reordering items,

4625
03:10:56,080 --> 03:10:58,479
the index will break a lot of things.

4626
03:10:58,479 --> 03:11:00,399
But if your items are statically

4627
03:11:00,399 --> 03:11:02,319
rendered, this means if you don't have

4628
03:11:02,319 --> 03:11:05,200
drag and drop and no interactivity with

4629
03:11:05,200 --> 03:11:07,600
this features map or with this mapping

4630
03:11:07,600 --> 03:11:10,080
itself, then you don't need custom ids.

4631
03:11:10,080 --> 03:11:12,640
Then an index is fine enough. Then for

4632
03:11:12,640 --> 03:11:14,960
our cart, we can also provide a class

4633
03:11:14,960 --> 03:11:17,680
name. And I want to say on hover the uh

4634
03:11:17,680 --> 03:11:20,240
we I want to showcase a shadow which

4635
03:11:20,240 --> 03:11:22,960
will be LG and then also transition

4636
03:11:22,960 --> 03:11:25,840
which will be shadow. Then in the cart I

4637
03:11:25,840 --> 03:11:28,080
want to render a card header which is

4638
03:11:28,080 --> 03:11:30,160
imported from the components. And inside

4639
03:11:30,160 --> 03:11:32,000
of here I want to first of all render

4640
03:11:32,000 --> 03:11:34,399
the icon. So I will create a div and

4641
03:11:34,399 --> 03:11:36,720
inside of here I want to get my feature

4642
03:11:36,720 --> 03:11:39,439
dot icon. I want to also give the div a

4643
03:11:39,439 --> 03:11:42,640
class name which will be text for Excel

4644
03:11:42,640 --> 03:11:45,200
and then also margin bottom four. If I

4645
03:11:45,200 --> 03:11:47,520
save this and again go back, you will

4646
03:11:47,520 --> 03:11:49,760
see these cards on the bottom. They look

4647
03:11:49,760 --> 03:11:52,720
quite nice. But we are missing the title

4648
03:11:52,720 --> 03:11:55,279
and the description. So I can go back

4649
03:11:55,279 --> 03:11:57,200
and then underneath this div but still

4650
03:11:57,200 --> 03:11:59,760
in the cart header I want to get my card

4651
03:11:59,760 --> 03:12:03,840
title and I will render my feature.

4652
03:12:03,840 --> 03:12:06,080
Then underneath my cart header I want to

4653
03:12:06,080 --> 03:12:08,880
also render card content and in the card

4654
03:12:08,880 --> 03:12:11,840
content component I will create a P tag.

4655
03:12:11,840 --> 03:12:14,880
In the PTA tag, I will render my feature

4656
03:12:14,880 --> 03:12:17,359
dot description. We have an icon, then

4657
03:12:17,359 --> 03:12:18,880
we have the title, and then the

4658
03:12:18,880 --> 03:12:20,880
description. The only problem is this

4659
03:12:20,880 --> 03:12:23,680
description has a color which is white

4660
03:12:23,680 --> 03:12:26,399
and it should be a bit darker. So, I can

4661
03:12:26,399 --> 03:12:28,479
go back and then for the P tag, I will

4662
03:12:28,479 --> 03:12:31,359
provide a class name which will be text

4663
03:12:31,359 --> 03:12:34,800
muted foreground. And as you see, this

4664
03:12:34,800 --> 03:12:36,960
already looks way better. But if we look

4665
03:12:36,960 --> 03:12:39,120
at this page, you will see it's kind of

4666
03:12:39,120 --> 03:12:41,760
broken. If I zoom out, these cards go to

4667
03:12:41,760 --> 03:12:43,520
the end of the screen. This shouldn't

4668
03:12:43,520 --> 03:12:45,279
happen. I want to have something like a

4669
03:12:45,279 --> 03:12:47,439
container. This here should be the end

4670
03:12:47,439 --> 03:12:50,240
of my screen and the cards should align

4671
03:12:50,240 --> 03:12:52,560
all right here and they shouldn't

4672
03:12:52,560 --> 03:12:55,120
overflow. So this means we want to

4673
03:12:55,120 --> 03:12:58,000
create a layout. So I can again open my

4674
03:12:58,000 --> 03:13:00,479
explorer and then in the public folder I

4675
03:13:00,479 --> 03:13:02,880
will create a layout.tsx

4676
03:13:02,880 --> 03:13:05,120
because here's the thing on the top. So

4677
03:13:05,120 --> 03:13:07,120
if I go back and do okay, now it does

4678
03:13:07,120 --> 03:13:09,439
not work. So let's again go back for the

4679
03:13:09,439 --> 03:13:12,000
layout. I will create an export default

4680
03:13:12,000 --> 03:13:15,120
function layout public. I will also

4681
03:13:15,120 --> 03:13:17,200
create a return statement and I will

4682
03:13:17,200 --> 03:13:19,439
return a diff just so that this error

4683
03:13:19,439 --> 03:13:21,760
goes away. If I go back you won't see

4684
03:13:21,760 --> 03:13:23,840
anything. That's fine. But what I want

4685
03:13:23,840 --> 03:13:26,319
to do is render a navbar right here on

4686
03:13:26,319 --> 03:13:28,479
the top. Then I want to render my main

4687
03:13:28,479 --> 03:13:31,040
content which we just created. And then

4688
03:13:31,040 --> 03:13:33,120
this will be already it. Also this

4689
03:13:33,120 --> 03:13:35,279
layout will define our layout which

4690
03:13:35,279 --> 03:13:37,920
means it will create a container so that

4691
03:13:37,920 --> 03:13:41,200
this content or this outside space will

4692
03:13:41,200 --> 03:13:44,000
just be empty because on large devices

4693
03:13:44,000 --> 03:13:46,080
we don't want to take the whole width.

4694
03:13:46,080 --> 03:13:48,960
So we can again go back and then I want

4695
03:13:48,960 --> 03:13:51,439
to add a class name or in the return

4696
03:13:51,439 --> 03:13:53,600
statement I want to start off fresh. I

4697
03:13:53,600 --> 03:13:56,080
want to first of all again return a div

4698
03:13:56,080 --> 03:13:58,160
element. Then in the div I want to

4699
03:13:58,160 --> 03:14:00,479
render a navbar. For now, I will create

4700
03:14:00,479 --> 03:14:03,760
an H1 and say navbar. And underneath the

4701
03:14:03,760 --> 03:14:06,160
H1, I want to render my children. Where

4702
03:14:06,160 --> 03:14:08,239
do we get our children from? Well, we

4703
03:14:08,239 --> 03:14:09,920
will get them through uh from our

4704
03:14:09,920 --> 03:14:12,080
params. So, I can destructure the

4705
03:14:12,080 --> 03:14:14,479
params. And I want to get my children.

4706
03:14:14,479 --> 03:14:16,479
As you see, we get an error and it says

4707
03:14:16,479 --> 03:14:18,640
children is declared, but its value is

4708
03:14:18,640 --> 03:14:20,960
never used. And also, binding element

4709
03:14:20,960 --> 03:14:23,760
children implicitly has an any type. So,

4710
03:14:23,760 --> 03:14:26,080
we want to give it a type. And children

4711
03:14:26,080 --> 03:14:29,279
will be of type react note.

4712
03:14:29,279 --> 03:14:32,000
Then underneath my uh H1 I want to

4713
03:14:32,000 --> 03:14:34,000
create a main element and in the main

4714
03:14:34,000 --> 03:14:36,239
element I will render my children. This

4715
03:14:36,239 --> 03:14:38,319
means if I go back you will now see on

4716
03:14:38,319 --> 03:14:40,880
the top left corner I render this navbar

4717
03:14:40,880 --> 03:14:43,680
H1 and then I render my children. But we

4718
03:14:43,680 --> 03:14:46,800
still haven't fixed our container or our

4719
03:14:46,800 --> 03:14:49,439
width issue is this if this makes sense.

4720
03:14:49,439 --> 03:14:51,520
So for the main element I will provide a

4721
03:14:51,520 --> 03:14:53,200
class name and then this will be

4722
03:14:53,200 --> 03:14:55,200
container. This will create a maximum

4723
03:14:55,200 --> 03:14:57,760
width. But we with that also create a

4724
03:14:57,760 --> 03:14:59,600
problem because if I go back and zoom

4725
03:14:59,600 --> 03:15:01,760
out, you see it's aligned to the left

4726
03:15:01,760 --> 03:15:04,000
side but it should be centered. This

4727
03:15:04,000 --> 03:15:06,080
means we want to also give this main

4728
03:15:06,080 --> 03:15:09,200
element a class name which is MX auto.

4729
03:15:09,200 --> 03:15:10,800
This means it will center it in the

4730
03:15:10,800 --> 03:15:12,319
middle the content. And this already

4731
03:15:12,319 --> 03:15:14,399
looks way better. Then we can also

4732
03:15:14,399 --> 03:15:16,640
continue and I want to give it a padding

4733
03:15:16,640 --> 03:15:20,800
X4 on MD or bigger padding X6 and on LG

4734
03:15:20,800 --> 03:15:23,760
or bigger padding X8. Then as a next

4735
03:15:23,760 --> 03:15:26,399
step I want to create my navbar. So I

4736
03:15:26,399 --> 03:15:28,399
can open the explorer and then in the

4737
03:15:28,399 --> 03:15:30,720
public folder I want to create another

4738
03:15:30,720 --> 03:15:32,640
folder which will be underscore

4739
03:15:32,640 --> 03:15:34,960
components. So I know a few people

4740
03:15:34,960 --> 03:15:37,279
probably already forgot the reason on

4741
03:15:37,279 --> 03:15:40,000
why I create this underscore components

4742
03:15:40,000 --> 03:15:42,319
folder. So here's the thing. I'm a big

4743
03:15:42,319 --> 03:15:44,960
fan of vertical slice architecture. What

4744
03:15:44,960 --> 03:15:46,880
does this mean? Vertical slice

4745
03:15:46,880 --> 03:15:49,600
architecture essentially means that you

4746
03:15:49,600 --> 03:15:51,920
want to store your code based on the

4747
03:15:51,920 --> 03:15:54,960
feature. That's how I explain it in most

4748
03:15:54,960 --> 03:15:58,080
cases. So for example, my navbar is

4749
03:15:58,080 --> 03:16:00,319
public facing related. This means this

4750
03:16:00,319 --> 03:16:03,279
navbar will only be used in this layout.

4751
03:16:03,279 --> 03:16:05,920
It won't be rendered in my dashboard. It

4752
03:16:05,920 --> 03:16:08,479
won't be rendered in my admin dashboard.

4753
03:16:08,479 --> 03:16:10,640
It won't be rendered anywhere else. It

4754
03:16:10,640 --> 03:16:12,800
will only be rendered in this one

4755
03:16:12,800 --> 03:16:15,200
layout. Therefore, I create a components

4756
03:16:15,200 --> 03:16:17,840
folder right in this public folder. For

4757
03:16:17,840 --> 03:16:20,080
example, later on we will create a rich

4758
03:16:20,080 --> 03:16:23,040
text editor. This rich text editor will

4759
03:16:23,040 --> 03:16:25,279
be reused in multiple routes. That's

4760
03:16:25,279 --> 03:16:27,520
also the reason why I will later on

4761
03:16:27,520 --> 03:16:29,600
create a witch text editor or I will

4762
03:16:29,600 --> 03:16:32,239
store it in this components folder. If I

4763
03:16:32,239 --> 03:16:34,399
would only use it in one application

4764
03:16:34,399 --> 03:16:36,880
level itself, then I would also store it

4765
03:16:36,880 --> 03:16:39,439
in this specific route level. But since

4766
03:16:39,439 --> 03:16:41,520
I will later on reuse it, I will store

4767
03:16:41,520 --> 03:16:43,760
it in the components folder. The navbar

4768
03:16:43,760 --> 03:16:45,600
won't be reused. And that's the reason

4769
03:16:45,600 --> 03:16:48,080
why I created this underscore components

4770
03:16:48,080 --> 03:16:50,000
folder. Again, you can read more about

4771
03:16:50,000 --> 03:16:52,000
this if you go to Google and search

4772
03:16:52,000 --> 03:16:54,239
vertical slice architecture or

4773
03:16:54,239 --> 03:16:57,120
featurebased uh folder structure. You

4774
03:16:57,120 --> 03:16:59,680
will find enough info. I also created a

4775
03:16:59,680 --> 03:17:01,840
video on that on my YouTube channel.

4776
03:17:01,840 --> 03:17:03,920
It's called stop structuring your

4777
03:17:03,920 --> 03:17:06,399
project like a junior deaf. And there I

4778
03:17:06,399 --> 03:17:10,080
talk about how I structure my projects.

4779
03:17:10,080 --> 03:17:12,239
And then in this components folder, I

4780
03:17:12,239 --> 03:17:14,720
want to create a navbar.tsx

4781
03:17:14,720 --> 03:17:16,880
file. And inside of here we can first of

4782
03:17:16,880 --> 03:17:19,840
all create an export function navbar.

4783
03:17:19,840 --> 03:17:21,840
And then I want to also open this

4784
03:17:21,840 --> 03:17:24,239
function inside of here. For now I will

4785
03:17:24,239 --> 03:17:26,319
create a return statement and I will

4786
03:17:26,319 --> 03:17:30,160
return an H1 which says hey this is the

4787
03:17:30,160 --> 03:17:32,720
navbar. Then in my layout instead of

4788
03:17:32,720 --> 03:17:35,120
rendering this H1 I will render the

4789
03:17:35,120 --> 03:17:37,680
navbar component which is imported from

4790
03:17:37,680 --> 03:17:40,239
the components. If I again go back and

4791
03:17:40,239 --> 03:17:43,040
do a hard refresh, I will see the navbar

4792
03:17:43,040 --> 03:17:45,439
right here on the top left corner. But

4793
03:17:45,439 --> 03:17:47,359
of course, this is not quite what I want

4794
03:17:47,359 --> 03:17:49,600
to render. So let's create a beautiful

4795
03:17:49,600 --> 03:17:52,160
navbar. So I will go back and I will

4796
03:17:52,160 --> 03:17:54,399
create a new return statement, a fresh

4797
03:17:54,399 --> 03:17:56,800
return statement. I want to start off

4798
03:17:56,800 --> 03:17:59,200
with a header element and I will also

4799
03:17:59,200 --> 03:18:01,520
give it a class name. First of all, the

4800
03:18:01,520 --> 03:18:03,760
position will be sticky. This means once

4801
03:18:03,760 --> 03:18:06,239
we scroll later on, the navbar will

4802
03:18:06,239 --> 03:18:08,800
always be visible. Then for the position

4803
03:18:08,800 --> 03:18:12,000
I want to also say top zero. Um then we

4804
03:18:12,000 --> 03:18:14,560
want to say Z 50. So it should always

4805
03:18:14,560 --> 03:18:17,600
overlay our content. Then with full

4806
03:18:17,600 --> 03:18:20,080
border bottom I want to render a border

4807
03:18:20,080 --> 03:18:24,080
at the bottom. BG background and then /

4808
03:18:24,080 --> 03:18:26,720
95. This means I want to take the whole

4809
03:18:26,720 --> 03:18:29,439
background color and give it an opacity

4810
03:18:29,439 --> 03:18:31,359
of 95%.

4811
03:18:31,359 --> 03:18:34,160
Then we can also say backdrop blur. And

4812
03:18:34,160 --> 03:18:36,560
then I want to provide a custom filter.

4813
03:18:36,560 --> 03:18:38,479
So this means we can use array symbols

4814
03:18:38,479 --> 03:18:40,080
right here and I want to say

4815
03:18:40,080 --> 03:18:42,000
backdrop-filter

4816
03:18:42,000 --> 03:18:44,399
and then this will be equal to bg

4817
03:18:44,399 --> 03:18:47,200
background/60.

4818
03:18:47,200 --> 03:18:49,680
I can delete this h1 and I want to

4819
03:18:49,680 --> 03:18:52,000
create a div element. In this div I want

4820
03:18:52,000 --> 03:18:53,920
to render a link component which is

4821
03:18:53,920 --> 03:18:56,479
imported from next /link. I have to

4822
03:18:56,479 --> 03:18:58,960
provide an href. This will be the index

4823
03:18:58,960 --> 03:19:01,279
page. This means an empty slash and

4824
03:19:01,279 --> 03:19:03,600
inside of here I want to render the logo

4825
03:19:03,600 --> 03:19:06,000
and then also the company name. So first

4826
03:19:06,000 --> 03:19:07,920
of all we can get the image component

4827
03:19:07,920 --> 03:19:10,640
from next / image and we have to provide

4828
03:19:10,640 --> 03:19:13,760
a source and then also an alt. For the

4829
03:19:13,760 --> 03:19:16,239
alt I will just say logo and for the

4830
03:19:16,239 --> 03:19:18,880
source I can import it on the top. So I

4831
03:19:18,880 --> 03:19:22,000
will say import logo from at

4832
03:19:22,000 --> 03:19:25,000
/public/logo.png.

4833
03:19:25,120 --> 03:19:27,520
I can then pass it as a source and I

4834
03:19:27,520 --> 03:19:30,080
want to also provide a class name and

4835
03:19:30,080 --> 03:19:32,720
the class name will be size 9. This

4836
03:19:32,720 --> 03:19:35,439
means width 9 and height 9. And then

4837
03:19:35,439 --> 03:19:37,439
underneath the image I want to render a

4838
03:19:37,439 --> 03:19:40,080
span element and I want to say Marshall

4839
03:19:40,080 --> 03:19:43,439
LMS dot. I can also give it a class name

4840
03:19:43,439 --> 03:19:46,000
and this will be font bold. This means

4841
03:19:46,000 --> 03:19:48,239
if I again go back you will see right

4842
03:19:48,239 --> 03:19:50,399
here that we have a logo and then my

4843
03:19:50,399 --> 03:19:52,399
name right here or the company name. But

4844
03:19:52,399 --> 03:19:54,080
the thing is this should be aligned

4845
03:19:54,080 --> 03:19:56,479
horizontally. Currently it's aligned as

4846
03:19:56,479 --> 03:19:59,120
a column. This means we can go back and

4847
03:19:59,120 --> 03:20:01,439
for the link I can give it a class name

4848
03:20:01,439 --> 03:20:03,680
and then this will be flex. We want to

4849
03:20:03,680 --> 03:20:07,279
say item center and then also space X2

4850
03:20:07,279 --> 03:20:10,720
and margin um right four. So margin to

4851
03:20:10,720 --> 03:20:12,880
the right side. If I again go back,

4852
03:20:12,880 --> 03:20:14,479
you'll see that it's aligned

4853
03:20:14,479 --> 03:20:17,040
horizontally and it looks quite nice.

4854
03:20:17,040 --> 03:20:19,200
But we still have one problem. You see

4855
03:20:19,200 --> 03:20:22,080
this is my navbar, but my navbar has

4856
03:20:22,080 --> 03:20:24,800
zero padding. So this touches the

4857
03:20:24,800 --> 03:20:27,279
border. It does not look good. So I can

4858
03:20:27,279 --> 03:20:29,200
go back and then I can give this div

4859
03:20:29,200 --> 03:20:32,160
which wraps our link a class name. This

4860
03:20:32,160 --> 03:20:35,120
will also be container then flex height

4861
03:20:35,120 --> 03:20:37,760
which will be 16 and we can also say

4862
03:20:37,760 --> 03:20:40,640
minimum height 16. This is always better

4863
03:20:40,640 --> 03:20:43,439
then just to give an absolute value.

4864
03:20:43,439 --> 03:20:46,720
Then this will be items center MX auto

4865
03:20:46,720 --> 03:20:48,720
to center it in the middle. And then we

4866
03:20:48,720 --> 03:20:51,040
want to also add our padding on the

4867
03:20:51,040 --> 03:20:53,279
horizontal side. So this means padding

4868
03:20:53,279 --> 03:20:57,520
X4 MD or bigger padding X6 and LG or

4869
03:20:57,520 --> 03:21:00,319
bigger padding X8. And if I scroll a bit

4870
03:21:00,319 --> 03:21:02,720
to the bottom, you see that my navbar

4871
03:21:02,720 --> 03:21:04,880
overlays my content. Then I want to

4872
03:21:04,880 --> 03:21:07,279
continue with my desktop navigation.

4873
03:21:07,279 --> 03:21:10,160
This means I want to render my links. So

4874
03:21:10,160 --> 03:21:12,160
we can go back. We can go underneath

4875
03:21:12,160 --> 03:21:14,319
this link and I want to still stay in

4876
03:21:14,319 --> 03:21:16,720
this main div. And inside of here I want

4877
03:21:16,720 --> 03:21:19,040
to create a nav element. And again this

4878
03:21:19,040 --> 03:21:21,200
will be our desktop navigation which

4879
03:21:21,200 --> 03:21:23,279
means I can also create a comment which

4880
03:21:23,279 --> 03:21:27,200
will say desktop navigation. inside of

4881
03:21:27,200 --> 03:21:29,600
the nav element uh I want to create a

4882
03:21:29,600 --> 03:21:31,920
div element and then in this div element

4883
03:21:31,920 --> 03:21:35,200
I want to map over my navigation items.

4884
03:21:35,200 --> 03:21:37,200
So I will create an array above my

4885
03:21:37,200 --> 03:21:39,920
export function. This will be a constant

4886
03:21:39,920 --> 03:21:42,880
navigation items and this will be equal

4887
03:21:42,880 --> 03:21:45,600
to an empty array. Inside of here I want

4888
03:21:45,600 --> 03:21:49,120
to create three objects three links. The

4889
03:21:49,120 --> 03:21:51,439
first object will have a name. For the

4890
03:21:51,439 --> 03:21:54,720
name I will say home.

4891
03:21:54,720 --> 03:21:57,200
Then I want to also provide an href and

4892
03:21:57,200 --> 03:21:59,439
this will be an empty slash. Then for

4893
03:21:59,439 --> 03:22:02,479
the second link the name will be courses

4894
03:22:02,479 --> 03:22:04,640
and for the href this will be

4895
03:22:04,640 --> 03:22:07,640
slashcourses.

4896
03:22:08,160 --> 03:22:10,239
And then I want to also create a third

4897
03:22:10,239 --> 03:22:12,399
link and for the name this will be

4898
03:22:12,399 --> 03:22:15,600
dashboard and for the href this will be

4899
03:22:15,600 --> 03:22:18,080
/ dashboard. So we have finished with

4900
03:22:18,080 --> 03:22:20,640
the navigation items which means I can

4901
03:22:20,640 --> 03:22:23,200
map over them in my div. So I will get

4902
03:22:23,200 --> 03:22:25,680
my navigation items. I want to use the

4903
03:22:25,680 --> 03:22:28,640
map method. I will invoke it as a param.

4904
03:22:28,640 --> 03:22:31,200
I want to get an item and then I will

4905
03:22:31,200 --> 03:22:33,279
return it. Inside of here I want to

4906
03:22:33,279 --> 03:22:35,600
render a link component and for the link

4907
03:22:35,600 --> 03:22:38,319
we have to provide two key properties.

4908
03:22:38,319 --> 03:22:40,960
First of all the key which has to be a

4909
03:22:40,960 --> 03:22:43,920
unique identifier. In this case our name

4910
03:22:43,920 --> 03:22:46,640
is unique. So for the key I will pass

4911
03:22:46,640 --> 03:22:49,760
our item dot name. Then I want to also

4912
03:22:49,760 --> 03:22:52,080
provide an href and this will be the

4913
03:22:52,080 --> 03:22:56,000
item href and I want to also provide a

4914
03:22:56,000 --> 03:22:59,760
class name and this will be text sm font

4915
03:22:59,760 --> 03:23:03,040
medium transition which will be colors

4916
03:23:03,040 --> 03:23:05,600
and then on hover I want to render text

4917
03:23:05,600 --> 03:23:08,720
primary so my primary color and then in

4918
03:23:08,720 --> 03:23:11,680
the link I will render my item name.

4919
03:23:11,680 --> 03:23:13,680
This means if I again go back you will

4920
03:23:13,680 --> 03:23:16,319
see in the navbar three links home

4921
03:23:16,319 --> 03:23:18,960
courses and dashboard but there's no

4922
03:23:18,960 --> 03:23:21,520
spacing between these links. So I want

4923
03:23:21,520 --> 03:23:23,520
to go back then right here we have this

4924
03:23:23,520 --> 03:23:25,920
wrapping div and I can give this div a

4925
03:23:25,920 --> 03:23:28,880
class name which will be flex items

4926
03:23:28,880 --> 03:23:32,000
center and space x which will be two. As

4927
03:23:32,000 --> 03:23:34,399
you see this already looks way better.

4928
03:23:34,399 --> 03:23:36,800
And we are finished with the left side

4929
03:23:36,800 --> 03:23:38,800
but on the right side there are a few

4930
03:23:38,800 --> 03:23:40,720
things which I want to render. First of

4931
03:23:40,720 --> 03:23:43,040
all, I want to render a theme toggle and

4932
03:23:43,040 --> 03:23:45,279
then I want to create a turnary. If we

4933
03:23:45,279 --> 03:23:47,200
have a valid user session, I want to

4934
03:23:47,200 --> 03:23:49,680
create a user dropdown. If we don't have

4935
03:23:49,680 --> 03:23:52,160
a valid user session, I want to render a

4936
03:23:52,160 --> 03:23:54,960
lock in button. So, we can go back and I

4937
03:23:54,960 --> 03:23:57,040
want to go underneath this div, but I

4938
03:23:57,040 --> 03:23:59,600
want to stay in the snaf element. Inside

4939
03:23:59,600 --> 03:24:01,840
of here, I will create a div element.

4940
03:24:01,840 --> 03:24:04,000
And in this div, I want to get my theme

4941
03:24:04,000 --> 03:24:06,080
toggle, which is imported from the

4942
03:24:06,080 --> 03:24:08,640
components. This is self-closing. And if

4943
03:24:08,640 --> 03:24:12,560
I go back h yeah this is not what I

4944
03:24:12,560 --> 03:24:14,800
wanted. This uh theme toggle should be

4945
03:24:14,800 --> 03:24:17,439
on the right side. What wraps our

4946
03:24:17,439 --> 03:24:19,359
children? So we have this div and this

4947
03:24:19,359 --> 03:24:22,000
div. Our nav element wraps these two

4948
03:24:22,000 --> 03:24:24,399
divs. This means we can give our nav a

4949
03:24:24,399 --> 03:24:27,040
class name and then this will be flex.

4950
03:24:27,040 --> 03:24:29,200
And you know what on mobile this should

4951
03:24:29,200 --> 03:24:31,279
be hidden. This means the initial state

4952
03:24:31,279 --> 03:24:33,840
will be hidden and then on MD or bigger

4953
03:24:33,840 --> 03:24:36,160
it will be flex because again on a

4954
03:24:36,160 --> 03:24:38,080
mobile screen we don't want to render

4955
03:24:38,080 --> 03:24:40,560
these nav items. We want to only render

4956
03:24:40,560 --> 03:24:43,040
them on a desktop screen. Therefore this

4957
03:24:43,040 --> 03:24:44,880
will be hidden at the start and then

4958
03:24:44,880 --> 03:24:47,439
once we hit this MD break point we will

4959
03:24:47,439 --> 03:24:50,160
display it using this flex element. Then

4960
03:24:50,160 --> 03:24:52,880
on MD or bigger this will be flex one.

4961
03:24:52,880 --> 03:24:55,120
On MD or bigger this will be item

4962
03:24:55,120 --> 03:24:57,520
center. And then on MD or bigger, this

4963
03:24:57,520 --> 03:24:59,680
will be justified between because I want

4964
03:24:59,680 --> 03:25:02,160
to align the children to the mo most

4965
03:25:02,160 --> 03:25:04,479
outer corner. This means the left side

4966
03:25:04,479 --> 03:25:06,960
and also the right side. The next step

4967
03:25:06,960 --> 03:25:09,279
is to get our user session and then

4968
03:25:09,279 --> 03:25:12,239
either display a user dropdown or a lock

4969
03:25:12,239 --> 03:25:14,720
in button. So the first step is to first

4970
03:25:14,720 --> 03:25:17,120
of all get the user session and we will

4971
03:25:17,120 --> 03:25:20,080
do that on the client side. So above the

4972
03:25:20,080 --> 03:25:21,840
return statement I will create a

4973
03:25:21,840 --> 03:25:24,239
constant then I can structure it and

4974
03:25:24,239 --> 03:25:26,960
this will be equal to of client. I want

4975
03:25:26,960 --> 03:25:29,120
to import it from my lip folder and then

4976
03:25:29,120 --> 03:25:31,359
I want to call this use session

4977
03:25:31,359 --> 03:25:33,920
function. I can invoke it and then where

4978
03:25:33,920 --> 03:25:37,200
I structure it I can get my data and I

4979
03:25:37,200 --> 03:25:39,680
can also get the is pending boolean is

4980
03:25:39,680 --> 03:25:42,080
pending will be true whenever we fetch

4981
03:25:42,080 --> 03:25:44,960
the user session on the client side. Uh

4982
03:25:44,960 --> 03:25:46,640
I can then scroll a bit to the bottom

4983
03:25:46,640 --> 03:25:48,960
and right here I have my theme toggle.

4984
03:25:48,960 --> 03:25:51,040
Underneath my theme toggle I want to

4985
03:25:51,040 --> 03:25:53,840
create a turnary and if is pending is

4986
03:25:53,840 --> 03:25:56,880
true so um I can use a question mark

4987
03:25:56,880 --> 03:25:59,200
then I will return null. If it's not

4988
03:25:59,200 --> 03:26:01,359
true then we can create a colon and I

4989
03:26:01,359 --> 03:26:03,520
want to create another turnary. So

4990
03:26:03,520 --> 03:26:05,920
eternary in a turnary and I want to

4991
03:26:05,920 --> 03:26:08,560
check if we have a session. As you see I

4992
03:26:08,560 --> 03:26:10,319
don't get a session and that's because

4993
03:26:10,319 --> 03:26:13,120
we don't call it session but data. But I

4994
03:26:13,120 --> 03:26:14,960
can rename it with a colon and instead

4995
03:26:14,960 --> 03:26:17,520
of calling it session uh data we will

4996
03:26:17,520 --> 03:26:20,160
call it session. My god. Then I can copy

4997
03:26:20,160 --> 03:26:22,560
the name and if session is true then I

4998
03:26:22,560 --> 03:26:24,560
want to use a question mark and I want

4999
03:26:24,560 --> 03:26:27,120
to render my user dropdown. For now I

5000
03:26:27,120 --> 03:26:29,439
will just say locked in because this

5001
03:26:29,439 --> 03:26:31,600
means that we are locked in. If this is

5002
03:26:31,600 --> 03:26:33,840
not true then I want to use a colon and

5003
03:26:33,840 --> 03:26:36,319
I want to return empty tags. Inside of

5004
03:26:36,319 --> 03:26:38,880
here I want to render two buttons. First

5005
03:26:38,880 --> 03:26:41,200
of all a lockin button and then a get

5006
03:26:41,200 --> 03:26:43,279
started button. Both of these buttons

5007
03:26:43,279 --> 03:26:45,439
will redirect the user to the login

5008
03:26:45,439 --> 03:26:48,319
page. But it's just nicer to have two

5009
03:26:48,319 --> 03:26:50,640
buttons. So instead of rendering a

5010
03:26:50,640 --> 03:26:52,800
button, I will render a link component

5011
03:26:52,800 --> 03:26:55,760
which is imported from next /link. And

5012
03:26:55,760 --> 03:26:57,760
then for the link, I want to provide an

5013
03:26:57,760 --> 03:27:01,040
href and this will be /lockin. Then I

5014
03:27:01,040 --> 03:27:03,680
want to also provide a class name and I

5015
03:27:03,680 --> 03:27:06,239
want to style the link exactly the same

5016
03:27:06,239 --> 03:27:09,200
as a shad CN button. Therefore, I will

5017
03:27:09,200 --> 03:27:11,840
use the button variance function. And

5018
03:27:11,840 --> 03:27:14,080
then I want to also give it a variant

5019
03:27:14,080 --> 03:27:16,560
which will be secondary.

5020
03:27:16,560 --> 03:27:19,120
For the link, I want to say lock in. And

5021
03:27:19,120 --> 03:27:21,200
then I can copy paste the link one more

5022
03:27:21,200 --> 03:27:24,479
time. And this will be also HF login for

5023
03:27:24,479 --> 03:27:26,880
the class name button. Variance is fine.

5024
03:27:26,880 --> 03:27:29,040
I will delete the variant. So this will

5025
03:27:29,040 --> 03:27:31,600
be the default variant. And then instead

5026
03:27:31,600 --> 03:27:35,120
of saying login, I will say get started.

5027
03:27:35,120 --> 03:27:37,120
This means if I save this and again go

5028
03:27:37,120 --> 03:27:39,760
back and do a hard refresh, we will get

5029
03:27:39,760 --> 03:27:42,239
an error and that's because I use the

5030
03:27:42,239 --> 03:27:45,120
off client and the off client only works

5031
03:27:45,120 --> 03:27:47,760
in client components. Therefore, I want

5032
03:27:47,760 --> 03:27:50,640
to mark this navbar with the use client

5033
03:27:50,640 --> 03:27:53,439
directive. With that, this error will go

5034
03:27:53,439 --> 03:27:55,600
away. And now you see on the top right

5035
03:27:55,600 --> 03:27:58,000
corner the theme toggle, a login button,

5036
03:27:58,000 --> 03:28:00,239
and a get started button. That's because

5037
03:28:00,239 --> 03:28:03,120
I don't have a valid user session. But

5038
03:28:03,120 --> 03:28:05,120
here's the thing. It does not look nice.

5039
03:28:05,120 --> 03:28:08,319
I need some gap. So I can go back and

5040
03:28:08,319 --> 03:28:10,160
then again if I scroll a bit to the

5041
03:28:10,160 --> 03:28:13,120
bottom, we have this div. This div wraps

5042
03:28:13,120 --> 03:28:15,840
my theme toggle and then my user uh

5043
03:28:15,840 --> 03:28:18,560
session display. So I can give this div

5044
03:28:18,560 --> 03:28:21,520
a class name and this will be flex item

5045
03:28:21,520 --> 03:28:24,239
center because I want to center my items

5046
03:28:24,239 --> 03:28:26,319
vertically. Just if I center would

5047
03:28:26,319 --> 03:28:28,319
center them horizontally. And then I

5048
03:28:28,319 --> 03:28:31,040
want to also say space X4 to have some

5049
03:28:31,040 --> 03:28:34,000
spacing in between the items. So as you

5050
03:28:34,000 --> 03:28:36,720
see this already looks way better. As a

5051
03:28:36,720 --> 03:28:39,439
next step, I want to also create a theme

5052
03:28:39,439 --> 03:28:42,000
toggle or user dropdown. Uh I'm sorry.

5053
03:28:42,000 --> 03:28:44,160
Uh let me show it to you. I will log in.

5054
03:28:44,160 --> 03:28:46,319
You will see I will get redirected. I

5055
03:28:46,319 --> 03:28:48,720
want to sign in with GitHub. Then I will

5056
03:28:48,720 --> 03:28:51,120
get redirected back to the index page.

5057
03:28:51,120 --> 03:28:52,880
And then on the top right corner, you

5058
03:28:52,880 --> 03:28:55,040
now see logged in. But instead of

5059
03:28:55,040 --> 03:28:57,279
rendering locked in, I want to render a

5060
03:28:57,279 --> 03:28:59,040
drop-down. And then in the drop-down

5061
03:28:59,040 --> 03:29:01,760
menu, we will render three links. So

5062
03:29:01,760 --> 03:29:03,439
here's the thing. We could create our

5063
03:29:03,439 --> 03:29:05,680
own user dropdown, but this would be

5064
03:29:05,680 --> 03:29:08,080
annoying. So I will show you a nice

5065
03:29:08,080 --> 03:29:10,880
little component library called Origin

5066
03:29:10,880 --> 03:29:12,800
UI. And of course, I will link it down

5067
03:29:12,800 --> 03:29:14,720
below in the YouTube description. And

5068
03:29:14,720 --> 03:29:17,359
origin UI is relatively interesting

5069
03:29:17,359 --> 03:29:19,359
because this is a component library

5070
03:29:19,359 --> 03:29:22,800
which is built on top of SHA CN UI. Shad

5071
03:29:22,800 --> 03:29:25,520
CN UI is built on top of radics UI.

5072
03:29:25,520 --> 03:29:28,800
Origin UI is built on top of um SHAT CN

5073
03:29:28,800 --> 03:29:30,880
UI. This means it uses the same

5074
03:29:30,880 --> 03:29:33,520
components but it already creates

5075
03:29:33,520 --> 03:29:35,760
pre-built components. And I want to use

5076
03:29:35,760 --> 03:29:39,600
a user dropdown. So we can search for I

5077
03:29:39,600 --> 03:29:41,840
don't know drop-down. Yeah, drop-down.

5078
03:29:41,840 --> 03:29:43,600
Let's click on that. And then if you

5079
03:29:43,600 --> 03:29:45,279
scroll a bit to the bottom, you will

5080
03:29:45,279 --> 03:29:47,760
find this user dropdown. And if I click

5081
03:29:47,760 --> 03:29:50,479
on this user, we display the name, then

5082
03:29:50,479 --> 03:29:52,720
an email, and then a few options. And

5083
03:29:52,720 --> 03:29:55,200
that's exactly what I want to do. So I

5084
03:29:55,200 --> 03:29:57,840
can click on this view code toggle, and

5085
03:29:57,840 --> 03:30:00,000
then you can either install it or you

5086
03:30:00,000 --> 03:30:02,239
can just copy the code and then create

5087
03:30:02,239 --> 03:30:04,160
the component yourself. And that's what

5088
03:30:04,160 --> 03:30:06,640
we will do. So I will again go back. I

5089
03:30:06,640 --> 03:30:08,960
will open my explorer. I want to go into

5090
03:30:08,960 --> 03:30:11,520
the app folder uh public folder,

5091
03:30:11,520 --> 03:30:14,239
components folder components. And inside

5092
03:30:14,239 --> 03:30:16,319
of here, I will create a user

5093
03:30:16,319 --> 03:30:18,160
drop-down.tsx

5094
03:30:18,160 --> 03:30:21,520
file. For the content, I can just copy

5095
03:30:21,520 --> 03:30:23,840
this code and paste it inside of here.

5096
03:30:23,840 --> 03:30:25,680
And if you analyze the code, you will

5097
03:30:25,680 --> 03:30:28,479
see that these are just chat and UI

5098
03:30:28,479 --> 03:30:30,800
components. We import a few icons from

5099
03:30:30,800 --> 03:30:32,880
Lucid React. We get the avatar

5100
03:30:32,880 --> 03:30:34,800
component, the button component, and

5101
03:30:34,800 --> 03:30:36,640
then the drop-down component. And then

5102
03:30:36,640 --> 03:30:39,200
Origin UI just combines all of them and

5103
03:30:39,200 --> 03:30:41,600
styles them nicely. This means I can go

5104
03:30:41,600 --> 03:30:43,439
back to my navbar and instead of

5105
03:30:43,439 --> 03:30:46,160
rendering locked in I can get this user

5106
03:30:46,160 --> 03:30:48,080
dropdown and it's not called user

5107
03:30:48,080 --> 03:30:50,239
dropdown. How is it called component? Uh

5108
03:30:50,239 --> 03:30:52,239
I want to rename it. So this will be the

5109
03:30:52,239 --> 03:30:54,800
user dropdown and instead of doing an

5110
03:30:54,800 --> 03:30:57,120
export default function I want to export

5111
03:30:57,120 --> 03:30:59,600
this function normally. So just export

5112
03:30:59,600 --> 03:31:02,319
function and then in my navbar again I

5113
03:31:02,319 --> 03:31:04,319
can get this user dropdown which is

5114
03:31:04,319 --> 03:31:06,720
imported from my components. This means

5115
03:31:06,720 --> 03:31:08,880
if I again go back and do a hard

5116
03:31:08,880 --> 03:31:11,439
refresh, I get an error. I will have to

5117
03:31:11,439 --> 03:31:14,080
restart my dev server again, don't worry

5118
03:31:14,080 --> 03:31:16,800
about these uh things right here. That's

5119
03:31:16,800 --> 03:31:19,040
nothing which is related to our code.

5120
03:31:19,040 --> 03:31:21,600
And if I go back and do a hard refresh,

5121
03:31:21,600 --> 03:31:23,600
you'll see on the top right corner this

5122
03:31:23,600 --> 03:31:26,160
user dropdown. If I click on it, we get

5123
03:31:26,160 --> 03:31:28,720
all of these options and it looks quite

5124
03:31:28,720 --> 03:31:30,960
nice. Nevertheless, there are still a

5125
03:31:30,960 --> 03:31:32,880
few things that I don't like. So, for

5126
03:31:32,880 --> 03:31:34,960
example, if I click on this user

5127
03:31:34,960 --> 03:31:37,120
dropdown, this content, that's what you

5128
03:31:37,120 --> 03:31:39,600
see right here, is aligned in the

5129
03:31:39,600 --> 03:31:41,760
center. That's not quite what I want.

5130
03:31:41,760 --> 03:31:43,439
So, we can go back to this user

5131
03:31:43,439 --> 03:31:45,680
dropdown. And here we have this drop-own

5132
03:31:45,680 --> 03:31:49,040
menu content. There we can add an align

5133
03:31:49,040 --> 03:31:51,920
property. And we get three options,

5134
03:31:51,920 --> 03:31:54,479
center, end, and start. Currently, it's

5135
03:31:54,479 --> 03:31:56,000
aligned to the center. That's the

5136
03:31:56,000 --> 03:31:58,160
default. But I want to align it to the

5137
03:31:58,160 --> 03:32:00,560
end. This means to the right side. So

5138
03:32:00,560 --> 03:32:02,800
now it already looks way better. Then

5139
03:32:02,800 --> 03:32:05,040
what else can we do? Well, we have our

5140
03:32:05,040 --> 03:32:07,359
drop-down menu content, but you know, I

5141
03:32:07,359 --> 03:32:09,439
don't want to render Keith Kennedy. I

5142
03:32:09,439 --> 03:32:11,600
don't want to render this fake email. I

5143
03:32:11,600 --> 03:32:13,439
don't want to render option one, two,

5144
03:32:13,439 --> 03:32:15,359
and stuff like that. So, let's update

5145
03:32:15,359 --> 03:32:17,680
everything. Uh, I want to start off with

5146
03:32:17,680 --> 03:32:20,319
my drop-own menu items. So, instead of

5147
03:32:20,319 --> 03:32:22,479
saying option one, I want to render

5148
03:32:22,479 --> 03:32:24,640
home. Then, instead of using the bolt

5149
03:32:24,640 --> 03:32:26,800
icon, I want to use the home icon

5150
03:32:26,800 --> 03:32:29,680
imported from Lucid React. And if I go

5151
03:32:29,680 --> 03:32:31,520
back and again click on this user

5152
03:32:31,520 --> 03:32:33,600
dropdown, you will see if I click on

5153
03:32:33,600 --> 03:32:36,080
home, nothing happens. But I want to get

5154
03:32:36,080 --> 03:32:38,800
redirected to the index page. This means

5155
03:32:38,800 --> 03:32:40,720
I can go back and then for the drop-own

5156
03:32:40,720 --> 03:32:43,840
menu item, I can provide an as child

5157
03:32:43,840 --> 03:32:45,920
property. And this means that we render

5158
03:32:45,920 --> 03:32:48,560
a component or yeah a component, a

5159
03:32:48,560 --> 03:32:50,399
function, whatever in this drop-down

5160
03:32:50,399 --> 03:32:52,640
menu item because I want to use the link

5161
03:32:52,640 --> 03:32:55,120
component. So I will copy this code, the

5162
03:32:55,120 --> 03:32:57,439
span and the icon. And then I want to

5163
03:32:57,439 --> 03:33:00,160
get the link component from next /link.

5164
03:33:00,160 --> 03:33:02,399
I will again paste my code. And then for

5165
03:33:02,399 --> 03:33:04,720
the link component I want to provide an

5166
03:33:04,720 --> 03:33:08,080
href and this will be an empty uh slash.

5167
03:33:08,080 --> 03:33:09,920
Then we can continue with the next

5168
03:33:09,920 --> 03:33:12,160
drop-own menu item. And this will be for

5169
03:33:12,160 --> 03:33:14,479
my courses. So instead of saying option

5170
03:33:14,479 --> 03:33:17,040
two, I will say courses. And for the

5171
03:33:17,040 --> 03:33:19,680
icon instead of using layers 2, I want

5172
03:33:19,680 --> 03:33:22,960
to use the book open icon which is also

5173
03:33:22,960 --> 03:33:25,359
imported from Lucid React. Then I want

5174
03:33:25,359 --> 03:33:27,279
to also wrap this code in a link

5175
03:33:27,279 --> 03:33:29,600
component. We already imported it. And

5176
03:33:29,600 --> 03:33:32,000
for the link I want to provide an href

5177
03:33:32,000 --> 03:33:34,720
which will be /courses. Also don't

5178
03:33:34,720 --> 03:33:37,040
forget for the drop-own menu item we

5179
03:33:37,040 --> 03:33:39,520
want to provide an as child because

5180
03:33:39,520 --> 03:33:42,080
right here this is a child. If I again

5181
03:33:42,080 --> 03:33:44,479
click on this drop-own menu we get home

5182
03:33:44,479 --> 03:33:47,840
and courses. If I click on uh courses, I

5183
03:33:47,840 --> 03:33:49,760
will get redirected but we will get an

5184
03:33:49,760 --> 03:33:51,680
error and that's because I haven't

5185
03:33:51,680 --> 03:33:54,239
created this route yet. We will do that

5186
03:33:54,239 --> 03:33:56,319
a bit later on. And then there's one

5187
03:33:56,319 --> 03:33:58,080
more link which I want to render and

5188
03:33:58,080 --> 03:34:00,319
that's for our dashboard. So instead of

5189
03:34:00,319 --> 03:34:02,399
saying option three, I will say

5190
03:34:02,399 --> 03:34:04,640
dashboard. Instead of using the book

5191
03:34:04,640 --> 03:34:07,279
open icon, I want to use the layout

5192
03:34:07,279 --> 03:34:09,520
dashboard icon imported from Lucid

5193
03:34:09,520 --> 03:34:12,239
React. Then for the drop-own menu item,

5194
03:34:12,239 --> 03:34:14,800
I want to provide an as child property

5195
03:34:14,800 --> 03:34:17,200
and I want to wrap this code in a link

5196
03:34:17,200 --> 03:34:19,439
component. For the link, I will provide

5197
03:34:19,439 --> 03:34:23,040
an href and this will be / dashboard. If

5198
03:34:23,040 --> 03:34:24,800
I then again click on my dropdown, you

5199
03:34:24,800 --> 03:34:26,960
will see that we have three items right

5200
03:34:26,960 --> 03:34:29,120
here. Currently, we also render in

5201
03:34:29,120 --> 03:34:31,520
option four and five. I don't need that.

5202
03:34:31,520 --> 03:34:33,680
This means I can delete this drop-down

5203
03:34:33,680 --> 03:34:35,760
menu group which renders these two

5204
03:34:35,760 --> 03:34:38,399
items. I will just delete it. And now we

5205
03:34:38,399 --> 03:34:40,720
have first of all these three items. And

5206
03:34:40,720 --> 03:34:43,040
then we render this lock out drop-down

5207
03:34:43,040 --> 03:34:45,279
menu item. I can also delete one

5208
03:34:45,279 --> 03:34:47,520
drop-own menu separator. One is enough.

5209
03:34:47,520 --> 03:34:49,520
We don't need two. And if I again go

5210
03:34:49,520 --> 03:34:51,359
back, you will see that this already

5211
03:34:51,359 --> 03:34:53,760
looks way better. This lockout button

5212
03:34:53,760 --> 03:34:56,080
also currently does not work. This means

5213
03:34:56,080 --> 03:34:58,399
we have to create a separate function.

5214
03:34:58,399 --> 03:35:00,160
As you know, implementing the lockout

5215
03:35:00,160 --> 03:35:03,439
functionality is quite easy. So we can

5216
03:35:03,439 --> 03:35:06,640
go to our page.tsx and we wrote the code

5217
03:35:06,640 --> 03:35:09,120
already right here. So I can copy this

5218
03:35:09,120 --> 03:35:11,760
async function sign out and I will paste

5219
03:35:11,760 --> 03:35:14,080
it inside of here. Then we use this off

5220
03:35:14,080 --> 03:35:16,000
client. I want to import it from the lip

5221
03:35:16,000 --> 03:35:18,160
folder. I want to call the sign out

5222
03:35:18,160 --> 03:35:20,239
function. Then we have our fetch

5223
03:35:20,239 --> 03:35:22,640
options. I listen for the onsuccess

5224
03:35:22,640 --> 03:35:25,439
event. If it's successful, I want to

5225
03:35:25,439 --> 03:35:27,600
redirect the user to the index page. For

5226
03:35:27,600 --> 03:35:29,359
that, we have to initialize the router

5227
03:35:29,359 --> 03:35:31,760
hook. So I can go above this async

5228
03:35:31,760 --> 03:35:33,840
function and I want to create a constant

5229
03:35:33,840 --> 03:35:36,160
router which will be equal to use

5230
03:35:36,160 --> 03:35:38,080
router. I want to import it from

5231
03:35:38,080 --> 03:35:39,920
next/navigation

5232
03:35:39,920 --> 03:35:42,399
and then this error will go away. Then

5233
03:35:42,399 --> 03:35:45,439
we have to also import toast from sonar.

5234
03:35:45,439 --> 03:35:47,279
And then I want to also listen for the

5235
03:35:47,279 --> 03:35:50,399
onour event. So underneath on success I

5236
03:35:50,399 --> 03:35:52,399
will also get on error. This will be

5237
03:35:52,399 --> 03:35:54,960
equal to a standard error function. And

5238
03:35:54,960 --> 03:35:57,920
inside of here I want to return a toast.

5239
03:35:57,920 --> 03:36:00,319
And for the message I will just say

5240
03:36:00,319 --> 03:36:04,720
failed to sign out.

5241
03:36:04,720 --> 03:36:06,960
Then I can copy the name sign out.

5242
03:36:06,960 --> 03:36:08,960
Scroll to the bottom. And then for the

5243
03:36:08,960 --> 03:36:11,359
button we don't have a button. So I can

5244
03:36:11,359 --> 03:36:13,840
just use this drop-own menu item. I can

5245
03:36:13,840 --> 03:36:16,000
use an on click handler and this will be

5246
03:36:16,000 --> 03:36:18,479
equal to sign out. That's it. There's

5247
03:36:18,479 --> 03:36:20,319
nothing else that we have to add. This

5248
03:36:20,319 --> 03:36:22,560
means if I again go back and then click

5249
03:36:22,560 --> 03:36:24,960
on lock out, I should get locked out.

5250
03:36:24,960 --> 03:36:28,000
And as you see signed out successfully.

5251
03:36:28,000 --> 03:36:30,479
Then I can again log in, I will continue

5252
03:36:30,479 --> 03:36:32,800
or sign in with GitHub. I will get

5253
03:36:32,800 --> 03:36:35,200
redirected and then I will again see the

5254
03:36:35,200 --> 03:36:37,680
user drop down on the top. Currently I

5255
03:36:37,680 --> 03:36:39,680
render Keith Kennedy and this fake

5256
03:36:39,680 --> 03:36:42,239
email. So let's also update that and I

5257
03:36:42,239 --> 03:36:44,399
want to render a real email and real

5258
03:36:44,399 --> 03:36:46,800
name and also I want to render the user

5259
03:36:46,800 --> 03:36:49,359
image right here. So I can go back

5260
03:36:49,359 --> 03:36:51,760
scroll to the top right here I get a few

5261
03:36:51,760 --> 03:36:53,840
import errors. So I will just delete

5262
03:36:53,840 --> 03:36:55,520
these imports which are not needed

5263
03:36:55,520 --> 03:36:58,000
anymore. This means all of these icons

5264
03:36:58,000 --> 03:37:00,080
and I want to first of all create an

5265
03:37:00,080 --> 03:37:03,279
interface. So I will create an interface

5266
03:37:03,279 --> 03:37:06,720
called I props and I want to get a name

5267
03:37:06,720 --> 03:37:08,800
which will be of type string. I want to

5268
03:37:08,800 --> 03:37:10,720
get an email which will be of type

5269
03:37:10,720 --> 03:37:12,960
string and I want to get an image which

5270
03:37:12,960 --> 03:37:15,359
will be of type string. Then in my user

5271
03:37:15,359 --> 03:37:17,680
drop-down function in the params I can

5272
03:37:17,680 --> 03:37:19,840
structure them and this will be of type

5273
03:37:19,840 --> 03:37:22,399
I props. This means if I click on

5274
03:37:22,399 --> 03:37:25,520
control spacebar I get three properties.

5275
03:37:25,520 --> 03:37:27,920
First of all the email then the name and

5276
03:37:27,920 --> 03:37:30,560
then also the image and then I can use

5277
03:37:30,560 --> 03:37:32,800
these three properties to render real

5278
03:37:32,800 --> 03:37:35,040
data. So instead of rendering this

5279
03:37:35,040 --> 03:37:37,600
avatar.jpeg JPEG which does not exist.

5280
03:37:37,600 --> 03:37:40,319
We can render or we can pass our image

5281
03:37:40,319 --> 03:37:42,800
which we will pass through the params.

5282
03:37:42,800 --> 03:37:44,640
Then for the alt currently we say

5283
03:37:44,640 --> 03:37:47,359
profile image. This is fine enough. Then

5284
03:37:47,359 --> 03:37:49,200
for the avatar fallback instead of

5285
03:37:49,200 --> 03:37:52,239
rendering kk I want to instead get my

5286
03:37:52,239 --> 03:37:54,479
name. So name and then we can get the

5287
03:37:54,479 --> 03:37:57,200
first character. This means I can just

5288
03:37:57,200 --> 03:37:59,760
pass an array symbol and get the first

5289
03:37:59,760 --> 03:38:01,920
value. This means a zero. This is the

5290
03:38:01,920 --> 03:38:04,720
first um letter in the name. And then I

5291
03:38:04,720 --> 03:38:06,800
want to also use the two uppercase

5292
03:38:06,800 --> 03:38:09,279
method and I can invoke it because I

5293
03:38:09,279 --> 03:38:11,920
want to um uppercase the first letter.

5294
03:38:11,920 --> 03:38:14,479
And if I go back right now, you will see

5295
03:38:14,479 --> 03:38:16,080
nothing. And that's because we don't

5296
03:38:16,080 --> 03:38:18,399
have a name. This means I can go back to

5297
03:38:18,399 --> 03:38:20,800
my navbar. And here I already get an

5298
03:38:20,800 --> 03:38:23,040
error. And the error is that I'm missing

5299
03:38:23,040 --> 03:38:25,520
three properties. The email, image, and

5300
03:38:25,520 --> 03:38:28,000
name. So let's pass our email. And this

5301
03:38:28,000 --> 03:38:30,560
will be equal to session

5302
03:38:30,560 --> 03:38:34,640
user. L then we also have our image and

5303
03:38:34,640 --> 03:38:37,680
this will be equal to session do user

5304
03:38:37,680 --> 03:38:40,479
dot image and then we also have the name

5305
03:38:40,479 --> 03:38:43,040
and this will be equal to our session do

5306
03:38:43,040 --> 03:38:46,479
user dot name and as you see we get an

5307
03:38:46,479 --> 03:38:48,720
error right here and it says type string

5308
03:38:48,720 --> 03:38:51,120
or null or undefined is not assignable

5309
03:38:51,120 --> 03:38:53,600
to type string what's the problem well

5310
03:38:53,600 --> 03:38:55,600
the thing is when we sign in with GitHub

5311
03:38:55,600 --> 03:38:57,840
GitHub will automatically give us an

5312
03:38:57,840 --> 03:39:01,120
image of the user an avatar but when the

5313
03:39:01,120 --> 03:39:03,920
user signs in with the user's email.

5314
03:39:03,920 --> 03:39:06,399
Then we don't generate an image. We

5315
03:39:06,399 --> 03:39:08,640
don't get one. Therefore, for now to

5316
03:39:08,640 --> 03:39:11,040
just prevent this error, I will create

5317
03:39:11,040 --> 03:39:13,600
an or sign and render or pass an empty

5318
03:39:13,600 --> 03:39:15,760
string. This means if I again go back,

5319
03:39:15,760 --> 03:39:18,080
you will see my user image. Then instead

5320
03:39:18,080 --> 03:39:20,000
of rendering Kenneth Kennedy and this

5321
03:39:20,000 --> 03:39:22,640
email, I can also go back, scroll a bit

5322
03:39:22,640 --> 03:39:24,319
to the bottom, and then instead of

5323
03:39:24,319 --> 03:39:27,040
saying Kenneth Kennedy, I will get my

5324
03:39:27,040 --> 03:39:29,520
name. So this will be name. And then I

5325
03:39:29,520 --> 03:39:32,399
want to also update the email. And we

5326
03:39:32,399 --> 03:39:34,720
get our email through the params. But

5327
03:39:34,720 --> 03:39:36,560
here's the thing. I don't want to render

5328
03:39:36,560 --> 03:39:38,640
this email because it will display my

5329
03:39:38,640 --> 03:39:41,520
real email. So I will just hardcode

5330
03:39:41,520 --> 03:39:43,279
john@joh.com.

5331
03:39:43,279 --> 03:39:44,880
But you of course should render the

5332
03:39:44,880 --> 03:39:47,359
email which you pass or which you get

5333
03:39:47,359 --> 03:39:49,680
through the params. This means if I save

5334
03:39:49,680 --> 03:39:52,080
this and again go back then you will see

5335
03:39:52,080 --> 03:39:55,200
Jan then probably your email and then

5336
03:39:55,200 --> 03:39:57,520
home courses dashboard and then this

5337
03:39:57,520 --> 03:40:00,800
lockout button. Uh for my user dropdown

5338
03:40:00,800 --> 03:40:02,880
I currently got get one error that's

5339
03:40:02,880 --> 03:40:04,479
because I don't use the email. That's

5340
03:40:04,479 --> 03:40:07,760
fine. I will just um disable the CSLint

5341
03:40:07,760 --> 03:40:09,760
rule. Who cares? And then we are

5342
03:40:09,760 --> 03:40:11,920
finished with the user dropdown. So

5343
03:40:11,920 --> 03:40:13,760
let's analyze this page. Is there

5344
03:40:13,760 --> 03:40:15,760
anything missing? We have a nav but it

5345
03:40:15,760 --> 03:40:18,080
looks great. If I click on courses, I

5346
03:40:18,080 --> 03:40:20,560
get redirected. Our user dropdown looks

5347
03:40:20,560 --> 03:40:23,359
great. Then in light mode, this page

5348
03:40:23,359 --> 03:40:25,920
also looks great. In dark mode, it looks

5349
03:40:25,920 --> 03:40:27,840
great. Just in general, it looks

5350
03:40:27,840 --> 03:40:30,720
beautiful. Also, I just realized that

5351
03:40:30,720 --> 03:40:33,040
Origin UI, the component library,

5352
03:40:33,040 --> 03:40:36,640
released its own navbar um collection,

5353
03:40:36,640 --> 03:40:38,239
if you want to call it like that. So,

5354
03:40:38,239 --> 03:40:40,720
they released their own con collection

5355
03:40:40,720 --> 03:40:44,080
of 20 navbar components. So, I guess we

5356
03:40:44,080 --> 03:40:46,399
could have just copied it. But hey, uh

5357
03:40:46,399 --> 03:40:49,120
when I started creating this video, this

5358
03:40:49,120 --> 03:40:52,080
wasn't released yet. So, we can close

5359
03:40:52,080 --> 03:40:54,319
Origin UI. I don't need it anymore. And

5360
03:40:54,319 --> 03:40:56,960
we finished with our index page. But

5361
03:40:56,960 --> 03:40:59,120
here's the thing. In the demo, I showed

5362
03:40:59,120 --> 03:41:01,840
you a different UI, a different design.

5363
03:41:01,840 --> 03:41:05,279
This is just the default SHA CN UI uh

5364
03:41:05,279 --> 03:41:07,439
design which they provide us with.

5365
03:41:07,439 --> 03:41:10,239
Because if I head over to the SHT CN

5366
03:41:10,239 --> 03:41:12,880
website, I can customize the theme. So

5367
03:41:12,880 --> 03:41:15,600
here they have a themes button and here

5368
03:41:15,600 --> 03:41:18,000
I can for example use the default theme.

5369
03:41:18,000 --> 03:41:20,160
That's what we currently have. But they

5370
03:41:20,160 --> 03:41:23,439
also offer a green theme, blue theme, uh

5371
03:41:23,439 --> 03:41:26,080
theme, yellow theme, violet theme. They

5372
03:41:26,080 --> 03:41:29,040
look quite good. But the thing is the

5373
03:41:29,040 --> 03:41:31,680
only thing that changes is the color.

5374
03:41:31,680 --> 03:41:34,160
But the border is the same, the rounding

5375
03:41:34,160 --> 03:41:36,720
is the same, the text is the same, the

5376
03:41:36,720 --> 03:41:38,960
button looks the same. At the end of the

5377
03:41:38,960 --> 03:41:41,439
day, it just looks the same. But I want

5378
03:41:41,439 --> 03:41:44,239
you have a custom website. The design

5379
03:41:44,239 --> 03:41:46,239
should be completely custom. I want you

5380
03:41:46,239 --> 03:41:48,319
to have a custom width, a custom border

5381
03:41:48,319 --> 03:41:50,800
radius, a custom shadow. Everything

5382
03:41:50,800 --> 03:41:52,960
should be custom. I don't want to use

5383
03:41:52,960 --> 03:41:56,080
these predefined labels provided by SH

5384
03:41:56,080 --> 03:41:59,120
CN UI. That's why we can head over to a

5385
03:41:59,120 --> 03:42:02,080
website called tweakcn.com

5386
03:42:02,080 --> 03:42:04,720
and using this website we can customize

5387
03:42:04,720 --> 03:42:08,640
our chat cn UI theme because again if we

5388
03:42:08,640 --> 03:42:12,319
open our globals.css file we currently

5389
03:42:12,319 --> 03:42:14,880
define our theme or we customize it

5390
03:42:14,880 --> 03:42:17,840
using the CSS variables. This means if I

5391
03:42:17,840 --> 03:42:21,359
update for example this OKLCH color then

5392
03:42:21,359 --> 03:42:23,920
I update all of the components where I

5393
03:42:23,920 --> 03:42:26,560
use the second secondary foreground

5394
03:42:26,560 --> 03:42:29,760
color and with tweak CN I can customize

5395
03:42:29,760 --> 03:42:32,640
my colors, typography and layouts with

5396
03:42:32,640 --> 03:42:36,160
realtime preview. No signup required.

5397
03:42:36,160 --> 03:42:39,520
Nice. So I will click on try it out now.

5398
03:42:39,520 --> 03:42:41,520
And here they already provide us with a

5399
03:42:41,520 --> 03:42:43,920
lot of predefined themes. Amber,

5400
03:42:43,920 --> 03:42:47,040
minimal, bold, tag, bubblegum. You see

5401
03:42:47,040 --> 03:42:49,040
the rounding changes, the shadow

5402
03:42:49,040 --> 03:42:52,479
changes, the text or typography changes.

5403
03:42:52,479 --> 03:42:55,600
And here they provide us with a few nice

5404
03:42:55,600 --> 03:42:58,560
themes, a few themes which I find a bit

5405
03:42:58,560 --> 03:43:01,040
ugly, but honestly, whom who am I to

5406
03:43:01,040 --> 03:43:03,520
make or say what is nice and not nice?

5407
03:43:03,520 --> 03:43:05,680
So, you can choose your own right here.

5408
03:43:05,680 --> 03:43:08,640
For example, Superbase or T3 chat. These

5409
03:43:08,640 --> 03:43:11,359
are all nice themes, but I'm a big fan

5410
03:43:11,359 --> 03:43:14,000
of the claw theme. So right here I can

5411
03:43:14,000 --> 03:43:15,920
select cloth and that's the theme which

5412
03:43:15,920 --> 03:43:18,080
I want to use for this video. We can

5413
03:43:18,080 --> 03:43:20,239
also see how it looks like in light

5414
03:43:20,239 --> 03:43:22,479
theme. Yeah, it looks beautiful. Uh the

5415
03:43:22,479 --> 03:43:24,560
primary colors are fine. The secondary

5416
03:43:24,560 --> 03:43:26,800
colors are fine. Um we can maybe

5417
03:43:26,800 --> 03:43:29,520
customize the typography. So we could

5418
03:43:29,520 --> 03:43:32,880
for example select um this mono font. So

5419
03:43:32,880 --> 03:43:36,000
guys mono if you want to but for now I

5420
03:43:36,000 --> 03:43:38,239
will just leave it as system. Maybe

5421
03:43:38,239 --> 03:43:40,479
later on at the end I will customize it

5422
03:43:40,479 --> 03:43:42,880
and make it guys mono. I'm not sure, but

5423
03:43:42,880 --> 03:43:44,960
for now it's fine enough. Then we can

5424
03:43:44,960 --> 03:43:47,279
also update or customize the letter

5425
03:43:47,279 --> 03:43:49,520
spacing. Then we can also click on

5426
03:43:49,520 --> 03:43:51,520
other. Here you can update the hue

5427
03:43:51,520 --> 03:43:53,520
shift. We don't want to do that, but we

5428
03:43:53,520 --> 03:43:55,680
want to update the radius. So this is

5429
03:43:55,680 --> 03:43:58,640
currently the default radius, but I want

5430
03:43:58,640 --> 03:44:01,840
to have a smaller radius. So for

5431
03:44:01,840 --> 03:44:05,520
example, maybe 0.15.

5432
03:44:05,520 --> 03:44:09,199
Is this nice? Yeah, I think 0.15

5433
03:44:09,199 --> 03:44:11,760
looks quite good. Then for the spacing,

5434
03:44:11,760 --> 03:44:13,680
this is fine enough. For the shadow,

5435
03:44:13,680 --> 03:44:16,239
this is also fine enough. And I think I

5436
03:44:16,239 --> 03:44:20,160
can copy this theme preset.

5437
03:44:20,160 --> 03:44:22,319
And then I can just copy this. So this

5438
03:44:22,319 --> 03:44:25,199
is our globals.css file. It again

5439
03:44:25,199 --> 03:44:27,279
defines a root. Then it defines right

5440
03:44:27,279 --> 03:44:29,840
here the star class. And then this theme

5441
03:44:29,840 --> 03:44:32,319
inline uh creates all of the CSS

5442
03:44:32,319 --> 03:44:34,960
variables. So I can copy this. I can go

5443
03:44:34,960 --> 03:44:37,760
back and then I can uh collapse this

5444
03:44:37,760 --> 03:44:40,160
theme inline this root and then also

5445
03:44:40,160 --> 03:44:42,560
dark. I can then delete these three

5446
03:44:42,560 --> 03:44:45,359
objects and paste what I just copied.

5447
03:44:45,359 --> 03:44:47,520
Don't delete this at layer base. Don't

5448
03:44:47,520 --> 03:44:49,520
delete this at custom variant. We need

5449
03:44:49,520 --> 03:44:52,000
that. We want to just delete these three

5450
03:44:52,000 --> 03:44:54,720
objects. And if I again go back to my

5451
03:44:54,720 --> 03:44:57,439
index page, you will see, wow, this is

5452
03:44:57,439 --> 03:44:59,920
literally a completely new page.

5453
03:44:59,920 --> 03:45:02,080
Everything updated and that's what I

5454
03:45:02,080 --> 03:45:03,920
wanted. So we have a new background

5455
03:45:03,920 --> 03:45:06,640
color. We have this new border radius.

5456
03:45:06,640 --> 03:45:09,920
We have literally everything is

5457
03:45:09,920 --> 03:45:12,239
different. And again if you want to you

5458
03:45:12,239 --> 03:45:15,120
can also update the typography. But this

5459
03:45:15,120 --> 03:45:18,080
is a very big change. And that's why I

5460
03:45:18,080 --> 03:45:20,239
won't do it right now. Maybe later on

5461
03:45:20,239 --> 03:45:22,560
again as mentioned. Then also one

5462
03:45:22,560 --> 03:45:24,560
problem which I currently have is that

5463
03:45:24,560 --> 03:45:27,199
we don't have any margin to the bottom.

5464
03:45:27,199 --> 03:45:30,160
So I can go back to the page.tsx tsx to

5465
03:45:30,160 --> 03:45:32,880
our index page and then inside of here

5466
03:45:32,880 --> 03:45:35,040
we can first of all delete this async

5467
03:45:35,040 --> 03:45:37,760
function sign out then I can delete this

5468
03:45:37,760 --> 03:45:40,160
off client code I can delete this router

5469
03:45:40,160 --> 03:45:41,920
I don't need it anymore then I can

5470
03:45:41,920 --> 03:45:44,160
delete these unused imports I don't need

5471
03:45:44,160 --> 03:45:46,399
them anymore and also this can be a

5472
03:45:46,399 --> 03:45:48,239
server component which means I can

5473
03:45:48,239 --> 03:45:51,040
delete this use client uh directive then

5474
03:45:51,040 --> 03:45:53,040
as mentioned I want to create a bit of

5475
03:45:53,040 --> 03:45:56,080
margin to the bottom so I can go to the

5476
03:45:56,080 --> 03:45:58,640
second section and then I can add a

5477
03:45:58,640 --> 03:46:02,080
margin bottom which will be 32. So if I

5478
03:46:02,080 --> 03:46:04,399
again go back then you'll see that we

5479
03:46:04,399 --> 03:46:06,800
have some spacing to the bottom also.

5480
03:46:06,800 --> 03:46:09,199
Maybe later on I will add the margin to

5481
03:46:09,199 --> 03:46:12,319
the layout but for now it's fine enough.

5482
03:46:12,319 --> 03:46:14,080
So what's the next thing? We are

5483
03:46:14,080 --> 03:46:15,840
finished with the landing page. We are

5484
03:46:15,840 --> 03:46:18,479
finished with customizing the UI and the

5485
03:46:18,479 --> 03:46:20,880
next step is to create the dashboard

5486
03:46:20,880 --> 03:46:23,439
layout for the admin section uh for the

5487
03:46:23,439 --> 03:46:26,399
admin section because as mentioned we

5488
03:46:26,399 --> 03:46:28,880
will have two dashboards a publicf

5489
03:46:28,880 --> 03:46:31,199
facing dashboard for our customers to

5490
03:46:31,199 --> 03:46:34,080
view the courses but also an admin

5491
03:46:34,080 --> 03:46:36,960
dashboard so that admins can then log in

5492
03:46:36,960 --> 03:46:39,279
and create courses manage them this

5493
03:46:39,279 --> 03:46:41,040
means edit them delete them and stuff

5494
03:46:41,040 --> 03:46:43,680
like that. So we could create our own

5495
03:46:43,680 --> 03:46:45,840
dashboard, but this would literally take

5496
03:46:45,840 --> 03:46:48,800
days to perfect it. So we can head over

5497
03:46:48,800 --> 03:46:51,600
to Shhatzy and UI and then you will find

5498
03:46:51,600 --> 03:46:54,399
this block section and here they already

5499
03:46:54,399 --> 03:46:57,600
provide us with a beautiful dashboard.

5500
03:46:57,600 --> 03:47:00,080
So I can zoom out a bit. As you see this

5501
03:47:00,080 --> 03:47:02,160
will be the index page. They already

5502
03:47:02,160 --> 03:47:04,960
display a few nice cards, this analytics

5503
03:47:04,960 --> 03:47:07,199
chart and yeah, in general this is a

5504
03:47:07,199 --> 03:47:10,239
great uh dashboard layout which is also

5505
03:47:10,239 --> 03:47:12,880
responsive and that's why we will use it

5506
03:47:12,880 --> 03:47:15,359
in this video. So what you can do is

5507
03:47:15,359 --> 03:47:17,840
just copy this installation command on

5508
03:47:17,840 --> 03:47:22,000
top right here npx shad cn add-1.

5509
03:47:22,000 --> 03:47:24,160
I will copy it and then I want to paste

5510
03:47:24,160 --> 03:47:26,640
it into my terminal. Also instead of

5511
03:47:26,640 --> 03:47:30,800
using npx I want to instead say pnpm dlx

5512
03:47:30,800 --> 03:47:34,080
shad cn at latest and then this command.

5513
03:47:34,080 --> 03:47:36,720
Then I can click on enter. As you see it

5514
03:47:36,720 --> 03:47:39,600
asks me a few questions. So the file

5515
03:47:39,600 --> 03:47:42,000
button already exists. Would you like to

5516
03:47:42,000 --> 03:47:44,000
overwrite it? Yes, I would want to do

5517
03:47:44,000 --> 03:47:45,760
that. The same thing for the drop-own

5518
03:47:45,760 --> 03:47:48,399
menu for the drawer avatar and all of

5519
03:47:48,399 --> 03:47:50,720
that. And then if I open my explorer,

5520
03:47:50,720 --> 03:47:53,920
you will see that chat and UI generated

5521
03:47:53,920 --> 03:47:57,040
a few new folders and files. So we first

5522
03:47:57,040 --> 03:47:59,680
of all have a hooks folder with a use

5523
03:47:59,680 --> 03:48:02,080
mobile file. Then in the components

5524
03:48:02,080 --> 03:48:04,720
folder, we now have a few new files. The

5525
03:48:04,720 --> 03:48:08,160
app sidebar file, nav main, data table

5526
03:48:08,160 --> 03:48:10,720
and stuff like that. And also in the app

5527
03:48:10,720 --> 03:48:13,279
folder, we have a new folder, a

5528
03:48:13,279 --> 03:48:15,760
dashboard folder, a dashboard route with

5529
03:48:15,760 --> 03:48:18,800
a page.tsx. And then in the dashboard I

5530
03:48:18,800 --> 03:48:21,920
render the sidebar. So let's uh restart

5531
03:48:21,920 --> 03:48:24,399
the defaf server. So I will run pnpm

5532
03:48:24,399 --> 03:48:27,359
rundef. And then I can go back and do a

5533
03:48:27,359 --> 03:48:30,399
hard refresh. So this has refreshed

5534
03:48:30,399 --> 03:48:32,960
which means I can navigate to slash

5535
03:48:32,960 --> 03:48:35,600
dashboard. And as you see this is the

5536
03:48:35,600 --> 03:48:38,239
our dashboard. So right on the left side

5537
03:48:38,239 --> 03:48:40,399
we have a sidebar and then on the right

5538
03:48:40,399 --> 03:48:43,040
side this is the main content. And again

5539
03:48:43,040 --> 03:48:45,520
this is also mobile responsive. This

5540
03:48:45,520 --> 03:48:48,160
means if I collapse it, it's completely

5541
03:48:48,160 --> 03:48:50,319
responsive. I can click on this button

5542
03:48:50,319 --> 03:48:52,640
and then we have this navigation or

5543
03:48:52,640 --> 03:48:55,520
mobile navigation. Uh let me again

5544
03:48:55,520 --> 03:48:58,640
maximize this and I want to customize it

5545
03:48:58,640 --> 03:49:01,439
a bit. So currently this is / dashboard

5546
03:49:01,439 --> 03:49:03,920
or the route is uh a dashboard route.

5547
03:49:03,920 --> 03:49:06,000
Instead of calling it dashboard, I want

5548
03:49:06,000 --> 03:49:09,359
to call it admin. So I can uh rename

5549
03:49:09,359 --> 03:49:11,600
this dashboard folder and it should be

5550
03:49:11,600 --> 03:49:14,000
called admin. This means if I go back

5551
03:49:14,000 --> 03:49:17,120
and navigate to /admin, we again see

5552
03:49:17,120 --> 03:49:20,000
this dashboard which looks great. So if

5553
03:49:20,000 --> 03:49:22,880
we analyze this dashboard, how does it

5554
03:49:22,880 --> 03:49:25,439
work? How is it structured? Well, we

5555
03:49:25,439 --> 03:49:28,080
have a sidebar on the left side which is

5556
03:49:28,080 --> 03:49:30,560
mobile responsive which we can also

5557
03:49:30,560 --> 03:49:33,199
collapse. This is very important. And

5558
03:49:33,199 --> 03:49:35,439
then on the right side we have our main

5559
03:49:35,439 --> 03:49:37,840
content. Now here's the funny thing.

5560
03:49:37,840 --> 03:49:40,720
Creating sidebars, collapsible sidebars,

5561
03:49:40,720 --> 03:49:43,199
a mobile responsive sidebars is

5562
03:49:43,199 --> 03:49:45,120
literally one of the hardest things that

5563
03:49:45,120 --> 03:49:47,600
you can do as a developer. That's why

5564
03:49:47,600 --> 03:49:50,560
Shati and UI created a sidebar

5565
03:49:50,560 --> 03:49:53,359
component. This is a composable feeable

5566
03:49:53,359 --> 03:49:56,479
and customizable sidebar component. So

5567
03:49:56,479 --> 03:49:58,319
that's what we have set up because if

5568
03:49:58,319 --> 03:50:00,880
you head over back to our page, you will

5569
03:50:00,880 --> 03:50:03,120
see that we use right here for example

5570
03:50:03,120 --> 03:50:05,439
the sidebar provider and the sidebar

5571
03:50:05,439 --> 03:50:07,600
provider is imported from the components

5572
03:50:07,600 --> 03:50:09,680
and to be specific from the sidebar

5573
03:50:09,680 --> 03:50:12,399
component. So to create this dashboard

5574
03:50:12,399 --> 03:50:14,960
layout, we right now use the sidebar

5575
03:50:14,960 --> 03:50:17,120
component. And the sidebar component is

5576
03:50:17,120 --> 03:50:19,120
quite interesting because it's not a

5577
03:50:19,120 --> 03:50:22,000
singular component, but it's rather a

5578
03:50:22,000 --> 03:50:24,720
combination or it's a component which is

5579
03:50:24,720 --> 03:50:27,359
composed of multiple parts. So first of

5580
03:50:27,359 --> 03:50:29,680
all, we have a sidebar provider. So in

5581
03:50:29,680 --> 03:50:32,000
the page.tsx, you will see right here

5582
03:50:32,000 --> 03:50:34,399
everything is wrapped by a sidebar

5583
03:50:34,399 --> 03:50:36,239
provider and this handles the

5584
03:50:36,239 --> 03:50:38,880
collapsible state. So the collapsible

5585
03:50:38,880 --> 03:50:40,880
state is this right here. If I click on

5586
03:50:40,880 --> 03:50:43,600
the button, my sidebar collapses and I

5587
03:50:43,600 --> 03:50:45,920
don't see it anymore. Then we have the

5588
03:50:45,920 --> 03:50:48,080
sidebar component itself. And this is

5589
03:50:48,080 --> 03:50:50,399
the sidebar container. So they have a

5590
03:50:50,399 --> 03:50:52,720
very nice diagram right here. So right

5591
03:50:52,720 --> 03:50:54,800
here they don't showcase the sidebar

5592
03:50:54,800 --> 03:50:56,800
provider, but the sidebar provider

5593
03:50:56,800 --> 03:50:58,800
pretty much wraps everything. Then in

5594
03:50:58,800 --> 03:51:00,319
the sidebar provider, we have the

5595
03:51:00,319 --> 03:51:02,800
sidebar component itself. This, as you

5596
03:51:02,800 --> 03:51:05,120
see, also wraps everything. In the

5597
03:51:05,120 --> 03:51:07,040
sidebar, we then get a sidebar header

5598
03:51:07,040 --> 03:51:09,520
and sidebar footer. These are sticky at

5599
03:51:09,520 --> 03:51:11,840
the top and bottom of the sidebar. In

5600
03:51:11,840 --> 03:51:14,000
this case, this is our sidebar header.

5601
03:51:14,000 --> 03:51:15,840
And then on the bottom, this is like a

5602
03:51:15,840 --> 03:51:18,960
navigation user drop-down thingy. This

5603
03:51:18,960 --> 03:51:20,720
is the footer. And let's quickly check

5604
03:51:20,720 --> 03:51:22,960
it out. So, we have a sidebar provider.

5605
03:51:22,960 --> 03:51:25,439
And in the sidebar provider, we have an

5606
03:51:25,439 --> 03:51:28,080
app sidebar. In the app sidebar, we have

5607
03:51:28,080 --> 03:51:30,160
the sidebar header. And in the sidebar

5608
03:51:30,160 --> 03:51:34,160
header, I render this acme in logo. So

5609
03:51:34,160 --> 03:51:36,080
this is the header and then at the

5610
03:51:36,080 --> 03:51:38,560
bottom I also have a sidebar footer and

5611
03:51:38,560 --> 03:51:40,800
I render the nav user in the sidebar

5612
03:51:40,800 --> 03:51:42,720
footer. This means this right here this

5613
03:51:42,720 --> 03:51:45,359
dropdown is the footer. Then we also

5614
03:51:45,359 --> 03:51:47,760
have the sidebar content. The sidebar or

5615
03:51:47,760 --> 03:51:50,000
the sidebar content is this right here.

5616
03:51:50,000 --> 03:51:52,399
So this is our header and then this is

5617
03:51:52,399 --> 03:51:55,120
our footer and this here is our main

5618
03:51:55,120 --> 03:51:57,439
content. Then let's continue. What else

5619
03:51:57,439 --> 03:51:59,439
do we have right here? The sidebar group

5620
03:51:59,439 --> 03:52:01,520
and this is the section within the

5621
03:52:01,520 --> 03:52:04,000
sidebar content. So in theory for

5622
03:52:04,000 --> 03:52:06,319
example we can again create a line this

5623
03:52:06,319 --> 03:52:08,960
is one sidebar group this right here and

5624
03:52:08,960 --> 03:52:10,880
then this is another sidebar group and

5625
03:52:10,880 --> 03:52:13,600
in theory this is also a sidebar group.

5626
03:52:13,600 --> 03:52:15,840
So in this case we have one sidebar

5627
03:52:15,840 --> 03:52:17,840
content but this sidebar content

5628
03:52:17,840 --> 03:52:20,560
consists of three sidebar groups with

5629
03:52:20,560 --> 03:52:23,040
individual items. Then what else do we

5630
03:52:23,040 --> 03:52:24,960
have? We have a sidebar trigger. This is

5631
03:52:24,960 --> 03:52:27,680
this button which collapses our sidebar.

5632
03:52:27,680 --> 03:52:29,840
So this is how this whole structure is

5633
03:52:29,840 --> 03:52:32,160
created. And the main part is literally

5634
03:52:32,160 --> 03:52:34,399
this app sidebar because inside of here

5635
03:52:34,399 --> 03:52:36,479
we use the sidebar, the sidebar header,

5636
03:52:36,479 --> 03:52:39,120
the sidebar content with the sidebar uh

5637
03:52:39,120 --> 03:52:41,520
groups and then also the sidebar footer.

5638
03:52:41,520 --> 03:52:43,680
So if you want to customize the sidebar,

5639
03:52:43,680 --> 03:52:45,920
then you will do it in this app sidebar.

5640
03:52:45,920 --> 03:52:48,239
And then if we now analyze the sidebar,

5641
03:52:48,239 --> 03:52:50,080
what do we want to change? Well, right

5642
03:52:50,080 --> 03:52:52,960
here it says Acme Inc. H I don't want

5643
03:52:52,960 --> 03:52:55,199
that. So we can go back to the app

5644
03:52:55,199 --> 03:52:57,199
sidebar component and then right here

5645
03:52:57,199 --> 03:52:59,439
you will find the name Acme Inc. And

5646
03:52:59,439 --> 03:53:01,920
then also this icon. Currently they

5647
03:53:01,920 --> 03:53:04,479
provide us with the normal a tag but I

5648
03:53:04,479 --> 03:53:06,399
want to instead use the link component

5649
03:53:06,399 --> 03:53:08,720
provided by next slashlink. And for the

5650
03:53:08,720 --> 03:53:11,279
href this will be an empty slash. Then

5651
03:53:11,279 --> 03:53:13,279
instead of rendering this icon I can

5652
03:53:13,279 --> 03:53:15,279
delete it and instead I want to get the

5653
03:53:15,279 --> 03:53:18,239
image component from next/ image. For

5654
03:53:18,239 --> 03:53:20,160
the image component we have to pass two

5655
03:53:20,160 --> 03:53:22,239
properties. First of all the source and

5656
03:53:22,239 --> 03:53:25,120
then also an alt. For the alt I will say

5657
03:53:25,120 --> 03:53:27,040
logo and for the source we want to

5658
03:53:27,040 --> 03:53:29,520
import our logo. So on the top I can

5659
03:53:29,520 --> 03:53:31,760
delete this unused import and then I can

5660
03:53:31,760 --> 03:53:34,560
create an import and this will be logo

5661
03:53:34,560 --> 03:53:38,439
from at /public/logo.png.

5662
03:53:38,640 --> 03:53:40,800
I can then copy the logo name. Again

5663
03:53:40,800 --> 03:53:42,880
scroll to the bottom. My god that's so

5664
03:53:42,880 --> 03:53:44,880
much code. And then I can paste it right

5665
03:53:44,880 --> 03:53:47,439
here. Also I want to give the image a

5666
03:53:47,439 --> 03:53:49,840
class name. And this will be size five.

5667
03:53:49,840 --> 03:53:52,399
This means width five and height five.

5668
03:53:52,399 --> 03:53:55,040
And then instead of saying acme inc I

5669
03:53:55,040 --> 03:53:58,080
want to say marshall lms dot. This means

5670
03:53:58,080 --> 03:54:00,239
if I save this and again go back, you

5671
03:54:00,239 --> 03:54:02,000
will see right here that this is our new

5672
03:54:02,000 --> 03:54:05,439
logo and it looks absolutely beautiful.

5673
03:54:05,439 --> 03:54:08,080
Then we also have this quick create

5674
03:54:08,080 --> 03:54:10,479
button and then this mail icon. I want

5675
03:54:10,479 --> 03:54:12,880
to leave this quick create button, but I

5676
03:54:12,880 --> 03:54:15,439
don't need this mail icon. So I can go

5677
03:54:15,439 --> 03:54:17,439
back. Then we have the side by header.

5678
03:54:17,439 --> 03:54:19,120
We are finished with it. And then we

5679
03:54:19,120 --> 03:54:21,680
have this nav main. This means I want to

5680
03:54:21,680 --> 03:54:23,840
open the nav main component. And then

5681
03:54:23,840 --> 03:54:25,840
inside of here, if I scroll a bit to the

5682
03:54:25,840 --> 03:54:28,160
bottom, you will find the sidebar menu

5683
03:54:28,160 --> 03:54:30,000
button. Inside of here, we have the

5684
03:54:30,000 --> 03:54:32,239
quick create button and then also the

5685
03:54:32,239 --> 03:54:35,120
icon button or this inbox uh button. I

5686
03:54:35,120 --> 03:54:36,800
will delete the button. I don't need it.

5687
03:54:36,800 --> 03:54:39,120
I only need the sidebar menu button.

5688
03:54:39,120 --> 03:54:41,199
This means if I go back, we only have

5689
03:54:41,199 --> 03:54:43,199
this button. And this already looks way

5690
03:54:43,199 --> 03:54:45,439
better. The only problem is if I click

5691
03:54:45,439 --> 03:54:48,000
on quickre, nothing happens. But if the

5692
03:54:48,000 --> 03:54:49,920
user clicks on the button, I want to

5693
03:54:49,920 --> 03:54:52,080
redirect the user. This means I can go

5694
03:54:52,080 --> 03:54:54,000
back and then for the sidebar menu

5695
03:54:54,000 --> 03:54:56,399
button I want to add an as child

5696
03:54:56,399 --> 03:54:58,880
property because I want to wrap the icon

5697
03:54:58,880 --> 03:55:02,399
and the span text in a link component.

5698
03:55:02,399 --> 03:55:05,279
So I will import link from next /link.

5699
03:55:05,279 --> 03:55:07,199
Then I can again paste the content and

5700
03:55:07,199 --> 03:55:09,600
for the link I want to provide an href

5701
03:55:09,600 --> 03:55:13,439
and this will be slashadmin/courses

5702
03:55:13,439 --> 03:55:16,319
slashcreate because if the user clicks

5703
03:55:16,319 --> 03:55:18,880
on this link or on this button I want to

5704
03:55:18,880 --> 03:55:21,120
then redirect the user to create a new

5705
03:55:21,120 --> 03:55:23,760
course to quick create a new course.

5706
03:55:23,760 --> 03:55:25,840
This means if I click on this button I

5707
03:55:25,840 --> 03:55:28,239
will get redirected and we get a four

5708
03:55:28,239 --> 03:55:30,319
not found and that's because I haven't

5709
03:55:30,319 --> 03:55:32,960
created the route yet. We will do that a

5710
03:55:32,960 --> 03:55:35,760
bit later on. Then I have a new problem

5711
03:55:35,760 --> 03:55:38,640
and this is my sidebar content. My na

5712
03:55:38,640 --> 03:55:41,359
main content in general. These are links

5713
03:55:41,359 --> 03:55:44,080
which I don't want to render. I mean

5714
03:55:44,080 --> 03:55:47,199
dashboard life cycle analytics. This

5715
03:55:47,199 --> 03:55:49,120
does not make sense. I want to render a

5716
03:55:49,120 --> 03:55:51,760
dashboard link and then a courses link.

5717
03:55:51,760 --> 03:55:53,760
This means we can again go back. I want

5718
03:55:53,760 --> 03:55:56,319
to go to the app sidebar and if I scroll

5719
03:55:56,319 --> 03:55:57,920
to the top you will find all of the

5720
03:55:57,920 --> 03:56:00,399
links right here. So we have a constant

5721
03:56:00,399 --> 03:56:03,040
data and in there they have a nav main

5722
03:56:03,040 --> 03:56:05,840
then also the nav clouds array the nav

5723
03:56:05,840 --> 03:56:08,319
secondary array the documents array and

5724
03:56:08,319 --> 03:56:11,279
just in general in this object chats and

5725
03:56:11,279 --> 03:56:13,920
ui configured all of the routes so I

5726
03:56:13,920 --> 03:56:16,080
want to specifically update the nav

5727
03:56:16,080 --> 03:56:18,319
main. So the title dashboard, this is

5728
03:56:18,319 --> 03:56:20,479
our first link. That's fine enough. For

5729
03:56:20,479 --> 03:56:23,520
the URL, this will be /admin. And then

5730
03:56:23,520 --> 03:56:25,600
right here, we have a second link. This

5731
03:56:25,600 --> 03:56:27,680
currently has a title, which is life

5732
03:56:27,680 --> 03:56:30,160
cycle. This should be courses. And the

5733
03:56:30,160 --> 03:56:34,080
URL should be /admin. And then /courses.

5734
03:56:34,080 --> 03:56:36,399
If I go back and hover over dashboard,

5735
03:56:36,399 --> 03:56:38,000
you will see or in other words, if I

5736
03:56:38,000 --> 03:56:40,560
click for example on courses, nothing

5737
03:56:40,560 --> 03:56:42,720
happens. That's not quite what I want.

5738
03:56:42,720 --> 03:56:44,560
And where is this data rendered? Well,

5739
03:56:44,560 --> 03:56:46,720
if I again scroll to the bottom, we

5740
03:56:46,720 --> 03:56:49,279
right here have this nav main component.

5741
03:56:49,279 --> 03:56:52,160
I pass a prop which is items. And to be

5742
03:56:52,160 --> 03:56:55,520
specific, I pass my data.nav main. This

5743
03:56:55,520 --> 03:56:57,760
means I want to update the nav main

5744
03:56:57,760 --> 03:56:59,920
component. And again, right here, I get

5745
03:56:59,920 --> 03:57:01,439
a few errors. So, I don't need the

5746
03:57:01,439 --> 03:57:03,600
button import. I don't need this icon.

5747
03:57:03,600 --> 03:57:05,199
And if I again scroll a bit to the

5748
03:57:05,199 --> 03:57:07,920
bottom, we map over the items and then I

5749
03:57:07,920 --> 03:57:10,000
display them. But as you see, I don't

5750
03:57:10,000 --> 03:57:12,399
render a link. And that's why the user

5751
03:57:12,399 --> 03:57:14,960
also does not get redirected. So for the

5752
03:57:14,960 --> 03:57:17,439
sidebar menu button, I want to add an

5753
03:57:17,439 --> 03:57:19,840
ask child property. And then I want to

5754
03:57:19,840 --> 03:57:22,399
wrap the content in a link component.

5755
03:57:22,399 --> 03:57:24,479
It's already imported. I can again paste

5756
03:57:24,479 --> 03:57:26,479
the content. And for the link, I want to

5757
03:57:26,479 --> 03:57:28,880
provide an href which will be equal to

5758
03:57:28,880 --> 03:57:32,479
the item. Href or to the item URL

5759
03:57:32,479 --> 03:57:34,560
because in the app sidebar again we

5760
03:57:34,560 --> 03:57:37,600
provide a title and also the URL. So I

5761
03:57:37,600 --> 03:57:39,680
can go back. This is added. And this

5762
03:57:39,680 --> 03:57:41,520
means if I save this and go back and

5763
03:57:41,520 --> 03:57:44,319
click on courses, I will get redirected.

5764
03:57:44,319 --> 03:57:46,800
Of course, I get a 44 not found. But

5765
03:57:46,800 --> 03:57:48,479
that's because I haven't created the

5766
03:57:48,479 --> 03:57:51,040
route yet. Then let's analyze it. So we

5767
03:57:51,040 --> 03:57:52,880
have a dashboard route, a courses route,

5768
03:57:52,880 --> 03:57:55,199
an analytics route, projects route, team

5769
03:57:55,199 --> 03:57:57,520
route. At the end of the day, I will

5770
03:57:57,520 --> 03:57:59,520
only create two routes. A dashboard

5771
03:57:59,520 --> 03:58:01,439
route, this is the index page, and a

5772
03:58:01,439 --> 03:58:03,040
courses route. I won't create an

5773
03:58:03,040 --> 03:58:05,359
analytics route. I won't create a

5774
03:58:05,359 --> 03:58:07,600
projects route, a team route. There's

5775
03:58:07,600 --> 03:58:09,359
not enough time in this video.

5776
03:58:09,359 --> 03:58:11,040
Nevertheless, I don't want to delete

5777
03:58:11,040 --> 03:58:13,520
these items because then our sidebar

5778
03:58:13,520 --> 03:58:15,600
will be quite empty and we don't want

5779
03:58:15,600 --> 03:58:17,520
that. So, I will leave the links right

5780
03:58:17,520 --> 03:58:20,160
here. They will be not working links,

5781
03:58:20,160 --> 03:58:23,120
but it will just look nicer. Then I can

5782
03:58:23,120 --> 03:58:25,680
also go back and I want to configure a

5783
03:58:25,680 --> 03:58:27,680
bit my links. So, this sidebar is a bit

5784
03:58:27,680 --> 03:58:29,520
too full. So, for example, I don't want

5785
03:58:29,520 --> 03:58:31,840
to render documents, which means I can

5786
03:58:31,840 --> 03:58:33,439
go back and I want to delete this

5787
03:58:33,439 --> 03:58:35,439
documents away. I don't need it. I don't

5788
03:58:35,439 --> 03:58:37,359
want to render it. So, I can just delete

5789
03:58:37,359 --> 03:58:39,359
it from this constant data. And if I

5790
03:58:39,359 --> 03:58:41,199
scroll a bit to the bottom, we get an

5791
03:58:41,199 --> 03:58:43,279
error. And it says right here, documents

5792
03:58:43,279 --> 03:58:45,279
does not exist. And that's because I

5793
03:58:45,279 --> 03:58:47,120
don't want to render the snav documents

5794
03:58:47,120 --> 03:58:49,520
anymore. So, I can just delete it. I can

5795
03:58:49,520 --> 03:58:51,760
also delete the import at the top. And

5796
03:58:51,760 --> 03:58:53,920
then also from the components, I can

5797
03:58:53,920 --> 03:58:56,160
delete the uh the nav documents

5798
03:58:56,160 --> 03:58:58,239
component. I don't need it. So, I will

5799
03:58:58,239 --> 03:59:00,560
move it to the trash. I will also delete

5800
03:59:00,560 --> 03:59:02,239
unused imports. I don't need them

5801
03:59:02,239 --> 03:59:04,479
anymore. I don't want to get any errors.

5802
03:59:04,479 --> 03:59:06,399
And if I again go back, this will

5803
03:59:06,399 --> 03:59:08,560
already look way better. So again, the

5804
03:59:08,560 --> 03:59:10,560
dashboard link works, the courses link

5805
03:59:10,560 --> 03:59:13,600
works, but the analytics, projects, team

5806
03:59:13,600 --> 03:59:15,920
settings, uh, get help and search links,

5807
03:59:15,920 --> 03:59:17,920
they won't work. These are just there so

5808
03:59:17,920 --> 03:59:20,479
that the sidebar does not look so empty.

5809
03:59:20,479 --> 03:59:22,080
And then what else? Is there anything

5810
03:59:22,080 --> 03:59:24,319
else I want to update? Yes, I want to uh

5811
03:59:24,319 --> 03:59:26,880
update the nav user. This means I can go

5812
03:59:26,880 --> 03:59:30,160
back and if I go back to the page.tsx,

5813
03:59:30,160 --> 03:59:32,399
we have our app sidebar. In the app

5814
03:59:32,399 --> 03:59:34,960
sidebar, I render my nav footer or

5815
03:59:34,960 --> 03:59:37,040
sidebar footer and then I render the

5816
03:59:37,040 --> 03:59:39,359
snaf user component. This means I want

5817
03:59:39,359 --> 03:59:41,920
to update the nav user component. And

5818
03:59:41,920 --> 03:59:45,439
then in our params we get an object user

5819
03:59:45,439 --> 03:59:47,760
and in the object we have a name, an

5820
03:59:47,760 --> 03:59:50,960
email and an avatar. And where do we

5821
03:59:50,960 --> 03:59:53,920
pass this object? Well, this nav user is

5822
03:59:53,920 --> 03:59:56,479
rendered in the app sidebar. We pass a

5823
03:59:56,479 --> 03:59:59,680
prop which is this user. Our user is

5824
03:59:59,680 --> 04:00:02,640
defined in the constant data user with a

5825
04:00:02,640 --> 04:00:05,120
name, email, and avatar. So here's what

5826
04:00:05,120 --> 04:00:07,199
we will do. We will delete this user

5827
04:00:07,199 --> 04:00:09,600
from our constant data. We won't need it

5828
04:00:09,600 --> 04:00:12,000
anymore. Then in the nav user, I can

5829
04:00:12,000 --> 04:00:14,080
delete this destructuring. I won't

5830
04:00:14,080 --> 04:00:16,399
destructure my nav user anymore. And

5831
04:00:16,399 --> 04:00:18,239
then for the nav user component, which

5832
04:00:18,239 --> 04:00:20,479
we render in the app sidebar, I can

5833
04:00:20,479 --> 04:00:23,199
delete this prop. I won't pass anything

5834
04:00:23,199 --> 04:00:25,279
right anymore. Then in the nav user

5835
04:00:25,279 --> 04:00:27,040
component, I want to get the user

5836
04:00:27,040 --> 04:00:29,199
session. And here's the thing. There are

5837
04:00:29,199 --> 04:00:31,199
two ways to get a user session. Either

5838
04:00:31,199 --> 04:00:32,960
on the server side or on the client

5839
04:00:32,960 --> 04:00:35,439
side. We already know that. But here's

5840
04:00:35,439 --> 04:00:37,359
my question to you. How should we get

5841
04:00:37,359 --> 04:00:39,600
the user session on the server side or

5842
04:00:39,600 --> 04:00:42,399
client side? You might say the server

5843
04:00:42,399 --> 04:00:44,080
side is fine. Or you might say the

5844
04:00:44,080 --> 04:00:46,160
client side is fine. Well, there's only

5845
04:00:46,160 --> 04:00:48,560
one right answer. And the right answer

5846
04:00:48,560 --> 04:00:50,720
is to get the user session on the client

5847
04:00:50,720 --> 04:00:52,479
side. Why is that? Well, here's the

5848
04:00:52,479 --> 04:00:54,800
thing. In a second, we will convert this

5849
04:00:54,800 --> 04:00:58,560
page.tsx into a layout.ts. tsx and then

5850
04:00:58,560 --> 04:01:00,960
the page or the index page will be a

5851
04:01:00,960 --> 04:01:03,120
child and then we will have a courses

5852
04:01:03,120 --> 04:01:05,760
route and an edit route and stuff like

5853
04:01:05,760 --> 04:01:07,760
that. But at the end of the day we will

5854
04:01:07,760 --> 04:01:10,080
have a layout which is the sidebar where

5855
04:01:10,080 --> 04:01:12,160
we render this user nav and then on the

5856
04:01:12,160 --> 04:01:13,840
right side we will have all of the

5857
04:01:13,840 --> 04:01:16,080
children. If I get the user session on

5858
04:01:16,080 --> 04:01:18,319
the server side all of the children will

5859
04:01:18,319 --> 04:01:20,560
be converted or will be opted into

5860
04:01:20,560 --> 04:01:22,720
dynamic rendering. This means every

5861
04:01:22,720 --> 04:01:25,600
request will be rendered the page will

5862
04:01:25,600 --> 04:01:27,920
be rendered dynamically. My god. So,

5863
04:01:27,920 --> 04:01:30,960
Nex.js has the ability to render pages

5864
04:01:30,960 --> 04:01:33,199
two ways. Either on the server side or

5865
04:01:33,199 --> 04:01:35,680
on demand or it can be statically

5866
04:01:35,680 --> 04:01:38,479
rendered a page. And if I fetch the user

5867
04:01:38,479 --> 04:01:40,880
session right here on the server side,

5868
04:01:40,880 --> 04:01:43,439
every child will be automatically opted

5869
04:01:43,439 --> 04:01:46,479
into dynamic rendering. If Nex.js gives

5870
04:01:46,479 --> 04:01:48,880
you the ability to render a route

5871
04:01:48,880 --> 04:01:51,040
statically, then you don't want to take

5872
04:01:51,040 --> 04:01:53,520
this ability away or give this ability

5873
04:01:53,520 --> 04:01:55,520
away. So that's why we want to get the

5874
04:01:55,520 --> 04:01:57,840
session on the client side and also if

5875
04:01:57,840 --> 04:01:59,760
you head over to my YouTube channel

5876
04:01:59,760 --> 04:02:02,000
again don't forget you subscribe please

5877
04:02:02,000 --> 04:02:04,399
do that then you will find this video

5878
04:02:04,399 --> 04:02:07,120
stop fetching data in nextJS the wrong

5879
04:02:07,120 --> 04:02:09,040
way uh here's how to do it the right way

5880
04:02:09,040 --> 04:02:10,880
or something like that I'm not sure why

5881
04:02:10,880 --> 04:02:13,359
this is translated into German but yeah

5882
04:02:13,359 --> 04:02:15,439
in this video I also talk about data

5883
04:02:15,439 --> 04:02:17,680
fetching so I can again close this then

5884
04:02:17,680 --> 04:02:19,520
we can go back I want to go underneath

5885
04:02:19,520 --> 04:02:21,840
this use sidebar hook and I want to

5886
04:02:21,840 --> 04:02:23,840
create a constant we can destruct

5887
04:02:23,840 --> 04:02:26,239
And this will be equal to off client. Of

5888
04:02:26,239 --> 04:02:28,720
client is imported from the lip folder.

5889
04:02:28,720 --> 04:02:31,199
And then we want to use the use session

5890
04:02:31,199 --> 04:02:33,520
hook or the use session function. I want

5891
04:02:33,520 --> 04:02:36,080
to call it and then where I structured I

5892
04:02:36,080 --> 04:02:37,760
will get the data. This means the

5893
04:02:37,760 --> 04:02:40,880
session and also the is pending boolean.

5894
04:02:40,880 --> 04:02:43,359
Then I can go underneath this constant

5895
04:02:43,359 --> 04:02:45,920
and I want to create an if statement. If

5896
04:02:45,920 --> 04:02:47,840
is pending. So if we are currently

5897
04:02:47,840 --> 04:02:50,160
fetching the user session uh then I want

5898
04:02:50,160 --> 04:02:52,000
to return null. This means I won't

5899
04:02:52,000 --> 04:02:54,239
return anything. And once we get our

5900
04:02:54,239 --> 04:02:56,640
session, we will then return this user

5901
04:02:56,640 --> 04:02:58,960
dropdown. Then I can scroll a bit to the

5902
04:02:58,960 --> 04:03:02,399
bottom and I can update my source and my

5903
04:03:02,399 --> 04:03:04,640
name and stuff like that. So for the

5904
04:03:04,640 --> 04:03:07,359
avatar source, I want to use the session

5905
04:03:07,359 --> 04:03:10,560
do user dot image. And here's the thing,

5906
04:03:10,560 --> 04:03:12,319
we will get an error. What's the

5907
04:03:12,319 --> 04:03:14,160
problem? Well, it says type string or

5908
04:03:14,160 --> 04:03:16,880
null or undefined is not assignable to

5909
04:03:16,880 --> 04:03:19,439
type string blob or undefined. What's

5910
04:03:19,439 --> 04:03:21,279
the problem? Well, again, a user can

5911
04:03:21,279 --> 04:03:23,279
sign in either with GitHub or with

5912
04:03:23,279 --> 04:03:25,760
email. If a user signs in with his

5913
04:03:25,760 --> 04:03:28,560
email, then we won't generate a avatar

5914
04:03:28,560 --> 04:03:31,120
or an avatar URL, an avatar image,

5915
04:03:31,120 --> 04:03:34,080
whatever. That's why we want to render

5916
04:03:34,080 --> 04:03:35,680
something else. This means if we don't

5917
04:03:35,680 --> 04:03:38,000
get an image URL, then we can use

5918
04:03:38,000 --> 04:03:40,640
nullish coist. This says, hey, if this

5919
04:03:40,640 --> 04:03:42,720
value is not defined or null or

5920
04:03:42,720 --> 04:03:44,479
something like that, then let's render

5921
04:03:44,479 --> 04:03:47,040
whatever we pass here. And we want to

5922
04:03:47,040 --> 04:03:49,520
use a little micros service. So if you

5923
04:03:49,520 --> 04:03:52,239
go to Google you can search for avatar

5924
04:03:52,239 --> 04:03:55,279
versell API and then you will find this

5925
04:03:55,279 --> 04:03:57,359
link. This is a GitHub repo and here

5926
04:03:57,359 --> 04:03:59,760
they say beautiful avatars as a micros

5927
04:03:59,760 --> 04:04:02,319
service and this URL will just generate

5928
04:04:02,319 --> 04:04:05,040
a new image. So we can copy it. I can go

5929
04:04:05,040 --> 04:04:07,520
back and then I want to use optics and

5930
04:04:07,520 --> 04:04:09,600
paste it. This means again if we don't

5931
04:04:09,600 --> 04:04:12,960
get an image URL from our provider then

5932
04:04:12,960 --> 04:04:16,000
we will just generate one by ourselves.

5933
04:04:16,000 --> 04:04:19,279
So this is avatar.cell.sh. SH and then

5934
04:04:19,279 --> 04:04:21,760
we can pass a name and this name will

5935
04:04:21,760 --> 04:04:24,160
then dynamically generate the image. So

5936
04:04:24,160 --> 04:04:26,880
currently it's hardcoded as RA g the

5937
04:04:26,880 --> 04:04:29,120
name of the founder. So let's use a

5938
04:04:29,120 --> 04:04:31,199
dynamic value and I want to pass the

5939
04:04:31,199 --> 04:04:35,120
session user email. This means this API

5940
04:04:35,120 --> 04:04:37,840
will generate an image using the user's

5941
04:04:37,840 --> 04:04:39,760
email and then the image will be

5942
04:04:39,760 --> 04:04:42,720
relatively unique for every user. Then

5943
04:04:42,720 --> 04:04:45,040
for the alt I want to pass the user or

5944
04:04:45,040 --> 04:04:48,399
not user but session do user.name name

5945
04:04:48,399 --> 04:04:50,479
and then I want to continue with the

5946
04:04:50,479 --> 04:04:53,439
avatar fallback and this avatar fallback

5947
04:04:53,439 --> 04:04:55,840
will be rendered if the avatar image is

5948
04:04:55,840 --> 04:04:58,399
not accessible for some weird reason if

5949
04:04:58,399 --> 04:05:01,199
the URL is broken or something like that

5950
04:05:01,199 --> 04:05:03,199
and then instead of rendering the image

5951
04:05:03,199 --> 04:05:05,359
this fallback will be rendered for now

5952
04:05:05,359 --> 04:05:08,319
for example CN is hardcoded but in most

5953
04:05:08,319 --> 04:05:10,880
cases you want to use the initials of

5954
04:05:10,880 --> 04:05:13,439
the user's name this means we can for

5955
04:05:13,439 --> 04:05:17,600
example get the session dot user name

5956
04:05:17,600 --> 04:05:19,920
dot name and then I can use array

5957
04:05:19,920 --> 04:05:22,640
brackets and get the first character uh

5958
04:05:22,640 --> 04:05:25,840
from this username. But this is actually

5959
04:05:25,840 --> 04:05:27,680
kind of a mistake. Why is this a

5960
04:05:27,680 --> 04:05:29,840
mistake? Well, here's the thing. If a

5961
04:05:29,840 --> 04:05:31,920
user signs in with GitHub, then GitHub

5962
04:05:31,920 --> 04:05:34,479
will provide us with the user's name.

5963
04:05:34,479 --> 04:05:37,040
Great. That's what we want. But if the

5964
04:05:37,040 --> 04:05:39,760
or if a user signs in with his email,

5965
04:05:39,760 --> 04:05:42,000
then we won't get a name. And this is a

5966
04:05:42,000 --> 04:05:44,560
huge problem. So the weird thing is

5967
04:05:44,560 --> 04:05:47,840
better off handles the username and it

5968
04:05:47,840 --> 04:05:49,760
says that it's strictly defined but it

5969
04:05:49,760 --> 04:05:52,160
isn't because if I hover over the name

5970
04:05:52,160 --> 04:05:54,399
it says it's of type string but in

5971
04:05:54,399 --> 04:05:56,880
reality yes the name is of type string

5972
04:05:56,880 --> 04:05:59,359
but it could be not defined. Better off

5973
04:05:59,359 --> 04:06:02,479
in the back and converts this null to an

5974
04:06:02,479 --> 04:06:04,399
empty string. What what do you mean by

5975
04:06:04,399 --> 04:06:06,640
that? Well if a user signs in with his

5976
04:06:06,640 --> 04:06:09,040
email then better off just creates a

5977
04:06:09,040 --> 04:06:11,120
empty string for the name. But we don't

5978
04:06:11,120 --> 04:06:12,880
want that because again if we have an

5979
04:06:12,880 --> 04:06:14,800
empty string then I can't render

5980
04:06:14,800 --> 04:06:16,640
anything right here. This means we have

5981
04:06:16,640 --> 04:06:19,279
to now check if we get a username with a

5982
04:06:19,279 --> 04:06:21,600
few characters. If not then we want to

5983
04:06:21,600 --> 04:06:24,239
use the user's email and then use the

5984
04:06:24,239 --> 04:06:26,319
first character. Honestly I think this

5985
04:06:26,319 --> 04:06:28,800
is a very bad design from the better off

5986
04:06:28,800 --> 04:06:31,040
team. If there's no username then this

5987
04:06:31,040 --> 04:06:32,800
should be null, not just an empty

5988
04:06:32,800 --> 04:06:34,800
string. This is a huge mistake.

5989
04:06:34,800 --> 04:06:36,800
Honestly, I'm not sure how they could

5990
04:06:36,800 --> 04:06:38,640
ship something like that to production.

5991
04:06:38,640 --> 04:06:41,040
But hey, I'm not a maintainer, so who

5992
04:06:41,040 --> 04:06:42,720
knows? Maybe there's a good reason for

5993
04:06:42,720 --> 04:06:45,199
that. So, we will create a turnary. We

5994
04:06:45,199 --> 04:06:47,680
will check if the session uh username is

5995
04:06:47,680 --> 04:06:50,000
defined. If so, we will then also check

5996
04:06:50,000 --> 04:06:52,080
if we have at least one character. If

5997
04:06:52,080 --> 04:06:54,160
so, then we will render the first

5998
04:06:54,160 --> 04:06:56,319
character of the username and if not, we

5999
04:06:56,319 --> 04:06:58,160
will render the first character of the

6000
04:06:58,160 --> 04:07:00,800
user's email. So, I will create a

6001
04:07:00,800 --> 04:07:02,560
turnary or I will check the following.

6002
04:07:02,560 --> 04:07:05,439
Hey, if the session do user.name is

6003
04:07:05,439 --> 04:07:07,760
defined, then we can use this double and

6004
04:07:07,760 --> 04:07:10,000
sign and then I want to check if the

6005
04:07:10,000 --> 04:07:12,000
session username has at least one

6006
04:07:12,000 --> 04:07:14,080
character. So I want to get the session

6007
04:07:14,080 --> 04:07:17,359
do user.name. We now know that it's 100%

6008
04:07:17,359 --> 04:07:19,520
defined. And we want to check if the

6009
04:07:19,520 --> 04:07:21,920
length is bigger than zero. So at least

6010
04:07:21,920 --> 04:07:24,160
a character length of one. If the

6011
04:07:24,160 --> 04:07:26,000
character length is bigger than zero,

6012
04:07:26,000 --> 04:07:27,920
then this means that we have a real

6013
04:07:27,920 --> 04:07:30,479
username. If so, we can use a question

6014
04:07:30,479 --> 04:07:33,279
mark eternally and I want to render the

6015
04:07:33,279 --> 04:07:36,239
session do user.name and then I can use

6016
04:07:36,239 --> 04:07:38,880
the char at. So uh again let me get the

6017
04:07:38,880 --> 04:07:41,760
name right here and I can use the char

6018
04:07:41,760 --> 04:07:45,040
at or car at no char at so character at

6019
04:07:45,040 --> 04:07:47,040
method and I want to get the first

6020
04:07:47,040 --> 04:07:49,199
character. So as an argument I want to

6021
04:07:49,199 --> 04:07:51,520
provide zero so the first character and

6022
04:07:51,520 --> 04:07:53,199
then I want to also use the two

6023
04:07:53,199 --> 04:07:55,199
uppercase method because I want to

6024
04:07:55,199 --> 04:07:57,520
uppercase the first character. If this

6025
04:07:57,520 --> 04:07:59,439
is not true, if the character length or

6026
04:07:59,439 --> 04:08:01,600
if the length of the name is not bigger

6027
04:08:01,600 --> 04:08:03,439
than zero, this means if we don't have a

6028
04:08:03,439 --> 04:08:05,680
username, then I want to use the email.

6029
04:08:05,680 --> 04:08:07,600
So we can use the colon and I want to

6030
04:08:07,600 --> 04:08:11,439
get the session do user do email and uh

6031
04:08:11,439 --> 04:08:13,439
again we want to use the character at

6032
04:08:13,439 --> 04:08:15,920
method. I want to get the first uh

6033
04:08:15,920 --> 04:08:18,000
character and then I can use the two

6034
04:08:18,000 --> 04:08:20,399
uppercase method and I want to invoke

6035
04:08:20,399 --> 04:08:22,399
it. So again, if we don't have a

6036
04:08:22,399 --> 04:08:25,199
username, then or if we have a username,

6037
04:08:25,199 --> 04:08:27,359
then we will render the first character

6038
04:08:27,359 --> 04:08:29,680
of the username and we will uppercase

6039
04:08:29,680 --> 04:08:32,239
it. If there's no username defined, then

6040
04:08:32,239 --> 04:08:34,479
we will use the user's email. We will

6041
04:08:34,479 --> 04:08:36,720
also use the first character and we will

6042
04:08:36,720 --> 04:08:38,880
uppercase the first character. It's

6043
04:08:38,880 --> 04:08:41,279
quite simple as you see. Um then I want

6044
04:08:41,279 --> 04:08:42,640
to continue right here with the

6045
04:08:42,640 --> 04:08:44,640
username. And here we again have the

6046
04:08:44,640 --> 04:08:46,560
same problem. We render the username,

6047
04:08:46,560 --> 04:08:48,399
but if we don't have a username, this

6048
04:08:48,399 --> 04:08:50,399
will be an empty string. This means we

6049
04:08:50,399 --> 04:08:52,640
want to literally again create the same

6050
04:08:52,640 --> 04:08:54,880
if check the same turnary. So I will

6051
04:08:54,880 --> 04:08:57,359
delete this user.name and I will check

6052
04:08:57,359 --> 04:09:00,800
if we get the session do user.name then

6053
04:09:00,800 --> 04:09:02,960
let's use this double and sign and then

6054
04:09:02,960 --> 04:09:05,040
I want to also check that the session do

6055
04:09:05,040 --> 04:09:07,279
username has a bigger character length

6056
04:09:07,279 --> 04:09:09,359
than zero. So we can again get our

6057
04:09:09,359 --> 04:09:12,080
session do user.name.length

6058
04:09:12,080 --> 04:09:14,160
and if this is bigger than zero then I

6059
04:09:14,160 --> 04:09:16,080
want to create a turnary. So I will use

6060
04:09:16,080 --> 04:09:18,000
a question mark and then I want to

6061
04:09:18,000 --> 04:09:21,120
render the session do user.name and if

6062
04:09:21,120 --> 04:09:23,439
the username is not defined then I want

6063
04:09:23,439 --> 04:09:25,840
to render the email. So I will use a

6064
04:09:25,840 --> 04:09:28,000
colon and I will get the session do

6065
04:09:28,000 --> 04:09:29,600
user.mmail.

6066
04:09:29,600 --> 04:09:31,359
But if I will leave it like that then we

6067
04:09:31,359 --> 04:09:33,439
will just render the user email as a

6068
04:09:33,439 --> 04:09:34,880
name. We don't want that. I don't want

6069
04:09:34,880 --> 04:09:37,520
to render this atgmail.com only the

6070
04:09:37,520 --> 04:09:39,359
start of an email. So what do I mean by

6071
04:09:39,359 --> 04:09:42,000
that? For example this is an email as

6072
04:09:42,000 --> 04:09:44,560
you see d.com.

6073
04:09:44,560 --> 04:09:47,439
I want to just render this first section

6074
04:09:47,439 --> 04:09:49,439
uh which is in front of this at. This

6075
04:09:49,439 --> 04:09:51,600
means we can again go back to the top.

6076
04:09:51,600 --> 04:09:53,680
Then where do I have my email or my

6077
04:09:53,680 --> 04:09:55,359
name? It's right here. And then for the

6078
04:09:55,359 --> 04:09:58,239
session user email, we can use the split

6079
04:09:58,239 --> 04:10:01,199
method. So dotsplit, I can invoke it.

6080
04:10:01,199 --> 04:10:03,520
And I want to split this at. And then I

6081
04:10:03,520 --> 04:10:05,680
want to also append this array bracket

6082
04:10:05,680 --> 04:10:07,680
zero at the end which means I want to

6083
04:10:07,680 --> 04:10:09,840
get the start of this uh email. What

6084
04:10:09,840 --> 04:10:11,760
does this mean? Well, again this is a

6085
04:10:11,760 --> 04:10:14,000
email as you see and with the zero I

6086
04:10:14,000 --> 04:10:16,479
will get this uh start because it splits

6087
04:10:16,479 --> 04:10:18,720
everything from this ad. It splits this

6088
04:10:18,720 --> 04:10:20,880
section and this section and I want to

6089
04:10:20,880 --> 04:10:22,960
get the first section which means I use

6090
04:10:22,960 --> 04:10:25,120
array brackets with the zero. Then this

6091
04:10:25,120 --> 04:10:26,720
is finished right here instead of

6092
04:10:26,720 --> 04:10:28,880
getting the user email. I want to get

6093
04:10:28,880 --> 04:10:31,600
the session do user email. Then we have

6094
04:10:31,600 --> 04:10:34,000
our avatar image again. As you all know

6095
04:10:34,000 --> 04:10:35,920
we already fixed the problem with the

6096
04:10:35,920 --> 04:10:38,000
avatar image. So I can scroll to the

6097
04:10:38,000 --> 04:10:40,399
top. Here we have our avatar image. I

6098
04:10:40,399 --> 04:10:42,720
will just copy the source and the alt.

6099
04:10:42,720 --> 04:10:45,120
Then I can go back and also paste it. So

6100
04:10:45,120 --> 04:10:47,520
I can delete this old source and alt and

6101
04:10:47,520 --> 04:10:49,600
paste what I just copied. Then for the

6102
04:10:49,600 --> 04:10:52,479
avatar fallback again I just I can just

6103
04:10:52,479 --> 04:10:55,359
copy my old avatar fallback and paste it

6104
04:10:55,359 --> 04:10:57,199
right here. So I will delete this one

6105
04:10:57,199 --> 04:10:59,279
and paste what I just copied. And then

6106
04:10:59,279 --> 04:11:01,199
we can also update the username and

6107
04:11:01,199 --> 04:11:03,680
email. We already did that. So I can

6108
04:11:03,680 --> 04:11:05,840
just copy this turnary. Then I will

6109
04:11:05,840 --> 04:11:08,000
paste it for the username and for the

6110
04:11:08,000 --> 04:11:10,800
email I will just render my session do

6111
04:11:10,800 --> 04:11:14,080
user do email. So this should fix all of

6112
04:11:14,080 --> 04:11:16,319
the problems. Yes, this looks good. Uh

6113
04:11:16,319 --> 04:11:18,479
whatever do we have this unused import

6114
04:11:18,479 --> 04:11:20,239
statement I can delete it. And if I

6115
04:11:20,239 --> 04:11:22,000
again go back you'll now see that I

6116
04:11:22,000 --> 04:11:24,319
render my name, my email and if I click

6117
04:11:24,319 --> 04:11:26,800
on this user dropdown I again render my

6118
04:11:26,800 --> 04:11:29,600
name, my email and my avatar also. Let

6119
04:11:29,600 --> 04:11:32,239
me uh remove this uh thingy. I don't

6120
04:11:32,239 --> 04:11:34,560
need it. So uh bottom right. This will

6121
04:11:34,560 --> 04:11:37,040
be better. Yeah. And one problem which I

6122
04:11:37,040 --> 04:11:39,120
currently have is that this avatar has

6123
04:11:39,120 --> 04:11:41,120
like this gray scale. I don't really

6124
04:11:41,120 --> 04:11:43,840
like that. So I can again go back scroll

6125
04:11:43,840 --> 04:11:45,520
a bit to the top and then for this

6126
04:11:45,520 --> 04:11:47,520
avatar image you see we have a class

6127
04:11:47,520 --> 04:11:50,160
name with grayscale. I can delete this

6128
04:11:50,160 --> 04:11:52,160
grayscale and then my image will have

6129
04:11:52,160 --> 04:11:55,279
the full you could say opacity I guess.

6130
04:11:55,279 --> 04:11:58,319
So yeah our sidebar looks finished. Um

6131
04:11:58,319 --> 04:12:00,000
the only problem is these links don't

6132
04:12:00,000 --> 04:12:01,600
work. If I click on account nothing

6133
04:12:01,600 --> 04:12:03,520
happens. If I click on billing, nothing

6134
04:12:03,520 --> 04:12:05,840
happens. If I click on notifications,

6135
04:12:05,840 --> 04:12:08,319
nothing happens. So, we can go back. We

6136
04:12:08,319 --> 04:12:10,000
can scroll a bit to the bottom. And

6137
04:12:10,000 --> 04:12:11,920
instead of rendering this drop-down menu

6138
04:12:11,920 --> 04:12:13,520
content with account, billing, and

6139
04:12:13,520 --> 04:12:15,840
notifications, I want to instead render

6140
04:12:15,840 --> 04:12:18,640
a dashboard link, a homepage link, and a

6141
04:12:18,640 --> 04:12:20,319
courses link. And of course, I want to

6142
04:12:20,319 --> 04:12:23,040
leave this lockout button right here.

6143
04:12:23,040 --> 04:12:25,199
So, for the first drop-down menu item,

6144
04:12:25,199 --> 04:12:27,359
instead of saying account, I want to say

6145
04:12:27,359 --> 04:12:29,680
homepage. Then I want to also redirect

6146
04:12:29,680 --> 04:12:31,600
the user which means I want to render

6147
04:12:31,600 --> 04:12:33,680
the link component. So for the drop-down

6148
04:12:33,680 --> 04:12:36,560
menu item I want to pass an as child

6149
04:12:36,560 --> 04:12:38,640
property and then I will copy the

6150
04:12:38,640 --> 04:12:40,960
content in the drop-down menu item. I

6151
04:12:40,960 --> 04:12:43,279
want to get the link component from next

6152
04:12:43,279 --> 04:12:45,279
/link. Then for the link I want to

6153
04:12:45,279 --> 04:12:47,279
provide an href and this will be an

6154
04:12:47,279 --> 04:12:49,520
empty slash because I want to redirect

6155
04:12:49,520 --> 04:12:52,080
the user to the homepage. Then also I

6156
04:12:52,080 --> 04:12:54,160
want to update the icon. I want to use

6157
04:12:54,160 --> 04:12:56,720
the home icon imported from Lucid React

6158
04:12:56,720 --> 04:12:58,800
and then we can continue with the second

6159
04:12:58,800 --> 04:13:00,960
link. So instead of redirecting the user

6160
04:13:00,960 --> 04:13:03,120
or instead of saying billing I want to

6161
04:13:03,120 --> 04:13:05,920
say dashboard. Then for the icon uh I

6162
04:13:05,920 --> 04:13:07,600
want to change it. I want to use the

6163
04:13:07,600 --> 04:13:10,000
icon dashboard. This is imported from

6164
04:13:10,000 --> 04:13:12,159
Tableau icons. So here's the thing. When

6165
04:13:12,159 --> 04:13:14,319
we created this admin dashboard so when

6166
04:13:14,319 --> 04:13:16,960
we use this command it also installed a

6167
04:13:16,960 --> 04:13:18,880
new icon library. So if I open my

6168
04:13:18,880 --> 04:13:21,520
package.json you will find right here

6169
04:13:21,520 --> 04:13:23,760
Tableau. So if I search for it, Tablea

6170
04:13:23,760 --> 04:13:25,840
icons react. So this was installed when

6171
04:13:25,840 --> 04:13:28,640
we created our dashboard. In theory,

6172
04:13:28,640 --> 04:13:30,640
it's not great to have two icon

6173
04:13:30,640 --> 04:13:32,720
libraries, but honestly, this is also a

6174
04:13:32,720 --> 04:13:35,199
good icon library. So I will use it. So

6175
04:13:35,199 --> 04:13:37,120
we can again go back. I will close the

6176
04:13:37,120 --> 04:13:39,359
package.json. And this has been uh

6177
04:13:39,359 --> 04:13:41,680
imported. Then I want to also wrap the

6178
04:13:41,680 --> 04:13:43,760
content in a link component. And for the

6179
04:13:43,760 --> 04:13:45,920
link, I want to provide an href. This

6180
04:13:45,920 --> 04:13:48,720
will be /admin. Also, we want to give

6181
04:13:48,720 --> 04:13:51,439
the drop-own menu item an as child

6182
04:13:51,439 --> 04:13:53,600
property. And then the third link, this

6183
04:13:53,600 --> 04:13:55,840
should be courses. Then I don't want to

6184
04:13:55,840 --> 04:13:58,080
use this icon. Instead, I will use the

6185
04:13:58,080 --> 04:14:01,439
TV2 icon imported from Lucid React. Then

6186
04:14:01,439 --> 04:14:03,840
I can give this drop-down menu item an

6187
04:14:03,840 --> 04:14:06,640
ask child property. And also I want to

6188
04:14:06,640 --> 04:14:09,040
wrap the content in a link component.

6189
04:14:09,040 --> 04:14:10,960
This has already been imported. Let's

6190
04:14:10,960 --> 04:14:13,279
give the link an href. And this will be

6191
04:14:13,279 --> 04:14:17,680
slashadmin and then slashcourses.

6192
04:14:17,680 --> 04:14:19,600
I think this should be already it. This

6193
04:14:19,600 --> 04:14:21,920
means if I again go back and click on my

6194
04:14:21,920 --> 04:14:24,560
user dropdown, I get three items or

6195
04:14:24,560 --> 04:14:27,040
three links. If I click on dashboard,

6196
04:14:27,040 --> 04:14:29,359
nothing happens. If I click on homepage,

6197
04:14:29,359 --> 04:14:31,600
I will get redirected to the homepage.

6198
04:14:31,600 --> 04:14:33,520
And if I click on courses, I will get

6199
04:14:33,520 --> 04:14:35,279
redirected. But since we don't have a

6200
04:14:35,279 --> 04:14:38,560
route yet, it throws a 44 error. Then we

6201
04:14:38,560 --> 04:14:40,319
can go back. This lockout button

6202
04:14:40,319 --> 04:14:42,000
currently does not work. If I click on

6203
04:14:42,000 --> 04:14:44,159
it, I don't get locked out. And this is

6204
04:14:44,159 --> 04:14:46,479
a huge problem. So, we can go back and

6205
04:14:46,479 --> 04:14:48,720
then for the drop-own menu item, I want

6206
04:14:48,720 --> 04:14:51,439
to pass an on click handler. And if the

6207
04:14:51,439 --> 04:14:53,680
user clicks on this item on this button,

6208
04:14:53,680 --> 04:14:55,760
I want to lock out the user. Who would

6209
04:14:55,760 --> 04:14:58,640
have thought? Groundbreaking. No. And as

6210
04:14:58,640 --> 04:15:01,040
you already know, we created a function

6211
04:15:01,040 --> 04:15:03,520
in our user dropdown. And this user

6212
04:15:03,520 --> 04:15:05,760
dropdown is rendered in our navbar. So,

6213
04:15:05,760 --> 04:15:08,080
right here, async function sign out. And

6214
04:15:08,080 --> 04:15:10,319
then we use the off client to sign the

6215
04:15:10,319 --> 04:15:12,720
user out. But here's the thing. I don't

6216
04:15:12,720 --> 04:15:15,120
want to rewrite this function 10 times.

6217
04:15:15,120 --> 04:15:17,359
I think you all know this one saying,

6218
04:15:17,359 --> 04:15:19,760
don't repeat yourself. Keep everything

6219
04:15:19,760 --> 04:15:22,399
dry. This means we want to create one

6220
04:15:22,399 --> 04:15:24,800
file, one for example hook, and then

6221
04:15:24,800 --> 04:15:27,680
reuse it in multiple places. So I want

6222
04:15:27,680 --> 04:15:29,760
to open my explorer. Then I want to go

6223
04:15:29,760 --> 04:15:32,479
into the hooks folder. So in the root

6224
04:15:32,479 --> 04:15:34,640
directory, we have a hooks folder. And

6225
04:15:34,640 --> 04:15:37,680
inside of here I will create a use dash

6226
04:15:37,680 --> 04:15:40,720
sign out.ts

6227
04:15:40,720 --> 04:15:43,120
file. And inside of here I will create a

6228
04:15:43,120 --> 04:15:45,359
hook. And if I call this hook we will

6229
04:15:45,359 --> 04:15:47,840
sign out the user. So first of all we

6230
04:15:47,840 --> 04:15:49,920
want to mark this hook as or we want to

6231
04:15:49,920 --> 04:15:52,080
mark this file with the use client

6232
04:15:52,080 --> 04:15:54,479
directive. Then we can create an export

6233
04:15:54,479 --> 04:15:58,000
function which I will call use sign out

6234
04:15:58,000 --> 04:16:00,319
and then I can just open it. Then inside

6235
04:16:00,319 --> 04:16:02,479
of here I want to create a function to

6236
04:16:02,479 --> 04:16:04,960
sign the user out. So I can go to the

6237
04:16:04,960 --> 04:16:07,279
user dropdown and I can literally just

6238
04:16:07,279 --> 04:16:10,399
copy this uh async function sign out. I

6239
04:16:10,399 --> 04:16:12,560
will copy it and then paste it into my

6240
04:16:12,560 --> 04:16:15,120
use sign out function. Then I want to

6241
04:16:15,120 --> 04:16:17,840
update this async sign out function. So

6242
04:16:17,840 --> 04:16:20,000
this should be a constant and I will

6243
04:16:20,000 --> 04:16:22,880
call it handle sign out and then this

6244
04:16:22,880 --> 04:16:25,120
will be equal to async function sign

6245
04:16:25,120 --> 04:16:27,439
out. I want to import the off client

6246
04:16:27,439 --> 04:16:30,000
from the lip folder. Then I want to also

6247
04:16:30,000 --> 04:16:32,880
initialize my use router hook. So above

6248
04:16:32,880 --> 04:16:35,199
this constant handle sign out we can

6249
04:16:35,199 --> 04:16:37,439
create a constant router and this will

6250
04:16:37,439 --> 04:16:40,080
be equal to use router. Please make sure

6251
04:16:40,080 --> 04:16:43,279
that you import it from next/navigation.

6252
04:16:43,279 --> 04:16:45,680
I want to then invoke it and now I get

6253
04:16:45,680 --> 04:16:48,080
access to the router. Also I want to

6254
04:16:48,080 --> 04:16:50,479
import the toast from sona the toast

6255
04:16:50,479 --> 04:16:52,560
library. And now we are already

6256
04:16:52,560 --> 04:16:54,960
finished. We want to also return handle

6257
04:16:54,960 --> 04:16:57,199
sign out. So I can go underneath the

6258
04:16:57,199 --> 04:16:59,439
constant but still in the function use

6259
04:16:59,439 --> 04:17:01,840
sign out and I want to just return

6260
04:17:01,840 --> 04:17:04,399
handle sign out. So right here we just

6261
04:17:04,399 --> 04:17:07,279
created a custom hook. So again let me

6262
04:17:07,279 --> 04:17:09,760
go through this function through this

6263
04:17:09,760 --> 04:17:12,000
code. So first of all we create an

6264
04:17:12,000 --> 04:17:14,640
export function use sign out. Inside of

6265
04:17:14,640 --> 04:17:17,359
here we initialize our use router hook

6266
04:17:17,359 --> 04:17:19,600
and then in this use sign out function

6267
04:17:19,600 --> 04:17:21,840
we sign out the user. So we create a

6268
04:17:21,840 --> 04:17:24,640
handle sign out function. Then we for

6269
04:17:24,640 --> 04:17:26,560
example or not for example we use the

6270
04:17:26,560 --> 04:17:28,800
off client to sign the user out. We have

6271
04:17:28,800 --> 04:17:31,920
our on success our on events and then we

6272
04:17:31,920 --> 04:17:34,000
return toasts and we also redirect the

6273
04:17:34,000 --> 04:17:36,800
user if everything was successful. This

6274
04:17:36,800 --> 04:17:38,800
means I can use this use sign out

6275
04:17:38,800 --> 04:17:42,000
function in my nav user. I can scroll to

6276
04:17:42,000 --> 04:17:44,159
the top and this is a client component

6277
04:17:44,159 --> 04:17:45,920
which means I can go underneath this

6278
04:17:45,920 --> 04:17:48,399
constant data uh with the offclient uh

6279
04:17:48,399 --> 04:17:50,960
use session and then I want to create a

6280
04:17:50,960 --> 04:17:53,199
constant. This will be called handle

6281
04:17:53,199 --> 04:17:56,159
sign out and this will be equal to use

6282
04:17:56,159 --> 04:17:58,960
sign out. Use sign out is imported from

6283
04:17:58,960 --> 04:18:01,680
our hooks folder. I can invoke it and

6284
04:18:01,680 --> 04:18:04,399
then this handle sign out function will

6285
04:18:04,399 --> 04:18:07,199
allow us to sign out. So I will copy the

6286
04:18:07,199 --> 04:18:09,040
name. I will scroll to the bottom and

6287
04:18:09,040 --> 04:18:11,520
then this onclick handler will be equal

6288
04:18:11,520 --> 04:18:14,000
to handle sign out and then we will sign

6289
04:18:14,000 --> 04:18:16,640
the user out. Then we still get three

6290
04:18:16,640 --> 04:18:18,800
errors right here and that's because of

6291
04:18:18,800 --> 04:18:21,359
unused imports. So I will scroll to the

6292
04:18:21,359 --> 04:18:23,520
top. I will delete this unused import

6293
04:18:23,520 --> 04:18:26,000
and also this one. And as you see, we

6294
04:18:26,000 --> 04:18:28,080
don't get any errors anymore, which

6295
04:18:28,080 --> 04:18:31,120
means everything should work. So I will

6296
04:18:31,120 --> 04:18:33,840
go back. I will do a hard refresh. And

6297
04:18:33,840 --> 04:18:37,920
if I click on log out, let's see. Yes, I

6298
04:18:37,920 --> 04:18:40,560
got signed out successfully. And also I

6299
04:18:40,560 --> 04:18:42,960
got redirected to the index page. Right

6300
04:18:42,960 --> 04:18:45,279
here on the top in the nav by you see

6301
04:18:45,279 --> 04:18:47,359
display two buttons, login and get

6302
04:18:47,359 --> 04:18:49,920
started. And if I click on login, I will

6303
04:18:49,920 --> 04:18:52,479
again get redirected to the login page.

6304
04:18:52,479 --> 04:18:55,120
I will sign in with GitHub. As you see

6305
04:18:55,120 --> 04:18:56,880
signed in with GitHub, you will be

6306
04:18:56,880 --> 04:19:00,080
redirected and I got redirected. Then if

6307
04:19:00,080 --> 04:19:02,960
I again go /admin then you will again

6308
04:19:02,960 --> 04:19:05,359
see the usern at the bottom with all of

6309
04:19:05,359 --> 04:19:08,960
my links. Wow, this was so cool. So we

6310
04:19:08,960 --> 04:19:10,720
have finished with the nav user. I can

6311
04:19:10,720 --> 04:19:13,359
close it. Then also for our navbar or

6312
04:19:13,359 --> 04:19:15,520
for the user dropdown, uh I don't have

6313
04:19:15,520 --> 04:19:17,760
to use this code anymore. async function

6314
04:19:17,760 --> 04:19:20,239
sign out. Instead, we can just use the

6315
04:19:20,239 --> 04:19:22,239
use sign out hook. So, I will just

6316
04:19:22,239 --> 04:19:24,239
delete it. I will also delete the use

6317
04:19:24,239 --> 04:19:26,159
router hook. And then right here, I can

6318
04:19:26,159 --> 04:19:29,520
say constant handle sign out. And this

6319
04:19:29,520 --> 04:19:32,880
will be equal to use sign out which is

6320
04:19:32,880 --> 04:19:35,760
imported from the hooks folder. If I uh

6321
04:19:35,760 --> 04:19:37,920
then I can copy this function. I can

6322
04:19:37,920 --> 04:19:40,080
scroll to the bottom and for the onclick

6323
04:19:40,080 --> 04:19:43,120
handler, I will pass handle sign out. As

6324
04:19:43,120 --> 04:19:45,359
you see, I still have a few unused

6325
04:19:45,359 --> 04:19:47,920
imports. So I will just delete them and

6326
04:19:47,920 --> 04:19:50,479
we are already finished which is great.

6327
04:19:50,479 --> 04:19:52,560
So I can close this. I can close the app

6328
04:19:52,560 --> 04:19:55,040
sidebar, the nav main and the page. If

6329
04:19:55,040 --> 04:19:57,040
we look at this page, everything looks

6330
04:19:57,040 --> 04:19:59,439
great. The sidebar is finished. The user

6331
04:19:59,439 --> 04:20:01,359
nav is finished. Everything is

6332
04:20:01,359 --> 04:20:04,640
collapsible. But if I look at the code

6333
04:20:04,640 --> 04:20:06,960
structure, it isn't great. So for

6334
04:20:06,960 --> 04:20:10,080
example, our components folder has an UI

6335
04:20:10,080 --> 04:20:12,319
folder. And then we also have all of

6336
04:20:12,319 --> 04:20:14,880
these files which are related to the

6337
04:20:14,880 --> 04:20:17,040
sidebar which means it would make a lot

6338
04:20:17,040 --> 04:20:19,199
of sense to just group them in a

6339
04:20:19,199 --> 04:20:21,520
separate folder. So in the components

6340
04:20:21,520 --> 04:20:23,920
folder I will create a new sidebar

6341
04:20:23,920 --> 04:20:26,159
folder and then I want to move all of

6342
04:20:26,159 --> 04:20:29,359
these files into the sidebar folder. So

6343
04:20:29,359 --> 04:20:31,279
I will just select all of them. This

6344
04:20:31,279 --> 04:20:33,359
means I can click on shift and then

6345
04:20:33,359 --> 04:20:35,359
select them and then I will move all of

6346
04:20:35,359 --> 04:20:38,640
these files into the sidebar folder. I

6347
04:20:38,640 --> 04:20:40,800
will move them. I will get a warning

6348
04:20:40,800 --> 04:20:43,439
probably. No, it looks good to me. Yes,

6349
04:20:43,439 --> 04:20:44,960
right here. This is the warning. I want

6350
04:20:44,960 --> 04:20:46,880
to update the imports. So, I will click

6351
04:20:46,880 --> 04:20:50,159
on yes. And in theory, this should work.

6352
04:20:50,159 --> 04:20:52,319
This means if I go to the app sidebar,

6353
04:20:52,319 --> 04:20:54,720
yeah, the imports look correct to me. No

6354
04:20:54,720 --> 04:20:57,199
errors. Chart area. Yep, this looks all

6355
04:20:57,199 --> 04:20:59,359
good. And if I go back and do a hard

6356
04:20:59,359 --> 04:21:02,640
refresh, yes, everything works nice. So,

6357
04:21:02,640 --> 04:21:05,040
this was a little cleanup. So, this

6358
04:21:05,040 --> 04:21:07,439
components folder looks a bit cleaner.

6359
04:21:07,439 --> 04:21:09,279
Also the site header should be moved

6360
04:21:09,279 --> 04:21:11,920
into the sidebar. So uh yes I want to

6361
04:21:11,920 --> 04:21:14,319
update everything. And again if I go

6362
04:21:14,319 --> 04:21:16,399
back let me save this. If I go back and

6363
04:21:16,399 --> 04:21:18,399
do a hard refresh everything works

6364
04:21:18,399 --> 04:21:21,120
great. So this is finished. Then right

6365
04:21:21,120 --> 04:21:23,120
here I have one problem. This is our

6366
04:21:23,120 --> 04:21:25,359
header. I display this button. This

6367
04:21:25,359 --> 04:21:27,279
looks nice but I don't want to render

6368
04:21:27,279 --> 04:21:30,640
documents and also GitHub. No I don't

6369
04:21:30,640 --> 04:21:33,199
want that. So we can again analyze our

6370
04:21:33,199 --> 04:21:36,239
page.tsx. So sidebar provider app

6371
04:21:36,239 --> 04:21:39,040
sidebar site header. Yes, we want to

6372
04:21:39,040 --> 04:21:41,040
open the site header. This means I can

6373
04:21:41,040 --> 04:21:43,279
again open the components folder. I want

6374
04:21:43,279 --> 04:21:45,680
to go into the sidebar folder and then I

6375
04:21:45,680 --> 04:21:48,080
want to open the side header component.

6376
04:21:48,080 --> 04:21:50,239
Inside of here we have a header. Okay,

6377
04:21:50,239 --> 04:21:52,000
this is not interesting. Sidebite

6378
04:21:52,000 --> 04:21:54,560
trigger. This is nice separator

6379
04:21:54,560 --> 04:21:56,159
documents. I don't want to render

6380
04:21:56,159 --> 04:21:58,319
documents. Instead, I want to render

6381
04:21:58,319 --> 04:22:01,439
Marshall LMS dot. Then we have a div

6382
04:22:01,439 --> 04:22:04,080
margin left auto and then a button which

6383
04:22:04,080 --> 04:22:06,479
renders GitHub. That's not what I want.

6384
04:22:06,479 --> 04:22:08,800
What should we render here? Hm, let me

6385
04:22:08,800 --> 04:22:10,960
think about that. How about we render

6386
04:22:10,960 --> 04:22:12,640
the theme toggle? I think this will make

6387
04:22:12,640 --> 04:22:14,800
a lot of sense. So I can delete the

6388
04:22:14,800 --> 04:22:16,479
button, but I want to still leave the

6389
04:22:16,479 --> 04:22:18,800
div right here with margin left auto.

6390
04:22:18,800 --> 04:22:20,960
And then I will get my theme toggle

6391
04:22:20,960 --> 04:22:23,279
which is stored in our components. This

6392
04:22:23,279 --> 04:22:25,279
is self-closing. Then I want to delete

6393
04:22:25,279 --> 04:22:28,080
this unused import which and if I again

6394
04:22:28,080 --> 04:22:30,159
go back then you will see here Marshall

6395
04:22:30,159 --> 04:22:32,560
LMS and then on the top right corner a

6396
04:22:32,560 --> 04:22:34,880
nice looking theme toggle. We can also

6397
04:22:34,880 --> 04:22:36,960
select light theme. Yes, this looks all

6398
04:22:36,960 --> 04:22:39,439
great. If I click on the nav user yes it

6399
04:22:39,439 --> 04:22:41,439
also looks great in light mode. And then

6400
04:22:41,439 --> 04:22:43,680
I will again select dark mode so that

6401
04:22:43,680 --> 04:22:45,600
you can see something. I know a lot of

6402
04:22:45,600 --> 04:22:47,840
people hate light mode. I personally

6403
04:22:47,840 --> 04:22:50,239
love it but who cares? So I would say

6404
04:22:50,239 --> 04:22:52,000
that we have finished with the admin

6405
04:22:52,000 --> 04:22:54,080
site or with the admin dashboard. And

6406
04:22:54,080 --> 04:22:55,760
what's the next thing which I want to

6407
04:22:55,760 --> 04:22:57,920
do? Well, I want to create the courses

6408
04:22:57,920 --> 04:23:00,239
world because if I click on courses, we

6409
04:23:00,239 --> 04:23:02,960
get a four for not found error. This

6410
04:23:02,960 --> 04:23:04,960
means I can go back. I can open the

6411
04:23:04,960 --> 04:23:07,040
explorer. I want to go into the app

6412
04:23:07,040 --> 04:23:09,600
folder into the admin folder and I want

6413
04:23:09,600 --> 04:23:11,520
to create a new route. This means a new

6414
04:23:11,520 --> 04:23:14,080
folder. I will name it courses. And in

6415
04:23:14,080 --> 04:23:16,080
the courses folder I want to create a

6416
04:23:16,080 --> 04:23:17,600
page.tsx.

6417
04:23:17,600 --> 04:23:19,439
Since this is a route, I want to create

6418
04:23:19,439 --> 04:23:22,640
an export default function. Then I will

6419
04:23:22,640 --> 04:23:25,120
call it courses page. And then I can

6420
04:23:25,120 --> 04:23:27,359
just open this function. Inside of here,

6421
04:23:27,359 --> 04:23:29,600
I will create a return statement with a

6422
04:23:29,600 --> 04:23:32,960
diff and then an H1 where I say, hey,

6423
04:23:32,960 --> 04:23:35,840
how are you? If I save this and again go

6424
04:23:35,840 --> 04:23:38,000
back and do a hard refresh, you will

6425
04:23:38,000 --> 04:23:40,640
see, hey, how are you? This is great. We

6426
04:23:40,640 --> 04:23:42,720
don't get any errors anymore. But where

6427
04:23:42,720 --> 04:23:45,199
is my layout? Where is my sidebar?

6428
04:23:45,199 --> 04:23:47,359
Where's my theme toggle? everything is

6429
04:23:47,359 --> 04:23:49,439
gone. I mean, I don't want to render my

6430
04:23:49,439 --> 04:23:52,080
dashboard again inside of here. I want

6431
04:23:52,080 --> 04:23:54,880
to have a layout. This means if I open

6432
04:23:54,880 --> 04:23:57,199
my explorer, you will see that our

6433
04:23:57,199 --> 04:23:59,199
sidebar is currently rendered in a

6434
04:23:59,199 --> 04:24:02,159
page.x. But as I already mentioned at

6435
04:24:02,159 --> 04:24:04,239
the start, instead of having a index

6436
04:24:04,239 --> 04:24:06,560
page or instead of rendering the sidebar

6437
04:24:06,560 --> 04:24:09,199
in an index page, I want to render it in

6438
04:24:09,199 --> 04:24:11,760
a layout. This means in the admin

6439
04:24:11,760 --> 04:24:15,040
folder, I want to create a layout.tsx

6440
04:24:15,040 --> 04:24:17,760
file. Again we want to create an export

6441
04:24:17,760 --> 04:24:21,040
default function. This will be the admin

6442
04:24:21,040 --> 04:24:23,199
layout. I can then also open this

6443
04:24:23,199 --> 04:24:25,600
function and create a return statement.

6444
04:24:25,600 --> 04:24:27,439
For the return statement I want to

6445
04:24:27,439 --> 04:24:30,960
return my admin layout my sidebar. This

6446
04:24:30,960 --> 04:24:33,359
means I can again open the explorer go

6447
04:24:33,359 --> 04:24:36,000
into the page.tsx and I will copy

6448
04:24:36,000 --> 04:24:38,239
everything in the return statement. I

6449
04:24:38,239 --> 04:24:40,319
can then paste it inside of here. And as

6450
04:24:40,319 --> 04:24:42,880
you see we get a few import errors. This

6451
04:24:42,880 --> 04:24:45,279
means I can go to the top and just copy

6452
04:24:45,279 --> 04:24:47,359
all of the import statements. I will

6453
04:24:47,359 --> 04:24:49,920
then paste it on the top and this should

6454
04:24:49,920 --> 04:24:52,000
be already it. Then I want to update my

6455
04:24:52,000 --> 04:24:54,720
page.tsx and I want to delete

6456
04:24:54,720 --> 04:24:56,399
everything. So I will just delete

6457
04:24:56,399 --> 04:24:58,399
everything and I will create a new

6458
04:24:58,399 --> 04:25:00,880
export default function. This will be

6459
04:25:00,880 --> 04:25:03,680
the admin index page. And then I will

6460
04:25:03,680 --> 04:25:05,279
open the function. Create a return

6461
04:25:05,279 --> 04:25:07,760
statement. Create a diff h1. And I want

6462
04:25:07,760 --> 04:25:11,920
to say hello from the admin index page.

6463
04:25:11,920 --> 04:25:14,080
If I save this and again go back and do

6464
04:25:14,080 --> 04:25:17,120
a hard refresh, you will see my admin

6465
04:25:17,120 --> 04:25:19,680
dashboard, my admin layout again. But

6466
04:25:19,680 --> 04:25:22,479
where is my courses H1? Well, here's the

6467
04:25:22,479 --> 04:25:24,479
thing. We want to render the children.

6468
04:25:24,479 --> 04:25:26,720
So, what I will do is copy the section

6469
04:25:26,720 --> 04:25:28,720
cards, this diff with the chart area

6470
04:25:28,720 --> 04:25:31,359
interactive and this data table. I will

6471
04:25:31,359 --> 04:25:33,520
copy all of that and instead I will

6472
04:25:33,520 --> 04:25:35,680
render the children right here. Then for

6473
04:25:35,680 --> 04:25:37,840
the page.tsx, TSX. Instead of rendering

6474
04:25:37,840 --> 04:25:40,880
this boring H1, I will paste what I just

6475
04:25:40,880 --> 04:25:43,040
copied. And also, I want to wrap

6476
04:25:43,040 --> 04:25:45,279
everything in empty tags. So, I will

6477
04:25:45,279 --> 04:25:47,199
create them quickly and paste what I

6478
04:25:47,199 --> 04:25:49,439
just copied. I will import the section

6479
04:25:49,439 --> 04:25:51,760
cards from the components. I will import

6480
04:25:51,760 --> 04:25:53,920
the chart area interactive from the

6481
04:25:53,920 --> 04:25:56,640
components and also the data table from

6482
04:25:56,640 --> 04:25:58,880
the components. Then I want to also get

6483
04:25:58,880 --> 04:26:01,600
my data. So, I can just copy this import

6484
04:26:01,600 --> 04:26:04,159
data statement or import path and I will

6485
04:26:04,159 --> 04:26:06,560
paste it right here. Then for my layout

6486
04:26:06,560 --> 04:26:08,960
as you see I get an error for my

6487
04:26:08,960 --> 04:26:11,439
children and it says cannot find named

6488
04:26:11,439 --> 04:26:13,359
children. That's because we want to get

6489
04:26:13,359 --> 04:26:16,080
our children through the params. So I

6490
04:26:16,080 --> 04:26:18,080
can destructure the params I want to get

6491
04:26:18,080 --> 04:26:20,640
children and I have to also pass a type

6492
04:26:20,640 --> 04:26:23,840
and children will be of type react note.

6493
04:26:23,840 --> 04:26:26,720
I can import react note from react and I

6494
04:26:26,720 --> 04:26:28,640
will also delete all of the unused

6495
04:26:28,640 --> 04:26:31,040
import statements. If I save this and

6496
04:26:31,040 --> 04:26:33,359
again go back then you will see hey how

6497
04:26:33,359 --> 04:26:35,680
are you? And if I go to the dashboard

6498
04:26:35,680 --> 04:26:38,319
itself, then you will see this index

6499
04:26:38,319 --> 04:26:40,159
page. All of the children again. This is

6500
04:26:40,159 --> 04:26:42,479
what we wanted. But if I go to the

6501
04:26:42,479 --> 04:26:45,520
courses, this H1 touches the sidebar

6502
04:26:45,520 --> 04:26:47,920
border. This is not quite what I want.

6503
04:26:47,920 --> 04:26:50,399
This means I can go back to the layout

6504
04:26:50,399 --> 04:26:53,199
and then this div wraps our children.

6505
04:26:53,199 --> 04:26:55,199
Currently, we give it a padding on the

6506
04:26:55,199 --> 04:26:58,000
yaxis. But we can also give it padding

6507
04:26:58,000 --> 04:27:01,600
on the xaxis. So after this padding y, I

6508
04:27:01,600 --> 04:27:04,640
want to say padding x of four. And on LG

6509
04:27:04,640 --> 04:27:07,040
devices or bigger, I want to give it

6510
04:27:07,040 --> 04:27:10,159
padding X of six. This means if I again

6511
04:27:10,159 --> 04:27:12,319
go back, this will already look way

6512
04:27:12,319 --> 04:27:14,720
better. We now have some spacing. And

6513
04:27:14,720 --> 04:27:17,520
that's exactly what I wanted. So as a

6514
04:27:17,520 --> 04:27:19,520
next step, I want to continue with the

6515
04:27:19,520 --> 04:27:21,920
courses route, which means we want to

6516
04:27:21,920 --> 04:27:23,840
display all of the courses. Then we want

6517
04:27:23,840 --> 04:27:27,040
to create courses, edit them, and do all

6518
04:27:27,040 --> 04:27:29,600
of the fancy stuff. So let's start with

6519
04:27:29,600 --> 04:27:32,319
the courses overview page. So as

6520
04:27:32,319 --> 04:27:34,640
mentioned this will be an overview page.

6521
04:27:34,640 --> 04:27:36,720
This means right here I will display all

6522
04:27:36,720 --> 04:27:39,439
of the created courses and then also on

6523
04:27:39,439 --> 04:27:41,439
the top left corner I want to render a

6524
04:27:41,439 --> 04:27:43,279
title and then on the right side a

6525
04:27:43,279 --> 04:27:45,520
button. Here I have created a little

6526
04:27:45,520 --> 04:27:47,760
diagram to showcase everything. As you

6527
04:27:47,760 --> 04:27:50,479
see I love diagrams. So this is our

6528
04:27:50,479 --> 04:27:52,800
sidebar. Then this is our main content.

6529
04:27:52,800 --> 04:27:54,880
Again here we have a title. then this

6530
04:27:54,880 --> 04:27:57,279
button and then I will create a grid

6531
04:27:57,279 --> 04:27:59,840
layout with two columns to then display

6532
04:27:59,840 --> 04:28:02,560
all of the created courses. This means

6533
04:28:02,560 --> 04:28:05,439
we can go back to our application to our

6534
04:28:05,439 --> 04:28:07,840
code not to our application and then I

6535
04:28:07,840 --> 04:28:10,080
want to first of all create this header

6536
04:28:10,080 --> 04:28:12,640
you could say. So um I want to delete

6537
04:28:12,640 --> 04:28:15,199
everything in the return statement and

6538
04:28:15,199 --> 04:28:17,520
let's start with empty tags inside of

6539
04:28:17,520 --> 04:28:19,680
here. We can create a div element and

6540
04:28:19,680 --> 04:28:21,760
then let's give it a class name. This

6541
04:28:21,760 --> 04:28:24,880
will be flex items center justify

6542
04:28:24,880 --> 04:28:26,800
between to align the children to the

6543
04:28:26,800 --> 04:28:28,880
most outer corner. This means the left

6544
04:28:28,880 --> 04:28:30,800
side and then the right side. And then

6545
04:28:30,800 --> 04:28:32,960
inside of here we want to display again

6546
04:28:32,960 --> 04:28:35,680
two things. First of all a title and

6547
04:28:35,680 --> 04:28:38,080
then a creation link or in other words

6548
04:28:38,080 --> 04:28:40,560
button. So let's create an H1. And

6549
04:28:40,560 --> 04:28:43,439
inside of here I will say your courses

6550
04:28:43,439 --> 04:28:45,760
and then I want to also style this H1

6551
04:28:45,760 --> 04:28:48,960
because as you see it's too small. So we

6552
04:28:48,960 --> 04:28:51,120
can give it a class name. And this will

6553
04:28:51,120 --> 04:28:53,760
be text to Excel. This means the text uh

6554
04:28:53,760 --> 04:28:56,000
the text size will be bigger. And then

6555
04:28:56,000 --> 04:28:58,080
font bold to give it a bigger font

6556
04:28:58,080 --> 04:29:00,800
weight. Then underneath the H1 I want to

6557
04:29:00,800 --> 04:29:03,680
get the link component from next /link.

6558
04:29:03,680 --> 04:29:06,239
And then inside of here uh we will say

6559
04:29:06,239 --> 04:29:10,640
create course create course. Then this

6560
04:29:10,640 --> 04:29:12,640
link also currently complains. That's

6561
04:29:12,640 --> 04:29:15,199
because it's missing an href. And the

6562
04:29:15,199 --> 04:29:19,680
href will be equal to slashadmin/courses

6563
04:29:19,680 --> 04:29:22,399
slashcreate. As you all know, I want to

6564
04:29:22,399 --> 04:29:24,640
style the link component exactly the

6565
04:29:24,640 --> 04:29:27,520
same as a shhat CN button. This means we

6566
04:29:27,520 --> 04:29:29,520
can give it a class name which will be

6567
04:29:29,520 --> 04:29:31,439
equal to button variance which is

6568
04:29:31,439 --> 04:29:33,680
imported from the components. This

6569
04:29:33,680 --> 04:29:35,520
already looks way better. And then

6570
04:29:35,520 --> 04:29:37,199
underneath this header, I want to

6571
04:29:37,199 --> 04:29:39,600
display all of the courses. This means

6572
04:29:39,600 --> 04:29:41,520
we can go underneath this div, but I

6573
04:29:41,520 --> 04:29:43,920
want to stay in these empty tags. And

6574
04:29:43,920 --> 04:29:46,720
then I will create a div h1. And inside

6575
04:29:46,720 --> 04:29:51,600
of here we can say uh here you will see

6576
04:29:51,600 --> 04:29:55,279
all of the courses. Yeah, this looks

6577
04:29:55,279 --> 04:29:57,840
quite good. So before I can even display

6578
04:29:57,840 --> 04:30:00,080
any courses, we have to first of all

6579
04:30:00,080 --> 04:30:02,640
create them. And to create courses, we

6580
04:30:02,640 --> 04:30:05,040
have to store them in our database. So

6581
04:30:05,040 --> 04:30:07,040
here's the thing. If I currently open my

6582
04:30:07,040 --> 04:30:10,319
schema, I only have models tables for

6583
04:30:10,319 --> 04:30:12,720
the user itself or for the offend for

6584
04:30:12,720 --> 04:30:14,640
better off. But there's no model.

6585
04:30:14,640 --> 04:30:16,880
There's no table for our course. This

6586
04:30:16,880 --> 04:30:19,120
means we want to create a new one. And I

6587
04:30:19,120 --> 04:30:20,960
want to give you a little introduction

6588
04:30:20,960 --> 04:30:23,359
to Prisma itself because I haven't

6589
04:30:23,359 --> 04:30:26,000
really explained things yet. So Prisma

6590
04:30:26,000 --> 04:30:28,319
is an ORM as we all know a TypeScript

6591
04:30:28,319 --> 04:30:31,439
ORM and we define tables in the schema

6592
04:30:31,439 --> 04:30:34,080
file. Prisma calls them models, but in

6593
04:30:34,080 --> 04:30:36,159
database terms, it would be called a

6594
04:30:36,159 --> 04:30:39,040
table. Here's the thing. Prisma has its

6595
04:30:39,040 --> 04:30:41,680
own language, its own DSL, domain

6596
04:30:41,680 --> 04:30:44,239
specific language. This means this code

6597
04:30:44,239 --> 04:30:47,600
isn't TypeScript. It isn't Rust or PHP

6598
04:30:47,600 --> 04:30:49,920
or anything like that. It's its own

6599
04:30:49,920 --> 04:30:52,080
programming language. Again, its own

6600
04:30:52,080 --> 04:30:55,920
DSL. This means, yeah, you have to learn

6601
04:30:55,920 --> 04:30:57,600
a new language, but as you see, it's

6602
04:30:57,600 --> 04:31:00,399
very simple. Model verification. This is

6603
04:31:00,399 --> 04:31:02,640
our table. And then we define all of our

6604
04:31:02,640 --> 04:31:04,960
columns and we append all of the types

6605
04:31:04,960 --> 04:31:08,000
string daytime for example int and stuff

6606
04:31:08,000 --> 04:31:10,159
like that. So it's very easy to

6607
04:31:10,159 --> 04:31:12,880
understand. Also you see I have syntax

6608
04:31:12,880 --> 04:31:14,560
highlighting right here and I have also

6609
04:31:14,560 --> 04:31:16,479
autocomp completion. To get the same

6610
04:31:16,479 --> 04:31:18,800
thing you want to go to your extensions

6611
04:31:18,800 --> 04:31:20,720
and in the extensions you want to search

6612
04:31:20,720 --> 04:31:22,720
for Prisma. Please check that you have

6613
04:31:22,720 --> 04:31:25,120
Prisma installed the extension because

6614
04:31:25,120 --> 04:31:26,960
it will add syntax highlighting,

6615
04:31:26,960 --> 04:31:29,359
formatting, autocomp completion and much

6616
04:31:29,359 --> 04:31:31,920
more. So it's definitely a must-have if

6617
04:31:31,920 --> 04:31:34,239
you work with Prisma and that's exactly

6618
04:31:34,239 --> 04:31:36,560
what we do. So I want to create a new

6619
04:31:36,560 --> 04:31:38,960
model, a new table and from now on I

6620
04:31:38,960 --> 04:31:41,120
will just say model but again the real

6621
04:31:41,120 --> 04:31:44,239
database term is table. So I will scroll

6622
04:31:44,239 --> 04:31:46,479
underneath this model verification and

6623
04:31:46,479 --> 04:31:48,800
then we will create a new model course.

6624
04:31:48,800 --> 04:31:51,040
Then we can open it and inside of here

6625
04:31:51,040 --> 04:31:53,359
we will define all of the columns. So

6626
04:31:53,359 --> 04:31:55,040
first of all since we work with a

6627
04:31:55,040 --> 04:31:57,520
relational database it we have to also

6628
04:31:57,520 --> 04:32:00,239
provide a unique identifier. This means

6629
04:32:00,239 --> 04:32:04,080
a primary key. So in this case an ID is

6630
04:32:04,080 --> 04:32:05,840
what we want to create. This will be of

6631
04:32:05,840 --> 04:32:09,920
type string at id default uyu ID. This

6632
04:32:09,920 --> 04:32:12,239
means whenever a new row is generated

6633
04:32:12,239 --> 04:32:14,880
Prisma will also generate a new unique

6634
04:32:14,880 --> 04:32:17,439
ID and then this will be our primary

6635
04:32:17,439 --> 04:32:20,159
key. Then what will our courses have?

6636
04:32:20,159 --> 04:32:22,159
Well, they will for example have a

6637
04:32:22,159 --> 04:32:25,680
title, a description, an image, a price,

6638
04:32:25,680 --> 04:32:28,080
a duration and stuff like that. So,

6639
04:32:28,080 --> 04:32:30,000
first of all, I want to provide a title.

6640
04:32:30,000 --> 04:32:32,080
This will be of type string. Then a

6641
04:32:32,080 --> 04:32:34,319
description which will be also of type

6642
04:32:34,319 --> 04:32:37,359
string. Then a file key which will be of

6643
04:32:37,359 --> 04:32:39,520
type string. What is the file key? So

6644
04:32:39,520 --> 04:32:41,120
here's the thing. Later on we will

6645
04:32:41,120 --> 04:32:44,960
upload files to S3. S3 will return the

6646
04:32:44,960 --> 04:32:47,120
key and we will store the key in our

6647
04:32:47,120 --> 04:32:49,760
file key later on. Then when uh once we

6648
04:32:49,760 --> 04:32:51,680
want to render the image, we will just

6649
04:32:51,680 --> 04:32:54,640
construct a new URL using this key which

6650
04:32:54,640 --> 04:32:57,760
we store in our table or yeah in the row

6651
04:32:57,760 --> 04:33:00,479
itself. Then I want to also get a price.

6652
04:33:00,479 --> 04:33:03,439
This will be an integer, a number. Then

6653
04:33:03,439 --> 04:33:06,000
also a duration. This will be also an

6654
04:33:06,000 --> 04:33:08,799
integer. Then a level. And here's the

6655
04:33:08,799 --> 04:33:11,439
thing. We will only have three levels.

6656
04:33:11,439 --> 04:33:14,000
Beginner, intermediate, advanced. This

6657
04:33:14,000 --> 04:33:15,840
means what type would work right here?

6658
04:33:15,840 --> 04:33:17,840
Well, we could just say type string.

6659
04:33:17,840 --> 04:33:20,000
That's fine. But this is not type safe.

6660
04:33:20,000 --> 04:33:22,561
I want to have type safety also on the

6661
04:33:22,561 --> 04:33:24,561
type uh database level. This means we

6662
04:33:24,561 --> 04:33:26,799
can create an enum and this will be

6663
04:33:26,799 --> 04:33:29,520
called course level. I can open it and

6664
04:33:29,520 --> 04:33:32,320
our three states will be beginner then

6665
04:33:32,320 --> 04:33:34,639
or I don't have to add a comma. Then

6666
04:33:34,639 --> 04:33:37,920
intermediate and also at advanced and

6667
04:33:37,920 --> 04:33:39,600
yes I misspelled this. Don't worry I

6668
04:33:39,600 --> 04:33:41,600
will fix it in a second. But these are

6669
04:33:41,600 --> 04:33:44,240
our three states. And then level will be

6670
04:33:44,240 --> 04:33:47,199
equal to course level. So I can only

6671
04:33:47,199 --> 04:33:49,600
provide these or one of these three

6672
04:33:49,600 --> 04:33:52,240
values for the level. And we could also

6673
04:33:52,240 --> 04:33:54,320
for example add a default and that's

6674
04:33:54,320 --> 04:33:56,400
what I will do. So what could a default

6675
04:33:56,400 --> 04:33:58,879
be? Well, let's say a beginner. So add

6676
04:33:58,879 --> 04:34:00,959
default beginner. You don't have to do

6677
04:34:00,959 --> 04:34:02,719
that. We can also leave it without a

6678
04:34:02,719 --> 04:34:04,480
default. That's fine. So the level is

6679
04:34:04,480 --> 04:34:06,160
finished. What else will our course

6680
04:34:06,160 --> 04:34:08,561
have? Well, for example, a category.

6681
04:34:08,561 --> 04:34:10,320
This will be of type swing. This means

6682
04:34:10,320 --> 04:34:13,439
for example development or cooking or

6683
04:34:13,439 --> 04:34:15,920
stuff like that. Then also a small

6684
04:34:15,920 --> 04:34:18,000
description because here's the thing we

6685
04:34:18,000 --> 04:34:20,480
will later on create two descriptions. A

6686
04:34:20,480 --> 04:34:22,240
small description which will be rendered

6687
04:34:22,240 --> 04:34:24,799
for the course card. So if I go back to

6688
04:34:24,799 --> 04:34:27,359
the diagram for example here we have

6689
04:34:27,359 --> 04:34:29,520
here we will have a small description

6690
04:34:29,520 --> 04:34:31,680
which will be rendered in this overview

6691
04:34:31,680 --> 04:34:33,680
course card. But then I want to also

6692
04:34:33,680 --> 04:34:36,000
create a big description and this big

6693
04:34:36,000 --> 04:34:38,000
description will be created with a rich

6694
04:34:38,000 --> 04:34:40,480
text editor. And since we will then

6695
04:34:40,480 --> 04:34:42,879
later on store it in JSON transform it

6696
04:34:42,879 --> 04:34:44,959
into a string. Yeah, complicated. Who

6697
04:34:44,959 --> 04:34:47,119
cares? It will just be easier to have

6698
04:34:47,119 --> 04:34:49,359
two descriptions. One small description

6699
04:34:49,359 --> 04:34:51,359
which is easily rendered here and then

6700
04:34:51,359 --> 04:34:53,359
one big description which we will have

6701
04:34:53,359 --> 04:34:56,160
to transform into JSON and then do a lot

6702
04:34:56,160 --> 04:34:59,119
of fancy stuff. So small description

6703
04:34:59,119 --> 04:35:01,119
this will be of type string. Then I want

6704
04:35:01,119 --> 04:35:03,279
to also get a slug because I want to

6705
04:35:03,279 --> 04:35:05,439
then later on display the course using

6706
04:35:05,439 --> 04:35:07,840
the sluck and not an ID. This is always

6707
04:35:07,840 --> 04:35:10,240
better for SEO. This will be of type

6708
04:35:10,240 --> 04:35:12,320
string and add unique because you don't

6709
04:35:12,320 --> 04:35:14,959
want to have duplicates uh slugs. They

6710
04:35:14,959 --> 04:35:17,520
have to be unique pretty much like ids.

6711
04:35:17,520 --> 04:35:19,920
Then I want to also create timestamps.

6712
04:35:19,920 --> 04:35:22,160
This means first of all a created at

6713
04:35:22,160 --> 04:35:24,000
time stamp. This will be of type date

6714
04:35:24,000 --> 04:35:26,639
time and then at default now. So

6715
04:35:26,639 --> 04:35:28,959
whenever we generate a new row a new

6716
04:35:28,959 --> 04:35:31,279
timestamp will be generated. And then

6717
04:35:31,279 --> 04:35:33,439
also I want to get the updated at time

6718
04:35:33,439 --> 04:35:35,359
stamp. This will be of type date time.

6719
04:35:35,359 --> 04:35:37,520
and then add updated at. This means

6720
04:35:37,520 --> 04:35:40,400
whenever the row is updated, the updated

6721
04:35:40,400 --> 04:35:43,279
at time stamp will be also updated. Then

6722
04:35:43,279 --> 04:35:45,439
I want you also create a status. I will

6723
04:35:45,439 --> 04:35:47,199
create it above the created at and

6724
04:35:47,199 --> 04:35:49,840
updated at. And we will have three

6725
04:35:49,840 --> 04:35:52,000
statuses and this will be draft,

6726
04:35:52,000 --> 04:35:54,320
published and archived. This means we

6727
04:35:54,320 --> 04:35:56,879
can again create a new enum. So enum

6728
04:35:56,879 --> 04:36:00,240
this will be course status and I will

6729
04:36:00,240 --> 04:36:02,719
have three states. First of all draft

6730
04:36:02,719 --> 04:36:05,760
then published and then also archived.

6731
04:36:05,760 --> 04:36:07,600
Then for the status this will be equal

6732
04:36:07,600 --> 04:36:10,160
to the course status enum. And I can

6733
04:36:10,160 --> 04:36:13,039
again add a at default and this will be

6734
04:36:13,039 --> 04:36:15,680
draft because a course as a default will

6735
04:36:15,680 --> 04:36:17,920
always be a draft. Uh a user will have

6736
04:36:17,920 --> 04:36:20,400
to first of all publish it to uh for it

6737
04:36:20,400 --> 04:36:22,400
to be published. Then is there anything

6738
04:36:22,400 --> 04:36:24,240
else? Well, we can also create a

6739
04:36:24,240 --> 04:36:26,719
relation. So here's the thing. We have a

6740
04:36:26,719 --> 04:36:29,199
user table right here. model user and

6741
04:36:29,199 --> 04:36:31,760
then we have a course table right here.

6742
04:36:31,760 --> 04:36:34,080
I want to create a relationship. So what

6743
04:36:34,080 --> 04:36:35,840
relationship do we want to create?

6744
04:36:35,840 --> 04:36:38,080
Either a onetoone relationship or a one

6745
04:36:38,080 --> 04:36:40,639
to many relationship or maybe a many to

6746
04:36:40,639 --> 04:36:42,799
many relationship. What would make sense

6747
04:36:42,799 --> 04:36:44,719
right here? Well, a one to many

6748
04:36:44,719 --> 04:36:47,039
relationship would make a lot of sense.

6749
04:36:47,039 --> 04:36:49,920
One user can create multiple courses.

6750
04:36:49,920 --> 04:36:52,799
Each course is related to one user, to

6751
04:36:52,799 --> 04:36:55,119
one creator in this case. Creating

6752
04:36:55,119 --> 04:36:57,920
relations with Prisma is super easy. You

6753
04:36:57,920 --> 04:37:00,000
want to go to the user model. Then we

6754
04:37:00,000 --> 04:37:02,400
can go underneath this accounts and here

6755
04:37:02,400 --> 04:37:05,199
I want to get my courses and this will

6756
04:37:05,199 --> 04:37:07,520
be equal to the type course and I want

6757
04:37:07,520 --> 04:37:10,000
to append an array symbol. This means we

6758
04:37:10,000 --> 04:37:12,639
will create a one to many relationship

6759
04:37:12,639 --> 04:37:15,920
one user many courses and if I click on

6760
04:37:15,920 --> 04:37:18,719
command save it will also autogenerate

6761
04:37:18,719 --> 04:37:20,879
this relationship. So in the model

6762
04:37:20,879 --> 04:37:23,600
course we now have a user and also a

6763
04:37:23,600 --> 04:37:25,920
user id which is of type string and here

6764
04:37:25,920 --> 04:37:28,080
we have the relation to the user. So

6765
04:37:28,080 --> 04:37:31,199
this worked exactly as expected and

6766
04:37:31,199 --> 04:37:33,760
wanted also for the user I can add an

6767
04:37:33,760 --> 04:37:36,639
ondee property and this will be equal to

6768
04:37:36,639 --> 04:37:38,959
cascade. This means if I for example

6769
04:37:38,959 --> 04:37:41,520
delete a user then this course will also

6770
04:37:41,520 --> 04:37:43,920
be automatically deleted. Of course, I

6771
04:37:43,920 --> 04:37:46,000
won't delete a user, but just in

6772
04:37:46,000 --> 04:37:48,400
general, this is a good best practice or

6773
04:37:48,400 --> 04:37:51,199
a good practice to add these ondelete

6774
04:37:51,199 --> 04:37:53,520
properties. So, I think this is already

6775
04:37:53,520 --> 04:37:55,039
it. Is there anything that I would want

6776
04:37:55,039 --> 04:37:57,439
to update? Maybe. Yeah, I want to a

6777
04:37:57,439 --> 04:38:00,080
lower case user user ID is fine. And

6778
04:38:00,080 --> 04:38:02,480
currently, these fields are optional

6779
04:38:02,480 --> 04:38:04,799
where uh as you see question marks, I

6780
04:38:04,799 --> 04:38:06,480
will delete this question mark. It won't

6781
04:38:06,480 --> 04:38:08,719
be optional. And yeah, our relation is

6782
04:38:08,719 --> 04:38:10,561
finished. Our course is finished. And

6783
04:38:10,561 --> 04:38:12,639
then we can sync our database with this

6784
04:38:12,639 --> 04:38:14,719
Prisma schema. So I will open my

6785
04:38:14,719 --> 04:38:16,799
terminal and inside of here I can run

6786
04:38:16,799 --> 04:38:20,400
PNPM dlx Prisma DB push. This will sync

6787
04:38:20,400 --> 04:38:23,439
our local Prisma schema with our remote

6788
04:38:23,439 --> 04:38:26,080
database. In this case Neon. I can also

6789
04:38:26,080 --> 04:38:27,920
head over to the Neon console. So

6790
04:38:27,920 --> 04:38:30,799
neon.te. And as you see if I go to the

6791
04:38:30,799 --> 04:38:32,719
tables we should have a new course

6792
04:38:32,719 --> 04:38:34,719
table. And this is empty but that's

6793
04:38:34,719 --> 04:38:36,879
fine. And then we can continue. I can

6794
04:38:36,879 --> 04:38:38,400
close the terminal. I don't need it

6795
04:38:38,400 --> 04:38:40,879
anymore. And then I want to allow users

6796
04:38:40,879 --> 04:38:43,840
in this case myself to create courses.

6797
04:38:43,840 --> 04:38:45,840
This means we want to open the explorer.

6798
04:38:45,840 --> 04:38:48,160
Then we want to go to the app folder to

6799
04:38:48,160 --> 04:38:50,959
the um admin folder to the courses uh

6800
04:38:50,959 --> 04:38:52,879
folder. And inside of here I want to

6801
04:38:52,879 --> 04:38:55,439
create a new route a create route. This

6802
04:38:55,439 --> 04:38:57,439
means a child folder. That's what we

6803
04:38:57,439 --> 04:38:59,520
want to create. And it will be called

6804
04:38:59,520 --> 04:39:02,480
create. Wow. Create create. Then in the

6805
04:39:02,480 --> 04:39:05,039
create folder let's create a page.tsx.

6806
04:39:05,039 --> 04:39:06,799
And inside of here, I want to create an

6807
04:39:06,799 --> 04:39:09,359
export default function. This will be

6808
04:39:09,359 --> 04:39:11,920
called course creation route or course

6809
04:39:11,920 --> 04:39:15,480
creation page.

6810
04:39:15,840 --> 04:39:18,000
And then we can just open it. Inside of

6811
04:39:18,000 --> 04:39:19,680
here, we can create a return statement

6812
04:39:19,680 --> 04:39:23,039
with a diff h1 and then hey, how are

6813
04:39:23,039 --> 04:39:25,680
you? If I save this and again go back,

6814
04:39:25,680 --> 04:39:27,600
then uh you will see that nothing

6815
04:39:27,600 --> 04:39:30,400
changes. But as you see, my site does

6816
04:39:30,400 --> 04:39:32,160
not work. That's because I want to

6817
04:39:32,160 --> 04:39:35,359
restart my deaf server with PNPM rundev.

6818
04:39:35,359 --> 04:39:37,600
And if we again go back and do a hard

6819
04:39:37,600 --> 04:39:40,080
refresh and click on create course, I

6820
04:39:40,080 --> 04:39:42,240
will get redirected and it says hey how

6821
04:39:42,240 --> 04:39:44,400
are you? But instead of rendering hey

6822
04:39:44,400 --> 04:39:46,798
how are you? I want to create a real

6823
04:39:46,798 --> 04:39:49,280
form a nice looking form so that the

6824
04:39:49,280 --> 04:39:51,600
user again in this case myself can

6825
04:39:51,600 --> 04:39:54,400
create a new course. So let's again go

6826
04:39:54,400 --> 04:39:56,718
back and let's start off fresh. I will

6827
04:39:56,718 --> 04:39:58,240
delete everything in the return

6828
04:39:58,240 --> 04:40:00,638
statement and I want to get started with

6829
04:40:00,638 --> 04:40:02,958
a cart or first of all on the top left

6830
04:40:02,958 --> 04:40:04,958
corner I want to render a link which

6831
04:40:04,958 --> 04:40:07,120
will say go back and then underneath

6832
04:40:07,120 --> 04:40:09,440
this link I will create my card and then

6833
04:40:09,440 --> 04:40:12,320
my form so um let's get started with

6834
04:40:12,320 --> 04:40:15,040
empty tags inside of here I want to uh

6835
04:40:15,040 --> 04:40:17,360
return a div then in the div I want to

6836
04:40:17,360 --> 04:40:19,920
get a link or the link component from

6837
04:40:19,920 --> 04:40:22,878
next/link as you all know the link needs

6838
04:40:22,878 --> 04:40:25,440
one property which is the href and this

6839
04:40:25,440 --> 04:40:28,798
will be equal equal to /admin/courses

6840
04:40:28,798 --> 04:40:31,040
because if the user clicks on this link

6841
04:40:31,040 --> 04:40:33,120
I will redirect the user back to the

6842
04:40:33,120 --> 04:40:35,600
admin courses page. Then inside of here

6843
04:40:35,600 --> 04:40:37,920
I want to just render an icon which will

6844
04:40:37,920 --> 04:40:40,240
be the arrow left icon imported from

6845
04:40:40,240 --> 04:40:43,120
lucid react. Also we can give it a class

6846
04:40:43,120 --> 04:40:45,760
name which will be size four width four

6847
04:40:45,760 --> 04:40:48,080
and height four. Of course this link

6848
04:40:48,080 --> 04:40:50,638
should be styled exactly the same as a

6849
04:40:50,638 --> 04:40:53,200
sh CN button. This means we can give it

6850
04:40:53,200 --> 04:40:55,280
a class name which will be equal to

6851
04:40:55,280 --> 04:40:57,600
button variance. Button variance is

6852
04:40:57,600 --> 04:40:59,440
imported from the components. We can

6853
04:40:59,440 --> 04:41:02,160
invoke it and I want to also give it two

6854
04:41:02,160 --> 04:41:04,718
properties. This means I can structured

6855
04:41:04,718 --> 04:41:06,718
and for the variant this will be equal

6856
04:41:06,718 --> 04:41:09,120
to outline. And then for the size this

6857
04:41:09,120 --> 04:41:11,840
will be equal to icon because this is

6858
04:41:11,840 --> 04:41:14,480
the size of icon. And if you for example

6859
04:41:14,480 --> 04:41:16,878
open the button component itself then

6860
04:41:16,878 --> 04:41:20,480
you will find the size object default SM

6861
04:41:20,480 --> 04:41:22,958
LG and icon. These are all of the

6862
04:41:22,958 --> 04:41:25,600
varants and in this case we are using

6863
04:41:25,600 --> 04:41:28,000
the icon size which means it's very

6864
04:41:28,000 --> 04:41:31,040
simple. It's just size 9 width 9 and

6865
04:41:31,040 --> 04:41:34,080
height 9 nothing else. So I can again

6866
04:41:34,080 --> 04:41:36,560
close this we are finished I think

6867
04:41:36,560 --> 04:41:38,560
because if I again go back yeah this

6868
04:41:38,560 --> 04:41:40,638
looks beautiful. Next to the link I want

6869
04:41:40,638 --> 04:41:43,600
to render an H1. So I will go underneath

6870
04:41:43,600 --> 04:41:45,680
the link and inside of here I want to

6871
04:41:45,680 --> 04:41:48,480
say create courses. Of course we want to

6872
04:41:48,480 --> 04:41:50,878
style this H1. So let's give it a class

6873
04:41:50,878 --> 04:41:53,360
name and this will be text to Excel and

6874
04:41:53,360 --> 04:41:56,080
then font bold. As you see this looks

6875
04:41:56,080 --> 04:41:58,400
quite nice but this is not aligned

6876
04:41:58,400 --> 04:42:00,638
correctly. Currently this is aligned as

6877
04:42:00,638 --> 04:42:02,798
flex column but this should be aligned

6878
04:42:02,798 --> 04:42:05,520
as flex row. This means horizontally. So

6879
04:42:05,520 --> 04:42:08,160
for this div which wraps the link and H1

6880
04:42:08,160 --> 04:42:10,160
we can give it a class name and this

6881
04:42:10,160 --> 04:42:12,638
will be flex items which will be center

6882
04:42:12,638 --> 04:42:15,200
and gap four. As you see this already

6883
04:42:15,200 --> 04:42:17,760
looks way better. Then underneath this

6884
04:42:17,760 --> 04:42:19,360
header, if you want to call it like

6885
04:42:19,360 --> 04:42:21,440
that, I want to get started with the

6886
04:42:21,440 --> 04:42:23,760
form. This means I want to stay in the

6887
04:42:23,760 --> 04:42:25,760
empty tags, but I want to go underneath

6888
04:42:25,760 --> 04:42:27,760
the div and then I want to get the card

6889
04:42:27,760 --> 04:42:30,000
component from the components. Then

6890
04:42:30,000 --> 04:42:32,000
let's also get the card header from the

6891
04:42:32,000 --> 04:42:34,320
components and in the cart header I will

6892
04:42:34,320 --> 04:42:36,718
get the card title. In the card title,

6893
04:42:36,718 --> 04:42:40,320
uh we will render basic information. H

6894
04:42:40,320 --> 04:42:42,560
very nice. And as you see, yeah, this

6895
04:42:42,560 --> 04:42:44,798
looks quite good. If I zoom out a bit,

6896
04:42:44,798 --> 04:42:47,200
nothing changes. And that's great. Then

6897
04:42:47,200 --> 04:42:49,120
underneath the card title, let's also

6898
04:42:49,120 --> 04:42:51,280
get the card description. And for the

6899
04:42:51,280 --> 04:42:54,000
card description, I will say provide

6900
04:42:54,000 --> 04:42:57,840
basic information about the course. Then

6901
04:42:57,840 --> 04:42:59,680
underneath the card header, I want to

6902
04:42:59,680 --> 04:43:01,840
get started with the card content. And

6903
04:43:01,840 --> 04:43:04,400
in the cart content, we will render our

6904
04:43:04,400 --> 04:43:07,440
big nice form. So here's the thing. I

6905
04:43:07,440 --> 04:43:08,878
want to implement client side

6906
04:43:08,878 --> 04:43:11,120
validation. Client side validation means

6907
04:43:11,120 --> 04:43:13,440
if a user clicks on submit without

6908
04:43:13,440 --> 04:43:15,760
filling out all of the info, we will

6909
04:43:15,760 --> 04:43:18,320
throw errors and it will say uh this

6910
04:43:18,320 --> 04:43:20,240
input is not filled out or it's not

6911
04:43:20,240 --> 04:43:22,240
filled out correctly. This is client

6912
04:43:22,240 --> 04:43:24,480
side validation. Now there are a lot of

6913
04:43:24,480 --> 04:43:25,920
ways to implement client side

6914
04:43:25,920 --> 04:43:28,160
validation. Again there are easy ways,

6915
04:43:28,160 --> 04:43:30,638
good ways, bad ways, hard ways, a lot of

6916
04:43:30,638 --> 04:43:32,638
ways to implement client side validation

6917
04:43:32,638 --> 04:43:34,878
or others in other words form

6918
04:43:34,878 --> 04:43:37,840
validation. So I created a very nice

6919
04:43:37,840 --> 04:43:40,798
video on form validation. So I have to

6920
04:43:40,798 --> 04:43:42,958
find it myself right here. The best way

6921
04:43:42,958 --> 04:43:46,000
to handle form validation in X.js. And

6922
04:43:46,000 --> 04:43:48,080
this is literally the best way. And the

6923
04:43:48,080 --> 04:43:50,480
best way is to use React Hook Form. And

6924
04:43:50,480 --> 04:43:53,040
React Hook Form allows you to create

6925
04:43:53,040 --> 04:43:55,840
performant, flexible and extensible

6926
04:43:55,840 --> 04:43:58,638
forms with easy to use validation. And

6927
04:43:58,638 --> 04:44:00,958
since it uses sort in the background or

6928
04:44:00,958 --> 04:44:02,480
since we will use sort in the

6929
04:44:02,480 --> 04:44:04,798
background, it will also allow us to

6930
04:44:04,798 --> 04:44:07,200
implement serverside validation. And

6931
04:44:07,200 --> 04:44:09,200
here's the thing, implementing react

6932
04:44:09,200 --> 04:44:11,200
hook form is quite easy, but we want to

6933
04:44:11,200 --> 04:44:14,000
combine it with shad and UI. And doing

6934
04:44:14,000 --> 04:44:16,798
it natively is quite annoying, but

6935
04:44:16,798 --> 04:44:20,320
thankfully shadi has our back since it

6936
04:44:20,320 --> 04:44:23,120
has a react hook form component. So it

6937
04:44:23,120 --> 04:44:25,760
allows us to build forms with react hook

6938
04:44:25,760 --> 04:44:28,080
form and sort. So what exactly is this

6939
04:44:28,080 --> 04:44:30,400
form component? Or in other words, why

6940
04:44:30,400 --> 04:44:32,480
do we need it? Well, forms are tricky.

6941
04:44:32,480 --> 04:44:34,638
Yes, they are really tricky and they are

6942
04:44:34,638 --> 04:44:36,638
also one of the most common things you

6943
04:44:36,638 --> 04:44:38,958
will build in a web application. And

6944
04:44:38,958 --> 04:44:41,360
well-designed forms are well structured,

6945
04:44:41,360 --> 04:44:44,080
easy to use and navigate, accessible,

6946
04:44:44,080 --> 04:44:46,000
and they have support for client and

6947
04:44:46,000 --> 04:44:48,320
serverside validation. And what exactly

6948
04:44:48,320 --> 04:44:50,638
does the form component give us? Well,

6949
04:44:50,638 --> 04:44:52,878
the form component is a wrapper around

6950
04:44:52,878 --> 04:44:55,200
the React hook form library. And it

6951
04:44:55,200 --> 04:44:57,200
provides a few things. First of all,

6952
04:44:57,200 --> 04:44:59,120
composible components for building

6953
04:44:59,120 --> 04:45:01,920
forms. A form field component for

6954
04:45:01,920 --> 04:45:04,480
building controlled form fields. It uses

6955
04:45:04,480 --> 04:45:06,878
sort for form validation. It handles

6956
04:45:06,878 --> 04:45:09,520
accessibility and error messages. This

6957
04:45:09,520 --> 04:45:11,360
means we don't have to create this

6958
04:45:11,360 --> 04:45:14,000
turnary to render the error messages. No

6959
04:45:14,000 --> 04:45:16,798
shy and UI does everything for us. It

6960
04:45:16,798 --> 04:45:19,920
uses React use ID for generating unique

6961
04:45:19,920 --> 04:45:22,160
IDs. It applies the correct area

6962
04:45:22,160 --> 04:45:24,320
attributes and a lot of other cool

6963
04:45:24,320 --> 04:45:27,120
stuff. So in general, it's just a easy

6964
04:45:27,120 --> 04:45:29,920
to use wrapper around Zot and React took

6965
04:45:29,920 --> 04:45:32,480
form and it's great for form validation.

6966
04:45:32,480 --> 04:45:34,638
So the first step is to create a form

6967
04:45:34,638 --> 04:45:37,360
schema with Zord. Again you can also use

6968
04:45:37,360 --> 04:45:40,080
a different validation library but Z is

6969
04:45:40,080 --> 04:45:42,958
in most cases or pretty much a industry

6970
04:45:42,958 --> 04:45:45,360
standard. So again with Zord we will

6971
04:45:45,360 --> 04:45:48,160
create rules. Then we will take our form

6972
04:45:48,160 --> 04:45:50,718
data and validate it with the sort

6973
04:45:50,718 --> 04:45:53,600
schema. If the validation is okay, if

6974
04:45:53,600 --> 04:45:55,840
everything works out, then we won't

6975
04:45:55,840 --> 04:45:58,160
throw any errors. But if for example,

6976
04:45:58,160 --> 04:45:59,920
right here we have a username. If the

6977
04:45:59,920 --> 04:46:02,000
username or if the form data which we

6978
04:46:02,000 --> 04:46:04,080
provide does not have a username, then

6979
04:46:04,080 --> 04:46:06,400
we will throw an error. If the username

6980
04:46:06,400 --> 04:46:08,798
has length which is bigger than 50, we

6981
04:46:08,798 --> 04:46:10,878
will throw an error. So we want to first

6982
04:46:10,878 --> 04:46:13,360
of all create a z schema. This means I

6983
04:46:13,360 --> 04:46:15,440
want to open my codebase and I want to

6984
04:46:15,440 --> 04:46:17,680
go into the lip folder and here I will

6985
04:46:17,680 --> 04:46:20,400
create the zot schema itself. So we want

6986
04:46:20,400 --> 04:46:23,760
to create a zot schemas.ts file because

6987
04:46:23,760 --> 04:46:26,718
we will create multiple z schemas. So

6988
04:46:26,718 --> 04:46:28,480
let's start with the course schema

6989
04:46:28,480 --> 04:46:31,200
itself. So I want to create an export

6990
04:46:31,200 --> 04:46:33,600
constant. This will be called course

6991
04:46:33,600 --> 04:46:35,520
schema and this will be equal to

6992
04:46:35,520 --> 04:46:37,120
z.object.

6993
04:46:37,120 --> 04:46:40,240
As you see z is not imported. So on top

6994
04:46:40,240 --> 04:46:42,400
I want to say import. Then we can

6995
04:46:42,400 --> 04:46:44,400
destructure it and this will be from

6996
04:46:44,400 --> 04:46:47,360
zot. Then where I destruct I want to get

6997
04:46:47,360 --> 04:46:51,280
z or not z but z itself. So z do.object

6998
04:46:51,280 --> 04:46:53,520
and then I can destructure and inside of

6999
04:46:53,520 --> 04:46:56,080
here I want to provide all of my fields.

7000
04:46:56,080 --> 04:46:58,718
So what we can do is open our schema

7001
04:46:58,718 --> 04:47:00,718
again and we can put it right here to

7002
04:47:00,718 --> 04:47:03,040
the left side. Then what fields do we

7003
04:47:03,040 --> 04:47:05,040
have? We have an ID but I don't need it

7004
04:47:05,040 --> 04:47:07,520
for my form. Then we have a title. I

7005
04:47:07,520 --> 04:47:09,600
will copy the title and paste it right

7006
04:47:09,600 --> 04:47:12,638
here. This title will be equal to Z dot

7007
04:47:12,638 --> 04:47:15,040
string. I can invoke it and I want to

7008
04:47:15,040 --> 04:47:17,440
also implement further validation. This

7009
04:47:17,440 --> 04:47:19,760
means dot minimum will be three a

7010
04:47:19,760 --> 04:47:22,400
minimum three characters and then also

7011
04:47:22,400 --> 04:47:24,958
dot maximum and in this case a maximum

7012
04:47:24,958 --> 04:47:28,080
of 100 characters. So the title has to

7013
04:47:28,080 --> 04:47:30,718
be defined. It has to be a string and it

7014
04:47:30,718 --> 04:47:33,040
has to have a few characters but it

7015
04:47:33,040 --> 04:47:35,280
shouldn't be too big. That's why we have

7016
04:47:35,280 --> 04:47:38,000
this maximum. Then we also have a

7017
04:47:38,000 --> 04:47:40,560
description. I can copy it, paste it and

7018
04:47:40,560 --> 04:47:43,200
this will be equal to Z dot string and

7019
04:47:43,200 --> 04:47:45,280
then again further validation with dot

7020
04:47:45,280 --> 04:47:47,920
min and this will be three. So a minimum

7021
04:47:47,920 --> 04:47:50,240
character length of three. I won't give

7022
04:47:50,240 --> 04:47:52,480
it a maximum. I don't need it. But if

7023
04:47:52,480 --> 04:47:54,718
you want to you could for example add a

7024
04:47:54,718 --> 04:47:58,480
maximum of 2,500 characters. I think

7025
04:47:58,480 --> 04:48:00,878
this is a good maximum. Then we have a

7026
04:48:00,878 --> 04:48:03,360
file key. I will copy it, paste it and

7027
04:48:03,360 --> 04:48:06,000
this will be equal to Z.string. And then

7028
04:48:06,000 --> 04:48:08,000
also again further validation dot

7029
04:48:08,000 --> 04:48:11,200
minimum one. Then after the file key we

7030
04:48:11,200 --> 04:48:13,440
have a price. So I will copy it and

7031
04:48:13,440 --> 04:48:15,680
paste it. And this will be equal to Z

7032
04:48:15,680 --> 04:48:18,240
dot number. I can invoke it. And then I

7033
04:48:18,240 --> 04:48:20,160
want to add further validation in this

7034
04:48:20,160 --> 04:48:22,878
case minimum one because I don't want to

7035
04:48:22,878 --> 04:48:25,120
add or allow the user to create free

7036
04:48:25,120 --> 04:48:27,520
courses only paid courses. And that's

7037
04:48:27,520 --> 04:48:30,560
why I need a minimum of $1. And here's a

7038
04:48:30,560 --> 04:48:32,878
very interesting thing. So once we

7039
04:48:32,878 --> 04:48:35,600
create our form we will um create all of

7040
04:48:35,600 --> 04:48:37,520
the inputs. So for the price we will

7041
04:48:37,520 --> 04:48:39,840
create an input and we will give it a

7042
04:48:39,840 --> 04:48:42,160
type which will be number. So a user

7043
04:48:42,160 --> 04:48:44,320
will for example add a number which will

7044
04:48:44,320 --> 04:48:47,600
be $500 $500. And in most cases you

7045
04:48:47,600 --> 04:48:49,040
would probably think that this will be

7046
04:48:49,040 --> 04:48:51,280
of type number. But here's the thing

7047
04:48:51,280 --> 04:48:54,240
form inputs always return strings. But

7048
04:48:54,240 --> 04:48:56,798
my price has to be a number. So we will

7049
04:48:56,798 --> 04:48:58,878
get errors and I don't want to get

7050
04:48:58,878 --> 04:49:01,040
errors. This means we have to coers the

7051
04:49:01,040 --> 04:49:03,520
number. So in front of this Z dot number

7052
04:49:03,520 --> 04:49:05,920
or in front of this number method I can

7053
04:49:05,920 --> 04:49:08,000
get the coers method. I don't have to

7054
04:49:08,000 --> 04:49:10,000
invoke it or anything like that. So this

7055
04:49:10,000 --> 04:49:12,958
price will be Z. Coerc number dot

7056
04:49:12,958 --> 04:49:15,200
minimum one. So it will take the string

7057
04:49:15,200 --> 04:49:17,360
which the form data gives us and it will

7058
04:49:17,360 --> 04:49:19,600
convert it into a number. Then we have

7059
04:49:19,600 --> 04:49:22,080
our duration. I will copy it paste it

7060
04:49:22,080 --> 04:49:24,878
and again Z.co because I want to convert

7061
04:49:24,878 --> 04:49:27,440
the string into a number dot number. I

7062
04:49:27,440 --> 04:49:29,440
can invoke it. And then also I want to

7063
04:49:29,440 --> 04:49:31,440
add further validation. This means dot

7064
04:49:31,440 --> 04:49:34,240
minimum one and then also dot maximum

7065
04:49:34,240 --> 04:49:37,360
and for the maximum I will say 500. So a

7066
04:49:37,360 --> 04:49:41,040
maximum of 500 hours. Then we also have

7067
04:49:41,040 --> 04:49:43,760
a level which I can copy and paste right

7068
04:49:43,760 --> 04:49:45,600
here. And the level is interesting

7069
04:49:45,600 --> 04:49:47,920
because this level isn't a string. The

7070
04:49:47,920 --> 04:49:50,560
level is an enum. This means we only

7071
04:49:50,560 --> 04:49:53,600
have three options. So I can go above

7072
04:49:53,600 --> 04:49:56,000
this export constant course schema. And

7073
04:49:56,000 --> 04:49:58,400
I want to create a new export constant.

7074
04:49:58,400 --> 04:50:01,200
This will be called course levels and

7075
04:50:01,200 --> 04:50:03,440
this will be equal tune array and inside

7076
04:50:03,440 --> 04:50:05,440
of here I can just copy first of all

7077
04:50:05,440 --> 04:50:08,560
beginner paste it then a comma then I

7078
04:50:08,560 --> 04:50:11,440
can copy intermediate again a string

7079
04:50:11,440 --> 04:50:13,600
paste it and then I can copy advanced

7080
04:50:13,600 --> 04:50:16,240
add a string and paste it so this is our

7081
04:50:16,240 --> 04:50:18,560
new array course levels then for this

7082
04:50:18,560 --> 04:50:21,360
level itself this will be equal to zen

7083
04:50:21,360 --> 04:50:23,920
enum because we have an enum and as an

7084
04:50:23,920 --> 04:50:25,840
argument I want to provide the course

7085
04:50:25,840 --> 04:50:28,878
levels itself so this array which I just

7086
04:50:28,878 --> 04:50:31,920
created. As you see, I get an error and

7087
04:50:31,920 --> 04:50:34,160
this error is quite big. What we have to

7088
04:50:34,160 --> 04:50:36,878
do is just mark this as constant and

7089
04:50:36,878 --> 04:50:39,280
this will fix this error and we are

7090
04:50:39,280 --> 04:50:41,360
finished. Then what else do we have? We

7091
04:50:41,360 --> 04:50:45,280
have our level. The next thing is our D

7092
04:50:45,280 --> 04:50:47,680
category. I can copy it, paste it and

7093
04:50:47,680 --> 04:50:49,920
this will be equal to Z dot string. I

7094
04:50:49,920 --> 04:50:52,320
want to invoke it. Then we also have a

7095
04:50:52,320 --> 04:50:54,638
small description. I will copy it, paste

7096
04:50:54,638 --> 04:50:57,120
it. This will be also equal to Z dot

7097
04:50:57,120 --> 04:50:59,440
string. I can invoke it for the small

7098
04:50:59,440 --> 04:51:01,760
description. I want to also add further

7099
04:51:01,760 --> 04:51:04,000
validation. This means dot minimum. This

7100
04:51:04,000 --> 04:51:06,878
will be three and then dot maximum which

7101
04:51:06,878 --> 04:51:10,160
will be 100. So a maximum of 100

7102
04:51:10,160 --> 04:51:13,280
characters maybe 200. Yeah, I think 200

7103
04:51:13,280 --> 04:51:16,080
will be even better. So a maximum of 200

7104
04:51:16,080 --> 04:51:18,638
characters. Then I also have a slug. I

7105
04:51:18,638 --> 04:51:20,480
will copy paste it. And this will be of

7106
04:51:20,480 --> 04:51:23,680
type Z. And also further validation this

7107
04:51:23,680 --> 04:51:25,920
means dot minimum three. And then what

7108
04:51:25,920 --> 04:51:28,480
else do we have? We also have a status.

7109
04:51:28,480 --> 04:51:30,878
So I will copy it, paste it. And again

7110
04:51:30,878 --> 04:51:33,200
this isn't a string. This is an enum.

7111
04:51:33,200 --> 04:51:35,600
This means above the core schema we can

7112
04:51:35,600 --> 04:51:38,480
create a new array. So export constant

7113
04:51:38,480 --> 04:51:40,718
this will be course status. And then

7114
04:51:40,718 --> 04:51:43,040
this will be equal to an array. Again we

7115
04:51:43,040 --> 04:51:45,120
have three different statuses. So first

7116
04:51:45,120 --> 04:51:47,600
of all draft I will copy it. I will add

7117
04:51:47,600 --> 04:51:50,240
a string and paste it. Then published I

7118
04:51:50,240 --> 04:51:52,560
can copy it again create a string and

7119
04:51:52,560 --> 04:51:55,120
paste it. and then archived which means

7120
04:51:55,120 --> 04:51:58,000
I can copy it. Create a string and don't

7121
04:51:58,000 --> 04:52:00,000
paste it. No, I'm joking. Paste it. Of

7122
04:52:00,000 --> 04:52:02,400
course. So, we have our core status. We

7123
04:52:02,400 --> 04:52:04,718
can also mark it as constant again to

7124
04:52:04,718 --> 04:52:06,718
not get any errors. And then for the

7125
04:52:06,718 --> 04:52:09,920
status, this will be equal to Z. ENAM. I

7126
04:52:09,920 --> 04:52:12,240
want to invoke it. And as an argument, I

7127
04:52:12,240 --> 04:52:15,120
will pass the core status. So, is there

7128
04:52:15,120 --> 04:52:17,120
anything else missing? If I again go

7129
04:52:17,120 --> 04:52:19,200
back, status is finished. User relation,

7130
04:52:19,200 --> 04:52:21,040
we don't need that. Yeah, I think that's

7131
04:52:21,040 --> 04:52:23,440
already it. Now we will use the default

7132
04:52:23,440 --> 04:52:26,320
errors but they aren't that nice. So for

7133
04:52:26,320 --> 04:52:28,480
example for the minimum I can add a

7134
04:52:28,480 --> 04:52:31,440
comma open an object and then give it a

7135
04:52:31,440 --> 04:52:33,200
message and this is what will be

7136
04:52:33,200 --> 04:52:35,120
rendered if we have an error. This means

7137
04:52:35,120 --> 04:52:37,760
if the user creates a input which is

7138
04:52:37,760 --> 04:52:40,160
smaller than three characters and for

7139
04:52:40,160 --> 04:52:43,200
the message I want to say title must be

7140
04:52:43,200 --> 04:52:46,798
at least three characters long. We can

7141
04:52:46,798 --> 04:52:49,120
do the same thing for the maximum. So

7142
04:52:49,120 --> 04:52:51,920
again a comma an object we can get the

7143
04:52:51,920 --> 04:52:54,480
message and this will be equal to title

7144
04:52:54,480 --> 04:52:59,520
must be at most 100 characters long dot

7145
04:52:59,520 --> 04:53:02,000
dot dot. So as you see adding your own

7146
04:53:02,000 --> 04:53:04,798
error messages is very easy and to not

7147
04:53:04,798 --> 04:53:06,958
bore you I will just copy paste these

7148
04:53:06,958 --> 04:53:09,520
error messages. You can just use AI to

7149
04:53:09,520 --> 04:53:11,280
create your own ones. So for the

7150
04:53:11,280 --> 04:53:13,840
description I want to also use this dot

7151
04:53:13,840 --> 04:53:15,920
minimum three and for the message

7152
04:53:15,920 --> 04:53:18,240
description must be at least three

7153
04:53:18,240 --> 04:53:20,480
characters long. Then I want to do the

7154
04:53:20,480 --> 04:53:23,120
same thing for my file key. So minimum

7155
04:53:23,120 --> 04:53:25,600
one. And then for the message file is

7156
04:53:25,600 --> 04:53:28,480
required. Then we also have the price as

7157
04:53:28,480 --> 04:53:30,718
mentioned the price will be at least

7158
04:53:30,718 --> 04:53:32,638
minimum one. And then for the error

7159
04:53:32,638 --> 04:53:35,120
message I want to say price must be a

7160
04:53:35,120 --> 04:53:37,520
positive number. Then for the duration

7161
04:53:37,520 --> 04:53:40,320
again we have a minimum and maximum. So

7162
04:53:40,320 --> 04:53:42,560
for the minimum I want to render an

7163
04:53:42,560 --> 04:53:44,560
error message which will say duration

7164
04:53:44,560 --> 04:53:47,360
must be at least 1 hour and then for the

7165
04:53:47,360 --> 04:53:50,080
maximum I will paste it and this will be

7166
04:53:50,080 --> 04:53:54,000
500 and duration must be at most 500

7167
04:53:54,000 --> 04:53:57,200
hours. Then we also have our level and

7168
04:53:57,200 --> 04:53:59,680
adding error messages here is also very

7169
04:53:59,680 --> 04:54:02,560
simple. Again add a comma open an object

7170
04:54:02,560 --> 04:54:04,638
and then you have access to the message

7171
04:54:04,638 --> 04:54:07,040
property and for the value this will be

7172
04:54:07,040 --> 04:54:10,080
level is required. Then for the category

7173
04:54:10,080 --> 04:54:12,320
I will skip it for now. I want to update

7174
04:54:12,320 --> 04:54:14,480
it later on because I want to create an

7175
04:54:14,480 --> 04:54:16,878
enum later on. And then for the small

7176
04:54:16,878 --> 04:54:19,040
description for the minimum three the

7177
04:54:19,040 --> 04:54:21,040
error message will be small description

7178
04:54:21,040 --> 04:54:23,520
must be at least three characters long.

7179
04:54:23,520 --> 04:54:25,920
And for the maximum this will be 200

7180
04:54:25,920 --> 04:54:28,320
again. So small description must be at

7181
04:54:28,320 --> 04:54:31,040
most 200 characters long. Then for the

7182
04:54:31,040 --> 04:54:33,760
slug this will be slug must be at least

7183
04:54:33,760 --> 04:54:35,600
three characters long. And for the

7184
04:54:35,600 --> 04:54:38,320
status again we can add a comma. open an

7185
04:54:38,320 --> 04:54:40,718
object get the message property and then

7186
04:54:40,718 --> 04:54:43,920
this will be equal to um I don't know

7187
04:54:43,920 --> 04:54:46,878
status is required yeah I think this is

7188
04:54:46,878 --> 04:54:49,840
fine enough so we created our own custom

7189
04:54:49,840 --> 04:54:52,080
error messages we created these two

7190
04:54:52,080 --> 04:54:54,480
arrays which means I can use the sort

7191
04:54:54,480 --> 04:54:57,600
schema to create the form itself so we

7192
04:54:57,600 --> 04:54:59,920
can go back to the creation route and we

7193
04:54:59,920 --> 04:55:02,240
want to first of all set up react hook

7194
04:55:02,240 --> 04:55:04,638
form so what we can do is head over to

7195
04:55:04,638 --> 04:55:06,718
the documentation we are finished with

7196
04:55:06,718 --> 04:55:08,798
step number one. This means to create a

7197
04:55:08,798 --> 04:55:11,600
Z schema. The next step is to define a

7198
04:55:11,600 --> 04:55:14,560
form. Use the use form hook from React

7199
04:55:14,560 --> 04:55:17,760
hook form to create a form. So form

7200
04:55:17,760 --> 04:55:19,680
schema, this is finished. And here they

7201
04:55:19,680 --> 04:55:22,000
have comments. Step one and step number

7202
04:55:22,000 --> 04:55:24,878
two. I will copy the step number one. I

7203
04:55:24,878 --> 04:55:26,958
will go back and then I want to paste it

7204
04:55:26,958 --> 04:55:29,520
above the return statement. So constant

7205
04:55:29,520 --> 04:55:32,798
form is equal to use form. Use form is

7206
04:55:32,798 --> 04:55:35,120
imported from react to form. And this

7207
04:55:35,120 --> 04:55:37,360
here is relatively interesting code.

7208
04:55:37,360 --> 04:55:40,560
Z.infer type of form schema. So what

7209
04:55:40,560 --> 04:55:42,480
they are trying to do right here is get

7210
04:55:42,480 --> 04:55:44,560
the types from the Z schema. That's why

7211
04:55:44,560 --> 04:55:47,520
they infer this form schema. But instead

7212
04:55:47,520 --> 04:55:49,840
of writing this annoying code, we can

7213
04:55:49,840 --> 04:55:53,120
infer it right in our Z schemas file. So

7214
04:55:53,120 --> 04:55:54,798
I want to go underneath the course

7215
04:55:54,798 --> 04:55:56,878
schema. And then we will create an

7216
04:55:56,878 --> 04:56:00,240
export type. This will be called course

7217
04:56:00,240 --> 04:56:03,280
schema type. And this will be equal to

7218
04:56:03,280 --> 04:56:05,920
Z.infer. infer then we want to add a

7219
04:56:05,920 --> 04:56:08,798
generic and inside of here type of um

7220
04:56:08,798 --> 04:56:11,840
what was it course schema so we just

7221
04:56:11,840 --> 04:56:14,638
created the same code right here z.infer

7222
04:56:14,638 --> 04:56:16,718
which means I can use this new type

7223
04:56:16,718 --> 04:56:19,200
course schema type and then I can delete

7224
04:56:19,200 --> 04:56:21,360
this set.infer infer and we will just

7225
04:56:21,360 --> 04:56:23,840
have a simple generic with the score uh

7226
04:56:23,840 --> 04:56:26,320
course schema type because if I hover

7227
04:56:26,320 --> 04:56:28,400
over course schema I get all of the

7228
04:56:28,400 --> 04:56:31,120
properties title description file key

7229
04:56:31,120 --> 04:56:33,840
and stuff like that. Then we also have a

7230
04:56:33,840 --> 04:56:36,160
resolver and this will be equal to z

7231
04:56:36,160 --> 04:56:38,400
resolver. Sadly it does not import for

7232
04:56:38,400 --> 04:56:40,638
me automatically. So I can create an

7233
04:56:40,638 --> 04:56:43,120
import statement and I will just copy

7234
04:56:43,120 --> 04:56:45,040
the import statement from the example

7235
04:56:45,040 --> 04:56:47,360
from the code uh from the documentation.

7236
04:56:47,360 --> 04:56:49,360
So I will paste it right here. And as

7237
04:56:49,360 --> 04:56:51,520
you see Zot resolver is imported from

7238
04:56:51,520 --> 04:56:54,480
hook form resolvers zot. Then as an

7239
04:56:54,480 --> 04:56:56,718
argument they provide the form schema

7240
04:56:56,718 --> 04:56:59,840
but we don't have a form schema but a

7241
04:56:59,840 --> 04:57:02,080
course schema. So I will copy it paste

7242
04:57:02,080 --> 04:57:04,878
it and we want to also import it. So

7243
04:57:04,878 --> 04:57:07,440
course schema and this is imported from

7244
04:57:07,440 --> 04:57:09,680
the z schemas file. And then if we

7245
04:57:09,680 --> 04:57:12,638
continue, we also have a default values

7246
04:57:12,638 --> 04:57:15,680
object. And this object sets the initial

7247
04:57:15,680 --> 04:57:18,080
state of our form fields when the

7248
04:57:18,080 --> 04:57:20,638
component first mounts. Each key then

7249
04:57:20,638 --> 04:57:23,040
corresponds to a form fields name and

7250
04:57:23,040 --> 04:57:25,440
its value is the default content for

7251
04:57:25,440 --> 04:57:27,920
that field. So since we currently don't

7252
04:57:27,920 --> 04:57:30,560
have any inputs, our default value will

7253
04:57:30,560 --> 04:57:33,680
be either an empty string or null. So I

7254
04:57:33,680 --> 04:57:35,600
can delete this username. We don't have

7255
04:57:35,600 --> 04:57:37,680
a username. And if I click on control

7256
04:57:37,680 --> 04:57:40,000
spacebar, I get all of my fields right

7257
04:57:40,000 --> 04:57:42,240
here. That's because we added this

7258
04:57:42,240 --> 04:57:45,360
course schema type generic. So I want

7259
04:57:45,360 --> 04:57:47,280
you first of all, for example, get my

7260
04:57:47,280 --> 04:57:49,440
title. This will be equal to an empty

7261
04:57:49,440 --> 04:57:51,760
string because we don't have a title. In

7262
04:57:51,760 --> 04:57:53,920
this case, it's pretty much undefined.

7263
04:57:53,920 --> 04:57:55,760
Then for the description, this will be

7264
04:57:55,760 --> 04:57:58,320
also an empty string. Then for the file

7265
04:57:58,320 --> 04:58:00,958
key, this will be an empty string. Then

7266
04:58:00,958 --> 04:58:03,120
for the price, since this is of type

7267
04:58:03,120 --> 04:58:05,840
number, this will be just zero. Then

7268
04:58:05,840 --> 04:58:08,400
also for the duration this will be zero.

7269
04:58:08,400 --> 04:58:10,560
Then for the level this will be equal to

7270
04:58:10,560 --> 04:58:12,718
beginner because we have to provide an

7271
04:58:12,718 --> 04:58:14,878
initial state. Then for the category

7272
04:58:14,878 --> 04:58:17,200
this will be for now an empty string.

7273
04:58:17,200 --> 04:58:19,440
Then I want to also provide the status

7274
04:58:19,440 --> 04:58:21,520
and this is an enum and the initial

7275
04:58:21,520 --> 04:58:24,320
state will be draft. And then we also

7276
04:58:24,320 --> 04:58:26,560
have a slug. This will be an empty

7277
04:58:26,560 --> 04:58:28,958
string. And also the small description

7278
04:58:28,958 --> 04:58:31,200
will be an empty string as a default

7279
04:58:31,200 --> 04:58:33,920
value. So what exactly is this code or

7280
04:58:33,920 --> 04:58:35,600
what do we do right here? This is a good

7281
04:58:35,600 --> 04:58:37,520
question. So first of all we have the

7282
04:58:37,520 --> 04:58:40,000
use form hook and this is provided by

7283
04:58:40,000 --> 04:58:43,120
react hook form. This is used to first

7284
04:58:43,120 --> 04:58:45,600
of all set it up. We need this use form

7285
04:58:45,600 --> 04:58:48,240
for the whole state management. Then we

7286
04:58:48,240 --> 04:58:51,040
pass a generic course schema type. This

7287
04:58:51,040 --> 04:58:53,680
provides the TypeScript typing for our

7288
04:58:53,680 --> 04:58:56,160
values as you see here and this also

7289
04:58:56,160 --> 04:58:59,040
ensures that our data is consistent. And

7290
04:58:59,040 --> 04:59:00,798
then we have this resolver which is

7291
04:59:00,798 --> 04:59:03,280
equal to zot resolver and as an argument

7292
04:59:03,280 --> 04:59:05,520
we provide the core schema. So this

7293
04:59:05,520 --> 04:59:08,400
connects react hook form to uh zot

7294
04:59:08,400 --> 04:59:10,718
itself and we pass the core schema

7295
04:59:10,718 --> 04:59:13,280
because we want to specifically validate

7296
04:59:13,280 --> 04:59:15,840
this one schema. So zot resolver says

7297
04:59:15,840 --> 04:59:18,480
hey we use zot and then the core schema

7298
04:59:18,480 --> 04:59:21,200
just says hey this is the schema itself.

7299
04:59:21,200 --> 04:59:23,120
You want to validate the form data

7300
04:59:23,120 --> 04:59:25,520
against the schema. That's it. As you

7301
04:59:25,520 --> 04:59:27,680
see it's quite simple. Then what's the

7302
04:59:27,680 --> 04:59:29,520
second step? The second step is to

7303
04:59:29,520 --> 04:59:31,680
define the onsubmit handler or the

7304
04:59:31,680 --> 04:59:34,000
submit handler itself. This means I can

7305
04:59:34,000 --> 04:59:36,080
copy this function and I want to paste

7306
04:59:36,080 --> 04:59:38,878
it underneath this constant form. And as

7307
04:59:38,878 --> 04:59:40,958
you see do something with the form

7308
04:59:40,958 --> 04:59:43,520
values inside of here. And this will be

7309
04:59:43,520 --> 04:59:46,160
type safe and validated. So if this

7310
04:59:46,160 --> 04:59:48,080
console locks then this means that

7311
04:59:48,080 --> 04:59:50,320
everything was successful. If this does

7312
04:59:50,320 --> 04:59:52,400
not console lock then this means we had

7313
04:59:52,400 --> 04:59:54,560
some sort of error and it will render a

7314
04:59:54,560 --> 04:59:56,480
client side validation error for the

7315
04:59:56,480 --> 04:59:59,120
input itself. So if code runs inside of

7316
04:59:59,120 --> 05:00:00,958
here, then this means that client side

7317
05:00:00,958 --> 05:00:04,000
validation was successful. And since we

7318
05:00:04,000 --> 05:00:06,240
already set up React took form, we can

7319
05:00:06,240 --> 05:00:08,638
get started with the form. Also, I

7320
05:00:08,638 --> 05:00:10,240
currently get one error here for

7321
05:00:10,240 --> 05:00:12,718
Z.infer. As you all know, instead of

7322
05:00:12,718 --> 05:00:15,600
using Z.infer, we can use our course

7323
05:00:15,600 --> 05:00:18,320
schema type which is already imported.

7324
05:00:18,320 --> 05:00:20,240
So I want to scroll a bit to the bottom

7325
05:00:20,240 --> 05:00:22,400
and I want to go into the card content

7326
05:00:22,400 --> 05:00:24,878
and create the form. So we want to get

7327
05:00:24,878 --> 05:00:27,440
started with the form component itself.

7328
05:00:27,440 --> 05:00:29,680
This is imported from the components and

7329
05:00:29,680 --> 05:00:32,240
in the form we want to also spread our

7330
05:00:32,240 --> 05:00:34,560
form itself. So this constant which we

7331
05:00:34,560 --> 05:00:37,280
just created we want to spread it. So in

7332
05:00:37,280 --> 05:00:39,680
the form itself as you see the form

7333
05:00:39,680 --> 05:00:41,760
still complains and that's because it's

7334
05:00:41,760 --> 05:00:44,160
missing children. So in the form I want

7335
05:00:44,160 --> 05:00:46,480
to then render a standard form element.

7336
05:00:46,480 --> 05:00:48,480
We can delete the action. We don't have

7337
05:00:48,480 --> 05:00:50,878
one right now. And for the form, I will

7338
05:00:50,878 --> 05:00:53,120
also give it a class name which will be

7339
05:00:53,120 --> 05:00:55,920
space Y6. This means I want to give the

7340
05:00:55,920 --> 05:00:58,718
children a bit of spacing. Also, since

7341
05:00:58,718 --> 05:01:01,680
we already have an onsubmit function, I

7342
05:01:01,680 --> 05:01:04,000
can give the form also an onsubmit

7343
05:01:04,000 --> 05:01:06,160
handler. And this will be equal to

7344
05:01:06,160 --> 05:01:08,000
form.andsubmit.

7345
05:01:08,000 --> 05:01:10,080
And as an argument, I want to provide

7346
05:01:10,080 --> 05:01:12,638
the onsubmit function.

7347
05:01:12,638 --> 05:01:15,360
We use this form.andsubmit to validate

7348
05:01:15,360 --> 05:01:17,680
the data. And then this onsubmit. This

7349
05:01:17,680 --> 05:01:19,840
means if everything was successful then

7350
05:01:19,840 --> 05:01:22,000
we will call the onsubmit function and

7351
05:01:22,000 --> 05:01:24,000
that's why it will only run if

7352
05:01:24,000 --> 05:01:26,400
everything has been validated because if

7353
05:01:26,400 --> 05:01:28,958
our form values uh haven't been

7354
05:01:28,958 --> 05:01:31,200
validated correctly on the client side

7355
05:01:31,200 --> 05:01:33,600
then this onsubmit function won't be

7356
05:01:33,600 --> 05:01:35,440
called. It will first of all validate

7357
05:01:35,440 --> 05:01:37,760
everything and then the function will be

7358
05:01:37,760 --> 05:01:40,000
called and then as a next step I want to

7359
05:01:40,000 --> 05:01:41,920
create the form itself. This means all

7360
05:01:41,920 --> 05:01:44,400
of the inputs. So if you go back to the

7361
05:01:44,400 --> 05:01:46,480
documentation, you will see that they

7362
05:01:46,480 --> 05:01:49,280
provide us with a form field component

7363
05:01:49,280 --> 05:01:51,920
and this will allow us to then create

7364
05:01:51,920 --> 05:01:54,560
the input. So we can go back. I want to

7365
05:01:54,560 --> 05:01:56,638
go uh inside of here and I want to get

7366
05:01:56,638 --> 05:01:58,638
the form field component from the

7367
05:01:58,638 --> 05:02:00,878
components. This is self-closing and

7368
05:02:00,878 --> 05:02:02,878
then for the form field we have to

7369
05:02:02,878 --> 05:02:05,600
provide three properties. First of all

7370
05:02:05,600 --> 05:02:07,520
control and this will be equal to

7371
05:02:07,520 --> 05:02:10,320
form.cont control. Then we have to also

7372
05:02:10,320 --> 05:02:12,400
provide a name. In this case, this will

7373
05:02:12,400 --> 05:02:14,240
be our title. And then the third

7374
05:02:14,240 --> 05:02:16,638
property is the render property. And

7375
05:02:16,638 --> 05:02:19,280
this will define the UI for the field.

7376
05:02:19,280 --> 05:02:20,958
This means inside of here, we want to

7377
05:02:20,958 --> 05:02:23,440
create an inline callback function and

7378
05:02:23,440 --> 05:02:25,280
then just return it. And then in the

7379
05:02:25,280 --> 05:02:27,760
params, I can also the structure and get

7380
05:02:27,760 --> 05:02:29,920
the field itself. I will explain

7381
05:02:29,920 --> 05:02:31,760
everything in a second. Let's first of

7382
05:02:31,760 --> 05:02:34,080
all create the code. Then inside of here

7383
05:02:34,080 --> 05:02:36,400
in this render prop function, I want to

7384
05:02:36,400 --> 05:02:38,638
get the form item component from the

7385
05:02:38,638 --> 05:02:41,120
components. And in the form item we will

7386
05:02:41,120 --> 05:02:43,440
get the form label. This is imported

7387
05:02:43,440 --> 05:02:45,840
from the components. And here I can say

7388
05:02:45,840 --> 05:02:48,878
title because this will be our title. I

7389
05:02:48,878 --> 05:02:51,200
also misspelled it. So title. And then

7390
05:02:51,200 --> 05:02:53,280
underneath the form label I want to get

7391
05:02:53,280 --> 05:02:55,360
the form control component from the

7392
05:02:55,360 --> 05:02:57,440
components. Then in the form control I

7393
05:02:57,440 --> 05:02:59,600
want to get the input component which is

7394
05:02:59,600 --> 05:03:01,760
imported from the components. This is

7395
05:03:01,760 --> 05:03:04,080
self-closing. And for the input I want

7396
05:03:04,080 --> 05:03:06,638
to provide a placeholder. Inside of here

7397
05:03:06,638 --> 05:03:08,798
we can say title. This is the

7398
05:03:08,798 --> 05:03:11,520
placeholder itself. And then also I have

7399
05:03:11,520 --> 05:03:13,760
to pass my field right here. This means

7400
05:03:13,760 --> 05:03:16,240
I can just spread my field with these

7401
05:03:16,240 --> 05:03:18,878
three dots. So dot dot dot field. And

7402
05:03:18,878 --> 05:03:21,040
then underneath the form control, I want

7403
05:03:21,040 --> 05:03:23,600
to also get the form message component.

7404
05:03:23,600 --> 05:03:25,520
If there's a client side validation

7405
05:03:25,520 --> 05:03:27,760
error, then this form message will be

7406
05:03:27,760 --> 05:03:30,320
rendered. So an error message. So how

7407
05:03:30,320 --> 05:03:32,638
exactly does this code work? Well, we

7408
05:03:32,638 --> 05:03:34,400
first of all have a form field

7409
05:03:34,400 --> 05:03:36,560
component. This is a controller

7410
05:03:36,560 --> 05:03:39,120
component from react hook form. It

7411
05:03:39,120 --> 05:03:42,080
orchestrates yeah fancy word it creates

7412
05:03:42,080 --> 05:03:44,638
orchestrates whatever um the state

7413
05:03:44,638 --> 05:03:47,280
management for our input. So for this

7414
05:03:47,280 --> 05:03:49,840
title input then as you see we have a

7415
05:03:49,840 --> 05:03:52,240
control property and this is equal to

7416
05:03:52,240 --> 05:03:55,440
form control. This connects the field to

7417
05:03:55,440 --> 05:03:57,840
the main form instance which we just

7418
05:03:57,840 --> 05:04:00,400
created with this use form hook. So it's

7419
05:04:00,400 --> 05:04:02,400
the connector. We have to connect our

7420
05:04:02,400 --> 05:04:06,080
state to our UI itself. Then we have a

7421
05:04:06,080 --> 05:04:08,560
name property and this assigns the name

7422
05:04:08,560 --> 05:04:11,280
title to the field because again as you

7423
05:04:11,280 --> 05:04:13,280
know we have a few fields title

7424
05:04:13,280 --> 05:04:15,920
description file key whatever and we

7425
05:04:15,920 --> 05:04:18,958
have to directly connect our form our UI

7426
05:04:18,958 --> 05:04:21,200
to the state management and the unique

7427
05:04:21,200 --> 05:04:23,840
value is our title which means I have to

7428
05:04:23,840 --> 05:04:26,560
also provide for the name our title.

7429
05:04:26,560 --> 05:04:29,440
Then we also have a render prop function

7430
05:04:29,440 --> 05:04:32,080
and inside of here this renders the UI

7431
05:04:32,080 --> 05:04:34,240
as you see. Then in this render prop

7432
05:04:34,240 --> 05:04:36,958
function we render the form item. The

7433
05:04:36,958 --> 05:04:39,280
only interesting thing is this for

7434
05:04:39,280 --> 05:04:41,280
message component. So this will be

7435
05:04:41,280 --> 05:04:43,040
rendered automatically or it will

7436
05:04:43,040 --> 05:04:45,520
automatically display validation error

7437
05:04:45,520 --> 05:04:48,160
messages specifically for the title. If

7438
05:04:48,160 --> 05:04:50,160
there's no validation error then nothing

7439
05:04:50,160 --> 05:04:51,680
will be rendered. If there is a

7440
05:04:51,680 --> 05:04:53,680
validation error then this component

7441
05:04:53,680 --> 05:04:55,600
will be rendered with the custom error

7442
05:04:55,600 --> 05:04:58,320
message which we defined here and also

7443
05:04:58,320 --> 05:05:00,560
as you see we structure this field

7444
05:05:00,560 --> 05:05:03,280
property here. This is an object and

7445
05:05:03,280 --> 05:05:05,920
this object contains everything that we

7446
05:05:05,920 --> 05:05:07,920
need to make this input controlled

7447
05:05:07,920 --> 05:05:11,440
because sh or not shnui react to form

7448
05:05:11,440 --> 05:05:13,760
works with controlled inputs. This means

7449
05:05:13,760 --> 05:05:16,320
you have a default value and then a

7450
05:05:16,320 --> 05:05:18,798
value itself. you control the input and

7451
05:05:18,798 --> 05:05:21,200
this field has all of the data which we

7452
05:05:21,200 --> 05:05:23,920
need. So it includes for example a value

7453
05:05:23,920 --> 05:05:26,798
on change on blur and the ref and stuff

7454
05:05:26,798 --> 05:05:28,958
like that. So it's required to pass it

7455
05:05:28,958 --> 05:05:31,120
here in the input. You could also for

7456
05:05:31,120 --> 05:05:33,360
example instead of spreading it give the

7457
05:05:33,360 --> 05:05:35,360
input a value and then this would be

7458
05:05:35,360 --> 05:05:38,400
equal to field do value. This works but

7459
05:05:38,400 --> 05:05:40,798
it's just easier to spread the field so

7460
05:05:40,798 --> 05:05:42,798
that we don't have to write everything

7461
05:05:42,798 --> 05:05:45,760
by ourselves. Then if I go back and do a

7462
05:05:45,760 --> 05:05:48,000
hard refresh, we should also see our

7463
05:05:48,000 --> 05:05:50,240
form here. But we get an error. The

7464
05:05:50,240 --> 05:05:53,600
export use form was not found in module.

7465
05:05:53,600 --> 05:05:56,638
Did you mean to import set? What? What's

7466
05:05:56,638 --> 05:05:58,798
the problem? Well, we use React hook

7467
05:05:58,798 --> 05:06:00,718
form. React hook form creates

7468
05:06:00,718 --> 05:06:02,958
interactivity. It uses the use state

7469
05:06:02,958 --> 05:06:04,958
hook, the use ref hook. And what do we

7470
05:06:04,958 --> 05:06:07,360
do if we need interactivity? Well, we

7471
05:06:07,360 --> 05:06:10,000
mark the component with the use client

7472
05:06:10,000 --> 05:06:12,160
directive. This means if I mark this

7473
05:06:12,160 --> 05:06:14,480
page with use client and go back and as

7474
05:06:14,480 --> 05:06:17,280
you see we have a nice label title and

7475
05:06:17,280 --> 05:06:19,920
then this input with a placeholder I can

7476
05:06:19,920 --> 05:06:21,840
write something inside of here create an

7477
05:06:21,840 --> 05:06:23,680
input and as you see currently there's

7478
05:06:23,680 --> 05:06:25,760
no validation but that's because there's

7479
05:06:25,760 --> 05:06:28,080
no onsubmit button currently we will

7480
05:06:28,080 --> 05:06:30,320
render it later on and then validation

7481
05:06:30,320 --> 05:06:33,200
will also work. So as a next step I want

7482
05:06:33,200 --> 05:06:36,000
to continue with this sluck generation

7483
05:06:36,000 --> 05:06:38,480
thingy. So we will render an input and

7484
05:06:38,480 --> 05:06:40,798
next to the input we will have a button.

7485
05:06:40,798 --> 05:06:42,878
If the user clicks on the generate

7486
05:06:42,878 --> 05:06:45,520
button we will take the title input and

7487
05:06:45,520 --> 05:06:47,760
we will generate the slug from this

7488
05:06:47,760 --> 05:06:50,000
title input. This means we want to

7489
05:06:50,000 --> 05:06:52,638
create a flex layout. So underneath the

7490
05:06:52,638 --> 05:06:55,360
form item we can create first of all a

7491
05:06:55,360 --> 05:06:57,200
div. This will be the wrapper between

7492
05:06:57,200 --> 05:06:59,920
our input and then the button. And this

7493
05:06:59,920 --> 05:07:01,840
will have a class name which will be

7494
05:07:01,840 --> 05:07:04,798
flex and then gap 4. And inside of this

7495
05:07:04,798 --> 05:07:06,798
div, I want to first of all again get my

7496
05:07:06,798 --> 05:07:09,600
form field. So to save a bit of time, I

7497
05:07:09,600 --> 05:07:11,920
can just copy the old form field and

7498
05:07:11,920 --> 05:07:14,000
paste it inside of here. So for the

7499
05:07:14,000 --> 05:07:16,160
name, this won't be title anymore, but

7500
05:07:16,160 --> 05:07:18,560
instead slug. Then for the form label,

7501
05:07:18,560 --> 05:07:20,560
this will be slug. And for the input

7502
05:07:20,560 --> 05:07:23,280
placeholder, this will be sluck. Who

7503
05:07:23,280 --> 05:07:25,200
would have thought? Then we can

7504
05:07:25,200 --> 05:07:27,440
continue. And underneath this form

7505
05:07:27,440 --> 05:07:30,000
field, I want to render a button. So

7506
05:07:30,000 --> 05:07:32,798
this generate button. So what component

7507
05:07:32,798 --> 05:07:34,718
do we want to use? We want to get the

7508
05:07:34,718 --> 05:07:36,958
button component from the components.

7509
05:07:36,958 --> 05:07:39,840
And then for the value, how about we say

7510
05:07:39,840 --> 05:07:42,718
generate sluck. And then maybe also a

7511
05:07:42,718 --> 05:07:45,520
nice looking icon. So after this text, I

7512
05:07:45,520 --> 05:07:48,480
will get the sparkles icon from Lucid

7513
05:07:48,480 --> 05:07:50,638
React. This is self-closing. And then

7514
05:07:50,638 --> 05:07:52,798
for the class name, this will be margin

7515
05:07:52,798 --> 05:07:56,160
left one. And also I will give it a size

7516
05:07:56,160 --> 05:07:58,798
property and this will be 16. So you can

7517
05:07:58,798 --> 05:08:01,120
either give it a class name with a size

7518
05:08:01,120 --> 05:08:03,440
or you can give the icon natively a

7519
05:08:03,440 --> 05:08:05,760
size. It does not really matter. The end

7520
05:08:05,760 --> 05:08:08,480
result is exactly the same. This means

7521
05:08:08,480 --> 05:08:11,520
if I again go back.

7522
05:08:11,520 --> 05:08:14,000
Yeah, this is quite ugly. The sluck

7523
05:08:14,000 --> 05:08:17,040
should or this input should take almost

7524
05:08:17,040 --> 05:08:18,718
the whole width. I mean the button

7525
05:08:18,718 --> 05:08:20,560
should take the width that it needs but

7526
05:08:20,560 --> 05:08:22,638
the input should take the rest of the

7527
05:08:22,638 --> 05:08:24,878
width. And also this alignment is not

7528
05:08:24,878 --> 05:08:26,958
correct. Currently it's aligned like

7529
05:08:26,958 --> 05:08:29,760
flex start but I want to align it flex

7530
05:08:29,760 --> 05:08:32,080
end because this should be aligned to

7531
05:08:32,080 --> 05:08:34,240
the bottom. This means we can go back.

7532
05:08:34,240 --> 05:08:36,080
Then we want to go first of all to the

7533
05:08:36,080 --> 05:08:38,958
div. This will be items and to align it

7534
05:08:38,958 --> 05:08:41,440
to the bottom. Then for the form itself

7535
05:08:41,440 --> 05:08:44,160
I can give the form item a class name

7536
05:08:44,160 --> 05:08:46,160
and this will be with full. This should

7537
05:08:46,160 --> 05:08:48,320
already fix a lot of things. Yes, that's

7538
05:08:48,320 --> 05:08:50,400
already way better. But currently this

7539
05:08:50,400 --> 05:08:53,120
generate sluck button does not work.

7540
05:08:53,120 --> 05:08:55,040
This means we can go back and then for

7541
05:08:55,040 --> 05:08:57,280
the button I can first of all give it a

7542
05:08:57,280 --> 05:08:59,440
type. This will be button and this is

7543
05:08:59,440 --> 05:09:01,600
super important because if I don't give

7544
05:09:01,600 --> 05:09:03,920
it the type button it will try to submit

7545
05:09:03,920 --> 05:09:06,400
the form. It will function like type

7546
05:09:06,400 --> 05:09:09,200
submit. Therefore please mark it as type

7547
05:09:09,200 --> 05:09:11,360
button. Then I want to also give it a

7548
05:09:11,360 --> 05:09:14,000
class name width fit. So it will only

7549
05:09:14,000 --> 05:09:15,920
take the width that it needs to take.

7550
05:09:15,920 --> 05:09:17,600
And then we want to use the on click

7551
05:09:17,600 --> 05:09:19,520
handler because we want to take the

7552
05:09:19,520 --> 05:09:22,320
title and convert it into a slug. This

7553
05:09:22,320 --> 05:09:24,638
means this will be an inline callback

7554
05:09:24,638 --> 05:09:26,718
function or an arrow function. And

7555
05:09:26,718 --> 05:09:28,638
inside of here we want to first of all

7556
05:09:28,638 --> 05:09:31,680
get the title value. This means constant

7557
05:09:31,680 --> 05:09:34,560
title value. And this will be equal to

7558
05:09:34,560 --> 05:09:36,080
form.get

7559
05:09:36,080 --> 05:09:38,480
values and I want to get the title

7560
05:09:38,480 --> 05:09:40,958
value. We can click on control spacear

7561
05:09:40,958 --> 05:09:43,600
as you see type safety and I want to get

7562
05:09:43,600 --> 05:09:46,080
the title. This means if I type or if I

7563
05:09:46,080 --> 05:09:48,560
say hello for the title then this is now

7564
05:09:48,560 --> 05:09:51,440
our title value and I want to take this

7565
05:09:51,440 --> 05:09:54,240
title value and convert it into a slug.

7566
05:09:54,240 --> 05:09:56,240
Now we could do it natively. It would

7567
05:09:56,240 --> 05:09:58,320
work and that's also something which I

7568
05:09:58,320 --> 05:10:00,560
would recommend. The only reason why we

7569
05:10:00,560 --> 05:10:02,798
won't do it natively is because you have

7570
05:10:02,798 --> 05:10:06,320
to create a lot of waxes. So that's why

7571
05:10:06,320 --> 05:10:08,798
we will use in this video the slugify

7572
05:10:08,798 --> 05:10:11,680
package. So the slugify package just uh

7573
05:10:11,680 --> 05:10:14,240
is just a function which you can invoke

7574
05:10:14,240 --> 05:10:16,240
and then as an argument you pass some

7575
05:10:16,240 --> 05:10:18,878
string and this slugify function then

7576
05:10:18,878 --> 05:10:21,440
creates a slug uh from this provided

7577
05:10:21,440 --> 05:10:24,000
string. So we can copy the name slugify

7578
05:10:24,000 --> 05:10:26,080
and then I will open my terminal. I will

7579
05:10:26,080 --> 05:10:28,000
stop the dev server and I will paste it

7580
05:10:28,000 --> 05:10:30,400
inside of here. This means pnpmi

7581
05:10:30,400 --> 05:10:33,280
slugify. Once installed I can restart my

7582
05:10:33,280 --> 05:10:35,840
def server with pnpm rune defaf and then

7583
05:10:35,840 --> 05:10:38,240
on the top I can import sllugify. This

7584
05:10:38,240 --> 05:10:40,320
means uh underneath this input for

7585
05:10:40,320 --> 05:10:42,240
example I will create an import

7586
05:10:42,240 --> 05:10:44,638
statement. Then this will be slugify

7587
05:10:44,638 --> 05:10:47,680
from slugify. Then I can again scroll to

7588
05:10:47,680 --> 05:10:49,120
the bottom. I want to copy the name

7589
05:10:49,120 --> 05:10:51,200
slugify. And then for the on click

7590
05:10:51,200 --> 05:10:53,440
handler we can create a constant. This

7591
05:10:53,440 --> 05:10:55,680
will be slug and this will be equal to

7592
05:10:55,680 --> 05:10:58,160
slugify. I want to invoke it. And as an

7593
05:10:58,160 --> 05:11:01,520
argument I will provide the title value.

7594
05:11:01,520 --> 05:11:04,160
Since we now get our slug, we can also

7595
05:11:04,160 --> 05:11:06,958
set our form value. This means I can go

7596
05:11:06,958 --> 05:11:09,280
underneath the slug and I want to get my

7597
05:11:09,280 --> 05:11:12,638
form dot set value and I want to set the

7598
05:11:12,638 --> 05:11:15,040
value for my slug. Then as a second

7599
05:11:15,040 --> 05:11:18,080
argument I want to pass slug and then I

7600
05:11:18,080 --> 05:11:20,878
want to also add a comma open an object

7601
05:11:20,878 --> 05:11:22,798
and we can get the should validate

7602
05:11:22,798 --> 05:11:25,040
property. Here we can set hey should the

7603
05:11:25,040 --> 05:11:26,878
form should react hook form validate

7604
05:11:26,878 --> 05:11:29,440
this input or not. We want to validate

7605
05:11:29,440 --> 05:11:32,000
it. So I will set this to true and this

7606
05:11:32,000 --> 05:11:34,560
should already work. So I can go back

7607
05:11:34,560 --> 05:11:37,920
and I can do a hard refresh. And if I

7608
05:11:37,920 --> 05:11:40,320
say for the title, for example, hello,

7609
05:11:40,320 --> 05:11:43,840
how are you? 1 2 3 and click on generate

7610
05:11:43,840 --> 05:11:46,080
slug, it will generate a nice looking

7611
05:11:46,080 --> 05:11:48,560
slug right here as you see. So this

7612
05:11:48,560 --> 05:11:52,080
works exactly as wanted, which means we

7613
05:11:52,080 --> 05:11:54,878
can continue with the small description.

7614
05:11:54,878 --> 05:11:56,638
So we can scroll to the bottom. We want

7615
05:11:56,638 --> 05:11:58,400
to go underneath the button, underneath

7616
05:11:58,400 --> 05:12:00,480
the div, but we want to stay in the

7617
05:12:00,480 --> 05:12:02,798
form. Then we want to again use the form

7618
05:12:02,798 --> 05:12:05,120
field component which means I can just

7619
05:12:05,120 --> 05:12:07,760
copy it and again paste it right here.

7620
05:12:07,760 --> 05:12:09,760
Then we want to update the name instead

7621
05:12:09,760 --> 05:12:12,718
of slug this will be small description.

7622
05:12:12,718 --> 05:12:15,040
Then form item this is fine. For the

7623
05:12:15,040 --> 05:12:17,760
form label I want to say small

7624
05:12:17,760 --> 05:12:20,560
description. Then for the form control

7625
05:12:20,560 --> 05:12:22,878
instead of rendering an input I want to

7626
05:12:22,878 --> 05:12:25,680
get the text area component. For the

7627
05:12:25,680 --> 05:12:28,240
placeholder I will say small

7628
05:12:28,240 --> 05:12:30,798
description. then spreading the field

7629
05:12:30,798 --> 05:12:33,440
that's fine but we can also add a class

7630
05:12:33,440 --> 05:12:35,840
name and this will be minimum height of

7631
05:12:35,840 --> 05:12:39,920
custom value 120 pixels and as you see

7632
05:12:39,920 --> 05:12:42,080
this is our small description I can also

7633
05:12:42,080 --> 05:12:44,160
input something for the description and

7634
05:12:44,160 --> 05:12:46,718
it looks beautiful what's the next value

7635
05:12:46,718 --> 05:12:48,718
or what's the next input well the next

7636
05:12:48,718 --> 05:12:51,840
input will be our rich text area this

7637
05:12:51,840 --> 05:12:54,240
means the big description so we can

7638
05:12:54,240 --> 05:12:56,878
again go back I can copy this form field

7639
05:12:56,878 --> 05:12:59,440
paste it down below one more time. Then

7640
05:12:59,440 --> 05:13:01,520
for the value or for the name this will

7641
05:13:01,520 --> 05:13:03,600
be big description. So standard

7642
05:13:03,600 --> 05:13:06,080
description. For the form label I will

7643
05:13:06,080 --> 05:13:08,560
just say description. Then we will for

7644
05:13:08,560 --> 05:13:11,120
now leave this text area component here.

7645
05:13:11,120 --> 05:13:13,760
But later on I will create a real rich

7646
05:13:13,760 --> 05:13:15,840
text editor. And then for the class name

7647
05:13:15,840 --> 05:13:18,080
and stuff like that. This is fine. Then

7648
05:13:18,080 --> 05:13:20,560
we can continue with the image uploader

7649
05:13:20,560 --> 05:13:22,798
itself. So we can go underneath this

7650
05:13:22,798 --> 05:13:25,520
form item again copy paste it. Then for

7651
05:13:25,520 --> 05:13:28,080
the name this will be file key. For the

7652
05:13:28,080 --> 05:13:30,080
form item this is fine. For the form

7653
05:13:30,080 --> 05:13:34,000
label I will render thumbnail image. And

7654
05:13:34,000 --> 05:13:36,798
then instead of rendering a text area I

7655
05:13:36,798 --> 05:13:39,040
want to render an input which is already

7656
05:13:39,040 --> 05:13:41,600
imported. We can delete the class name.

7657
05:13:41,600 --> 05:13:44,160
We won't need it. And this is fine

7658
05:13:44,160 --> 05:13:45,760
enough. H the description. This should

7659
05:13:45,760 --> 05:13:49,280
be thumbnail URL. Again I will update it

7660
05:13:49,280 --> 05:13:51,280
later on but for now this is fine

7661
05:13:51,280 --> 05:13:53,440
enough. we want to later on create a

7662
05:13:53,440 --> 05:13:56,080
real drag and drop zone. Then the next

7663
05:13:56,080 --> 05:13:59,520
section is a selector for my category,

7664
05:13:59,520 --> 05:14:02,480
for the level, for the status, duration,

7665
05:14:02,480 --> 05:14:04,560
stuff like that. This means we want to

7666
05:14:04,560 --> 05:14:07,600
go underneath this form item or form uh

7667
05:14:07,600 --> 05:14:09,920
field. And I want to create a grid

7668
05:14:09,920 --> 05:14:11,840
layout. This means let's get a div

7669
05:14:11,840 --> 05:14:14,240
element and let's give it a class name.

7670
05:14:14,240 --> 05:14:16,400
This will be grid grid columns of one

7671
05:14:16,400 --> 05:14:19,120
for a mobile screen. And then on MD or

7672
05:14:19,120 --> 05:14:21,280
bigger, this will be grid columns two.

7673
05:14:21,280 --> 05:14:24,400
and gap four to have some spacing inside

7674
05:14:24,400 --> 05:14:26,718
of here. I want to again render a form

7675
05:14:26,718 --> 05:14:29,360
field. So I can just copy this and paste

7676
05:14:29,360 --> 05:14:31,520
it inside of here. And this form field

7677
05:14:31,520 --> 05:14:33,600
will be for the category. This means for

7678
05:14:33,600 --> 05:14:35,680
the name I want to get the category for

7679
05:14:35,680 --> 05:14:37,680
the form label instead of saying

7680
05:14:37,680 --> 05:14:40,240
thumbnail image this will be a category.

7681
05:14:40,240 --> 05:14:42,638
And then for the value itself or for the

7682
05:14:42,638 --> 05:14:45,360
form control I want to create a select

7683
05:14:45,360 --> 05:14:47,360
element. But here's the thing to create

7684
05:14:47,360 --> 05:14:49,600
a select element we want to also map

7685
05:14:49,600 --> 05:14:51,840
over items. This means over our

7686
05:14:51,840 --> 05:14:54,560
categories. And what I will do is go to

7687
05:14:54,560 --> 05:14:57,120
the Z schemas and create a new array.

7688
05:14:57,120 --> 05:14:59,920
And we will then map over this array. So

7689
05:14:59,920 --> 05:15:02,160
we can create an export constant. This

7690
05:15:02,160 --> 05:15:04,958
will be course categories. And this will

7691
05:15:04,958 --> 05:15:07,760
be equal to an array. Inside of here I

7692
05:15:07,760 --> 05:15:09,920
will just create a lot of strings. This

7693
05:15:09,920 --> 05:15:12,160
means the first category could be

7694
05:15:12,160 --> 05:15:15,120
development. Then a second one could be

7695
05:15:15,120 --> 05:15:18,240
for example business. Then how about

7696
05:15:18,240 --> 05:15:20,638
finance? Yeah, finance courses are

7697
05:15:20,638 --> 05:15:23,200
always great. You know, buy some stons.

7698
05:15:23,200 --> 05:15:26,160
Then what else? How about IT and

7699
05:15:26,160 --> 05:15:28,638
software? That's what we do. Then how

7700
05:15:28,638 --> 05:15:31,520
about office productivity? Then I want

7701
05:15:31,520 --> 05:15:34,560
to also have personal development. Then

7702
05:15:34,560 --> 05:15:37,600
also design. We all love design.

7703
05:15:37,600 --> 05:15:40,240
Marketing is also a great category. So I

7704
05:15:40,240 --> 05:15:42,638
want to create about 10 categories. Then

7705
05:15:42,638 --> 05:15:44,638
maybe health and fitness. They always

7706
05:15:44,638 --> 05:15:47,520
make money, so why not? then also music

7707
05:15:47,520 --> 05:15:50,000
because we all love music and then also

7708
05:15:50,000 --> 05:15:52,878
teaching and academics. So now I've

7709
05:15:52,878 --> 05:15:55,200
created all of these categories here. As

7710
05:15:55,200 --> 05:15:57,360
you all know we want to also mark this

7711
05:15:57,360 --> 05:16:00,160
as const so as a constant and then I

7712
05:16:00,160 --> 05:16:02,400
want to also update my course schema

7713
05:16:02,400 --> 05:16:04,560
because currently the category is set to

7714
05:16:04,560 --> 05:16:07,840
z.string but this should now be an enum.

7715
05:16:07,840 --> 05:16:10,480
This means what I can do is delete this

7716
05:16:10,480 --> 05:16:13,520
um zstring. I don't need it anymore and

7717
05:16:13,520 --> 05:16:16,240
instead this will be a Zen enum as an

7718
05:16:16,240 --> 05:16:18,480
argument. I want to provide the course

7719
05:16:18,480 --> 05:16:20,560
categories and then I want to also

7720
05:16:20,560 --> 05:16:22,878
display an error message. This means we

7721
05:16:22,878 --> 05:16:25,280
can add a comma an object. Then we can

7722
05:16:25,280 --> 05:16:27,200
get the message property and this will

7723
05:16:27,200 --> 05:16:31,680
be equal to um category is required. So

7724
05:16:31,680 --> 05:16:33,760
this is already enough which means I can

7725
05:16:33,760 --> 05:16:36,240
go back to the creation route. I want to

7726
05:16:36,240 --> 05:16:38,400
first of all again update my default

7727
05:16:38,400 --> 05:16:40,638
values. This means for the category

7728
05:16:40,638 --> 05:16:42,878
instead of passing an empty string this

7729
05:16:42,878 --> 05:16:45,920
will be equal to damn what's a good

7730
05:16:45,920 --> 05:16:48,400
category how about health and fitness

7731
05:16:48,400 --> 05:16:50,560
why not and then we can again scroll to

7732
05:16:50,560 --> 05:16:52,798
the bottom and I want to map over my

7733
05:16:52,798 --> 05:16:55,680
items so I can delete the input since we

7734
05:16:55,680 --> 05:16:57,360
won't render the input anymore and

7735
05:16:57,360 --> 05:16:59,360
instead I want to create a select

7736
05:16:59,360 --> 05:17:01,760
element or I want to use the select

7737
05:17:01,760 --> 05:17:03,920
component we can also delete the form

7738
05:17:03,920 --> 05:17:06,320
control and we will just have a form the

7739
05:17:06,320 --> 05:17:09,040
form item component then this form label

7740
05:17:09,040 --> 05:17:11,040
And then underneath the form label I

7741
05:17:11,040 --> 05:17:12,878
want to get the select component from

7742
05:17:12,878 --> 05:17:15,360
the components folder. For the select we

7743
05:17:15,360 --> 05:17:17,760
have to provide two key properties.

7744
05:17:17,760 --> 05:17:20,240
First of all on value change which will

7745
05:17:20,240 --> 05:17:23,200
be equal to field do onvalue or dot

7746
05:17:23,200 --> 05:17:26,560
onchange and then also default value

7747
05:17:26,560 --> 05:17:29,200
which will be equal to field dot value.

7748
05:17:29,200 --> 05:17:31,520
So here's the thing in for our input we

7749
05:17:31,520 --> 05:17:33,920
just spread our field. But this does not

7750
05:17:33,920 --> 05:17:36,000
work for the select and that's why we

7751
05:17:36,000 --> 05:17:38,320
have to specifically define the on value

7752
05:17:38,320 --> 05:17:41,200
change and default value. Then in the

7753
05:17:41,200 --> 05:17:43,440
select I want to get the form control

7754
05:17:43,440 --> 05:17:45,920
component which is already imported. And

7755
05:17:45,920 --> 05:17:47,840
inside of here we can get the select

7756
05:17:47,840 --> 05:17:50,240
trigger from the components. The select

7757
05:17:50,240 --> 05:17:52,320
trigger is what the user will click.

7758
05:17:52,320 --> 05:17:54,320
Then for the select trigger I want to

7759
05:17:54,320 --> 05:17:56,560
provide a class name which will be width

7760
05:17:56,560 --> 05:17:58,878
of full. And then inside of here we want

7761
05:17:58,878 --> 05:18:01,440
to get a select value which is imported

7762
05:18:01,440 --> 05:18:03,200
from the components. This is

7763
05:18:03,200 --> 05:18:05,760
self-closing and inside of here we have

7764
05:18:05,760 --> 05:18:07,920
to give it a placeholder and the

7765
05:18:07,920 --> 05:18:10,480
placeholder will just be select

7766
05:18:10,480 --> 05:18:12,958
category. So this is what the user will

7767
05:18:12,958 --> 05:18:15,120
see. Then we also need the select

7768
05:18:15,120 --> 05:18:17,200
content. This means we can go underneath

7769
05:18:17,200 --> 05:18:19,600
the select trigger underneath the form

7770
05:18:19,600 --> 05:18:22,160
control but still in the select itself

7771
05:18:22,160 --> 05:18:24,240
and I want to get the select content

7772
05:18:24,240 --> 05:18:26,638
again from the components and inside of

7773
05:18:26,638 --> 05:18:29,520
here I can map over my categories. This

7774
05:18:29,520 --> 05:18:31,600
means I can get the course categories

7775
05:18:31,600 --> 05:18:34,718
from the Zot schemas file dot map. We

7776
05:18:34,718 --> 05:18:37,200
want to use the map method as a param.

7777
05:18:37,200 --> 05:18:39,600
We can get the category itself. And then

7778
05:18:39,600 --> 05:18:41,760
we can just return it. Inside of here,

7779
05:18:41,760 --> 05:18:43,840
we need the select item which is

7780
05:18:43,840 --> 05:18:45,920
imported from the components. And this

7781
05:18:45,920 --> 05:18:48,638
select item needs two properties. First

7782
05:18:48,638 --> 05:18:51,120
of all, we map over an array. What does

7783
05:18:51,120 --> 05:18:53,360
this mean? Well, the child needs a

7784
05:18:53,360 --> 05:18:55,840
unique key. A unique key could be the

7785
05:18:55,840 --> 05:18:58,718
category itself because each value is

7786
05:18:58,718 --> 05:19:01,040
unique. And then we have to also provide

7787
05:19:01,040 --> 05:19:04,000
a value itself. And the value will be

7788
05:19:04,000 --> 05:19:06,560
equal to category. And then in the

7789
05:19:06,560 --> 05:19:09,200
select item itself, I can just render

7790
05:19:09,200 --> 05:19:11,840
the category. This means if we again go

7791
05:19:11,840 --> 05:19:14,400
back, you will see the title, the slug,

7792
05:19:14,400 --> 05:19:16,240
the small description, the big

7793
05:19:16,240 --> 05:19:18,798
description, the thumbnail URL, and then

7794
05:19:18,798 --> 05:19:21,120
the selector where the user can then

7795
05:19:21,120 --> 05:19:24,080
select a category. And as a default if I

7796
05:19:24,080 --> 05:19:26,798
do a hard refresh health and fitness is

7797
05:19:26,798 --> 05:19:29,280
selected. So the next form field will be

7798
05:19:29,280 --> 05:19:31,120
rendered on the right side. And this

7799
05:19:31,120 --> 05:19:33,280
will be for the level. This means we can

7800
05:19:33,280 --> 05:19:35,760
go back. We can again copy this form

7801
05:19:35,760 --> 05:19:38,638
item. So I will draw form field I will

7802
05:19:38,638 --> 05:19:40,718
copy it. Then I will paste it down below

7803
05:19:40,718 --> 05:19:43,120
but still in this div. Then for the name

7804
05:19:43,120 --> 05:19:45,680
instead of category this will be level.

7805
05:19:45,680 --> 05:19:47,760
Then for the form label this will be

7806
05:19:47,760 --> 05:19:50,000
uppercase level. For the onv value

7807
05:19:50,000 --> 05:19:52,000
change and default value, we don't have

7808
05:19:52,000 --> 05:19:54,240
to update anything. For the select

7809
05:19:54,240 --> 05:19:56,240
value, instead of instead of saying

7810
05:19:56,240 --> 05:19:59,120
select category, I want to say select

7811
05:19:59,120 --> 05:20:01,760
value. And then instead of mapping over

7812
05:20:01,760 --> 05:20:04,240
the categories, I want to map over the

7813
05:20:04,240 --> 05:20:06,798
course levels. This is imported from the

7814
05:20:06,798 --> 05:20:09,200
Z schemas file. And this should already

7815
05:20:09,200 --> 05:20:11,760
be it. This means if I again go back and

7816
05:20:11,760 --> 05:20:14,080
do a hard refresh, right here we have

7817
05:20:14,080 --> 05:20:16,480
our category. And here we have our

7818
05:20:16,480 --> 05:20:18,958
level. And as a default, beginner is

7819
05:20:18,958 --> 05:20:21,600
selected. But if I select intermediate,

7820
05:20:21,600 --> 05:20:23,920
it of course updates. Then what's the

7821
05:20:23,920 --> 05:20:26,000
next input? Well, the next input will be

7822
05:20:26,000 --> 05:20:28,480
the duration. This means I want to again

7823
05:20:28,480 --> 05:20:31,360
just copy not this form uh field, but

7824
05:20:31,360 --> 05:20:33,360
instead a form field with a standard

7825
05:20:33,360 --> 05:20:35,440
input. I will copy this one with the

7826
05:20:35,440 --> 05:20:37,760
thumbnail URL. And then I want to go

7827
05:20:37,760 --> 05:20:40,080
underneath our last form field and paste

7828
05:20:40,080 --> 05:20:42,240
it right here. For the name, this won't

7829
05:20:42,240 --> 05:20:45,120
be file key, but instead duration. Then

7830
05:20:45,120 --> 05:20:47,280
for the form label instead of thumbnail

7831
05:20:47,280 --> 05:20:50,080
image this will be duration and then in

7832
05:20:50,080 --> 05:20:52,320
parentheses hours. Then for the

7833
05:20:52,320 --> 05:20:54,878
placeholder instead of thumbnail URL

7834
05:20:54,878 --> 05:20:57,280
this will be duration uppercased. And

7835
05:20:57,280 --> 05:20:59,600
then I want to also give it a type and

7836
05:20:59,600 --> 05:21:02,080
the type will be number. So this should

7837
05:21:02,080 --> 05:21:04,400
already be it. This means if I go back

7838
05:21:04,400 --> 05:21:07,040
yes this looks nice and I can also up

7839
05:21:07,040 --> 05:21:09,440
right here add a number. Then the next

7840
05:21:09,440 --> 05:21:11,920
input will be for the price. This means

7841
05:21:11,920 --> 05:21:14,400
we can go back. I will copy this form

7842
05:21:14,400 --> 05:21:16,638
field and paste it down below one more

7843
05:21:16,638 --> 05:21:18,638
time. So we want to update the name.

7844
05:21:18,638 --> 05:21:21,040
Instead of duration, this will be price.

7845
05:21:21,040 --> 05:21:23,040
For the form label, instead of saying

7846
05:21:23,040 --> 05:21:25,440
duration, I want to say price. And

7847
05:21:25,440 --> 05:21:27,840
again, I want to get my parentheses and

7848
05:21:27,840 --> 05:21:30,160
render a dollar symbol because the user

7849
05:21:30,160 --> 05:21:33,040
should uh input a price in dollars. Then

7850
05:21:33,040 --> 05:21:35,120
for the input, the placeholder should

7851
05:21:35,120 --> 05:21:38,240
say price for the type number is fine.

7852
05:21:38,240 --> 05:21:40,638
And this means if I again go back, yeah,

7853
05:21:40,638 --> 05:21:42,400
this looks beautiful. And then we are

7854
05:21:42,400 --> 05:21:44,160
almost finished and there's only one

7855
05:21:44,160 --> 05:21:46,480
more input or you could say select which

7856
05:21:46,480 --> 05:21:48,638
is missing and that's the status

7857
05:21:48,638 --> 05:21:51,440
selector. This means I can go back and I

7858
05:21:51,440 --> 05:21:53,520
want to copy a form field with the

7859
05:21:53,520 --> 05:21:56,000
select already implemented. So I will

7860
05:21:56,000 --> 05:21:58,560
copy this level form field. I want to

7861
05:21:58,560 --> 05:22:00,638
again scroll to the bottom and we want

7862
05:22:00,638 --> 05:22:03,280
to go underneath this div. Still we want

7863
05:22:03,280 --> 05:22:05,600
to stay in the form but underneath this

7864
05:22:05,600 --> 05:22:08,240
grid div. I can then again paste what I

7865
05:22:08,240 --> 05:22:10,560
just copied and we have to update the

7866
05:22:10,560 --> 05:22:12,958
properties. So instead of saying level

7867
05:22:12,958 --> 05:22:14,878
this will be status. This means for the

7868
05:22:14,878 --> 05:22:17,680
name. Then for the form label instead of

7869
05:22:17,680 --> 05:22:20,400
level this will be status. The on value

7870
05:22:20,400 --> 05:22:22,878
change and default value is fine. We

7871
05:22:22,878 --> 05:22:24,878
don't have to update anything. Then for

7872
05:22:24,878 --> 05:22:27,120
the select value in the trigger this

7873
05:22:27,120 --> 05:22:30,400
will be yeah select status I think uh

7874
05:22:30,400 --> 05:22:32,400
will be a bit better. And then for the

7875
05:22:32,400 --> 05:22:34,638
select content, I don't want to map over

7876
05:22:34,638 --> 05:22:37,360
the levels, but instead over the course

7877
05:22:37,360 --> 05:22:39,840
status, which is imported from the Zot

7878
05:22:39,840 --> 05:22:42,480
schemas file. This means if we go back,

7879
05:22:42,480 --> 05:22:45,120
we now have a status selector right

7880
05:22:45,120 --> 05:22:47,840
here. And the default selection is draft

7881
05:22:47,840 --> 05:22:50,000
as you see here. Then the last thing

7882
05:22:50,000 --> 05:22:52,400
which we need is a submit button. This

7883
05:22:52,400 --> 05:22:54,080
means we can go back. We can go

7884
05:22:54,080 --> 05:22:56,320
underneath this form field and I want to

7885
05:22:56,320 --> 05:22:58,080
get the button component from the

7886
05:22:58,080 --> 05:23:00,638
components and as a value I will just

7887
05:23:00,638 --> 05:23:04,320
say create course and also maybe an icon

7888
05:23:04,320 --> 05:23:06,638
could look quite nice. So let's get the

7889
05:23:06,638 --> 05:23:09,120
plus icon from lucid react this is

7890
05:23:09,120 --> 05:23:11,360
self-closing and for the class name this

7891
05:23:11,360 --> 05:23:14,000
will be margin left one also I want to

7892
05:23:14,000 --> 05:23:17,040
give it a size and this will be 16. And

7893
05:23:17,040 --> 05:23:19,760
if I again go back yeah this looks

7894
05:23:19,760 --> 05:23:22,320
absolutely beautiful. So I will zoom out

7895
05:23:22,320 --> 05:23:24,480
a bit because I'm very zoomed in. We

7896
05:23:24,480 --> 05:23:26,560
have a nice sidebar and then this is the

7897
05:23:26,560 --> 05:23:28,878
main content. I can go back to the admin

7898
05:23:28,878 --> 05:23:31,280
courses page with this button. Then this

7899
05:23:31,280 --> 05:23:34,000
is the form in a cart. We have a title

7900
05:23:34,000 --> 05:23:36,320
input. We have a slug input. I can

7901
05:23:36,320 --> 05:23:38,958
generate a slug as you see here. We have

7902
05:23:38,958 --> 05:23:41,680
a small description, a big description,

7903
05:23:41,680 --> 05:23:44,240
a thumbnail image, category level,

7904
05:23:44,240 --> 05:23:47,280
duration, price, and status. And of

7905
05:23:47,280 --> 05:23:49,440
course this nice looking button. But

7906
05:23:49,440 --> 05:23:51,920
currently nothing really works. We don't

7907
05:23:51,920 --> 05:23:54,400
have any mutation layer. And also I

7908
05:23:54,400 --> 05:23:56,560
don't want to render a text area for the

7909
05:23:56,560 --> 05:23:58,798
description. No, this should be a real

7910
05:23:58,798 --> 05:24:00,958
rich text editor. And instead of

7911
05:24:00,958 --> 05:24:04,000
rendering this uh thumbnail URL input,

7912
05:24:04,000 --> 05:24:06,400
we want to render a real drag and drop

7913
05:24:06,400 --> 05:24:09,040
zone. So I want to start with the rich

7914
05:24:09,040 --> 05:24:11,520
text editor. Then we will continue with

7915
05:24:11,520 --> 05:24:13,840
the uh drag and drop zone. Then we will

7916
05:24:13,840 --> 05:24:16,160
implement the mutation slayer. And then

7917
05:24:16,160 --> 05:24:18,718
I think we will be finished. So let's

7918
05:24:18,718 --> 05:24:22,080
start with the rich text editor. Yes. So

7919
05:24:22,080 --> 05:24:24,480
to create the rich text editor, we will

7920
05:24:24,480 --> 05:24:27,520
use tiptap in this video. And tip tap is

7921
05:24:27,520 --> 05:24:30,240
a headless and open-source editor

7922
05:24:30,240 --> 05:24:32,958
framework. So most solutions which you

7923
05:24:32,958 --> 05:24:35,200
will find on the internet will just be

7924
05:24:35,200 --> 05:24:37,200
pre-built components which are already

7925
05:24:37,200 --> 05:24:39,280
styled and stuff like that. That's

7926
05:24:39,280 --> 05:24:41,920
great. But I want to have a custom rich

7927
05:24:41,920 --> 05:24:44,160
text editor. And tip tap gives me the

7928
05:24:44,160 --> 05:24:47,040
ability to create my own custom rich

7929
05:24:47,040 --> 05:24:49,120
text editor because tip tap is

7930
05:24:49,120 --> 05:24:51,520
completely headless. It's not styled.

7931
05:24:51,520 --> 05:24:53,760
You style it yourself. It's also

7932
05:24:53,760 --> 05:24:56,480
completely open source and also free. I

7933
05:24:56,480 --> 05:24:58,958
know they have a paid tier that's if you

7934
05:24:58,958 --> 05:25:01,280
want to use some AI stuff and stuff like

7935
05:25:01,280 --> 05:25:02,958
that. But we don't need that. We will

7936
05:25:02,958 --> 05:25:05,600
just use the opensource editor which is

7937
05:25:05,600 --> 05:25:08,160
completely free to use. And again, it's

7938
05:25:08,160 --> 05:25:10,480
headless and it's super powerful. It's

7939
05:25:10,480 --> 05:25:12,718
in my opinion the best solution out on

7940
05:25:12,718 --> 05:25:15,040
the market to create a simple or not

7941
05:25:15,040 --> 05:25:17,520
even a simple an advanced rich text

7942
05:25:17,520 --> 05:25:19,920
editor. So what we can do is head over

7943
05:25:19,920 --> 05:25:22,638
to the documentation. And here they have

7944
05:25:22,638 --> 05:25:25,600
a little I guess getting started guide

7945
05:25:25,600 --> 05:25:27,680
where they explain what tip tap is and

7946
05:25:27,680 --> 05:25:29,840
how it works and stuff like that. We

7947
05:25:29,840 --> 05:25:31,840
don't need that. We want to get started

7948
05:25:31,840 --> 05:25:34,240
right away. So I want to click in the

7949
05:25:34,240 --> 05:25:37,360
navbar on all docs and then on editor

7950
05:25:37,360 --> 05:25:39,360
and then we can click on install and

7951
05:25:39,360 --> 05:25:41,840
then next.js. Also here's one thing

7952
05:25:41,840 --> 05:25:44,160
which I want to quickly mention as they

7953
05:25:44,160 --> 05:25:48,000
say on the top tip editor 3.0 beta is

7954
05:25:48,000 --> 05:25:50,638
out. Start here. When I'm recording this

7955
05:25:50,638 --> 05:25:53,520
video edit or tiptap 3.0 is still in

7956
05:25:53,520 --> 05:25:57,360
beta. It's not released. I tried out 3.0

7957
05:25:57,360 --> 05:25:59,520
but it still has a lot of bugs. That's

7958
05:25:59,520 --> 05:26:01,920
why I will use the stable version which

7959
05:26:01,920 --> 05:26:05,280
is right now 2 something. When you start

7960
05:26:05,280 --> 05:26:07,120
watching this video, it could be that

7961
05:26:07,120 --> 05:26:10,160
3.0 is already released to the public.

7962
05:26:10,160 --> 05:26:12,718
That's fine. I tested it out. The whole

7963
05:26:12,718 --> 05:26:15,040
integration is literally the same. They

7964
05:26:15,040 --> 05:26:17,200
just you could say they just updated

7965
05:26:17,200 --> 05:26:19,040
their back end to make everything

7966
05:26:19,040 --> 05:26:22,560
faster. But the integration is the same.

7967
05:26:22,560 --> 05:26:25,200
Everything one to one. This means we can

7968
05:26:25,200 --> 05:26:26,878
head over right here to this quick start

7969
05:26:26,878 --> 05:26:29,040
guide. The first step is to create a

7970
05:26:29,040 --> 05:26:31,600
project. We already did that a few hours

7971
05:26:31,600 --> 05:26:34,160
ago. And the next step is to install the

7972
05:26:34,160 --> 05:26:36,638
uh necessary dependencies. And here they

7973
05:26:36,638 --> 05:26:38,958
say, now that we have a standard boiler

7974
05:26:38,958 --> 05:26:41,680
plate setup, we can get Tiptap up and

7975
05:26:41,680 --> 05:26:43,760
running. For this, we will need to

7976
05:26:43,760 --> 05:26:46,878
install three packages. Tiptap React,

7977
05:26:46,878 --> 05:26:49,840
Tiptap PM, and Tiptap Starter Kit, which

7978
05:26:49,840 --> 05:26:52,480
includes all the extensions you need to

7979
05:26:52,480 --> 05:26:55,600
get started quickly. So, I can copy all

7980
05:26:55,600 --> 05:26:57,920
of these packages. the names. Then I

7981
05:26:57,920 --> 05:27:00,080
will go back. We can open the terminal

7982
05:27:00,080 --> 05:27:03,280
and then we can just run PNPMI and then

7983
05:27:03,280 --> 05:27:05,520
all of these packages again. Tiptap

7984
05:27:05,520 --> 05:27:08,480
React, Tiptap PM and Tiptap starter kit.

7985
05:27:08,480 --> 05:27:10,560
And then the next step is to integrate

7986
05:27:10,560 --> 05:27:13,040
Tiptap. So to start using Tiptap, you

7987
05:27:13,040 --> 05:27:15,440
will need to add a new component to your

7988
05:27:15,440 --> 05:27:18,718
app. So let's do that. We can open our

7989
05:27:18,718 --> 05:27:21,040
explorer. Then if I scroll to the

7990
05:27:21,040 --> 05:27:23,440
bottom, I have my components here. And I

7991
05:27:23,440 --> 05:27:26,000
want to create a new subfolder. This

7992
05:27:26,000 --> 05:27:29,440
will be the rich-ext-editor

7993
05:27:29,440 --> 05:27:31,440
folder. Then in the witch text editor

7994
05:27:31,440 --> 05:27:33,920
folder, I want to create a new file and

7995
05:27:33,920 --> 05:27:36,240
this will be editor.tsx.

7996
05:27:36,240 --> 05:27:38,878
And then in this editor.tsx, we will

7997
05:27:38,878 --> 05:27:41,360
integrate tip tap. So first of all, this

7998
05:27:41,360 --> 05:27:43,520
component uh has to be marked with the

7999
05:27:43,520 --> 05:27:46,320
use client directive because tip tap

8000
05:27:46,320 --> 05:27:49,280
needs a javascript bundle to function.

8001
05:27:49,280 --> 05:27:51,920
Then we want to export function. So

8002
05:27:51,920 --> 05:27:54,240
export function. This will be called

8003
05:27:54,240 --> 05:27:56,638
rich text editor and then I can just

8004
05:27:56,638 --> 05:27:59,360
open this function. So inside of here I

8005
05:27:59,360 --> 05:28:01,360
want to set up tip tap and to be

8006
05:28:01,360 --> 05:28:04,160
specific I want to create an editor

8007
05:28:04,160 --> 05:28:06,320
instance. This means we can create a

8008
05:28:06,320 --> 05:28:08,718
constant called editor and this will be

8009
05:28:08,718 --> 05:28:11,520
equal to use editor. As you see it does

8010
05:28:11,520 --> 05:28:14,480
not import for me automatically sadly.

8011
05:28:14,480 --> 05:28:16,000
This means I will have to do it

8012
05:28:16,000 --> 05:28:18,558
manually. On top I can create an import

8013
05:28:18,558 --> 05:28:20,718
statement. I can destructure it and this

8014
05:28:20,718 --> 05:28:23,760
will be from at tipt tab/react

8015
05:28:23,760 --> 05:28:25,920
then where I structure it I can get the

8016
05:28:25,920 --> 05:28:28,878
use editor hook and then I can invoke it

8017
05:28:28,878 --> 05:28:31,360
and the structured inside of here we

8018
05:28:31,360 --> 05:28:33,840
have to provide one key property and

8019
05:28:33,840 --> 05:28:36,558
that's the extensions array inside of

8020
05:28:36,558 --> 05:28:39,360
here I can define extensions so for

8021
05:28:39,360 --> 05:28:41,360
example if I head over back to the

8022
05:28:41,360 --> 05:28:44,080
documentation we installed a tip tap

8023
05:28:44,080 --> 05:28:47,280
starter kit this is one key extension

8024
05:28:47,280 --> 05:28:50,080
which um allows ows us or which includes

8025
05:28:50,080 --> 05:28:52,160
all the extensions you need to get

8026
05:28:52,160 --> 05:28:54,558
started quickly. So this extension is

8027
05:28:54,558 --> 05:28:56,798
like the base layer. It gives us

8028
05:28:56,798 --> 05:28:59,200
everything we need to get started to

8029
05:28:59,200 --> 05:29:01,760
create a simple rich text editor.

8030
05:29:01,760 --> 05:29:04,080
Nevertheless, we will configure tip tab

8031
05:29:04,080 --> 05:29:06,638
later on even further. We will add more

8032
05:29:06,638 --> 05:29:09,040
extensions. But for now, the starter kit

8033
05:29:09,040 --> 05:29:11,760
is already enough. This means on top I

8034
05:29:11,760 --> 05:29:14,080
can create an import. Uh I want to

8035
05:29:14,080 --> 05:29:17,440
import the starter kit and this will be

8036
05:29:17,440 --> 05:29:20,160
from at tiptap/starter

8037
05:29:20,160 --> 05:29:22,718
kit. Then I can just paste it into this

8038
05:29:22,718 --> 05:29:24,958
array and then we are already finished.

8039
05:29:24,958 --> 05:29:27,120
So right here we created an editor

8040
05:29:27,120 --> 05:29:29,680
instance and it's now time to also

8041
05:29:29,680 --> 05:29:32,638
create the UI. So here's the thing. Um I

8042
05:29:32,638 --> 05:29:34,558
want to create a little diagram. How

8043
05:29:34,558 --> 05:29:36,798
will our rich text editor look like?

8044
05:29:36,798 --> 05:29:40,240
Well, we will have this box, I guess,

8045
05:29:40,240 --> 05:29:43,600
and this box will consist of two parts.

8046
05:29:43,600 --> 05:29:45,600
First of all, something which you call a

8047
05:29:45,600 --> 05:29:47,920
menu bar. In the menu bar, we will

8048
05:29:47,920 --> 05:29:50,400
render multiple buttons. A button, for

8049
05:29:50,400 --> 05:29:53,680
example, to toggle an H1, then a button

8050
05:29:53,680 --> 05:29:56,638
to toggle an H2, a button to toggle the

8051
05:29:56,638 --> 05:29:59,440
alignment, so left or the center or to

8052
05:29:59,440 --> 05:30:01,760
the right, then a button to create an

8053
05:30:01,760 --> 05:30:03,440
underline and stuff like that. That's

8054
05:30:03,440 --> 05:30:05,360
what you call a menu bar. And then

8055
05:30:05,360 --> 05:30:07,520
underneath the menu bar, we will create

8056
05:30:07,520 --> 05:30:09,440
the editor content. And this is like

8057
05:30:09,440 --> 05:30:12,400
this big text editor where the user will

8058
05:30:12,400 --> 05:30:14,638
create his content. So, hey yo, what's

8059
05:30:14,638 --> 05:30:16,558
up? Welcome to my course. Buy it now.

8060
05:30:16,558 --> 05:30:18,878
Super cool content. So, as you see two

8061
05:30:18,878 --> 05:30:21,200
parts, a menu bar and then the editor

8062
05:30:21,200 --> 05:30:23,600
itself. So, I want to start with the

8063
05:30:23,600 --> 05:30:25,840
menu bar which means we can create a

8064
05:30:25,840 --> 05:30:28,320
return statement. I want to return a div

8065
05:30:28,320 --> 05:30:30,400
and then in the div, I want to first of

8066
05:30:30,400 --> 05:30:32,958
all render the menu bar. So I will

8067
05:30:32,958 --> 05:30:35,280
create a separate component for that. So

8068
05:30:35,280 --> 05:30:37,440
in the rich text editor I want to create

8069
05:30:37,440 --> 05:30:40,080
a new file and this will be the menu

8070
05:30:40,080 --> 05:30:43,520
bar.tsx file. Since this is a component

8071
05:30:43,520 --> 05:30:45,920
we can create an export function and

8072
05:30:45,920 --> 05:30:48,480
this will be menu bar. I can then open

8073
05:30:48,480 --> 05:30:50,798
it and inside of here I want to create a

8074
05:30:50,798 --> 05:30:52,798
return statement. And for now I can

8075
05:30:52,798 --> 05:30:56,798
return an H1 which says hello um from

8076
05:30:56,798 --> 05:31:00,160
the menu bar. If I save this and again

8077
05:31:00,160 --> 05:31:02,798
go back, I can just get the menu bar in

8078
05:31:02,798 --> 05:31:06,000
this editor component. So menu bar, my

8079
05:31:06,000 --> 05:31:08,878
god, menu bar. This is self-closing and

8080
05:31:08,878 --> 05:31:11,280
this is finished. So if I save this and

8081
05:31:11,280 --> 05:31:13,920
again go back and do a hard refresh, we

8082
05:31:13,920 --> 05:31:16,400
won't see this rich text editor. That's

8083
05:31:16,400 --> 05:31:18,638
because this editor is not rendered in

8084
05:31:18,638 --> 05:31:21,200
our creation route. Currently, we render

8085
05:31:21,200 --> 05:31:24,080
this uh big text area. I want to change

8086
05:31:24,080 --> 05:31:26,480
that. So uh we have to again scroll to

8087
05:31:26,480 --> 05:31:29,280
the top. Here I have my description. I

8088
05:31:29,280 --> 05:31:31,600
can comment out this text area for now.

8089
05:31:31,600 --> 05:31:34,638
And instead I want to get my editor from

8090
05:31:34,638 --> 05:31:36,958
uh my components or how did I call it?

8091
05:31:36,958 --> 05:31:39,280
Which text editor? Not editor but which

8092
05:31:39,280 --> 05:31:41,520
text editor. And this is imported from

8093
05:31:41,520 --> 05:31:43,920
the components and this is self-closing.

8094
05:31:43,920 --> 05:31:47,680
If I again go back. Yeah, this is very

8095
05:31:47,680 --> 05:31:50,958
beautiful. No, it's not. So we can start

8096
05:31:50,958 --> 05:31:53,680
h get started first of all with our menu

8097
05:31:53,680 --> 05:31:55,680
bar. And here's the thing. The menu bar

8098
05:31:55,680 --> 05:31:58,400
needs the editor instance to function.

8099
05:31:58,400 --> 05:32:00,718
This means I can create an interface on

8100
05:32:00,718 --> 05:32:04,000
the top and so interface and I will call

8101
05:32:04,000 --> 05:32:07,040
it I props because I love the name. I

8102
05:32:07,040 --> 05:32:08,798
don't know why. And inside of here I

8103
05:32:08,798 --> 05:32:11,040
want to get an editor and this editor

8104
05:32:11,040 --> 05:32:13,280
will have a type. The type will be

8105
05:32:13,280 --> 05:32:15,600
editor and this type is imported from

8106
05:32:15,600 --> 05:32:18,798
tip tap react. I can import it. Uh it

8107
05:32:18,798 --> 05:32:20,798
does not do it automatically. So quick

8108
05:32:20,798 --> 05:32:23,200
fix import. And I want you also say

8109
05:32:23,200 --> 05:32:25,840
import type. I don't want to import the

8110
05:32:25,840 --> 05:32:29,120
editor itself but just the type. And the

8111
05:32:29,120 --> 05:32:31,680
thing is this editor could be defined or

8112
05:32:31,680 --> 05:32:33,840
it could be null. That's why I want to

8113
05:32:33,840 --> 05:32:36,240
use this or sign. So either we have an

8114
05:32:36,240 --> 05:32:39,200
editor or we don't pass anything which

8115
05:32:39,200 --> 05:32:41,280
means null. Then I can get this editor

8116
05:32:41,280 --> 05:32:43,680
through my params. So I can destructure

8117
05:32:43,680 --> 05:32:46,080
it. This will be of type I props. And

8118
05:32:46,080 --> 05:32:48,480
then where I destructure it I can get my

8119
05:32:48,480 --> 05:32:51,040
editor. Then above this return statement

8120
05:32:51,040 --> 05:32:53,280
I want to create an if statement. And I

8121
05:32:53,280 --> 05:32:55,920
want to check if we get an editor. This

8122
05:32:55,920 --> 05:32:57,920
means if we don't have an editor, you

8123
05:32:57,920 --> 05:33:00,160
can do that with this exclamation mark.

8124
05:33:00,160 --> 05:33:02,080
Then we will just return null. This

8125
05:33:02,080 --> 05:33:04,798
means we won't return anything. But if

8126
05:33:04,798 --> 05:33:07,280
we have an editor, well then we can

8127
05:33:07,280 --> 05:33:10,000
create this main uh return. So I will

8128
05:33:10,000 --> 05:33:12,558
start off with a new fresh return.

8129
05:33:12,558 --> 05:33:15,120
Inside of here, I want to return a div.

8130
05:33:15,120 --> 05:33:17,360
And then in this div, as mentioned, I

8131
05:33:17,360 --> 05:33:19,520
want to create many buttons to be

8132
05:33:19,520 --> 05:33:23,120
specific many toggles. So inside of here

8133
05:33:23,120 --> 05:33:25,200
I want to first of all get the tool tip

8134
05:33:25,200 --> 05:33:27,440
provider. So it's imported from the

8135
05:33:27,440 --> 05:33:30,240
components. Then I can open it. And what

8136
05:33:30,240 --> 05:33:33,200
exactly is this tool tip provider? So we

8137
05:33:33,200 --> 05:33:35,920
can head over back to the shad CN UI

8138
05:33:35,920 --> 05:33:38,480
website. And if I search for tool tip

8139
05:33:38,480 --> 05:33:41,040
then you will find this section. So tool

8140
05:33:41,040 --> 05:33:43,760
tip a pop-up that displays information

8141
05:33:43,760 --> 05:33:45,920
related to an element when the element

8142
05:33:45,920 --> 05:33:48,480
receives keyboard focus or the mouse

8143
05:33:48,480 --> 05:33:51,280
hovers over it. So later on as mentioned

8144
05:33:51,280 --> 05:33:53,760
we will display multiple buttons. H1,

8145
05:33:53,760 --> 05:33:57,520
H2, H3, uh center, alignment, stuff like

8146
05:33:57,520 --> 05:33:59,760
that. But these are just icons. They

8147
05:33:59,760 --> 05:34:01,840
won't have any text. So the button won't

8148
05:34:01,840 --> 05:34:04,320
display any text. It will only display

8149
05:34:04,320 --> 05:34:06,400
icons. And to give the user more

8150
05:34:06,400 --> 05:34:08,798
information, I want to render a tool tip

8151
05:34:08,798 --> 05:34:10,718
so that if the user hovers over this

8152
05:34:10,718 --> 05:34:12,798
button, there will be a text which will

8153
05:34:12,798 --> 05:34:16,638
say H1 or text center or text left and

8154
05:34:16,638 --> 05:34:18,718
stuff like that. That's why we have to

8155
05:34:18,718 --> 05:34:20,480
or I want to use the tool tip. This

8156
05:34:20,480 --> 05:34:22,718
means I can go back and then in the tool

8157
05:34:22,718 --> 05:34:25,920
tip provider I want to create a diff and

8158
05:34:25,920 --> 05:34:28,958
in this div I want to get my tool tip.

8159
05:34:28,958 --> 05:34:31,120
This tool tip is imported from the

8160
05:34:31,120 --> 05:34:33,360
components and then in the tool tip I

8161
05:34:33,360 --> 05:34:35,760
want to get a tool tip trigger. So this

8162
05:34:35,760 --> 05:34:38,400
is what the user will click tool tip

8163
05:34:38,400 --> 05:34:40,400
trigger. This is imported from the

8164
05:34:40,400 --> 05:34:42,400
components and then in the tool tip

8165
05:34:42,400 --> 05:34:44,638
trigger I want to create a toggle or

8166
05:34:44,638 --> 05:34:46,798
render a toggle. So again we can head

8167
05:34:46,798 --> 05:34:49,680
over to SH CN UI and if you search for

8168
05:34:49,680 --> 05:34:52,240
toggle then you will find this. So a

8169
05:34:52,240 --> 05:34:55,040
toggle is a two-state button that can be

8170
05:34:55,040 --> 05:34:58,638
the uh can be either on or off. So if I

8171
05:34:58,638 --> 05:35:00,718
click on this button then the toggle is

8172
05:35:00,718 --> 05:35:03,200
on. If I again click on it then it's

8173
05:35:03,200 --> 05:35:05,200
off. So the reason why we will use this

8174
05:35:05,200 --> 05:35:08,240
toggle is because if a user for example

8175
05:35:08,240 --> 05:35:11,280
selects H1 so this button then I want to

8176
05:35:11,280 --> 05:35:13,600
show this active state and a toggle

8177
05:35:13,600 --> 05:35:15,840
works great for that. A button could

8178
05:35:15,840 --> 05:35:17,760
also do the same thing. We could also

8179
05:35:17,760 --> 05:35:20,558
showcase an active state, but it's just

8180
05:35:20,558 --> 05:35:22,798
easier to create with this toggle and

8181
05:35:22,798 --> 05:35:25,360
that's why I will use it. So I can go

8182
05:35:25,360 --> 05:35:27,840
back and then in the tool tip trigger I

8183
05:35:27,840 --> 05:35:29,920
want to get the toggle component from

8184
05:35:29,920 --> 05:35:32,558
the components. Also since this is a

8185
05:35:32,558 --> 05:35:34,878
component in the tool uh tool tip

8186
05:35:34,878 --> 05:35:37,600
trigger I have to also give it an as

8187
05:35:37,600 --> 05:35:40,638
child property. So an as child property

8188
05:35:40,638 --> 05:35:43,360
for the tool tip trigger and then I in

8189
05:35:43,360 --> 05:35:46,400
the toggle itself I want to render the

8190
05:35:46,400 --> 05:35:48,878
bolt icon. The bolt icon is imported

8191
05:35:48,878 --> 05:35:51,760
from Lucid React and it's self-closing.

8192
05:35:51,760 --> 05:35:54,000
And then we can also test it out. So if

8193
05:35:54,000 --> 05:35:56,480
I go back, huh, where's my toggle? I

8194
05:35:56,480 --> 05:35:58,638
don't see anything. There's just this

8195
05:35:58,638 --> 05:36:01,120
label. What's the problem? Well, again,

8196
05:36:01,120 --> 05:36:03,520
right here, we created an if statement.

8197
05:36:03,520 --> 05:36:05,920
If we don't get an editor, then we don't

8198
05:36:05,920 --> 05:36:08,400
return anything. And if I go to my

8199
05:36:08,400 --> 05:36:10,400
editor, I have to pass this editor

8200
05:36:10,400 --> 05:36:13,520
instance for my or to my menu bar. This

8201
05:36:13,520 --> 05:36:15,360
means in my menu bar, I can click on

8202
05:36:15,360 --> 05:36:18,000
control spacebar. I get the editor prop

8203
05:36:18,000 --> 05:36:20,320
and this will be equal to the editor.

8204
05:36:20,320 --> 05:36:22,240
This means if I go back to the menu bar,

8205
05:36:22,240 --> 05:36:24,638
there's no error here. And if I go back,

8206
05:36:24,638 --> 05:36:26,558
you will see this toggle. And if I click

8207
05:36:26,558 --> 05:36:28,480
on the toggle, nothing happens. But

8208
05:36:28,480 --> 05:36:30,878
that's because we have to control it. So

8209
05:36:30,878 --> 05:36:33,120
I can go back and I want to update this

8210
05:36:33,120 --> 05:36:35,120
toggle. First of all, I want to give it

8211
05:36:35,120 --> 05:36:37,600
a size property. I want this toggle to

8212
05:36:37,600 --> 05:36:41,200
be small. So the size will be SM. Then I

8213
05:36:41,200 --> 05:36:43,280
have to use two properties again. I want

8214
05:36:43,280 --> 05:36:45,200
to control it. This means this will be

8215
05:36:45,200 --> 05:36:47,600
the pressed property. And then also the

8216
05:36:47,600 --> 05:36:50,240
unpressed change. For the pressed this

8217
05:36:50,240 --> 05:36:53,840
will be equal to editor do is active and

8218
05:36:53,840 --> 05:36:56,320
this is active is a function which we

8219
05:36:56,320 --> 05:36:58,718
have to invoke and I want to check for

8220
05:36:58,718 --> 05:37:01,680
the bold state. So pressed will be true

8221
05:37:01,680 --> 05:37:04,480
if bold is active. So at the end of the

8222
05:37:04,480 --> 05:37:06,798
day again this editor is our editor

8223
05:37:06,798 --> 05:37:10,160
instance and we check if bold is active.

8224
05:37:10,160 --> 05:37:12,878
If so this will return as true which

8225
05:37:12,878 --> 05:37:15,440
means pressed will be true. And then of

8226
05:37:15,440 --> 05:37:17,600
course since this is a controlled input

8227
05:37:17,600 --> 05:37:20,240
we have to also listen for the on press

8228
05:37:20,240 --> 05:37:22,558
change because we want to then update

8229
05:37:22,558 --> 05:37:25,440
our state our editor instance. So this

8230
05:37:25,440 --> 05:37:27,760
is an inline callback function and then

8231
05:37:27,760 --> 05:37:30,080
I want to get my editor. I want to call

8232
05:37:30,080 --> 05:37:32,798
the chain method. I can invoke it. Then

8233
05:37:32,798 --> 05:37:35,040
I want to get the focus method. I want

8234
05:37:35,040 --> 05:37:37,040
to invoke it. And then I want to call

8235
05:37:37,040 --> 05:37:39,600
the toggle bolt method because we want

8236
05:37:39,600 --> 05:37:42,160
to toggle bolt. Again, we can invoke it.

8237
05:37:42,160 --> 05:37:44,160
And then it's very important that you

8238
05:37:44,160 --> 05:37:46,320
call the run method at the end because

8239
05:37:46,320 --> 05:37:49,120
without the run method, this won't run.

8240
05:37:49,120 --> 05:37:51,120
Who would have thought? So if I save

8241
05:37:51,120 --> 05:37:53,440
this and go back, you will see for now

8242
05:37:53,440 --> 05:37:55,920
nothing really changes. So I can go back

8243
05:37:55,920 --> 05:37:58,320
and then I want to also add a class

8244
05:37:58,320 --> 05:38:00,638
name. So for the toggle I can create a

8245
05:38:00,638 --> 05:38:03,360
class name and then uh I want to get the

8246
05:38:03,360 --> 05:38:05,760
CN helper function because I want to

8247
05:38:05,760 --> 05:38:08,558
create dynamic styles and we can invoke

8248
05:38:08,558 --> 05:38:10,878
it and inside of here I want to create a

8249
05:38:10,878 --> 05:38:13,600
turnary pretty much. So if this editor

8250
05:38:13,600 --> 05:38:16,400
is active is true then I want to change

8251
05:38:16,400 --> 05:38:18,958
the background color and the text color.

8252
05:38:18,958 --> 05:38:21,200
So we can say if or I can just copy it.

8253
05:38:21,200 --> 05:38:23,520
this editor is active bold. I will copy

8254
05:38:23,520 --> 05:38:25,920
it, paste it inside of here. And if it's

8255
05:38:25,920 --> 05:38:27,920
true, then we can use this double and

8256
05:38:27,920 --> 05:38:30,718
sign. And I want to render BG muted for

8257
05:38:30,718 --> 05:38:33,680
the background color and text muted

8258
05:38:33,680 --> 05:38:36,080
foreground so that the text color is a

8259
05:38:36,080 --> 05:38:38,240
bit more grayish. This means if we again

8260
05:38:38,240 --> 05:38:41,200
go back, you will now see this toggle is

8261
05:38:41,200 --> 05:38:43,440
active. We have a background color and

8262
05:38:43,440 --> 05:38:46,400
the icon is also muted. If I again click

8263
05:38:46,400 --> 05:38:48,798
on the toggle, this active state is

8264
05:38:48,798 --> 05:38:51,680
removed. So this works exactly as

8265
05:38:51,680 --> 05:38:53,840
expected. But as mentioned, I want to

8266
05:38:53,840 --> 05:38:56,400
also implement this tool tip. Currently,

8267
05:38:56,400 --> 05:38:59,440
if I hover over this uh button, nothing

8268
05:38:59,440 --> 05:39:01,840
happens. This means we can go back and

8269
05:39:01,840 --> 05:39:03,840
we want to go underneath the tool tip

8270
05:39:03,840 --> 05:39:06,080
trigger because we defined the tool tip

8271
05:39:06,080 --> 05:39:08,320
trigger and we want to get the tool tip

8272
05:39:08,320 --> 05:39:10,400
content. So underneath the tool tip

8273
05:39:10,400 --> 05:39:12,400
trigger, I want to get the tool tip

8274
05:39:12,400 --> 05:39:15,040
content component which is imported from

8275
05:39:15,040 --> 05:39:17,120
the components. And inside of here, I

8276
05:39:17,120 --> 05:39:19,360
want to say bold because if the user

8277
05:39:19,360 --> 05:39:21,600
clicks on the button, I will showcase a

8278
05:39:21,600 --> 05:39:24,160
bold state. So if I go back and hover

8279
05:39:24,160 --> 05:39:27,120
over it, you see on the top corner bold.

8280
05:39:27,120 --> 05:39:29,440
In theory, you could also add a delay

8281
05:39:29,440 --> 05:39:31,440
and stuff like that. You can configure

8282
05:39:31,440 --> 05:39:33,680
this tool tip, but honestly, I think it

8283
05:39:33,680 --> 05:39:36,160
looks beautiful and I will leave it as

8284
05:39:36,160 --> 05:39:38,878
is. So what's the next toggle which I

8285
05:39:38,878 --> 05:39:40,480
want to render? Well, this will be

8286
05:39:40,480 --> 05:39:42,958
itallic. This means we can go back and

8287
05:39:42,958 --> 05:39:45,440
what we can do is just copy this tool

8288
05:39:45,440 --> 05:39:47,920
tip which we just created and I will

8289
05:39:47,920 --> 05:39:50,240
paste it down below. Please make sure

8290
05:39:50,240 --> 05:39:52,480
that it's pasted in the div. So we have

8291
05:39:52,480 --> 05:39:54,480
a diff and the tool tip provider

8292
05:39:54,480 --> 05:39:57,040
underneath this new tool tip. So tool

8293
05:39:57,040 --> 05:39:58,958
tip is fine, tool tip trigger is fine,

8294
05:39:58,958 --> 05:40:01,680
toggle is fine, size is fine for the

8295
05:40:01,680 --> 05:40:03,840
pressed property. We don't want you uh

8296
05:40:03,840 --> 05:40:07,360
listen for bold but instead for itallic.

8297
05:40:07,360 --> 05:40:09,040
As you see, we don't get any type

8298
05:40:09,040 --> 05:40:10,958
safety. So please make sure that you

8299
05:40:10,958 --> 05:40:13,840
spell it correctly. Also I don't want to

8300
05:40:13,840 --> 05:40:17,920
toggle bold but instead toggle itallic.

8301
05:40:17,920 --> 05:40:20,000
Also for the class name instead of

8302
05:40:20,000 --> 05:40:22,240
listening for the bold state we want to

8303
05:40:22,240 --> 05:40:24,718
listen for the italic state. Then for

8304
05:40:24,718 --> 05:40:27,280
the icon instead of bold I want to get

8305
05:40:27,280 --> 05:40:30,160
the italic icon from lucid react. And

8306
05:40:30,160 --> 05:40:32,320
then for the tool tip content this will

8307
05:40:32,320 --> 05:40:35,360
also be itallic. As you see this looks

8308
05:40:35,360 --> 05:40:38,000
quite good. Then what's the next toggle

8309
05:40:38,000 --> 05:40:39,680
which I want to render? Well, this is

8310
05:40:39,680 --> 05:40:42,718
the strike uh toggle. This means I will

8311
05:40:42,718 --> 05:40:44,958
again copy this tool tip. I will paste

8312
05:40:44,958 --> 05:40:46,798
it down below and then we can again

8313
05:40:46,798 --> 05:40:49,520
update it. So the size is fine for

8314
05:40:49,520 --> 05:40:51,360
pressed. Instead of listening for

8315
05:40:51,360 --> 05:40:54,080
italic, I want to listen for strike.

8316
05:40:54,080 --> 05:40:56,240
Then for the on pressed change, instead

8317
05:40:56,240 --> 05:40:59,120
of toggling itallic, I want to toggle

8318
05:40:59,120 --> 05:41:01,760
strike. Then for the class name, instead

8319
05:41:01,760 --> 05:41:04,400
of uh checking for italic, we want to

8320
05:41:04,400 --> 05:41:07,040
check or listen for strike. And instead

8321
05:41:07,040 --> 05:41:09,520
of rendering the itallic icon, we will

8322
05:41:09,520 --> 05:41:12,400
render the strike through icon imported

8323
05:41:12,400 --> 05:41:14,878
from Lucid React. And for the tool tip

8324
05:41:14,878 --> 05:41:17,520
content, this will be strike. So these

8325
05:41:17,520 --> 05:41:20,000
are already three toggles. As the next

8326
05:41:20,000 --> 05:41:21,680
step, I want to create the headings.

8327
05:41:21,680 --> 05:41:26,480
This means H1, H2, and I think also H3.

8328
05:41:26,480 --> 05:41:28,480
This means we can again copy this tool

8329
05:41:28,480 --> 05:41:31,200
tip. I will copy it and paste it down

8330
05:41:31,200 --> 05:41:33,840
below. Then for the toggle, the size is

8331
05:41:33,840 --> 05:41:35,760
fine. for pressed. I don't want to

8332
05:41:35,760 --> 05:41:37,760
listen for the strike anymore, but

8333
05:41:37,760 --> 05:41:40,400
instead for a heading. So, I can delete

8334
05:41:40,400 --> 05:41:42,558
strike. I will say heading. And here's

8335
05:41:42,558 --> 05:41:44,400
the thing. There's not only one heading,

8336
05:41:44,400 --> 05:41:47,120
but we have multiple headings. Level

8337
05:41:47,120 --> 05:41:50,798
one. This means H1, level two, H2, level

8338
05:41:50,798 --> 05:41:53,840
three, H3, and more. This means we can

8339
05:41:53,840 --> 05:41:57,040
add a comma, open an object, and pass a

8340
05:41:57,040 --> 05:41:59,200
level right here. And this will be one

8341
05:41:59,200 --> 05:42:01,360
because I want to listen for the heading

8342
05:42:01,360 --> 05:42:04,480
one H1. For the on press change instead

8343
05:42:04,480 --> 05:42:06,638
of toggle strike I want to use the

8344
05:42:06,638 --> 05:42:09,680
toggle heading method. So toggle heading

8345
05:42:09,680 --> 05:42:11,760
I can invoke it and then I can the

8346
05:42:11,760 --> 05:42:14,160
structure inside of here I have to pass

8347
05:42:14,160 --> 05:42:16,320
the level and the level will be one

8348
05:42:16,320 --> 05:42:19,600
again H1. And then for the class name I

8349
05:42:19,600 --> 05:42:22,240
can just copy this code and paste it for

8350
05:42:22,240 --> 05:42:24,480
the class name.

8351
05:42:24,480 --> 05:42:26,638
And then instead of rendering the strike

8352
05:42:26,638 --> 05:42:28,958
through icon, we can render the heading

8353
05:42:28,958 --> 05:42:31,840
one icon imported from Lucid React. And

8354
05:42:31,840 --> 05:42:33,840
for the tool tip I will say or for the

8355
05:42:33,840 --> 05:42:36,400
tool tip content, I will say heading

8356
05:42:36,400 --> 05:42:39,360
one. So if I again go back, you will see

8357
05:42:39,360 --> 05:42:41,680
yeah this looks absolutely beautiful.

8358
05:42:41,680 --> 05:42:44,400
Also currently the gap is horrendously

8359
05:42:44,400 --> 05:42:46,958
bad. Don't worry, I will fix that later

8360
05:42:46,958 --> 05:42:49,680
on. For now, this is fine enough. So as

8361
05:42:49,680 --> 05:42:51,280
the next step, I want to render the

8362
05:42:51,280 --> 05:42:53,280
heading too. This means we can copy this

8363
05:42:53,280 --> 05:42:55,680
tool tip, paste it down below and then

8364
05:42:55,680 --> 05:42:58,320
we can update it. So size is fine. For

8365
05:42:58,320 --> 05:43:00,558
pressed this will be level two. For the

8366
05:43:00,558 --> 05:43:03,120
unpressed change this will be level two.

8367
05:43:03,120 --> 05:43:04,958
Then for the class name this will be

8368
05:43:04,958 --> 05:43:07,120
level two. And then for the heading or

8369
05:43:07,120 --> 05:43:09,280
for the icon this will be the heading

8370
05:43:09,280 --> 05:43:12,000
two icon. This time also imported from

8371
05:43:12,000 --> 05:43:15,040
lucid react. And for the tool tip

8372
05:43:15,040 --> 05:43:17,600
content this will also be heading two.

8373
05:43:17,600 --> 05:43:19,600
Then I want to render one more heading.

8374
05:43:19,600 --> 05:43:21,840
This will be heading three. This means I

8375
05:43:21,840 --> 05:43:23,920
can copy this tool tip, paste it down

8376
05:43:23,920 --> 05:43:26,400
below and then we can update the um

8377
05:43:26,400 --> 05:43:28,878
levels. So this will be level three.

8378
05:43:28,878 --> 05:43:31,120
This will be level three. Then this will

8379
05:43:31,120 --> 05:43:33,760
be level four. No, I'm joking. Level

8380
05:43:33,760 --> 05:43:35,600
three. For the icon, this will be

8381
05:43:35,600 --> 05:43:38,080
heading three icon. And then for the

8382
05:43:38,080 --> 05:43:40,320
tool tip content, this will be heading

8383
05:43:40,320 --> 05:43:43,280
five. No, heading three. So we have now

8384
05:43:43,280 --> 05:43:45,600
in total three headings. And as the next

8385
05:43:45,600 --> 05:43:47,680
step, I want to render a tool tip or a

8386
05:43:47,680 --> 05:43:50,480
button for a bullet list icon. This

8387
05:43:50,480 --> 05:43:52,718
means I can again copy this tool tip. I

8388
05:43:52,718 --> 05:43:54,798
want to paste it down below. And let's

8389
05:43:54,798 --> 05:43:57,760
start with the pressed um property. So I

8390
05:43:57,760 --> 05:43:59,840
don't want to uh listen anymore for a

8391
05:43:59,840 --> 05:44:02,320
heading but instead for a bullet list.

8392
05:44:02,320 --> 05:44:04,160
So I will remove this heading and

8393
05:44:04,160 --> 05:44:07,200
instead say bullet list. Again please

8394
05:44:07,200 --> 05:44:09,040
make sure that you don't misspell it.

8395
05:44:09,040 --> 05:44:11,680
And also bullet and then this L will be

8396
05:44:11,680 --> 05:44:14,558
uppercase. So bullet lowerase and then L

8397
05:44:14,558 --> 05:44:18,240
uppercased and then ST. So then for the

8398
05:44:18,240 --> 05:44:20,400
on press change instead of calling

8399
05:44:20,400 --> 05:44:22,878
toggle heading I want to instead call

8400
05:44:22,878 --> 05:44:25,760
toggle uh bullet list again we can

8401
05:44:25,760 --> 05:44:28,080
invoke it. Then for the class name I

8402
05:44:28,080 --> 05:44:30,160
want to copy bullet list and also paste

8403
05:44:30,160 --> 05:44:32,958
it inside of here. For the icon I want

8404
05:44:32,958 --> 05:44:35,120
to get the list icon. List icon is

8405
05:44:35,120 --> 05:44:37,440
imported from lucid react. And for the

8406
05:44:37,440 --> 05:44:39,920
tool tip content this will be also

8407
05:44:39,920 --> 05:44:42,958
bullet list. As you see, I get one error

8408
05:44:42,958 --> 05:44:45,040
for the class name and that's because I

8409
05:44:45,040 --> 05:44:46,558
have to of course render this in

8410
05:44:46,558 --> 05:44:49,200
strings. This means if I again go back,

8411
05:44:49,200 --> 05:44:51,360
I will get my bullet list right here.

8412
05:44:51,360 --> 05:44:53,440
And if I click on it, it's now active

8413
05:44:53,440 --> 05:44:56,080
and it works and looks beautiful. Then I

8414
05:44:56,080 --> 05:44:58,558
want to also create a button for the

8415
05:44:58,558 --> 05:45:00,160
ordered list. This means this is a

8416
05:45:00,160 --> 05:45:02,320
bullet list with dots and I want to

8417
05:45:02,320 --> 05:45:04,160
create an ordered list with these

8418
05:45:04,160 --> 05:45:07,280
numbers. So 1 2 3 and stuff like that.

8419
05:45:07,280 --> 05:45:09,520
This means we can go back. I will copy

8420
05:45:09,520 --> 05:45:11,600
this tool tip. I will paste it down

8421
05:45:11,600 --> 05:45:14,320
below again. And we want to first of all

8422
05:45:14,320 --> 05:45:16,798
update the pressed state. So instead of

8423
05:45:16,798 --> 05:45:18,878
listening for the bullet list, we will

8424
05:45:18,878 --> 05:45:21,760
listen for the order list. And again

8425
05:45:21,760 --> 05:45:24,000
ordered will be lowercased and then this

8426
05:45:24,000 --> 05:45:27,120
L will be uppercased. Ordered list. For

8427
05:45:27,120 --> 05:45:29,440
the on press change, we want to toggle

8428
05:45:29,440 --> 05:45:32,000
the ordered list method. So toggle

8429
05:45:32,000 --> 05:45:34,878
ordered list. Then for this class name

8430
05:45:34,878 --> 05:45:37,360
again we want to listen for the ordered

8431
05:45:37,360 --> 05:45:39,760
list. And then for the icon instead of

8432
05:45:39,760 --> 05:45:42,718
list icon this will be list order icon

8433
05:45:42,718 --> 05:45:45,120
imported from lucid react. And for the

8434
05:45:45,120 --> 05:45:47,680
tooltip content this will be ordered

8435
05:45:47,680 --> 05:45:49,760
list. So we are actually finished with

8436
05:45:49,760 --> 05:45:51,920
the basic buttons. So we have a bold

8437
05:45:51,920 --> 05:45:54,638
icon an italic button this strike button

8438
05:45:54,638 --> 05:45:58,878
h1 h2 h3 ordered list bullet list. It

8439
05:45:58,878 --> 05:46:00,718
looks great. But now I want to also

8440
05:46:00,718 --> 05:46:02,878
create buttons so that the user can

8441
05:46:02,878 --> 05:46:06,080
align his text. This means left, center

8442
05:46:06,080 --> 05:46:09,040
and right. So we can go back and then I

8443
05:46:09,040 --> 05:46:10,958
want to go underneath this div. So

8444
05:46:10,958 --> 05:46:12,400
underneath the tool tip and then

8445
05:46:12,400 --> 05:46:14,480
underneath this div and I want to create

8446
05:46:14,480 --> 05:46:16,480
another div. This div will be a

8447
05:46:16,480 --> 05:46:18,400
separator. This means we can give this

8448
05:46:18,400 --> 05:46:20,958
div a class name and this will be width

8449
05:46:20,958 --> 05:46:25,040
px. This means width 1 pixel height six

8450
05:46:25,040 --> 05:46:27,680
bg which will be border and then also

8451
05:46:27,680 --> 05:46:30,480
margin x2. This means if you again go

8452
05:46:30,480 --> 05:46:32,958
back then you will see this very light

8453
05:46:32,958 --> 05:46:35,600
border. But this kind of looks weird.

8454
05:46:35,600 --> 05:46:38,718
It's aligned um vertically as a column

8455
05:46:38,718 --> 05:46:40,878
but it should be aligned horizontally.

8456
05:46:40,878 --> 05:46:43,520
This means if we again go back how is

8457
05:46:43,520 --> 05:46:45,200
this created? We have a tool tip

8458
05:46:45,200 --> 05:46:47,440
provider and with what is everything

8459
05:46:47,440 --> 05:46:49,920
wrapped? Well, we have one main div.

8460
05:46:49,920 --> 05:46:52,080
This means I can update this div and

8461
05:46:52,080 --> 05:46:54,480
give it a class name or align it

8462
05:46:54,480 --> 05:46:56,878
horizontally. So for this div I can give

8463
05:46:56,878 --> 05:46:59,680
it a class name. This will be border

8464
05:46:59,680 --> 05:47:02,558
then border which will be input rounded

8465
05:47:02,558 --> 05:47:05,360
top which will be LG padding which will

8466
05:47:05,360 --> 05:47:09,520
be two bg card flex flex wrap. So if

8467
05:47:09,520 --> 05:47:12,160
there's no space horizontally anymore we

8468
05:47:12,160 --> 05:47:15,280
will wrap the children then also gap one

8469
05:47:15,280 --> 05:47:18,000
to have some spacing and items which

8470
05:47:18,000 --> 05:47:20,798
will be center. So as you see if I again

8471
05:47:20,798 --> 05:47:23,120
go back this is now aligned horizontally

8472
05:47:23,120 --> 05:47:24,878
and this already looks way better.

8473
05:47:24,878 --> 05:47:27,120
Nevertheless, this section, so again, if

8474
05:47:27,120 --> 05:47:30,080
I get uh my handy little line tool, this

8475
05:47:30,080 --> 05:47:32,480
section is too close to each other. I

8476
05:47:32,480 --> 05:47:35,040
want to also create a gap. This means we

8477
05:47:35,040 --> 05:47:37,440
can go back and this diff wraps all of

8478
05:47:37,440 --> 05:47:40,080
our tool tips. So I can give it a class

8479
05:47:40,080 --> 05:47:42,718
name and this will be also flex flex

8480
05:47:42,718 --> 05:47:44,718
wrap. So if there's no space, we will

8481
05:47:44,718 --> 05:47:47,600
wrap the children and then also gap one.

8482
05:47:47,600 --> 05:47:50,160
So if I again go back, yes, this looks

8483
05:47:50,160 --> 05:47:52,160
absolutely beautiful. So we have

8484
05:47:52,160 --> 05:47:53,760
finished with this side. We have a nice

8485
05:47:53,760 --> 05:47:56,080
separator and then we can continue with

8486
05:47:56,080 --> 05:47:58,320
the next section again the left

8487
05:47:58,320 --> 05:48:00,718
alignment, center alignment and right

8488
05:48:00,718 --> 05:48:02,878
alignment. So I want to go underneath

8489
05:48:02,878 --> 05:48:05,360
this div separator and I want to create

8490
05:48:05,360 --> 05:48:07,920
another div element. So since this will

8491
05:48:07,920 --> 05:48:11,600
again be a layout div. This means inside

8492
05:48:11,600 --> 05:48:13,600
of this div we will render or create

8493
05:48:13,600 --> 05:48:15,840
three buttons. We can give it a class

8494
05:48:15,840 --> 05:48:18,958
name which will also be flex flex wrap

8495
05:48:18,958 --> 05:48:21,840
and then gap one. inside of here. I want

8496
05:48:21,840 --> 05:48:23,840
to then create again my tool tip. This

8497
05:48:23,840 --> 05:48:25,840
means I can just copy the tool tip and

8498
05:48:25,840 --> 05:48:28,160
paste it inside of here. And we want to

8499
05:48:28,160 --> 05:48:30,558
again update our pressed state our on

8500
05:48:30,558 --> 05:48:33,200
press change uh function and stuff like

8501
05:48:33,200 --> 05:48:35,280
that. So this will be for the text

8502
05:48:35,280 --> 05:48:37,680
alignment to the left side. This means

8503
05:48:37,680 --> 05:48:39,360
for the press change instead of

8504
05:48:39,360 --> 05:48:41,760
listening for ordered list we want to

8505
05:48:41,760 --> 05:48:44,000
listen for text align. This means

8506
05:48:44,000 --> 05:48:46,240
instead of uh having strings right here

8507
05:48:46,240 --> 05:48:48,558
we can destructure it and we can get

8508
05:48:48,558 --> 05:48:51,120
text align. And then this will be equal

8509
05:48:51,120 --> 05:48:54,080
to left. For the on pressed change, I

8510
05:48:54,080 --> 05:48:56,240
don't want to toggle order list but

8511
05:48:56,240 --> 05:48:59,280
instead set text align. But I don't get

8512
05:48:59,280 --> 05:49:01,440
this method. What's the problem? Well,

8513
05:49:01,440 --> 05:49:03,760
as mentioned, if we go to the editor for

8514
05:49:03,760 --> 05:49:05,840
the extensions, we currently provide the

8515
05:49:05,840 --> 05:49:08,240
starter kit. The starter kit is a nice

8516
05:49:08,240 --> 05:49:11,760
starting point, but it does not give us

8517
05:49:11,760 --> 05:49:14,400
a lot. I mean, it g it gives us the base

8518
05:49:14,400 --> 05:49:17,840
functionality. So again H1 H2 this bold

8519
05:49:17,840 --> 05:49:19,600
state it gives us this base

8520
05:49:19,600 --> 05:49:22,000
functionality but it does not allow us

8521
05:49:22,000 --> 05:49:24,480
for example to configure this text

8522
05:49:24,480 --> 05:49:27,440
alignment. This is a new extension which

8523
05:49:27,440 --> 05:49:30,320
we will have to use. So we can head over

8524
05:49:30,320 --> 05:49:32,718
back to the documentation and inside of

8525
05:49:32,718 --> 05:49:35,120
here we can search for text align. Here

8526
05:49:35,120 --> 05:49:37,520
you will find the text align extension

8527
05:49:37,520 --> 05:49:40,080
and as you will see this extension adds

8528
05:49:40,080 --> 05:49:42,958
a text align attribute to a specified

8529
05:49:42,958 --> 05:49:45,840
list of nodes. The attribute is used to

8530
05:49:45,840 --> 05:49:49,440
align the text left center right. This

8531
05:49:49,440 --> 05:49:51,120
means we want to first of all install

8532
05:49:51,120 --> 05:49:53,760
this extension. I can copy the name and

8533
05:49:53,760 --> 05:49:55,760
then in my terminal I will stop my dev

8534
05:49:55,760 --> 05:49:58,400
server and then I will just install it.

8535
05:49:58,400 --> 05:50:00,718
Once installed we can restart our dev

8536
05:50:00,718 --> 05:50:03,120
server and then we want to first of all

8537
05:50:03,120 --> 05:50:05,920
import this extension. This means what I

8538
05:50:05,920 --> 05:50:08,718
will do is just go back into my editor

8539
05:50:08,718 --> 05:50:10,958
create an import statement. This will be

8540
05:50:10,958 --> 05:50:13,600
text align and this will be imported

8541
05:50:13,600 --> 05:50:17,360
from at tip tab extension text align.

8542
05:50:17,360 --> 05:50:20,000
Then in my extensions array I can add a

8543
05:50:20,000 --> 05:50:22,558
comma and I want to get my text align

8544
05:50:22,558 --> 05:50:25,280
extension which I just imported. So I

8545
05:50:25,280 --> 05:50:27,200
will paste it right here. And then I

8546
05:50:27,200 --> 05:50:29,600
want to also configure it. So I can use

8547
05:50:29,600 --> 05:50:32,080
this configure function. I want to

8548
05:50:32,080 --> 05:50:34,400
invoke it the structured. And inside of

8549
05:50:34,400 --> 05:50:37,040
here we have to provide types. So the

8550
05:50:37,040 --> 05:50:39,920
types where the text align attribute can

8551
05:50:39,920 --> 05:50:42,558
be applied. This types will be equal to

8552
05:50:42,558 --> 05:50:44,878
an array. And we want to apply text

8553
05:50:44,878 --> 05:50:48,160
align to our heading and then also to a

8554
05:50:48,160 --> 05:50:51,200
paragraph. So heading, and then

8555
05:50:51,200 --> 05:50:53,520
paragraph. This means we will apply it

8556
05:50:53,520 --> 05:50:56,480
to any text style. If the user selects

8557
05:50:56,480 --> 05:50:59,280
H1 or this H1 right here, then we will

8558
05:50:59,280 --> 05:51:01,840
still allow the user to align the text.

8559
05:51:01,840 --> 05:51:04,080
If the user does not select any heading,

8560
05:51:04,080 --> 05:51:06,080
then we will still allow the user to

8561
05:51:06,080 --> 05:51:08,240
align the text because this means then

8562
05:51:08,240 --> 05:51:11,040
that the input will be a paragraph. So

8563
05:51:11,040 --> 05:51:13,520
this is now finished. We aligned or we

8564
05:51:13,520 --> 05:51:16,080
configured text align which means if I

8565
05:51:16,080 --> 05:51:19,040
go back to my menu bar in theory I

8566
05:51:19,040 --> 05:51:21,760
should then also get a set text align

8567
05:51:21,760 --> 05:51:24,240
method. And that's exactly what I get.

8568
05:51:24,240 --> 05:51:26,558
And as you see I get an error. What's

8569
05:51:26,558 --> 05:51:29,440
the problem? Expected one argument but

8570
05:51:29,440 --> 05:51:32,320
got zero. What argument did it expect?

8571
05:51:32,320 --> 05:51:34,558
Well, it expected an argument for

8572
05:51:34,558 --> 05:51:36,798
alignment. And in this case, I want to

8573
05:51:36,798 --> 05:51:38,958
align the text to the left side. This

8574
05:51:38,958 --> 05:51:41,440
means I will say left. We want to still

8575
05:51:41,440 --> 05:51:43,360
call the one method. And then this is

8576
05:51:43,360 --> 05:51:45,520
already finished. Then we can update the

8577
05:51:45,520 --> 05:51:47,600
class name. This means I can just copy

8578
05:51:47,600 --> 05:51:49,760
this text align left the destruct

8579
05:51:49,760 --> 05:51:51,920
showing and I will paste it inside of

8580
05:51:51,920 --> 05:51:54,240
here. Then instead of rendering the list

8581
05:51:54,240 --> 05:51:56,798
order icon, we want to get the align

8582
05:51:56,798 --> 05:51:59,440
left icon from Lucid React. And instead

8583
05:51:59,440 --> 05:52:02,718
of saying all list, we want to say align

8584
05:52:02,718 --> 05:52:04,798
left. And then we can again copy this

8585
05:52:04,798 --> 05:52:06,958
tool tip, paste it down below. And this

8586
05:52:06,958 --> 05:52:09,280
will be for the alignment to the center.

8587
05:52:09,280 --> 05:52:11,360
This means for text align, this will be

8588
05:52:11,360 --> 05:52:13,840
center. For the on press change, this

8589
05:52:13,840 --> 05:52:16,558
will be center. Um I can also just copy

8590
05:52:16,558 --> 05:52:18,878
it. Then for the class name, this will

8591
05:52:18,878 --> 05:52:21,280
be center. For the icon, this will be

8592
05:52:21,280 --> 05:52:24,480
align center. And then for the text,

8593
05:52:24,480 --> 05:52:26,878
this will be align center. We can then

8594
05:52:26,878 --> 05:52:29,360
copy this tool tip one more time and

8595
05:52:29,360 --> 05:52:31,440
paste it down below. And this will be

8596
05:52:31,440 --> 05:52:33,840
for the alignment to the right side.

8597
05:52:33,840 --> 05:52:36,958
This means text align right. For the on

8598
05:52:36,958 --> 05:52:39,280
pressed change, this will be right. For

8599
05:52:39,280 --> 05:52:42,080
the class name, this will be center. No,

8600
05:52:42,080 --> 05:52:44,480
right. Then for the icon, this will be

8601
05:52:44,480 --> 05:52:46,958
align right. And then for the tool tip

8602
05:52:46,958 --> 05:52:50,638
content, this will be a line D right.

8603
05:52:50,638 --> 05:52:52,718
Yes, you are right. Wow, so many

8604
05:52:52,718 --> 05:52:54,638
rightes. And if I go back, you will see

8605
05:52:54,638 --> 05:52:56,798
right here these three buttons and they

8606
05:52:56,798 --> 05:52:59,680
look absolutely beautiful. So we have

8607
05:52:59,680 --> 05:53:02,080
finished with the main section. But

8608
05:53:02,080 --> 05:53:03,920
there are two more buttons which I want

8609
05:53:03,920 --> 05:53:07,120
to render and that's a button to how

8610
05:53:07,120 --> 05:53:09,520
would you call it undo your changes and

8611
05:53:09,520 --> 05:53:11,920
then redo your changes. So as you

8612
05:53:11,920 --> 05:53:14,000
probably know from Google Docs or word

8613
05:53:14,000 --> 05:53:17,040
or whatever you can always redo or undo

8614
05:53:17,040 --> 05:53:19,520
what you just created. This means we can

8615
05:53:19,520 --> 05:53:21,600
again go back. I want to first of all

8616
05:53:21,600 --> 05:53:23,840
again create the separator. This means

8617
05:53:23,840 --> 05:53:25,760
we want to go underneath the div but we

8618
05:53:25,760 --> 05:53:27,920
want to stay in the tool tip provider

8619
05:53:27,920 --> 05:53:29,920
and we want to create a new div. This

8620
05:53:29,920 --> 05:53:32,160
div will have a class name which will be

8621
05:53:32,160 --> 05:53:36,080
width px width 1 pixel height of six

8622
05:53:36,080 --> 05:53:39,600
then bg border and margin x2. Underneath

8623
05:53:39,600 --> 05:53:41,680
the separator div, we want to create a

8624
05:53:41,680 --> 05:53:44,000
new div. Let's give it a class name. And

8625
05:53:44,000 --> 05:53:46,320
again this will be this flex layout.

8626
05:53:46,320 --> 05:53:49,920
This means flex flex wrap and then gap

8627
05:53:49,920 --> 05:53:52,080
one. In this div, we want to again

8628
05:53:52,080 --> 05:53:55,040
create two tool tip trigger toggle

8629
05:53:55,040 --> 05:53:57,760
button thingies. This means I will copy

8630
05:53:57,760 --> 05:53:59,760
this tool tip and then I will just paste

8631
05:53:59,760 --> 05:54:02,480
it inside of here. And this tool tip or

8632
05:54:02,480 --> 05:54:04,000
you know what this button is very

8633
05:54:04,000 --> 05:54:05,760
interesting because I don't want to use

8634
05:54:05,760 --> 05:54:08,400
this toggle component anymore because if

8635
05:54:08,400 --> 05:54:11,760
a user for example undo his change then

8636
05:54:11,760 --> 05:54:14,080
there's no active state. The user just

8637
05:54:14,080 --> 05:54:16,080
clicks the button once and then the

8638
05:54:16,080 --> 05:54:19,520
change is undone. There's no active or I

8639
05:54:19,520 --> 05:54:22,240
guess inactive state. This means what I

8640
05:54:22,240 --> 05:54:24,798
will do is just delete everything in the

8641
05:54:24,798 --> 05:54:26,878
tool tip trigger. So we will leave the

8642
05:54:26,878 --> 05:54:29,280
as child property and then inside of

8643
05:54:29,280 --> 05:54:31,440
here I want to get the button component

8644
05:54:31,440 --> 05:54:34,240
from shad C or from our components. For

8645
05:54:34,240 --> 05:54:36,080
the button I want to first of all give

8646
05:54:36,080 --> 05:54:39,120
it a size property. This will be SM. For

8647
05:54:39,120 --> 05:54:41,600
the variant this will be ghost. So this

8648
05:54:41,600 --> 05:54:44,080
button will look exactly the same as a

8649
05:54:44,080 --> 05:54:46,480
toggle. Then for the type, this is very

8650
05:54:46,480 --> 05:54:48,638
important. This will be button. Again,

8651
05:54:48,638 --> 05:54:51,120
if you don't add a type of button, the

8652
05:54:51,120 --> 05:54:53,040
button will be treated like a submit

8653
05:54:53,040 --> 05:54:55,040
button. This means whenever you click on

8654
05:54:55,040 --> 05:54:57,360
this button, it will submit the form and

8655
05:54:57,360 --> 05:54:59,520
you don't want that. Then we want to

8656
05:54:59,520 --> 05:55:01,920
also use the onclick handler. And this

8657
05:55:01,920 --> 05:55:04,240
will be an inline callback function.

8658
05:55:04,240 --> 05:55:06,718
Then we want to get our editor instance.

8659
05:55:06,718 --> 05:55:09,040
I want to call the chain method, then

8660
05:55:09,040 --> 05:55:12,480
the focus method, then the undo method,

8661
05:55:12,480 --> 05:55:15,040
and then the run method. I know a lot of

8662
05:55:15,040 --> 05:55:17,200
chaining, but this will allow the user

8663
05:55:17,200 --> 05:55:20,480
to undo the changes. Then we can also

8664
05:55:20,480 --> 05:55:23,040
get the disabled state, and disabled

8665
05:55:23,040 --> 05:55:26,000
will be true if there's no content. I

8666
05:55:26,000 --> 05:55:27,920
mean, if the user did not make any

8667
05:55:27,920 --> 05:55:30,558
changes, then the user will also not be

8668
05:55:30,558 --> 05:55:33,360
able to undo his changes because there

8669
05:55:33,360 --> 05:55:36,080
are no changes. This means disabled will

8670
05:55:36,080 --> 05:55:38,718
be true if there's no exclamation. So

8671
05:55:38,718 --> 05:55:42,240
exclamation mark editor dot can this is

8672
05:55:42,240 --> 05:55:45,040
the method and then dot undo. So if the

8673
05:55:45,040 --> 05:55:48,080
user cannot make any undos then this

8674
05:55:48,080 --> 05:55:50,638
button will be disabled. My god this is

8675
05:55:50,638 --> 05:55:53,920
almost plain English. Wow. And then in

8676
05:55:53,920 --> 05:55:56,958
this button I want to get the undo icon.

8677
05:55:56,958 --> 05:55:59,120
This is imported from lucid react. And

8678
05:55:59,120 --> 05:56:01,360
for the tool tip content this will be

8679
05:56:01,360 --> 05:56:03,760
undo. This means if we again go back,

8680
05:56:03,760 --> 05:56:05,760
you will see this button and this is

8681
05:56:05,760 --> 05:56:08,558
disabled because I did not make any

8682
05:56:08,558 --> 05:56:11,920
changes. There's nothing to undo. So we

8683
05:56:11,920 --> 05:56:14,160
can go back. I can copy this tool tip

8684
05:56:14,160 --> 05:56:17,120
one more time the last time and paste it

8685
05:56:17,120 --> 05:56:19,760
down below. This will be for the redo

8686
05:56:19,760 --> 05:56:22,240
button. So the size is fine, the variant

8687
05:56:22,240 --> 05:56:24,558
is fine, the type is button. For the on

8688
05:56:24,558 --> 05:56:27,440
click handler, this will be redo instead

8689
05:56:27,440 --> 05:56:30,080
of undo. For the disabled state, this

8690
05:56:30,080 --> 05:56:34,000
will be also redo uh instead of undo.

8691
05:56:34,000 --> 05:56:36,718
And then for the icon, this will be redo

8692
05:56:36,718 --> 05:56:39,040
imported from Lucid React. And for the

8693
05:56:39,040 --> 05:56:41,840
tool tip content, this will be redo. And

8694
05:56:41,840 --> 05:56:44,080
if you go back, you will see this button

8695
05:56:44,080 --> 05:56:46,718
is also disabled because there's nothing

8696
05:56:46,718 --> 05:56:49,120
to redo. But once we create a bit of

8697
05:56:49,120 --> 05:56:51,760
content, we will be able to undo and

8698
05:56:51,760 --> 05:56:54,958
redo our changes. So the menu bar is

8699
05:56:54,958 --> 05:56:57,120
finished and we can continue with the

8700
05:56:57,120 --> 05:56:59,680
editor content itself. The editor

8701
05:56:59,680 --> 05:57:01,840
content is a component which we don't

8702
05:57:01,840 --> 05:57:04,160
have to create. This is a component

8703
05:57:04,160 --> 05:57:07,840
which is provided by um tip tap itself.

8704
05:57:07,840 --> 05:57:09,840
This means underneath the menu bar I

8705
05:57:09,840 --> 05:57:12,558
want to get the editor content and the

8706
05:57:12,558 --> 05:57:15,360
editor content is imported from tip tap

8707
05:57:15,360 --> 05:57:17,920
react. This is self-closing and the

8708
05:57:17,920 --> 05:57:20,958
editor content expects one property and

8709
05:57:20,958 --> 05:57:23,520
that's the editor itself. This means I

8710
05:57:23,520 --> 05:57:25,520
can click on control spacebar, get the

8711
05:57:25,520 --> 05:57:27,760
editor prop, and this will be equal to

8712
05:57:27,760 --> 05:57:29,920
editor. And what do you think? Is it

8713
05:57:29,920 --> 05:57:32,320
time to test it out? I think so. Because

8714
05:57:32,320 --> 05:57:34,558
if I go back

8715
05:57:34,558 --> 05:57:37,360
Uh-huh. So, we have our menu bar, which

8716
05:57:37,360 --> 05:57:39,280
looks great. And then we have this

8717
05:57:39,280 --> 05:57:41,440
nothing burger, if this makes sense. So,

8718
05:57:41,440 --> 05:57:43,680
there's nothing here. But if I click on

8719
05:57:43,680 --> 05:57:45,840
this nothing thing, then I get this

8720
05:57:45,840 --> 05:57:49,040
little outline. So, we have a text area.

8721
05:57:49,040 --> 05:57:51,280
And if I type something, I get my

8722
05:57:51,280 --> 05:57:54,240
content. If I click on enter, ah, it can

8723
05:57:54,240 --> 05:57:56,558
also create more space. So, we get this

8724
05:57:56,558 --> 05:57:58,958
text or editor content, but it's not

8725
05:57:58,958 --> 05:58:00,798
really styled. It does not look very

8726
05:58:00,798 --> 05:58:03,200
nice. So, we have to change it. We have

8727
05:58:03,200 --> 05:58:05,840
to style it. And how do we style this

8728
05:58:05,840 --> 05:58:08,718
editor content? Good question. We style

8729
05:58:08,718 --> 05:58:12,000
it in this editor instance itself. So,

8730
05:58:12,000 --> 05:58:14,000
we can go underneath this extensions

8731
05:58:14,000 --> 05:58:16,080
array and we want to get the editor

8732
05:58:16,080 --> 05:58:18,718
props property. This is an object.

8733
05:58:18,718 --> 05:58:21,200
Inside of here, we can get attributes.

8734
05:58:21,200 --> 05:58:24,000
This is also an object and then inside

8735
05:58:24,000 --> 05:58:26,718
of here we can get the class property

8736
05:58:26,718 --> 05:58:29,120
and what we say right here or what we

8737
05:58:29,120 --> 05:58:31,440
add right here will be then applied to

8738
05:58:31,440 --> 05:58:34,000
this editor content. So for the class

8739
05:58:34,000 --> 05:58:36,240
name I want to say minimum height of

8740
05:58:36,240 --> 05:58:39,840
custom value 300 pixels. Then I want to

8741
05:58:39,840 --> 05:58:42,798
also add padding. So padding four. And

8742
05:58:42,798 --> 05:58:45,120
this means if I again go back and do a

8743
05:58:45,120 --> 05:58:48,480
hard refresh this will already look a

8744
05:58:48,480 --> 05:58:51,120
bit better a bit but not great. So I'm

8745
05:58:51,120 --> 05:58:53,840
missing like a border. I think you all

8746
05:58:53,840 --> 05:58:55,920
know what I mean. A nice looking border

8747
05:58:55,920 --> 05:58:57,840
so that the user understands that this

8748
05:58:57,840 --> 05:59:00,718
is a text area. So what we can do is go

8749
05:59:00,718 --> 05:59:03,360
back and we can update this wrapper div.

8750
05:59:03,360 --> 05:59:05,360
We can give it a class name and this

8751
05:59:05,360 --> 05:59:08,000
will be with full border. Border which

8752
05:59:08,000 --> 05:59:10,160
will be input. So this is the color.

8753
05:59:10,160 --> 05:59:13,200
Then rounded which will be lg overflow

8754
05:59:13,200 --> 05:59:15,040
which will be hidden. And then we can

8755
05:59:15,040 --> 05:59:17,920
also use this dark would you call it

8756
05:59:17,920 --> 05:59:20,240
model thingy? I don't know. So if dark

8757
05:59:20,240 --> 05:59:22,558
mode is true then the background color

8758
05:59:22,558 --> 05:59:26,080
should be input with an opacity of 30%.

8759
05:59:26,080 --> 05:59:30,160
So if dark mode is true bg input 30% of

8760
05:59:30,160 --> 05:59:33,680
30% opacity. So if I go back this now

8761
05:59:33,680 --> 05:59:36,240
has the exact same background color as

8762
05:59:36,240 --> 05:59:39,680
our text area input and stuff like that.

8763
05:59:39,680 --> 05:59:42,000
But if you I'm not sure if you see it

8764
05:59:42,000 --> 05:59:44,000
but currently we have the problem that

8765
05:59:44,000 --> 05:59:46,558
we have two borders. So here at the

8766
05:59:46,558 --> 05:59:48,558
bottom we have one border. This looks

8767
05:59:48,558 --> 05:59:51,120
great, but on the right side, top and

8768
05:59:51,120 --> 05:59:53,760
left, we now have a double border. This

8769
05:59:53,760 --> 05:59:55,840
does not look nice. I'm sure you

8770
05:59:55,840 --> 05:59:57,680
probably don't see it right now, but if

8771
05:59:57,680 --> 06:00:00,718
you look at your screen with, I don't

8772
06:00:00,718 --> 06:00:03,360
know, with a very good glasses, then you

8773
06:00:03,360 --> 06:00:05,440
will see it. So, we can go back to the

8774
06:00:05,440 --> 06:00:07,840
menu bar. I can open it again. And then

8775
06:00:07,840 --> 06:00:10,160
I want to update this top class name.

8776
06:00:10,160 --> 06:00:13,120
So, currently we create a border for all

8777
06:00:13,120 --> 06:00:16,240
um sides, the top, left, right, bottom.

8778
06:00:16,240 --> 06:00:18,638
And but what we will do is just create a

8779
06:00:18,638 --> 06:00:20,638
border for the bottom. This means we can

8780
06:00:20,638 --> 06:00:23,200
say border top will be zero. And then

8781
06:00:23,200 --> 06:00:26,080
border x will also be zero. So yeah,

8782
06:00:26,080 --> 06:00:28,000
border top zero, border x. This means

8783
06:00:28,000 --> 06:00:30,638
the left and right side will be zero. If

8784
06:00:30,638 --> 06:00:32,798
I again go back, I'm not sure if you see

8785
06:00:32,798 --> 06:00:34,878
it, but this already looks 10 times

8786
06:00:34,878 --> 06:00:37,360
cleaner. Then I'm also not a big fan of

8787
06:00:37,360 --> 06:00:40,798
this blue outline or focus thingy. Kind

8788
06:00:40,798 --> 06:00:43,200
of ugly, I will be honest with you. So

8789
06:00:43,200 --> 06:00:45,360
we can go back to the editor to our

8790
06:00:45,360 --> 06:00:48,080
attributes and we can use this focus

8791
06:00:48,080 --> 06:00:50,878
class and if focus is true this I want

8792
06:00:50,878 --> 06:00:53,920
to say outline none. So if I now click

8793
06:00:53,920 --> 06:00:56,638
on the text area I don't get this ugly

8794
06:00:56,638 --> 06:00:58,958
border outline thingy. And let's test

8795
06:00:58,958 --> 06:01:01,760
out our rich text editor. So if I write

8796
06:01:01,760 --> 06:01:04,480
some content everything works. If I

8797
06:01:04,480 --> 06:01:06,320
highlight this and say that this should

8798
06:01:06,320 --> 06:01:09,360
be bold. It works. Then this for example

8799
06:01:09,360 --> 06:01:11,200
should be itallic. This here should be

8800
06:01:11,200 --> 06:01:14,080
strike through. This all works nicely.

8801
06:01:14,080 --> 06:01:16,240
But if I for example try to create a

8802
06:01:16,240 --> 06:01:19,200
bullet list, it does not work. What's

8803
06:01:19,200 --> 06:01:21,680
the problem? If I try to align it, does

8804
06:01:21,680 --> 06:01:24,718
it work? This aligns. I can also undo my

8805
06:01:24,718 --> 06:01:27,920
changes. This also works. But I this

8806
06:01:27,920 --> 06:01:30,320
bullet list and ordered list does not

8807
06:01:30,320 --> 06:01:32,480
work. So what's the problem? So this is

8808
06:01:32,480 --> 06:01:34,718
not a tip tap problem, but instead a

8809
06:01:34,718 --> 06:01:37,920
tailwind CSS problem. And to fix it, we

8810
06:01:37,920 --> 06:01:40,638
want to use the TIN CSS typography

8811
06:01:40,638 --> 06:01:43,360
plugin. So you can just go to Google and

8812
06:01:43,360 --> 06:01:46,320
search for TIN CSS typography. And then

8813
06:01:46,320 --> 06:01:48,000
you can click on the first link. This

8814
06:01:48,000 --> 06:01:50,638
will redirect you to a GitHub repo. And

8815
06:01:50,638 --> 06:01:53,200
here they say beautiful typographic

8816
06:01:53,200 --> 06:01:56,958
defaults for HTML you don't control. So

8817
06:01:56,958 --> 06:01:59,360
we can then use this pros class and this

8818
06:01:59,360 --> 06:02:01,600
will create beautiful typographic

8819
06:02:01,600 --> 06:02:04,480
defaults to any vanilla HTML you don't

8820
06:02:04,480 --> 06:02:07,840
control like HTML rendered from markdown

8821
06:02:07,840 --> 06:02:10,558
or pulled from a CMS. This means we can

8822
06:02:10,558 --> 06:02:12,320
install it and this is also a

8823
06:02:12,320 --> 06:02:14,638
development dependency. So I will copy

8824
06:02:14,638 --> 06:02:16,558
this installation command. I will go

8825
06:02:16,558 --> 06:02:18,638
back and then I can paste it in my

8826
06:02:18,638 --> 06:02:22,400
terminal. So pnpmi uppercase d t1 css

8827
06:02:22,400 --> 06:02:24,718
typography. We can then again restart

8828
06:02:24,718 --> 06:02:27,520
our dev server and we have to also then

8829
06:02:27,520 --> 06:02:30,558
add the plug-in to our main style file.

8830
06:02:30,558 --> 06:02:32,958
This means I can copy this plug-in taven

8831
06:02:32,958 --> 06:02:36,718
CSS and we want to open our globals.css

8832
06:02:36,718 --> 06:02:39,440
file and then underneath this import I

8833
06:02:39,440 --> 06:02:41,920
will paste this at plugin. As you see we

8834
06:02:41,920 --> 06:02:44,638
also get this yellow squiggly line and

8835
06:02:44,638 --> 06:02:47,760
it says unknown at rule plugin. Don't

8836
06:02:47,760 --> 06:02:50,480
worry this is not a problem. It just

8837
06:02:50,480 --> 06:02:52,718
throws a weird error. It always does

8838
06:02:52,718 --> 06:02:55,440
that. We can then close the globals.css

8839
06:02:55,440 --> 06:02:58,000
file and then for our attributes we can

8840
06:02:58,000 --> 06:03:01,680
use this pros class. So we can say pros

8841
06:03:01,680 --> 06:03:04,878
pros SM will be the default. On SM or

8842
06:03:04,878 --> 06:03:07,440
bigger this will be pros. On LG or

8843
06:03:07,440 --> 06:03:10,638
bigger this will be pros LG. On XL or

8844
06:03:10,638 --> 06:03:13,760
bigger this will be pros XL. So if we

8845
06:03:13,760 --> 06:03:16,480
again go back what will we get? Well I

8846
06:03:16,480 --> 06:03:18,718
have to do a hard refresh and I hope

8847
06:03:18,718 --> 06:03:21,280
that everything works. So now if I write

8848
06:03:21,280 --> 06:03:23,840
something, damn, I don't see anything.

8849
06:03:23,840 --> 06:03:27,280
What's this color? It's gray.

8850
06:03:27,280 --> 06:03:30,240
Ugly. So here's the thing. When you use

8851
06:03:30,240 --> 06:03:32,958
this typography plugin in dark mode, you

8852
06:03:32,958 --> 06:03:35,360
have to also invert the colors. This

8853
06:03:35,360 --> 06:03:37,600
means we can go back to the attributes

8854
06:03:37,600 --> 06:03:40,000
and we can say on dark mode, we want to

8855
06:03:40,000 --> 06:03:42,080
do a pro-ashinvert.

8856
06:03:42,080 --> 06:03:44,638
It will invert the colors. And if I go

8857
06:03:44,638 --> 06:03:48,080
back, yes, that's what I wanted. So if I

8858
06:03:48,080 --> 06:03:50,638
now for example use this bullet list,

8859
06:03:50,638 --> 06:03:53,920
you'll see it works exactly as expected

8860
06:03:53,920 --> 06:03:56,080
and that's what I wanted. But now

8861
06:03:56,080 --> 06:03:58,480
there's another problem. So as you see I

8862
06:03:58,480 --> 06:04:01,040
wrote a lot of content here. But if I

8863
06:04:01,040 --> 06:04:03,760
zoom out quite a bit, it just stops in

8864
06:04:03,760 --> 06:04:06,000
the middle. What's the problem? Well,

8865
06:04:06,000 --> 06:04:09,040
this pros class also adds a maximum

8866
06:04:09,040 --> 06:04:11,440
width. I don't understand why they do

8867
06:04:11,440 --> 06:04:14,080
that. Honestly, a stupid mistake or a

8868
06:04:14,080 --> 06:04:16,240
stupid thing in my opinion. They

8869
06:04:16,240 --> 06:04:18,320
shouldn't have done that. But hey, I

8870
06:04:18,320 --> 06:04:20,080
guess we can just update it by

8871
06:04:20,080 --> 06:04:22,558
ourselves. So for the class, we can add

8872
06:04:22,558 --> 06:04:25,040
this exclamation mark and then say with

8873
06:04:25,040 --> 06:04:28,480
full and then exclamation mark max width

8874
06:04:28,480 --> 06:04:30,878
none. This means if I again go back and

8875
06:04:30,878 --> 06:04:32,798
zoom out a bit and create a bit more

8876
06:04:32,798 --> 06:04:35,120
content, it will now take the whole

8877
06:04:35,120 --> 06:04:37,680
width as you see. So again, I'm not sure

8878
06:04:37,680 --> 06:04:40,798
why the T1 CSS team made such a

8879
06:04:40,798 --> 06:04:43,120
decision, but maybe there's a good

8880
06:04:43,120 --> 06:04:44,558
reason for that. I don't know. But

8881
06:04:44,558 --> 06:04:46,320
honestly, I wanted to take the whole

8882
06:04:46,320 --> 06:04:48,718
width and that's why I added this little

8883
06:04:48,718 --> 06:04:51,360
helper thingy. So, to be honest, I think

8884
06:04:51,360 --> 06:04:53,120
we have finished with the witch text

8885
06:04:53,120 --> 06:04:55,520
editor. I think I will later on maybe

8886
06:04:55,520 --> 06:04:57,600
change the text color and stuff like

8887
06:04:57,600 --> 06:04:59,360
that. But for now, we see that

8888
06:04:59,360 --> 06:05:01,280
everything works. And I mean, let's

8889
06:05:01,280 --> 06:05:03,360
again test out everything. So, I will

8890
06:05:03,360 --> 06:05:05,520
delete everything. We can get started

8891
06:05:05,520 --> 06:05:07,760
first of all with bold. If I click on

8892
06:05:07,760 --> 06:05:10,718
bold, yes, it works. Then, does italic

8893
06:05:10,718 --> 06:05:13,920
work? Yes, it works. Then does uh strike

8894
06:05:13,920 --> 06:05:16,400
three work? So if I highlight this and

8895
06:05:16,400 --> 06:05:18,798
click on strike, yes, it works. Does the

8896
06:05:18,798 --> 06:05:22,000
H1 work? Yes, it works. Does the H2

8897
06:05:22,000 --> 06:05:25,680
work? Yes, it works. How about the H3?

8898
06:05:25,680 --> 06:05:28,160
Yes, this also works. Then how about

8899
06:05:28,160 --> 06:05:30,958
this bullet list? Yes, it works. Then

8900
06:05:30,958 --> 06:05:33,200
how about this ordered list? Yes, it

8901
06:05:33,200 --> 06:05:36,320
also works. Great. And maybe alignment.

8902
06:05:36,320 --> 06:05:39,120
So align center and then align right.

8903
06:05:39,120 --> 06:05:42,240
Yes. Undo. Also great. So we are

8904
06:05:42,240 --> 06:05:44,638
finished with our rich text editor,

8905
06:05:44,638 --> 06:05:46,718
right? No, we are not quite finished

8906
06:05:46,718 --> 06:05:48,958
because there's one thing missing and

8907
06:05:48,958 --> 06:05:51,680
that's the connection to React took form

8908
06:05:51,680 --> 06:05:54,718
to our client side state management form

8909
06:05:54,718 --> 06:05:57,520
validation library. So here's the thing.

8910
06:05:57,520 --> 06:06:00,080
If we again go back to our creation

8911
06:06:00,080 --> 06:06:02,718
route, what do we get? We get this field

8912
06:06:02,718 --> 06:06:05,680
object. This field object exposes a lot

8913
06:06:05,680 --> 06:06:08,558
of things like an onv valueue change, a

8914
06:06:08,558 --> 06:06:11,200
value and stuff like that. This means we

8915
06:06:11,200 --> 06:06:14,080
want to pass this field to our rich text

8916
06:06:14,080 --> 06:06:16,718
editor. So I can go back to the editor

8917
06:06:16,718 --> 06:06:19,440
component itself and then in my params I

8918
06:06:19,440 --> 06:06:22,480
can destruct and I want to get a field

8919
06:06:22,480 --> 06:06:25,120
and this will be of type any. It has its

8920
06:06:25,120 --> 06:06:27,120
own type but you have to do a lot of

8921
06:06:27,120 --> 06:06:29,360
weird things to get the typing. So

8922
06:06:29,360 --> 06:06:31,600
that's why I will say type any. Again

8923
06:06:31,600 --> 06:06:33,440
you can create the real type but then

8924
06:06:33,440 --> 06:06:35,120
you have to do a lot of advanced

8925
06:06:35,120 --> 06:06:37,280
TypeScript and I don't want to write all

8926
06:06:37,280 --> 06:06:39,360
of this code. It's quite a lot of code

8927
06:06:39,360 --> 06:06:41,840
just to get the correct field typing. So

8928
06:06:41,840 --> 06:06:43,920
as you all know react hook form works

8929
06:06:43,920 --> 06:06:45,680
with controlled inputs. This means we

8930
06:06:45,680 --> 06:06:48,000
have to provide a value and then an onv

8931
06:06:48,000 --> 06:06:50,480
value change or in this case content and

8932
06:06:50,480 --> 06:06:52,878
then on update. So we can go underneath

8933
06:06:52,878 --> 06:06:55,280
this editor props and I want to get this

8934
06:06:55,280 --> 06:06:58,400
on update function and it will fire

8935
06:06:58,400 --> 06:07:01,520
whenever our text content updates. So

8936
06:07:01,520 --> 06:07:03,680
this will be equal to a standard arrow

8937
06:07:03,680 --> 06:07:05,680
function. I can then the structure the

8938
06:07:05,680 --> 06:07:08,480
params and I can get the editor and what

8939
06:07:08,480 --> 06:07:11,120
I want to do is set my field. So I get

8940
06:07:11,120 --> 06:07:13,520
my field and I want to update my field

8941
06:07:13,520 --> 06:07:15,120
and in this case this means I want to

8942
06:07:15,120 --> 06:07:17,680
use the onchange handler. So we can get

8943
06:07:17,680 --> 06:07:20,718
our field then dot onchange as you see I

8944
06:07:20,718 --> 06:07:23,040
don't get any typing that's fine please

8945
06:07:23,040 --> 06:07:24,480
make sure that you just spell it

8946
06:07:24,480 --> 06:07:27,120
correctly. Then we want to invoke it and

8947
06:07:27,120 --> 06:07:30,400
as an argument I want to get my JSON. So

8948
06:07:30,400 --> 06:07:32,638
here's the thing this editor allows us

8949
06:07:32,638 --> 06:07:35,200
to get JSON. So I can just say editor

8950
06:07:35,200 --> 06:07:37,840
dot and then you get a few methods and I

8951
06:07:37,840 --> 06:07:40,000
want to use the get JSON method. This

8952
06:07:40,000 --> 06:07:42,958
will get a document as JSON. But here's

8953
06:07:42,958 --> 06:07:46,080
the thing. If we open our schema and go

8954
06:07:46,080 --> 06:07:48,400
to the course itself, you will see that

8955
06:07:48,400 --> 06:07:50,878
I want to store my description as a

8956
06:07:50,878 --> 06:07:53,520
string. This means we will get JSON but

8957
06:07:53,520 --> 06:07:55,920
I will stringify this JSON and then

8958
06:07:55,920 --> 06:07:58,798
store the stringify JSON in my database.

8959
06:07:58,798 --> 06:08:00,798
And then once we then want to render

8960
06:08:00,798 --> 06:08:03,600
this content later on, we will then pass

8961
06:08:03,600 --> 06:08:07,200
this string again to a standard JSON and

8962
06:08:07,200 --> 06:08:10,480
um how would you say it propagated into

8963
06:08:10,480 --> 06:08:12,878
uh tip tap if this makes sense. So again

8964
06:08:12,878 --> 06:08:15,440
we will get JSON we will stringify it

8965
06:08:15,440 --> 06:08:17,360
store it in our database then retrieve

8966
06:08:17,360 --> 06:08:19,920
it pass it again into standard JSON and

8967
06:08:19,920 --> 06:08:22,320
then pass it later on to tip tap to then

8968
06:08:22,320 --> 06:08:24,958
render it nicely. And then in the editor

8969
06:08:24,958 --> 06:08:27,840
onchange I want to get JSON dot

8970
06:08:27,840 --> 06:08:30,320
stringify and then I want to invoke it.

8971
06:08:30,320 --> 06:08:32,558
And then as an argument I want to get my

8972
06:08:32,558 --> 06:08:35,120
JSON because what I pass inside of here

8973
06:08:35,120 --> 06:08:37,200
will be then stringified. And in this

8974
06:08:37,200 --> 06:08:40,240
case this will be editor.get JSON. So we

8975
06:08:40,240 --> 06:08:42,958
now get our JSON. We stringify it and we

8976
06:08:42,958 --> 06:08:45,920
set it in our field. So we update our

8977
06:08:45,920 --> 06:08:47,920
field. And then what else is missing?

8978
06:08:47,920 --> 06:08:50,160
Well, we have to also set the content

8979
06:08:50,160 --> 06:08:52,400
because again this is a controlled

8980
06:08:52,400 --> 06:08:54,718
input. we have to control it. So

8981
06:08:54,718 --> 06:08:56,798
underneath the on update I can get the

8982
06:08:56,798 --> 06:08:58,558
content and here I want to create a

8983
06:08:58,558 --> 06:09:01,200
turnary. If we get data from our field

8984
06:09:01,200 --> 06:09:03,360
this means for example later on we will

8985
06:09:03,360 --> 06:09:06,000
have an edit route. In the edit route I

8986
06:09:06,000 --> 06:09:08,400
will already have content predefined

8987
06:09:08,400 --> 06:09:10,160
because we will already have a course

8988
06:09:10,160 --> 06:09:12,160
which we want to edit. This means this

8989
06:09:12,160 --> 06:09:14,558
field will have JSON and here I want to

8990
06:09:14,558 --> 06:09:17,040
create a turnary and check if we have a

8991
06:09:17,040 --> 06:09:19,120
value. Then let's render this already

8992
06:09:19,120 --> 06:09:22,000
created content. If no uh if not then

8993
06:09:22,000 --> 06:09:24,480
let's just create a dummy p tag or

8994
06:09:24,480 --> 06:09:26,160
something like that. So right here I can

8995
06:09:26,160 --> 06:09:28,718
get my field dot value and if this is

8996
06:09:28,718 --> 06:09:30,718
true then we can use a turnary a

8997
06:09:30,718 --> 06:09:34,000
question mark and I want to do a JSON

8998
06:09:34,000 --> 06:09:36,958
pass and I want to pass my field dot

8999
06:09:36,958 --> 06:09:39,680
value. If this is not true we can use a

9000
06:09:39,680 --> 06:09:42,400
colon and I want to create or I want to

9001
06:09:42,400 --> 06:09:44,718
render a p tag. This means we can get a

9002
06:09:44,718 --> 06:09:47,440
p tag or we can create one. And for the

9003
06:09:47,440 --> 06:09:50,558
content I will just say hello world. So

9004
06:09:50,558 --> 06:09:52,798
let's test it out. If I go back and do a

9005
06:09:52,798 --> 06:09:55,680
hard refresh I get an error. Cannot read

9006
06:09:55,680 --> 06:09:58,160
properties of undefined. What's the

9007
06:09:58,160 --> 06:10:00,240
problem? Well the thing is currently we

9008
06:10:00,240 --> 06:10:03,280
don't pass this editor uh as a prop

9009
06:10:03,280 --> 06:10:05,280
because if I go to my creation route and

9010
06:10:05,280 --> 06:10:07,360
scroll to the bottom our rich text

9011
06:10:07,360 --> 06:10:10,080
editor expects a property and this is

9012
06:10:10,080 --> 06:10:12,878
the field and the field will be equal to

9013
06:10:12,878 --> 06:10:15,280
field and this should work. This means

9014
06:10:15,280 --> 06:10:17,840
if I go back and do a hard refresh, we

9015
06:10:17,840 --> 06:10:20,320
get hello world. And again, we get hello

9016
06:10:20,320 --> 06:10:22,480
world because we currently don't have

9017
06:10:22,480 --> 06:10:25,200
any predefined data. If we would have

9018
06:10:25,200 --> 06:10:28,878
already a JSON from our previous course,

9019
06:10:28,878 --> 06:10:31,040
then we would of course render the data

9020
06:10:31,040 --> 06:10:32,718
right here. But since there is no

9021
06:10:32,718 --> 06:10:34,958
predefined data, since we create a new

9022
06:10:34,958 --> 06:10:37,440
course, our turnary is false, which

9023
06:10:37,440 --> 06:10:39,920
means we render hello world. If you want

9024
06:10:39,920 --> 06:10:41,840
to, you can also change it up to

9025
06:10:41,840 --> 06:10:44,080
something else. Honestly, I couldn't

9026
06:10:44,080 --> 06:10:47,040
care less. So, as a next step, I want to

9027
06:10:47,040 --> 06:10:49,840
finally continue with file uploads. But

9028
06:10:49,840 --> 06:10:52,000
before we do that, we have to fix two

9029
06:10:52,000 --> 06:10:55,360
small bugs. So, if I go back and open my

9030
06:10:55,360 --> 06:10:57,920
terminal, you will see an interesting

9031
06:10:57,920 --> 06:11:00,958
warning. Tip tap error SSR has been

9032
06:11:00,958 --> 06:11:03,920
detected. Please set immediately render

9033
06:11:03,920 --> 06:11:07,440
explicitly to false to avoid hydration

9034
06:11:07,440 --> 06:11:10,160
mismatches. So, here's the thing. If I

9035
06:11:10,160 --> 06:11:12,798
open my editor, this component is marked

9036
06:11:12,798 --> 06:11:15,360
with the use client directive. A lot of

9037
06:11:15,360 --> 06:11:17,360
people think that this means that this

9038
06:11:17,360 --> 06:11:19,120
component is rendered on the client

9039
06:11:19,120 --> 06:11:21,440
side. No, this component is still

9040
06:11:21,440 --> 06:11:24,080
rendered on the server side. We just get

9041
06:11:24,080 --> 06:11:27,760
a client um a JavaScript client bundle.

9042
06:11:27,760 --> 06:11:29,840
Yes, that's what I wanted to say. And

9043
06:11:29,840 --> 06:11:32,160
the problem is tip tap does not work in

9044
06:11:32,160 --> 06:11:35,360
a SSR environment. Tip tap has to be

9045
06:11:35,360 --> 06:11:38,000
rendered on the client side. it has to

9046
06:11:38,000 --> 06:11:40,400
initialize on the client side. That's

9047
06:11:40,400 --> 06:11:42,480
why we can go to the editor to our

9048
06:11:42,480 --> 06:11:45,040
editor instance and we want to get a

9049
06:11:45,040 --> 06:11:47,840
specific property which is immediately

9050
06:11:47,840 --> 06:11:50,718
render and we want to set it to false to

9051
06:11:50,718 --> 06:11:53,600
not uh to not SSR tip tap to not server

9052
06:11:53,600 --> 06:11:55,840
render it. This means if I go back and

9053
06:11:55,840 --> 06:11:58,000
do a hard refresh and again open my

9054
06:11:58,000 --> 06:12:00,638
terminal this error won't show up again

9055
06:12:00,638 --> 06:12:03,520
because it's now fixed the problem. So

9056
06:12:03,520 --> 06:12:05,920
this is bug number one. That's great.

9057
06:12:05,920 --> 06:12:08,320
And then we have another problem. So

9058
06:12:08,320 --> 06:12:10,638
currently I'm signed in with my email.

9059
06:12:10,638 --> 06:12:12,400
This means I did not use GitHub but

9060
06:12:12,400 --> 06:12:15,520
instead I used this OTP email sign in

9061
06:12:15,520 --> 06:12:18,638
variant option whatever. This means if I

9062
06:12:18,638 --> 06:12:21,360
go back to my homepage I will get an

9063
06:12:21,360 --> 06:12:24,000
error as you see cannot read properties

9064
06:12:24,000 --> 06:12:26,878
of undefined and this has to do with my

9065
06:12:26,878 --> 06:12:29,440
avatar fallback. So what we can do is

9066
06:12:29,440 --> 06:12:31,760
open the user drop-down component

9067
06:12:31,760 --> 06:12:34,320
because this is where the problem is

9068
06:12:34,320 --> 06:12:36,878
created. So here I have an avatar

9069
06:12:36,878 --> 06:12:39,840
fallback and I render my name uh or I

9070
06:12:39,840 --> 06:12:41,840
get the first character in my name and

9071
06:12:41,840 --> 06:12:44,000
then I uppercase it. The biggest problem

9072
06:12:44,000 --> 06:12:46,320
is this does not work because what was

9073
06:12:46,320 --> 06:12:49,120
the problem with the name? Well, when a

9074
06:12:49,120 --> 06:12:51,920
user signs in with his email, we don't

9075
06:12:51,920 --> 06:12:54,558
get a name and that's why we used or in

9076
06:12:54,558 --> 06:12:57,600
our nav user we created this turnary

9077
06:12:57,600 --> 06:12:59,600
where we checked hey do we get a

9078
06:12:59,600 --> 06:13:02,558
username? If so we can render it. If not

9079
06:13:02,558 --> 06:13:04,798
then let's use the email and we want to

9080
06:13:04,798 --> 06:13:07,200
do the same thing for the user dropdown.

9081
06:13:07,200 --> 06:13:09,840
And as you see all of this data is

9082
06:13:09,840 --> 06:13:12,878
passed as props or we get it through the

9083
06:13:12,878 --> 06:13:15,440
params. This means if I go to my navbar

9084
06:13:15,440 --> 06:13:18,638
we pass the email image and name through

9085
06:13:18,638 --> 06:13:21,600
props. This means we have to update the

9086
06:13:21,600 --> 06:13:24,320
code right here. So if I go to the nav

9087
06:13:24,320 --> 06:13:26,718
user we have a turnary right here for

9088
06:13:26,718 --> 06:13:29,360
the username. What I will do is copy

9089
06:13:29,360 --> 06:13:31,360
this turnary. So session do user.name

9090
06:13:31,360 --> 06:13:33,600
name and if we have or if the length is

9091
06:13:33,600 --> 06:13:35,360
bigger than zero then we render the

9092
06:13:35,360 --> 06:13:37,760
username if not we render the email

9093
06:13:37,760 --> 06:13:39,840
let's just copy this code let's go back

9094
06:13:39,840 --> 06:13:42,080
to the navbar and then I will paste it

9095
06:13:42,080 --> 06:13:44,718
for the name property so if session do

9096
06:13:44,718 --> 06:13:47,680
user name exists and if the length is

9097
06:13:47,680 --> 06:13:49,840
bigger than zero then I want to return

9098
06:13:49,840 --> 06:13:53,200
the session uh session do user name if

9099
06:13:53,200 --> 06:13:55,440
we don't get the name which has a bigger

9100
06:13:55,440 --> 06:13:57,600
character length than zero then we will

9101
06:13:57,600 --> 06:14:00,638
return the session do user email this

9102
06:14:00,638 --> 06:14:03,120
means the email itself. Nevertheless,

9103
06:14:03,120 --> 06:14:05,520
this still has one problem because we

9104
06:14:05,520 --> 06:14:07,600
will now pass the whole email with the

9105
06:14:07,600 --> 06:14:09,920
at symbol. We don't want that. So, we

9106
06:14:09,920 --> 06:14:12,480
can go back to the nav user. And if I

9107
06:14:12,480 --> 06:14:14,718
scroll a bit to the bottom, we should

9108
06:14:14,718 --> 06:14:17,120
find the split method. So, split, we

9109
06:14:17,120 --> 06:14:19,120
want to split the at and we want to get

9110
06:14:19,120 --> 06:14:21,040
the first part because again, this

9111
06:14:21,040 --> 06:14:23,360
splits the user into two parts or the

9112
06:14:23,360 --> 06:14:25,440
email. First of all, the thing in front

9113
06:14:25,440 --> 06:14:27,680
of the at and then the thing after the

9114
06:14:27,680 --> 06:14:29,920
at. And we want to get the thing in

9115
06:14:29,920 --> 06:14:32,558
front of the at. So I will just copy the

9116
06:14:32,558 --> 06:14:35,200
split method. I can go back and then I

9117
06:14:35,200 --> 06:14:37,200
want to paste it inside of here. And

9118
06:14:37,200 --> 06:14:40,240
don't worry, I will fix or delete or

9119
06:14:40,240 --> 06:14:43,200
remove these AI suggestions in a second.

9120
06:14:43,200 --> 06:14:45,760
I forgot that. But if I again go back

9121
06:14:45,760 --> 06:14:48,558
and do a hard refresh, everything again

9122
06:14:48,558 --> 06:14:50,958
works. Nevertheless, we still have one

9123
06:14:50,958 --> 06:14:53,040
problem for the image because as you

9124
06:14:53,040 --> 06:14:56,240
see, this is just a dummy or there is no

9125
06:14:56,240 --> 06:14:58,080
image. recurrently just render the

9126
06:14:58,080 --> 06:15:00,160
avatar fallback. And that's again

9127
06:15:00,160 --> 06:15:02,320
because if you go to the navbar, you

9128
06:15:02,320 --> 06:15:04,878
will see if there's no user image, we

9129
06:15:04,878 --> 06:15:06,958
pass an empty string. We don't want

9130
06:15:06,958 --> 06:15:09,680
that. So we can go back to the nav user.

9131
06:15:09,680 --> 06:15:11,920
And if I scroll a bit to the top, you

9132
06:15:11,920 --> 06:15:14,000
will see that we have a turnary or we

9133
06:15:14,000 --> 06:15:16,798
created a turnary for the avatar image.

9134
06:15:16,798 --> 06:15:18,958
If there's no user image, then we use

9135
06:15:18,958 --> 06:15:21,280
this nullish qual. So if there's no

9136
06:15:21,280 --> 06:15:24,320
image, then we will render this avatar

9137
06:15:24,320 --> 06:15:27,280
URL. So this is this avatar API uh

9138
06:15:27,280 --> 06:15:30,080
provided by versel. So I will just copy

9139
06:15:30,080 --> 06:15:32,798
this uh nullish coalition code. I can go

9140
06:15:32,798 --> 06:15:34,958
back to the navbar and I will paste it

9141
06:15:34,958 --> 06:15:37,440
for the image. So again if we get the

9142
06:15:37,440 --> 06:15:39,920
session do user.image then we will pass

9143
06:15:39,920 --> 06:15:42,160
it. If we don't get it then we will

9144
06:15:42,160 --> 06:15:45,360
instead pass this URL provided by versel

9145
06:15:45,360 --> 06:15:47,920
itself. This means if I go back and do a

9146
06:15:47,920 --> 06:15:50,240
hard refresh nice we get this nicel

9147
06:15:50,240 --> 06:15:53,360
looking image. I get my name, the email,

9148
06:15:53,360 --> 06:15:55,280
everything looks beautiful and

9149
06:15:55,280 --> 06:15:58,240
everything is finished. There's only one

9150
06:15:58,240 --> 06:16:00,958
problem. This drop-down menu is too

9151
06:16:00,958 --> 06:16:03,440
small. It should take a bigger width

9152
06:16:03,440 --> 06:16:05,520
because this is kind of small and it

9153
06:16:05,520 --> 06:16:07,840
does not look very appealing. At least I

9154
06:16:07,840 --> 06:16:09,920
think so. This means if we go back to

9155
06:16:09,920 --> 06:16:12,798
the user dropdown, we have our drop-down

9156
06:16:12,798 --> 06:16:15,600
menu content here. And and it has a

9157
06:16:15,600 --> 06:16:18,958
class name which is maximum width 64.

9158
06:16:18,958 --> 06:16:21,520
This means the width won't be bigger. So

9159
06:16:21,520 --> 06:16:24,638
instead of rendering maximum width 64,

9160
06:16:24,638 --> 06:16:27,040
we will just instead render minimum

9161
06:16:27,040 --> 06:16:31,040
width and this will be how about 52. How

9162
06:16:31,040 --> 06:16:33,680
does this look? Yeah, maybe a bit too

9163
06:16:33,680 --> 06:16:36,958
big. How about something with 40? So 48

9164
06:16:36,958 --> 06:16:38,798
maybe. This should already look way

9165
06:16:38,798 --> 06:16:41,680
better. And yeah, I think 48 looks quite

9166
06:16:41,680 --> 06:16:44,638
good. So we will hardcode it uh with 48.

9167
06:16:44,638 --> 06:16:46,718
But since this is a minimum width, it

9168
06:16:46,718 --> 06:16:49,280
can also become bigger if needed. But I

9169
06:16:49,280 --> 06:16:50,638
don't think so. I think this should be

9170
06:16:50,638 --> 06:16:52,958
fine enough. So we fixed the two

9171
06:16:52,958 --> 06:16:55,520
problems, the two small bugs and we can

9172
06:16:55,520 --> 06:16:58,400
finally continue with file uploads. So

9173
06:16:58,400 --> 06:17:00,240
let's first of all again navigate back

9174
06:17:00,240 --> 06:17:02,718
to the admin dashboard. We want to go to

9175
06:17:02,718 --> 06:17:05,120
the courses create course and then

9176
06:17:05,120 --> 06:17:07,680
instead of rendering this stupid input.

9177
06:17:07,680 --> 06:17:09,360
Yeah, it's not stupid. But this ugly

9178
06:17:09,360 --> 06:17:12,480
input, we will render a nice custom and

9179
06:17:12,480 --> 06:17:14,718
accessible drag and drop zone. Now,

9180
06:17:14,718 --> 06:17:16,400
here's the thing. Here's my question to

9181
06:17:16,400 --> 06:17:19,120
you. How do you or how would you create

9182
06:17:19,120 --> 06:17:22,160
a custom drag and drop zone? So, you

9183
06:17:22,160 --> 06:17:25,120
might say, "Hey, Jan, natively, yeah,

9184
06:17:25,120 --> 06:17:27,680
that will probably be a bit too hard."

9185
06:17:27,680 --> 06:17:29,760
So, how about we use a pre-built

9186
06:17:29,760 --> 06:17:32,718
component? Sure, but I want to have a

9187
06:17:32,718 --> 06:17:35,040
custom component. And again, it should

9188
06:17:35,040 --> 06:17:37,680
also be accessible. I want to own the

9189
06:17:37,680 --> 06:17:39,920
code. I don't want to just install some

9190
06:17:39,920 --> 06:17:43,040
sort of pre-built component. So there's

9191
06:17:43,040 --> 06:17:45,680
this. So here comes the solution. React

9192
06:17:45,680 --> 06:17:48,240
drop zone. So React drop zone is a

9193
06:17:48,240 --> 06:17:51,600
simple React hook to create a HTML 5

9194
06:17:51,600 --> 06:17:54,798
compliant drag and drop zone for files.

9195
06:17:54,798 --> 06:17:56,638
So this is not a component. This is

9196
06:17:56,638 --> 06:17:59,200
nothing pre-built. This is not styled.

9197
06:17:59,200 --> 06:18:01,520
This is pretty much what Tiptap does. It

9198
06:18:01,520 --> 06:18:04,558
gives you an easy to use API in this uh

9199
06:18:04,558 --> 06:18:07,280
case a hook which you use and this hook

9200
06:18:07,280 --> 06:18:09,920
then exposes functions and you can use

9201
06:18:09,920 --> 06:18:12,480
these functions to create your own

9202
06:18:12,480 --> 06:18:15,200
custom and accessible drag and drop

9203
06:18:15,200 --> 06:18:17,600
zone. This means you fully own the code.

9204
06:18:17,600 --> 06:18:19,520
You also install a very small

9205
06:18:19,520 --> 06:18:22,080
dependency. The package size isn't big.

9206
06:18:22,080 --> 06:18:23,920
So this is a win-win in this case

9207
06:18:23,920 --> 06:18:26,320
because it's makes it easier to create a

9208
06:18:26,320 --> 06:18:28,718
drag and drop zone while also allowing

9209
06:18:28,718 --> 06:18:31,840
you to create a custom one. So what we

9210
06:18:31,840 --> 06:18:34,080
can do is first of all install react

9211
06:18:34,080 --> 06:18:36,878
drop zone. Here we have a installation

9212
06:18:36,878 --> 06:18:39,200
uh command. I will just copy it. Then I

9213
06:18:39,200 --> 06:18:40,958
will open my terminal, stop my dev

9214
06:18:40,958 --> 06:18:44,558
server and run pnpmi react drop zone.

9215
06:18:44,558 --> 06:18:46,958
This will install everything. And what I

9216
06:18:46,958 --> 06:18:49,360
want to do is create a separate

9217
06:18:49,360 --> 06:18:51,600
component again. This means we can open

9218
06:18:51,600 --> 06:18:54,320
the components or the explorer. Then we

9219
06:18:54,320 --> 06:18:56,400
want to go to the components folder. And

9220
06:18:56,400 --> 06:18:59,520
since I will reuse the file uploader, I

9221
06:18:59,520 --> 06:19:02,638
want to also create a new subfolder. So

9222
06:19:02,638 --> 06:19:05,280
this will be file-uploader

9223
06:19:05,280 --> 06:19:07,440
for the folder name. And inside of here,

9224
06:19:07,440 --> 06:19:10,240
I want to create an uploader.tsx

9225
06:19:10,240 --> 06:19:12,320
file. So this will be the component

9226
06:19:12,320 --> 06:19:15,280
itself. So we want to first of all mark

9227
06:19:15,280 --> 06:19:17,920
this component this file with the use

9228
06:19:17,920 --> 06:19:20,798
client directive because react drop zone

9229
06:19:20,798 --> 06:19:22,638
this means if I go back you will see

9230
06:19:22,638 --> 06:19:25,600
that react drop zone exposes a hook and

9231
06:19:25,600 --> 06:19:27,840
this hook I mean it does not expose it

9232
06:19:27,840 --> 06:19:30,480
it provides us with an h with a hook and

9233
06:19:30,480 --> 06:19:33,040
this hook exposes functions. These

9234
06:19:33,040 --> 06:19:36,320
functions at pretty much create this

9235
06:19:36,320 --> 06:19:38,798
internal state management and to make it

9236
06:19:38,798 --> 06:19:41,040
work they of course need a JavaScript

9237
06:19:41,040 --> 06:19:43,120
bundle. This means this is the reason

9238
06:19:43,120 --> 06:19:45,600
why we mark this file with the use

9239
06:19:45,600 --> 06:19:48,000
client directive and then let's go back

9240
06:19:48,000 --> 06:19:50,320
to the documentation and the first step

9241
06:19:50,320 --> 06:19:53,200
is to copy this code example where they

9242
06:19:53,200 --> 06:19:56,000
initialize the use drop zone hook. So I

9243
06:19:56,000 --> 06:19:57,840
will copy it. Of course we want to first

9244
06:19:57,840 --> 06:19:59,920
of all create a function. So this will

9245
06:19:59,920 --> 06:20:02,718
be an export function uploader. I will

9246
06:20:02,718 --> 06:20:05,280
also disable this AI thingy. And then

9247
06:20:05,280 --> 06:20:07,440
inside of here I want to first of all

9248
06:20:07,440 --> 06:20:10,000
create a return statement diff. And then

9249
06:20:10,000 --> 06:20:12,558
for the H1 I want to say hello, how are

9250
06:20:12,558 --> 06:20:14,480
you? Then we want to render this

9251
06:20:14,480 --> 06:20:16,878
uploader component in our creation

9252
06:20:16,878 --> 06:20:19,840
route. So I will again open my explorer.

9253
06:20:19,840 --> 06:20:22,080
We want to go into the app folder, admin

9254
06:20:22,080 --> 06:20:24,638
folder, courses folder, create folder,

9255
06:20:24,638 --> 06:20:27,440
page.tsx. Then here I can delete this

9256
06:20:27,440 --> 06:20:29,360
text area comment. We don't need it

9257
06:20:29,360 --> 06:20:31,600
anymore. We have our own rich text

9258
06:20:31,600 --> 06:20:34,160
editor. And then here you will find this

9259
06:20:34,160 --> 06:20:36,878
form field with the file key. I will

9260
06:20:36,878 --> 06:20:39,200
comment out this input and instead we

9261
06:20:39,200 --> 06:20:41,760
will get the uploader component from the

9262
06:20:41,760 --> 06:20:43,920
components. This is self-closing. Then

9263
06:20:43,920 --> 06:20:46,160
we can head over back to the uploader

9264
06:20:46,160 --> 06:20:48,240
and inside of here I want to paste the

9265
06:20:48,240 --> 06:20:50,080
code which I copied. This means where

9266
06:20:50,080 --> 06:20:52,558
they initialize the use drop zone hook.

9267
06:20:52,558 --> 06:20:54,878
Sadly use drop zone does not import for

9268
06:20:54,878 --> 06:20:57,760
me automatically. So I will just copy it

9269
06:20:57,760 --> 06:20:59,440
from the code example from the

9270
06:20:59,440 --> 06:21:01,680
documentation and then I can paste it on

9271
06:21:01,680 --> 06:21:05,040
top. So import use drop zone from react

9272
06:21:05,040 --> 06:21:07,840
drop zone. So this use drop zone hook

9273
06:21:07,840 --> 06:21:10,718
exposes three functions. So first of all

9274
06:21:10,718 --> 06:21:13,120
the get root props function, the get

9275
06:21:13,120 --> 06:21:16,400
input props function and is drag active.

9276
06:21:16,400 --> 06:21:19,600
Is drag active isn't a function. Instead

9277
06:21:19,600 --> 06:21:21,920
it's a boolean. This means when you drag

9278
06:21:21,920 --> 06:21:24,480
with your file over the drop zone, this

9279
06:21:24,480 --> 06:21:26,878
boolean will be set to true. If you

9280
06:21:26,878 --> 06:21:29,200
don't track with a file over the drop

9281
06:21:29,200 --> 06:21:31,600
zone, then this boolean will be set to

9282
06:21:31,600 --> 06:21:33,920
false. And this get root props function

9283
06:21:33,920 --> 06:21:36,480
and get input props function will be

9284
06:21:36,480 --> 06:21:39,520
used for the internal state system. So

9285
06:21:39,520 --> 06:21:41,120
we can head over back to the

9286
06:21:41,120 --> 06:21:43,600
documentation. And here you will find

9287
06:21:43,600 --> 06:21:46,798
this section drop zone props getters. So

9288
06:21:46,798 --> 06:21:49,120
the drop zone property getters are just

9289
06:21:49,120 --> 06:21:52,160
two functions that return objects with

9290
06:21:52,160 --> 06:21:54,400
properties which you need to use to

9291
06:21:54,400 --> 06:21:56,718
create a drag and drop zone. The root

9292
06:21:56,718 --> 06:21:58,878
properties can be applied to whatever

9293
06:21:58,878 --> 06:22:01,280
element you want. Whereas the input

9294
06:22:01,280 --> 06:22:04,080
properties must be applied to an input.

9295
06:22:04,080 --> 06:22:06,558
So again these two functions are there

9296
06:22:06,558 --> 06:22:09,120
to create the drag and drop zone. They

9297
06:22:09,120 --> 06:22:11,520
are used for the state system and just

9298
06:22:11,520 --> 06:22:14,240
the back end in general. And the first

9299
06:22:14,240 --> 06:22:16,558
function get root props. You can just

9300
06:22:16,558 --> 06:22:18,798
apply it to any element. It makes sense

9301
06:22:18,798 --> 06:22:21,040
to just apply it to the first element.

9302
06:22:21,040 --> 06:22:23,520
In this case, a diff. And the get input

9303
06:22:23,520 --> 06:22:26,320
props function has to be specifically

9304
06:22:26,320 --> 06:22:28,958
applied to an input, not to a button,

9305
06:22:28,958 --> 06:22:32,798
not to a P tag, just to an input. So

9306
06:22:32,798 --> 06:22:34,718
what we can do is again scroll to the

9307
06:22:34,718 --> 06:22:36,958
top and then I will copy this return

9308
06:22:36,958 --> 06:22:39,120
statement. We can go back and then

9309
06:22:39,120 --> 06:22:41,360
instead of rendering this diff, I will

9310
06:22:41,360 --> 06:22:44,160
paste what I just copied. Uh I get here

9311
06:22:44,160 --> 06:22:46,638
one ear slint warning. So I can click on

9312
06:22:46,638 --> 06:22:49,760
quick fix and then disable. If we again

9313
06:22:49,760 --> 06:22:52,638
go back then we won't see much because

9314
06:22:52,638 --> 06:22:55,200
if I do a hard refresh you will see that

9315
06:22:55,200 --> 06:22:57,760
my deaf server is not running. So I can

9316
06:22:57,760 --> 06:23:00,958
restart it with pnpm rundeaf and then in

9317
06:23:00,958 --> 06:23:03,440
theory I should see at least something

9318
06:23:03,440 --> 06:23:06,160
but I don't see anything on drop is not

9319
06:23:06,160 --> 06:23:08,400
defined. So what's the problem? Well

9320
06:23:08,400 --> 06:23:10,400
right here we destructure the use drop

9321
06:23:10,400 --> 06:23:13,520
zone hook. And when we do structured we

9322
06:23:13,520 --> 06:23:16,878
pass on drop. On drop is a function and

9323
06:23:16,878 --> 06:23:19,360
this function will be called whenever we

9324
06:23:19,360 --> 06:23:22,000
drop files into the drop zone. This

9325
06:23:22,000 --> 06:23:23,520
means if you go back to the

9326
06:23:23,520 --> 06:23:25,680
documentation then here they already

9327
06:23:25,680 --> 06:23:28,878
define the onrop function. So as a param

9328
06:23:28,878 --> 06:23:31,360
it will get accepted files and these are

9329
06:23:31,360 --> 06:23:33,680
all of the files which you drop into the

9330
06:23:33,680 --> 06:23:35,760
drop zone and then you can do something

9331
06:23:35,760 --> 06:23:38,240
with the files later on. We will then

9332
06:23:38,240 --> 06:23:41,120
upload them. So I can copy this ondrop

9333
06:23:41,120 --> 06:23:43,680
function and then I will paste it above

9334
06:23:43,680 --> 06:23:46,000
this used drop zone hook. For the

9335
06:23:46,000 --> 06:23:48,958
accepted files we want to also provide a

9336
06:23:48,958 --> 06:23:51,520
type because hey we are Typescript

9337
06:23:51,520 --> 06:23:54,000
developers and the type will be file

9338
06:23:54,000 --> 06:23:56,558
array because a user can of course drop

9339
06:23:56,558 --> 06:23:59,520
multiple files into the array. Uh later

9340
06:23:59,520 --> 06:24:02,000
on we will limit limit the whole thing

9341
06:24:02,000 --> 06:24:05,040
to one file but still accepted files is

9342
06:24:05,040 --> 06:24:07,760
an array of files. Then we want to also

9343
06:24:07,760 --> 06:24:10,718
import use callback from React. And in

9344
06:24:10,718 --> 06:24:12,480
theory, this should already be it. We

9345
06:24:12,480 --> 06:24:14,480
can also, for example, console lock the

9346
06:24:14,480 --> 06:24:17,600
accepted files to see what we get access

9347
06:24:17,600 --> 06:24:20,320
to. And this is already it. This means

9348
06:24:20,320 --> 06:24:22,320
if I go back again and do a hard

9349
06:24:22,320 --> 06:24:25,280
refresh, we get this thing. This is the

9350
06:24:25,280 --> 06:24:27,120
drop zone. Yeah, it does not look

9351
06:24:27,120 --> 06:24:29,360
beautiful, but in theory, it should

9352
06:24:29,360 --> 06:24:31,760
work. This means if I take a file and

9353
06:24:31,760 --> 06:24:34,080
drag over this drop zone, you see

9354
06:24:34,080 --> 06:24:36,320
something interesting. drop the files

9355
06:24:36,320 --> 06:24:38,878
here. If I remove the file from the drop

9356
06:24:38,878 --> 06:24:41,680
zone, we again get this initial state.

9357
06:24:41,680 --> 06:24:44,558
So this is this boolean uh or yeah this

9358
06:24:44,558 --> 06:24:47,760
is drag active boolean right in effect

9359
06:24:47,760 --> 06:24:50,000
because when we drag over the file, it's

9360
06:24:50,000 --> 06:24:52,400
set to true. This means we render this P

9361
06:24:52,400 --> 06:24:55,280
tag. If is drag active is not true, we

9362
06:24:55,280 --> 06:24:58,000
again render this initial state. And I

9363
06:24:58,000 --> 06:25:00,320
can also drag and drop a file into the

9364
06:25:00,320 --> 06:25:02,958
drop zone. So I will drop it and nothing

9365
06:25:02,958 --> 06:25:05,280
happens. But that's fine because if I

9366
06:25:05,280 --> 06:25:07,280
open the inspector and go to the

9367
06:25:07,280 --> 06:25:09,840
console, we get a console lock and it

9368
06:25:09,840 --> 06:25:12,798
console locks an array with one object.

9369
06:25:12,798 --> 06:25:15,680
And this one object is the file which we

9370
06:25:15,680 --> 06:25:18,320
just dropped. As you see, we get access

9371
06:25:18,320 --> 06:25:21,360
to the handle, path, relative path,

9372
06:25:21,360 --> 06:25:23,920
name, size, and stuff like that. So we

9373
06:25:23,920 --> 06:25:26,160
get access to the whole file, which is

9374
06:25:26,160 --> 06:25:28,160
cool. Great. But now we have one

9375
06:25:28,160 --> 06:25:30,638
problem. This drag and drop zone looks

9376
06:25:30,638 --> 06:25:32,878
relatively ugly but it should look

9377
06:25:32,878 --> 06:25:35,120
beautiful. This means we want to style

9378
06:25:35,120 --> 06:25:38,000
it. So we can head over back to our code

9379
06:25:38,000 --> 06:25:40,878
base and then um instead of returning

9380
06:25:40,878 --> 06:25:43,600
this div I want to return a card. So the

9381
06:25:43,600 --> 06:25:46,320
cart component then for the cart of

9382
06:25:46,320 --> 06:25:48,160
course we want to also style it. This

9383
06:25:48,160 --> 06:25:50,718
means we can give it a class name and I

9384
06:25:50,718 --> 06:25:53,120
want to style it dynamically using this

9385
06:25:53,120 --> 06:25:56,000
is track active boolean which means I

9386
06:25:56,000 --> 06:25:58,958
will use the CN helper function. Then we

9387
06:25:58,958 --> 06:26:00,878
want to first of all give this card

9388
06:26:00,878 --> 06:26:03,280
default styles which will be applied

9389
06:26:03,280 --> 06:26:05,680
always. This means the position will be

9390
06:26:05,680 --> 06:26:08,160
relative. Then we will pass a border

9391
06:26:08,160 --> 06:26:10,400
too. So the border width will be a bit

9392
06:26:10,400 --> 06:26:13,120
bigger two pixels. Then border will be

9393
06:26:13,120 --> 06:26:15,920
dashed so little dots. Transition will

9394
06:26:15,920 --> 06:26:20,400
be colors. Then also duration 200 W full

9395
06:26:20,400 --> 06:26:23,280
and then height 64. As you see this

9396
06:26:23,280 --> 06:26:25,840
already looks kind of like a drop zone.

9397
06:26:25,840 --> 06:26:27,600
Nevertheless, this of course should be

9398
06:26:27,600 --> 06:26:30,000
centered. But before we do that, we can

9399
06:26:30,000 --> 06:26:32,480
first of all use the is drag active

9400
06:26:32,480 --> 06:26:35,280
boolean to style the card further. This

9401
06:26:35,280 --> 06:26:37,360
means we can add a comma after these

9402
06:26:37,360 --> 06:26:39,840
default styles and then we can create a

9403
06:26:39,840 --> 06:26:43,200
turnary. So if is drag active is true

9404
06:26:43,200 --> 06:26:45,600
then let's use a question mark and then

9405
06:26:45,600 --> 06:26:48,000
I want to render border which will be

9406
06:26:48,000 --> 06:26:50,958
primary this means this orange color bg

9407
06:26:50,958 --> 06:26:53,040
primary but I don't want to render the

9408
06:26:53,040 --> 06:26:56,638
full opacity so this will be / 10 10%

9409
06:26:56,638 --> 06:26:59,120
opacity and then border which will be

9410
06:26:59,120 --> 06:27:01,520
solid and if this is not true then we

9411
06:27:01,520 --> 06:27:03,680
can use a colon and we will render

9412
06:27:03,680 --> 06:27:06,638
border border then also hover and this

9413
06:27:06,638 --> 06:27:10,478
will be border primary so I guess This

9414
06:27:10,478 --> 06:27:12,320
should look quite nice. And yes, if I

9415
06:27:12,320 --> 06:27:15,360
hover over my cut, I get this nice hover

9416
06:27:15,360 --> 06:27:18,160
state. If I take a file and again drag

9417
06:27:18,160 --> 06:27:20,160
over the drop zone, I get this nice

9418
06:27:20,160 --> 06:27:22,240
hover animation. That's because the is

9419
06:27:22,240 --> 06:27:24,878
drag active boolean is set to true. And

9420
06:27:24,878 --> 06:27:26,558
that's why we change the background

9421
06:27:26,558 --> 06:27:29,280
color and also the border. So we are

9422
06:27:29,280 --> 06:27:30,958
finished with the cart. We can then

9423
06:27:30,958 --> 06:27:33,680
continue. I want to wrap the content in

9424
06:27:33,680 --> 06:27:36,240
the card content component. So we can

9425
06:27:36,240 --> 06:27:38,400
get cart content from the components.

9426
06:27:38,400 --> 06:27:40,000
Then we can again paste all of the

9427
06:27:40,000 --> 06:27:42,400
content in the cart content and we can

9428
06:27:42,400 --> 06:27:44,718
also style the cart content. So this

9429
06:27:44,718 --> 06:27:47,040
will be flex then item center. So for

9430
06:27:47,040 --> 06:27:49,520
the class name justify center. So this

9431
06:27:49,520 --> 06:27:51,440
means we want to center all of the

9432
06:27:51,440 --> 06:27:53,680
children put them right into the middle

9433
06:27:53,680 --> 06:27:56,478
and then also height full width full and

9434
06:27:56,478 --> 06:27:59,920
padding for uh on all sides. So as you

9435
06:27:59,920 --> 06:28:02,240
see um nothing has really changed. The

9436
06:28:02,240 --> 06:28:04,478
only thing is that our text is now

9437
06:28:04,478 --> 06:28:06,798
centered and that's way better. Then we

9438
06:28:06,798 --> 06:28:09,040
can continue and I don't want to use

9439
06:28:09,040 --> 06:28:11,520
this is drag active boolean inside of

9440
06:28:11,520 --> 06:28:14,080
here anymore or this turnary. So I will

9441
06:28:14,080 --> 06:28:15,840
delete this code and for now just create

9442
06:28:15,840 --> 06:28:18,718
a p tag with some dummy data with some

9443
06:28:18,718 --> 06:28:21,280
dummy text. Yeah, this does not look

9444
06:28:21,280 --> 06:28:23,520
beautiful. But what's the reason or why

9445
06:28:23,520 --> 06:28:25,600
did I just do that? Well, that's because

9446
06:28:25,600 --> 06:28:28,958
I want to create a new function a render

9447
06:28:28,958 --> 06:28:30,958
um how will I call it? I think render

9448
06:28:30,958 --> 06:28:33,200
content because we will have a few

9449
06:28:33,200 --> 06:28:35,520
states. We will have the uploading

9450
06:28:35,520 --> 06:28:37,680
state. That's when we drop a file and

9451
06:28:37,680 --> 06:28:40,638
the file is actively uploading. Then we

9452
06:28:40,638 --> 06:28:43,200
will also have the uploaded state. So if

9453
06:28:43,200 --> 06:28:46,080
a file is successfully uploaded, I want

9454
06:28:46,080 --> 06:28:48,718
to display the file. Then we will also

9455
06:28:48,718 --> 06:28:51,360
have a default state. This means when

9456
06:28:51,360 --> 06:28:53,440
nothing is uploaded and when also

9457
06:28:53,440 --> 06:28:56,558
nothing is uploading. So just a default

9458
06:28:56,558 --> 06:28:58,478
state. And then we want to also create

9459
06:28:58,478 --> 06:29:00,400
an error state. And this will be

9460
06:29:00,400 --> 06:29:02,558
displayed if there is an error. Who

9461
06:29:02,558 --> 06:29:04,958
would have thought? So what we can do is

9462
06:29:04,958 --> 06:29:07,120
again go back and I will create a

9463
06:29:07,120 --> 06:29:09,360
separate component for that because it's

9464
06:29:09,360 --> 06:29:11,760
quite a bit of code. So in the file

9465
06:29:11,760 --> 06:29:14,718
uploader folder we can create a new file

9466
06:29:14,718 --> 06:29:17,040
and this will be render states or

9467
06:29:17,040 --> 06:29:18,878
state.tsx.

9468
06:29:18,878 --> 06:29:20,958
Then inside of here we want to start

9469
06:29:20,958 --> 06:29:22,798
with the first state and this will be

9470
06:29:22,798 --> 06:29:25,920
the default empty state. So I want to

9471
06:29:25,920 --> 06:29:28,400
create an export function. This will be

9472
06:29:28,400 --> 06:29:32,000
render empty state. Then we can just

9473
06:29:32,000 --> 06:29:34,080
open this function and inside of here

9474
06:29:34,080 --> 06:29:36,160
let's create a return statement. In the

9475
06:29:36,160 --> 06:29:38,638
params I want to also the structure them

9476
06:29:38,638 --> 06:29:41,120
and I want to get the is drag active

9477
06:29:41,120 --> 06:29:43,360
boolean. This means I can go back to the

9478
06:29:43,360 --> 06:29:45,920
uploader. I can copy the name is drag

9479
06:29:45,920 --> 06:29:48,478
active and then paste it inside of here.

9480
06:29:48,478 --> 06:29:50,798
As you see I get an error and that's

9481
06:29:50,798 --> 06:29:54,080
because is track active has an any type

9482
06:29:54,080 --> 06:29:56,160
but the type is boolean. This means we

9483
06:29:56,160 --> 06:29:58,160
can just give it a type. So is track

9484
06:29:58,160 --> 06:30:01,040
active will be of type boolean. Then in

9485
06:30:01,040 --> 06:30:03,200
the return statement we can finally

9486
06:30:03,200 --> 06:30:06,000
create something. So let's render a div.

9487
06:30:06,000 --> 06:30:08,000
Yeah. Uh autocomp completion. Hello.

9488
06:30:08,000 --> 06:30:10,000
Yeah. Thank you. And then for the div

9489
06:30:10,000 --> 06:30:11,600
let's give it a class name. And this

9490
06:30:11,600 --> 06:30:14,478
will be text center. In the div we want

9491
06:30:14,478 --> 06:30:16,878
to create another div. And in this div,

9492
06:30:16,878 --> 06:30:19,040
this will be the wrapper div for the

9493
06:30:19,040 --> 06:30:21,680
icon because how will my empty state

9494
06:30:21,680 --> 06:30:24,478
look like? We will have an icon on the

9495
06:30:24,478 --> 06:30:27,040
top, then a little title, and then a

9496
06:30:27,040 --> 06:30:30,240
small button. This means this wrap. Um,

9497
06:30:30,240 --> 06:30:32,160
yeah, let's not style it for now. And

9498
06:30:32,160 --> 06:30:34,400
inside of here, I want to get the cloud

9499
06:30:34,400 --> 06:30:38,000
up icon or cloud upload icon from Lucid

9500
06:30:38,000 --> 06:30:40,240
React. This is self-closing. And I want

9501
06:30:40,240 --> 06:30:42,558
to also style it. So, we can give it a

9502
06:30:42,558 --> 06:30:44,958
class name. And I want to use the CN

9503
06:30:44,958 --> 06:30:47,280
helper function because I want to style

9504
06:30:47,280 --> 06:30:50,478
this icon dynamically using this is drag

9505
06:30:50,478 --> 06:30:52,798
active boolean. So we can invoke it

9506
06:30:52,798 --> 06:30:54,958
inside of here for the default styles.

9507
06:30:54,958 --> 06:30:58,000
This will be size six. Then text muted

9508
06:30:58,000 --> 06:31:00,638
foreground. And then we can use the is

9509
06:31:00,638 --> 06:31:03,840
track active boolean. So if is drag

9510
06:31:03,840 --> 06:31:06,160
active is true, we can use this double

9511
06:31:06,160 --> 06:31:08,638
and sign. And this will be equal to text

9512
06:31:08,638 --> 06:31:10,718
primary or in other words we want to

9513
06:31:10,718 --> 06:31:13,360
render text primary. Then we can also

9514
06:31:13,360 --> 06:31:16,240
style this wpper div. So we can give it

9515
06:31:16,240 --> 06:31:18,878
a class name. And also this will be

9516
06:31:18,878 --> 06:31:22,240
quite simple. So this will be flex items

9517
06:31:22,240 --> 06:31:25,360
center. Then also MX auto to center

9518
06:31:25,360 --> 06:31:28,080
everything. Justify center to center the

9519
06:31:28,080 --> 06:31:30,400
children. This means the cloud upload

9520
06:31:30,400 --> 06:31:33,200
icon. And then also size 12. So this is

9521
06:31:33,200 --> 06:31:35,520
the size of the wrapper. So again this

9522
06:31:35,520 --> 06:31:38,558
is size six. This is size 12. This

9523
06:31:38,558 --> 06:31:40,878
background thingy this div will create a

9524
06:31:40,878 --> 06:31:42,478
background color. It will have a

9525
06:31:42,478 --> 06:31:44,320
rounding and stuff like that. And then

9526
06:31:44,320 --> 06:31:46,718
the icon will be rendered in this div.

9527
06:31:46,718 --> 06:31:50,240
So in this wrapper rounding background

9528
06:31:50,240 --> 06:31:53,600
thingy. So size 12 then also rounded

9529
06:31:53,600 --> 06:31:56,798
which will be full and then BG muted so

9530
06:31:56,798 --> 06:31:59,280
to have this grayish color and margin

9531
06:31:59,280 --> 06:32:01,840
bottom four. Now if we save this and go

9532
06:32:01,840 --> 06:32:04,718
back you will see nothing. What's the

9533
06:32:04,718 --> 06:32:06,558
problem? Well this function is not

9534
06:32:06,558 --> 06:32:08,638
rendered anywhere. So here's what we

9535
06:32:08,638 --> 06:32:10,958
will do. We will go back to the uploader

9536
06:32:10,958 --> 06:32:13,280
and instead of rendering this gibberish

9537
06:32:13,280 --> 06:32:15,680
I will instead get my how was it it

9538
06:32:15,680 --> 06:32:18,718
again called render empty state. So I

9539
06:32:18,718 --> 06:32:20,718
can just get my render empty state

9540
06:32:20,718 --> 06:32:22,558
component which is imported from the

9541
06:32:22,558 --> 06:32:24,558
components or from the render state

9542
06:32:24,558 --> 06:32:26,798
component. This is self-closing and as

9543
06:32:26,798 --> 06:32:28,878
you see it throws an error and the

9544
06:32:28,878 --> 06:32:31,440
problem is that it expects a property

9545
06:32:31,440 --> 06:32:34,558
which is is track active. This means is

9546
06:32:34,558 --> 06:32:37,600
track active will be equal to is track

9547
06:32:37,600 --> 06:32:40,558
active. If we go back, you will see or

9548
06:32:40,558 --> 06:32:44,000
we will see this right here. Yeah. No,

9549
06:32:44,000 --> 06:32:47,280
no, no. This isn't really nice. So, we

9550
06:32:47,280 --> 06:32:49,520
can go back to the render state. And we

9551
06:32:49,520 --> 06:32:51,600
are finished with the icon. As a next

9552
06:32:51,600 --> 06:32:53,600
step, I want to render this little, as

9553
06:32:53,600 --> 06:32:55,280
mentioned, not really title, but

9554
06:32:55,280 --> 06:32:57,680
description and then a button. So, we

9555
06:32:57,680 --> 06:32:59,760
want to go underneath the diff, the diff

9556
06:32:59,760 --> 06:33:01,920
which wraps the icon. And then we want

9557
06:33:01,920 --> 06:33:04,320
to get a P tag inside of here. I will

9558
06:33:04,320 --> 06:33:07,840
say drop your files here or then I want

9559
06:33:07,840 --> 06:33:11,040
to get a span element not PSN but span.

9560
06:33:11,040 --> 06:33:13,360
I got PSN PlayStation. Okay, whatever.

9561
06:33:13,360 --> 06:33:16,240
And in the span I will say click uh

9562
06:33:16,240 --> 06:33:20,080
click to upload. As you will see this

9563
06:33:20,080 --> 06:33:22,000
does not look very nice. It it looks

9564
06:33:22,000 --> 06:33:24,320
fine but it could look better that we

9565
06:33:24,320 --> 06:33:26,638
could give it maybe a bigger font weight

9566
06:33:26,638 --> 06:33:28,878
and maybe a different color. Who knows?

9567
06:33:28,878 --> 06:33:31,280
So let's first of all style the P tag.

9568
06:33:31,280 --> 06:33:33,200
We can give it a class name. This will

9569
06:33:33,200 --> 06:33:35,680
be text base font which will be semib

9570
06:33:35,680 --> 06:33:38,080
bold and then also text which will be

9571
06:33:38,080 --> 06:33:40,958
foreground. Then for the span element I

9572
06:33:40,958 --> 06:33:43,280
want to give it like a even bigger font

9573
06:33:43,280 --> 06:33:45,600
weight because this is font semibold.

9574
06:33:45,600 --> 06:33:47,760
This should be font bold. So let's give

9575
06:33:47,760 --> 06:33:49,760
it a class name. This will be text

9576
06:33:49,760 --> 06:33:52,718
primary. This um orange color and then

9577
06:33:52,718 --> 06:33:57,040
font bold and cursor pointer pointer. As

9578
06:33:57,040 --> 06:33:59,360
you see this already looks way better.

9579
06:33:59,360 --> 06:34:02,160
And this click to upload text has a

9580
06:34:02,160 --> 06:34:03,920
different color and also a bigger font

9581
06:34:03,920 --> 06:34:05,760
weight. And if I click on click to

9582
06:34:05,760 --> 06:34:08,400
upload, this finder window opens. So

9583
06:34:08,400 --> 06:34:10,400
this also works great. And I think

9584
06:34:10,400 --> 06:34:12,718
that's already it. I mean I mentioned we

9585
06:34:12,718 --> 06:34:15,280
can also render a button. So I guess why

9586
06:34:15,280 --> 06:34:17,680
not? So we can go underneath the P tag,

9587
06:34:17,680 --> 06:34:19,440
get the button component from the

9588
06:34:19,440 --> 06:34:21,520
components and inside of here we can

9589
06:34:21,520 --> 06:34:24,718
just say select a file. Then if I again

9590
06:34:24,718 --> 06:34:27,040
go back. Yeah, this looks all right. We

9591
06:34:27,040 --> 06:34:29,120
need some margin to the top. So class

9592
06:34:29,120 --> 06:34:32,160
name margin top four. Yeah, I think this

9593
06:34:32,160 --> 06:34:34,558
is finished. If we click on select file,

9594
06:34:34,558 --> 06:34:36,638
uh nothing happens or we get a lot of

9595
06:34:36,638 --> 06:34:38,798
validation errors. What's the problem?

9596
06:34:38,798 --> 06:34:41,120
Well, as mentioned at the start, if you

9597
06:34:41,120 --> 06:34:43,040
don't give a button or if you don't give

9598
06:34:43,040 --> 06:34:45,360
this button a type of button, the button

9599
06:34:45,360 --> 06:34:47,520
will be treated like a submit button.

9600
06:34:47,520 --> 06:34:49,920
That's why we will right here say type

9601
06:34:49,920 --> 06:34:52,160
and this will be button. If I again go

9602
06:34:52,160 --> 06:34:54,240
back and click on select file, we don't

9603
06:34:54,240 --> 06:34:56,320
get any validation anymore. And that's

9604
06:34:56,320 --> 06:34:58,000
because this button is not treated

9605
06:34:58,000 --> 06:35:00,400
anymore like a submit button. And if we

9606
06:35:00,400 --> 06:35:02,558
do a bit of drag and drop also,

9607
06:35:02,558 --> 06:35:05,520
everything looks beautiful. So what's

9608
06:35:05,520 --> 06:35:09,040
the next state? Well, as a next state uh

9609
06:35:09,040 --> 06:35:10,958
state, let's create a render error

9610
06:35:10,958 --> 06:35:13,360
state. So we can go back and we can

9611
06:35:13,360 --> 06:35:15,600
collapse this export function and

9612
06:35:15,600 --> 06:35:17,200
underneath it, we can create a new

9613
06:35:17,200 --> 06:35:20,240
export constant or export function. This

9614
06:35:20,240 --> 06:35:23,120
will be the render error state. And then

9615
06:35:23,120 --> 06:35:25,200
we can just open this function. Inside

9616
06:35:25,200 --> 06:35:27,760
of here I want to return a div element.

9617
06:35:27,760 --> 06:35:30,320
And then for the div I we want to also

9618
06:35:30,320 --> 06:35:32,400
style it. So for the class name this

9619
06:35:32,400 --> 06:35:34,798
will be text destructive. Text

9620
06:35:34,798 --> 06:35:37,040
destructive or destructive itself is a

9621
06:35:37,040 --> 06:35:40,000
CSS variable uh provided or created by

9622
06:35:40,000 --> 06:35:42,718
shad and UI and it will give us like a

9623
06:35:42,718 --> 06:35:45,040
red color. And then I want to also say

9624
06:35:45,040 --> 06:35:48,240
text center to center the text. Inside

9625
06:35:48,240 --> 06:35:50,558
of here I want to get the image icon.

9626
06:35:50,558 --> 06:35:52,638
The image icon is imported from Lucid

9627
06:35:52,638 --> 06:35:54,958
React. This is self-closing. And for the

9628
06:35:54,958 --> 06:35:57,200
class name, this will be size 10. And

9629
06:35:57,200 --> 06:36:00,000
then also MX auto and margin bottom

9630
06:36:00,000 --> 06:36:02,878
three. Uh we want to also display this

9631
06:36:02,878 --> 06:36:04,958
error state because currently we only

9632
06:36:04,958 --> 06:36:07,360
have the empty state. So we can go to

9633
06:36:07,360 --> 06:36:08,878
the uploader and then instead of

9634
06:36:08,878 --> 06:36:11,360
rendering the empty state, we want to

9635
06:36:11,360 --> 06:36:14,240
render the error state. This is imported

9636
06:36:14,240 --> 06:36:16,320
from the render state or yeah render

9637
06:36:16,320 --> 06:36:18,638
state component. And this means if I

9638
06:36:18,638 --> 06:36:21,520
again go back, yeah, it could look

9639
06:36:21,520 --> 06:36:23,840
better. So we can go back to the render

9640
06:36:23,840 --> 06:36:26,080
state. And you know what? What is if we

9641
06:36:26,080 --> 06:36:28,240
also create this little background color

9642
06:36:28,240 --> 06:36:30,798
for this image icon. So what I can do is

9643
06:36:30,798 --> 06:36:33,040
go to the render empty state. And then

9644
06:36:33,040 --> 06:36:35,120
we have this div, this wrapper div which

9645
06:36:35,120 --> 06:36:38,080
wraps the cloud upload icon. We can just

9646
06:36:38,080 --> 06:36:40,400
copy it. This whole div, I can go back

9647
06:36:40,400 --> 06:36:42,478
and paste it instead of this upload

9648
06:36:42,478 --> 06:36:44,478
icon. Then instead of using the cloud

9649
06:36:44,478 --> 06:36:46,958
upload icon, we will again get this

9650
06:36:46,958 --> 06:36:49,840
image icon which is already imported. I

9651
06:36:49,840 --> 06:36:52,160
want to delete the is track active. We

9652
06:36:52,160 --> 06:36:54,080
won't need it. And then for the diff,

9653
06:36:54,080 --> 06:36:56,638
instead of using this BG muted, this

9654
06:36:56,638 --> 06:37:01,200
will be BG uh destructive destructive/

9655
06:37:01,200 --> 06:37:04,558
30 uh% opacity. And then for the image

9656
06:37:04,558 --> 06:37:06,558
icon, instead of saying text muted

9657
06:37:06,558 --> 06:37:08,558
foreground, this will be text

9658
06:37:08,558 --> 06:37:11,120
destructive. So this should look quite

9659
06:37:11,120 --> 06:37:13,440
nice. And yeah, you know what? I'm quite

9660
06:37:13,440 --> 06:37:16,400
a big fan. Then I want to also render a

9661
06:37:16,400 --> 06:37:18,878
little text. So underneath the vera div,

9662
06:37:18,878 --> 06:37:21,360
we can get a p tag and inside of here I

9663
06:37:21,360 --> 06:37:23,280
will say upload failed. This will be

9664
06:37:23,280 --> 06:37:25,840
like the title. We can also style it. So

9665
06:37:25,840 --> 06:37:27,600
we can give it a class name and this

9666
06:37:27,600 --> 06:37:30,080
will be text base. And then also font

9667
06:37:30,080 --> 06:37:32,558
which will be semibold. Underneath this

9668
06:37:32,558 --> 06:37:35,680
P tag, we can create another P tag and I

9669
06:37:35,680 --> 06:37:39,200
will say something went wrong. Also I

9670
06:37:39,200 --> 06:37:41,200
want to style the P tag and then this

9671
06:37:41,200 --> 06:37:44,958
will be text XS and margin top one. And

9672
06:37:44,958 --> 06:37:47,120
also I want to give it I mean let's for

9673
06:37:47,120 --> 06:37:50,638
now save this. Um yeah this is fine but

9674
06:37:50,638 --> 06:37:52,638
text destructive does not look very

9675
06:37:52,638 --> 06:37:56,080
nice. So what's the problem? Dum dum dum

9676
06:37:56,080 --> 06:37:58,080
here. This is the problem. As you see

9677
06:37:58,080 --> 06:38:00,558
the main div has a class name which is

9678
06:38:00,558 --> 06:38:02,798
text destructive. This means all of the

9679
06:38:02,798 --> 06:38:05,200
children get text destructive as a

9680
06:38:05,200 --> 06:38:07,040
color. I don't want that. I'm not even

9681
06:38:07,040 --> 06:38:09,360
sure why I added this. So, we can just

9682
06:38:09,360 --> 06:38:11,280
delete it again. And yeah, this is

9683
06:38:11,280 --> 06:38:13,600
already way better. The only problem is

9684
06:38:13,600 --> 06:38:16,320
it has a white color. Maybe a grayish

9685
06:38:16,320 --> 06:38:19,040
color would look better. So, and also

9686
06:38:19,040 --> 06:38:21,360
this shouldn't be text XL, but instead

9687
06:38:21,360 --> 06:38:23,840
text XS. And yeah, I want to use a

9688
06:38:23,840 --> 06:38:25,840
grayish color. So, this will be text

9689
06:38:25,840 --> 06:38:28,240
muted foreground. And then underneath

9690
06:38:28,240 --> 06:38:30,320
this small P tag, I want to render one

9691
06:38:30,320 --> 06:38:32,798
more P tag. And this will just say click

9692
06:38:32,798 --> 06:38:36,558
or drag a file to retry. So click or

9693
06:38:36,558 --> 06:38:40,478
drag file to reach YY. Then I want you

9694
06:38:40,478 --> 06:38:42,798
also style the P tag. And then this will

9695
06:38:42,798 --> 06:38:44,958
be or we will give the P tag a class

9696
06:38:44,958 --> 06:38:48,718
name. This will be text XS margin uh top

9697
06:38:48,718 --> 06:38:51,280
of three. And then also text muted

9698
06:38:51,280 --> 06:38:53,280
foreground. This means this grayish

9699
06:38:53,280 --> 06:38:55,600
color. And yeah it looks quite gr uh

9700
06:38:55,600 --> 06:38:58,240
quite nice. I don't know what's wrong.

9701
06:38:58,240 --> 06:39:00,558
Maybe a button would work a bit better.

9702
06:39:00,558 --> 06:39:03,120
I think so. So instead of using this P

9703
06:39:03,120 --> 06:39:05,600
tag I will instead again get a button.

9704
06:39:05,600 --> 06:39:07,360
Of course we want to give it a type

9705
06:39:07,360 --> 06:39:09,440
which will be button. And for the text

9706
06:39:09,440 --> 06:39:12,240
this will be retry

9707
06:39:12,240 --> 06:39:17,360
file. No. Yeah. My god retry. Uh okay.

9708
06:39:17,360 --> 06:39:19,120
Yeah this is great. We want to give it a

9709
06:39:19,120 --> 06:39:20,958
bit more margin to the top. So for the

9710
06:39:20,958 --> 06:39:23,120
button I will add a class name with

9711
06:39:23,120 --> 06:39:26,000
margin top four. And yep this is quite

9712
06:39:26,000 --> 06:39:28,160
good. Retry. Yeah that's not enough

9713
06:39:28,160 --> 06:39:32,638
text. So maybe retry file selection. Is

9714
06:39:32,638 --> 06:39:34,320
this better? Yeah. You know what? I

9715
06:39:34,320 --> 06:39:36,000
think we can leave it like this. And if

9716
06:39:36,000 --> 06:39:37,920
I click on the button, we don't get any

9717
06:39:37,920 --> 06:39:39,760
validation errors. And that's because

9718
06:39:39,760 --> 06:39:43,040
again we added a type which is button.

9719
06:39:43,040 --> 06:39:45,920
So what's the next step? Maybe we can

9720
06:39:45,920 --> 06:39:48,558
create the render uploaded state. And

9721
06:39:48,558 --> 06:39:50,638
after that or you know what? Let's maybe

9722
06:39:50,638 --> 06:39:52,320
for now implement the ondrop

9723
06:39:52,320 --> 06:39:55,040
functionality because currently a user

9724
06:39:55,040 --> 06:39:58,080
cannot really upload a file. So we can

9725
06:39:58,080 --> 06:40:00,638
go back to the uploader. We get an error

9726
06:40:00,638 --> 06:40:03,280
currently for an unused import. So

9727
06:40:03,280 --> 06:40:05,280
instead of using or instead of rendering

9728
06:40:05,280 --> 06:40:07,520
the error state, I want to render the

9729
06:40:07,520 --> 06:40:09,920
empty state. So let's get render empty

9730
06:40:09,920 --> 06:40:12,080
state. This is imported from the render

9731
06:40:12,080 --> 06:40:14,240
state component. Of course, we want to

9732
06:40:14,240 --> 06:40:16,638
pass the is track active boolean. And

9733
06:40:16,638 --> 06:40:18,320
don't worry later on we will make

9734
06:40:18,320 --> 06:40:20,638
everything dynamic. But for now we will

9735
06:40:20,638 --> 06:40:22,958
just showcase this one component. And I

9736
06:40:22,958 --> 06:40:25,120
want to first of all imple uh implement

9737
06:40:25,120 --> 06:40:27,760
file uploads and then after that I will

9738
06:40:27,760 --> 06:40:30,478
create the uploading state and also the

9739
06:40:30,478 --> 06:40:33,120
uploaded state. So first of all I want

9740
06:40:33,120 --> 06:40:35,680
to update my use drop zone hook uh in

9741
06:40:35,680 --> 06:40:37,600
general. So currently a user can

9742
06:40:37,600 --> 06:40:40,080
literally drop any file into the drop

9743
06:40:40,080 --> 06:40:43,040
zone. A video a or not a video but a

9744
06:40:43,040 --> 06:40:45,920
PNG, a JPEG, some sort of zip, some sort

9745
06:40:45,920 --> 06:40:49,040
of DMG, whatever. A user can literally

9746
06:40:49,040 --> 06:40:51,200
drop anything and I don't want that. I

9747
06:40:51,200 --> 06:40:54,000
want to only accept videos and then also

9748
06:40:54,000 --> 06:40:56,320
images. That's it. Nothing else. This

9749
06:40:56,320 --> 06:40:58,000
means what we can do is we can go

9750
06:40:58,000 --> 06:41:00,000
underneath the onrop and then we will

9751
06:41:00,000 --> 06:41:02,400
get the property which is called accept.

9752
06:41:02,400 --> 06:41:05,840
Except uh is just equal to an object and

9753
06:41:05,840 --> 06:41:09,200
then in this accept object um I can just

9754
06:41:09,200 --> 06:41:11,760
provide the type. In this case for now I

9755
06:41:11,760 --> 06:41:14,240
want to only allow users to upload

9756
06:41:14,240 --> 06:41:16,958
images. This means I can get an image

9757
06:41:16,958 --> 06:41:19,840
right here in the string. then slashstar

9758
06:41:19,840 --> 06:41:21,760
and this will be equal to an empty

9759
06:41:21,760 --> 06:41:24,080
array. This means I will only accept

9760
06:41:24,080 --> 06:41:26,958
images. Then underneath this accept we

9761
06:41:26,958 --> 06:41:29,280
can also get the max files property.

9762
06:41:29,280 --> 06:41:31,680
This means how many files does the user

9763
06:41:31,680 --> 06:41:34,080
or can the user drop into the drop zone.

9764
06:41:34,080 --> 06:41:36,080
In this case only one because the user

9765
06:41:36,080 --> 06:41:38,638
should only upload one image. And then

9766
06:41:38,638 --> 06:41:40,958
multiple will be set to false because

9767
06:41:40,958 --> 06:41:44,000
again a user can only select one file.

9768
06:41:44,000 --> 06:41:46,320
And then we can also create a max size

9769
06:41:46,320 --> 06:41:48,718
property. And this is the maximum size

9770
06:41:48,718 --> 06:41:50,798
of the file. In this case, this should

9771
06:41:50,798 --> 06:41:53,120
be 5 megabytes. And you can't really

9772
06:41:53,120 --> 06:41:55,760
just say in strings 5 MB. This does not

9773
06:41:55,760 --> 06:41:58,558
work. You have to calculate the bytes uh

9774
06:41:58,558 --> 06:42:01,280
to get to this 5 mgabytes. So in this

9775
06:42:01,280 --> 06:42:05,760
case, this will be 5 * 1,24

9776
06:42:05,760 --> 06:42:08,160
* 1,024.

9777
06:42:08,160 --> 06:42:13,440
So 1,024 * 1,024 uh equals to 1 mAB. And

9778
06:42:13,440 --> 06:42:17,200
then 1 mgabyte * 5 equals to 5 mgabytes.

9779
06:42:17,200 --> 06:42:19,440
So we can just create a comment and say

9780
06:42:19,440 --> 06:42:23,360
5 MB calculation. Yeah, why not? So this

9781
06:42:23,360 --> 06:42:25,360
is finished. But currently we still have

9782
06:42:25,360 --> 06:42:28,160
one problem because if I go back and try

9783
06:42:28,160 --> 06:42:31,280
to for example drag and drop what could

9784
06:42:31,280 --> 06:42:33,520
we drag and drop? How about we drag and

9785
06:42:33,520 --> 06:42:36,080
drop a video? So if I drag and drop this

9786
06:42:36,080 --> 06:42:38,558
video inside of here, nothing happens.

9787
06:42:38,558 --> 06:42:41,040
But I would like to get some sort of

9788
06:42:41,040 --> 06:42:43,360
error toast. So some sort of feedback I

9789
06:42:43,360 --> 06:42:45,520
as a user want to know hey this was

9790
06:42:45,520 --> 06:42:48,400
incorrect user try again this means I

9791
06:42:48,400 --> 06:42:50,798
want to return a toast and to return a

9792
06:42:50,798 --> 06:42:53,600
toast we have to check for the specific

9793
06:42:53,600 --> 06:42:55,600
error if you want to call it like that

9794
06:42:55,600 --> 06:42:57,440
yeah that's how you call it this means

9795
06:42:57,440 --> 06:42:59,280
inside of the use drop zone hook where

9796
06:42:59,280 --> 06:43:02,080
we destructure it we can get the ondrop

9797
06:43:02,080 --> 06:43:04,798
rejected property and this will fire

9798
06:43:04,798 --> 06:43:08,798
whenever we reject a file drop so onrop

9799
06:43:08,798 --> 06:43:11,040
rejected will right now be equal to

9800
06:43:11,040 --> 06:43:13,040
nothing because I want to create a

9801
06:43:13,040 --> 06:43:15,360
separate function. So we can go above

9802
06:43:15,360 --> 06:43:18,000
this use drop zone and I want to create

9803
06:43:18,000 --> 06:43:21,200
a function which will be called rejected

9804
06:43:21,200 --> 06:43:23,920
files and then we can just open this in

9805
06:43:23,920 --> 06:43:26,000
my params. I want to get the rejected

9806
06:43:26,000 --> 06:43:28,878
file. So in this case this will be file

9807
06:43:28,878 --> 06:43:32,080
rejection and this will be of type file

9808
06:43:32,080 --> 06:43:34,958
rejection imported from react drop zone

9809
06:43:34,958 --> 06:43:37,600
and we want to append an array because a

9810
06:43:37,600 --> 06:43:40,878
user or how how should I say it all

9811
06:43:40,878 --> 06:43:43,120
files in this drop zone are treated as

9812
06:43:43,120 --> 06:43:45,760
an array you can't store one singular

9813
06:43:45,760 --> 06:43:48,240
file no everything is an array and

9814
06:43:48,240 --> 06:43:50,558
that's why I append this array symbol

9815
06:43:50,558 --> 06:43:52,638
and then inside of here I want to create

9816
06:43:52,638 --> 06:43:54,878
an if statement first of all because it

9817
06:43:54,878 --> 06:43:56,798
could be that the user did not or that

9818
06:43:56,798 --> 06:43:59,120
our drop zone did not reject anything.

9819
06:43:59,120 --> 06:44:01,280
So we will say if we get a file

9820
06:44:01,280 --> 06:44:04,160
rejection.length so if at least one file

9821
06:44:04,160 --> 06:44:06,958
is rejected then we can create or we can

9822
06:44:06,958 --> 06:44:09,760
listen for the specific error messages.

9823
06:44:09,760 --> 06:44:11,600
So we can first of all listen for the

9824
06:44:11,600 --> 06:44:14,638
too many files error. So I will create a

9825
06:44:14,638 --> 06:44:18,000
constant too many files and this will be

9826
06:44:18,000 --> 06:44:21,360
equal to file rejection dotfind and I

9827
06:44:21,360 --> 06:44:23,520
want to find a specific rejection.

9828
06:44:23,520 --> 06:44:25,840
Here's the thing. This file rejection as

9829
06:44:25,840 --> 06:44:28,400
mentioned is an array. This means we we

9830
06:44:28,400 --> 06:44:31,040
want to find the specific error in this

9831
06:44:31,040 --> 06:44:33,040
array. And that's why I use the find

9832
06:44:33,040 --> 06:44:35,520
method. In this find method, I can of

9833
06:44:35,520 --> 06:44:37,040
course get a param. This will be the

9834
06:44:37,040 --> 06:44:39,600
rejection itself. This is the iterator

9835
06:44:39,600 --> 06:44:42,718
over when we iterate over this array. So

9836
06:44:42,718 --> 06:44:44,878
rejection and then we want to create an

9837
06:44:44,878 --> 06:44:47,200
inline callback function. And I want to

9838
06:44:47,200 --> 06:44:50,400
get the rejection itself dot errors. And

9839
06:44:50,400 --> 06:44:52,798
I want to get the first array of this

9840
06:44:52,798 --> 06:44:55,440
errors array. So array symbol zero and

9841
06:44:55,440 --> 06:44:57,680
then the code. So dot code. And this

9842
06:44:57,680 --> 06:45:00,080
should be equal to strings. And inside

9843
06:45:00,080 --> 06:45:02,638
of here 2-y

9844
06:45:02,638 --> 06:45:05,520
files. Sadly I don't get any typescript

9845
06:45:05,520 --> 06:45:08,080
types. So please try to spell it

9846
06:45:08,080 --> 06:45:10,878
correctly. Two-man

9847
06:45:10,878 --> 06:45:13,360
files. And if this is true, we can go

9848
06:45:13,360 --> 06:45:15,520
underneath the constant and we want to

9849
06:45:15,520 --> 06:45:18,080
again create an if statement. So if too

9850
06:45:18,080 --> 06:45:20,558
many files is true. So if this error

9851
06:45:20,558 --> 06:45:23,520
state is triggered then we can open the

9852
06:45:23,520 --> 06:45:25,520
if statement and we want to return an

9853
06:45:25,520 --> 06:45:28,000
error toast. So toast is imported from

9854
06:45:28,000 --> 06:45:31,600
sona do error and as an argument as for

9855
06:45:31,600 --> 06:45:34,160
the message I want to return too many

9856
06:45:34,160 --> 06:45:38,878
files selected uh max is one as you see

9857
06:45:38,878 --> 06:45:40,958
we get currently one error and that's

9858
06:45:40,958 --> 06:45:44,080
because our onrop rejected is equal to

9859
06:45:44,080 --> 06:45:46,080
nothing. So we can just pass this

9860
06:45:46,080 --> 06:45:48,878
rejected files function for the ondrop

9861
06:45:48,878 --> 06:45:51,040
rejected property. This error is now

9862
06:45:51,040 --> 06:45:54,400
gone and this function also works.

9863
06:45:54,400 --> 06:45:56,478
Currently we only listen for too many

9864
06:45:56,478 --> 06:45:58,718
files and I want to also listen for the

9865
06:45:58,718 --> 06:46:01,200
error when the file size is too big. So

9866
06:46:01,200 --> 06:46:02,958
we can create another constant. This

9867
06:46:02,958 --> 06:46:05,920
will be file size too big and this will

9868
06:46:05,920 --> 06:46:09,120
be equal to file rejection dotfind. Then

9869
06:46:09,120 --> 06:46:11,600
as a param we want to get the rejection.

9870
06:46:11,600 --> 06:46:13,840
This is an inline callback function. We

9871
06:46:13,840 --> 06:46:16,240
want to get the rejection itself dot

9872
06:46:16,240 --> 06:46:18,160
errors. This is an array. So we want to

9873
06:46:18,160 --> 06:46:20,558
get the first error and then dot code.

9874
06:46:20,558 --> 06:46:22,478
And this should be equal to

9875
06:46:22,478 --> 06:46:25,478
file-2-large.

9876
06:46:25,520 --> 06:46:27,440
And if this is true, we want to create

9877
06:46:27,440 --> 06:46:30,478
another if statement. So if file size

9878
06:46:30,478 --> 06:46:33,200
too big, then we want to return a toast.

9879
06:46:33,200 --> 06:46:35,920
So toast. And for the message, I will

9880
06:46:35,920 --> 06:46:40,878
just say file size exceeds the limit.

9881
06:46:40,878 --> 06:46:42,878
And in theory, this should already work.

9882
06:46:42,878 --> 06:46:45,520
So if I again go back and try to drag

9883
06:46:45,520 --> 06:46:48,080
and drop a lot of files, I get an error

9884
06:46:48,080 --> 06:46:50,320
a to host and it says too many files

9885
06:46:50,320 --> 06:46:53,760
selected max is one. If I again only

9886
06:46:53,760 --> 06:46:56,558
select one file, I don't get any errors.

9887
06:46:56,558 --> 06:46:59,200
That's because the validation itself is

9888
06:46:59,200 --> 06:47:00,958
correct. And then we can also test out

9889
06:47:00,958 --> 06:47:03,280
the max size limit. So right here I just

9890
06:47:03,280 --> 06:47:06,240
say that this should be 1,024 bytes.

9891
06:47:06,240 --> 06:47:08,400
Which means if I take a new image or a

9892
06:47:08,400 --> 06:47:11,040
new file and drop it into my drop zone,

9893
06:47:11,040 --> 06:47:13,360
my god, my mouse is broken. I'm sorry,

9894
06:47:13,360 --> 06:47:15,520
guys. And as you see, I get an error and

9895
06:47:15,520 --> 06:47:18,400
it's and it says file size exceeds the

9896
06:47:18,400 --> 06:47:20,798
limit. So I can again update this to 5

9897
06:47:20,798 --> 06:47:23,520
mgabytes because that was the original

9898
06:47:23,520 --> 06:47:26,320
or the original file size limit. And I

9899
06:47:26,320 --> 06:47:27,520
think we have finished with the

9900
06:47:27,520 --> 06:47:29,520
validation itself or in other words with

9901
06:47:29,520 --> 06:47:31,760
the rejected files. What's the next

9902
06:47:31,760 --> 06:47:33,600
thing which I want to implement? Well,

9903
06:47:33,600 --> 06:47:36,400
this will be our ondrop function itself.

9904
06:47:36,400 --> 06:47:38,798
And here's the thing. So when I upload

9905
06:47:38,798 --> 06:47:41,200
my file later on, as mentioned, I want

9906
06:47:41,200 --> 06:47:43,600
to display it right here. This means I

9907
06:47:43,600 --> 06:47:46,400
have to also store the dropped files in

9908
06:47:46,400 --> 06:47:48,958
state. So what we want to do is create a

9909
06:47:48,958 --> 06:47:51,440
new state. So um I want to first of all

9910
06:47:51,440 --> 06:47:53,440
delete this ESLint warning. And then in

9911
06:47:53,440 --> 06:47:55,840
my uploader function itself, I can

9912
06:47:55,840 --> 06:47:57,520
create a constant. And then we want to

9913
06:47:57,520 --> 06:48:00,320
get an getter and a setter. So this will

9914
06:48:00,320 --> 06:48:03,680
be file state. and then also set file

9915
06:48:03,680 --> 06:48:06,240
state and this will be equal to use

9916
06:48:06,240 --> 06:48:09,200
state use state is imported from react

9917
06:48:09,200 --> 06:48:11,440
and as you know we have to pass also an

9918
06:48:11,440 --> 06:48:14,400
initial state so what I can do is create

9919
06:48:14,400 --> 06:48:16,798
an interface at the top so this will be

9920
06:48:16,798 --> 06:48:20,798
interface uh uploader state yeah that I

9921
06:48:20,798 --> 06:48:22,558
think that's a good name and inside of

9922
06:48:22,558 --> 06:48:24,400
here I want to get a few properties this

9923
06:48:24,400 --> 06:48:26,878
means in my state there will be quite a

9924
06:48:26,878 --> 06:48:28,478
few properties which I want to store

9925
06:48:28,478 --> 06:48:30,798
first of all for example in unique ID

9926
06:48:30,798 --> 06:48:33,680
the file itself the progress because

9927
06:48:33,680 --> 06:48:35,440
later on as you all know I want to

9928
06:48:35,440 --> 06:48:37,440
display the uploaded progress as a

9929
06:48:37,440 --> 06:48:40,958
percentage 10% 20% whatever then for

9930
06:48:40,958 --> 06:48:44,000
example the URL itself the file type the

9931
06:48:44,000 --> 06:48:45,920
key and stuff like that so first of all

9932
06:48:45,920 --> 06:48:48,160
I want to get an ID so this will be of

9933
06:48:48,160 --> 06:48:50,400
type string or null because as an

9934
06:48:50,400 --> 06:48:52,958
initial state we won't have any files

9935
06:48:52,958 --> 06:48:55,120
which also means the ID will be null

9936
06:48:55,120 --> 06:48:57,600
then we want to also store a file the

9937
06:48:57,600 --> 06:49:00,320
file will be of type file or null

9938
06:49:00,320 --> 06:49:02,958
because Again as an initial state we

9939
06:49:02,958 --> 06:49:05,920
won't have any uploaded files. Then we

9940
06:49:05,920 --> 06:49:08,080
want to get the uploading state itself

9941
06:49:08,080 --> 06:49:10,878
and this will be a type boolean. So we

9942
06:49:10,878 --> 06:49:12,798
are either uploading or we are not

9943
06:49:12,798 --> 06:49:15,280
uploading. Then I want to also store the

9944
06:49:15,280 --> 06:49:17,520
progress indicator and this will be of

9945
06:49:17,520 --> 06:49:22,080
type number again 5% 10% 50% whatever.

9946
06:49:22,080 --> 06:49:24,478
Then we will store the key. So here's

9947
06:49:24,478 --> 06:49:26,478
the thing later on we will upload our

9948
06:49:26,478 --> 06:49:30,400
file to S3. S3 will return us or give us

9949
06:49:30,400 --> 06:49:33,360
a unique key which it uses to reference

9950
06:49:33,360 --> 06:49:36,080
or identify the file and we will use the

9951
06:49:36,080 --> 06:49:39,120
key to then later on construct our URL.

9952
06:49:39,120 --> 06:49:41,280
The ID is only there to then map over

9953
06:49:41,280 --> 06:49:43,680
our items in this uploader component

9954
06:49:43,680 --> 06:49:46,080
itself. But the key is what is really

9955
06:49:46,080 --> 06:49:48,400
important because it will allow us to

9956
06:49:48,400 --> 06:49:51,360
get the file from the S3 bucket but also

9957
06:49:51,360 --> 06:49:53,920
to delete the file and this key will be

9958
06:49:53,920 --> 06:49:56,400
optional and it will be of type string.

9959
06:49:56,400 --> 06:49:59,120
Then I want to also get an is deleting

9960
06:49:59,120 --> 06:50:01,520
boolean. So this will be of type boolean

9961
06:50:01,520 --> 06:50:03,680
as mentioned. And if we are deleting a

9962
06:50:03,680 --> 06:50:06,718
file, I will set this boolean to true.

9963
06:50:06,718 --> 06:50:09,120
Then I want to also get an error and

9964
06:50:09,120 --> 06:50:11,280
this will be of type boolean. So if we

9965
06:50:11,280 --> 06:50:13,280
get some sort of error, we will set this

9966
06:50:13,280 --> 06:50:16,000
boolean to true. Then I want to also get

9967
06:50:16,000 --> 06:50:19,520
an object URL and this will be optional

9968
06:50:19,520 --> 06:50:21,920
and also of type string. So this will be

9969
06:50:21,920 --> 06:50:25,200
the local URL of our file of our video

9970
06:50:25,200 --> 06:50:28,240
of our image and then I want to also get

9971
06:50:28,240 --> 06:50:31,280
a file type and this could either be an

9972
06:50:31,280 --> 06:50:33,840
image or a video. This means we can get

9973
06:50:33,840 --> 06:50:35,840
a string. So this will be either image

9974
06:50:35,840 --> 06:50:38,958
or with this or sign a video. So this is

9975
06:50:38,958 --> 06:50:41,200
our uploader state and we can pass the

9976
06:50:41,200 --> 06:50:43,520
uploader state to our use state hook

9977
06:50:43,520 --> 06:50:46,080
itself. So as a generic I will pass the

9978
06:50:46,080 --> 06:50:48,878
uploader state and then right here for

9979
06:50:48,878 --> 06:50:51,120
the initial state we can structure it

9980
06:50:51,120 --> 06:50:53,280
and pass all of the properties and since

9981
06:50:53,280 --> 06:50:55,600
we pass the generic we of course also

9982
06:50:55,600 --> 06:50:57,440
get help from TypeScript. This means if

9983
06:50:57,440 --> 06:50:59,840
I click on control spacebar I get all of

9984
06:50:59,840 --> 06:51:02,000
my properties. So first of all for the

9985
06:51:02,000 --> 06:51:04,240
error itself this will be false because

9986
06:51:04,240 --> 06:51:06,478
we don't have any error. Then for the

9987
06:51:06,478 --> 06:51:08,718
file itself this will be null. We don't

9988
06:51:08,718 --> 06:51:11,200
have any file. For the ID this will be

9989
06:51:11,200 --> 06:51:13,440
null. For the uploading boolean, this

9990
06:51:13,440 --> 06:51:15,840
will be false. For the progress, this

9991
06:51:15,840 --> 06:51:18,638
will be zero. Then for the is deleting

9992
06:51:18,638 --> 06:51:21,280
boolean, this will be false. And then we

9993
06:51:21,280 --> 06:51:23,760
have two more things. First of all, the

9994
06:51:23,760 --> 06:51:26,240
file type. And for the file type, right

9995
06:51:26,240 --> 06:51:28,798
now, I will just hardcode image. And

9996
06:51:28,798 --> 06:51:30,558
that's already it because the rest of

9997
06:51:30,558 --> 06:51:33,200
the properties are all optional. We will

9998
06:51:33,200 --> 06:51:35,360
update them later on. But for now, we

9999
06:51:35,360 --> 06:51:37,600
don't really need them. So our file

10000
06:51:37,600 --> 06:51:39,760
state is finished which means I can go

10001
06:51:39,760 --> 06:51:42,400
into my ondrop function and I want to

10002
06:51:42,400 --> 06:51:44,798
update it because we get our accepted

10003
06:51:44,798 --> 06:51:47,120
files and I want to put these accepted

10004
06:51:47,120 --> 06:51:48,958
files or in other words this one

10005
06:51:48,958 --> 06:51:52,320
accepted file into my state. So I can

10006
06:51:52,320 --> 06:51:54,000
delete first of all the console log. I

10007
06:51:54,000 --> 06:51:55,680
don't need it anymore. And inside of

10008
06:51:55,680 --> 06:51:57,760
here we want to first of all create an

10009
06:51:57,760 --> 06:52:00,160
if statement and we want to check if we

10010
06:52:00,160 --> 06:52:03,440
even have accepted files. So if accepted

10011
06:52:03,440 --> 06:52:06,160
files.length length is bigger than zero

10012
06:52:06,160 --> 06:52:09,520
then we can upload our file. So we can

10013
06:52:09,520 --> 06:52:11,280
first of all get the file itself

10014
06:52:11,280 --> 06:52:14,000
constant file will be equal to accepted

10015
06:52:14,000 --> 06:52:16,240
files and I want to get the first file

10016
06:52:16,240 --> 06:52:18,558
in the array. This means array symbols

10017
06:52:18,558 --> 06:52:21,920
zero and then underneath this file I

10018
06:52:21,920 --> 06:52:24,400
want to upload my or I want to set my

10019
06:52:24,400 --> 06:52:27,360
state. This means set file state I want

10020
06:52:27,360 --> 06:52:29,760
to invoke it the structured and then for

10021
06:52:29,760 --> 06:52:32,400
the file this will be equal to file.

10022
06:52:32,400 --> 06:52:35,120
Then for uploading this will be false.

10023
06:52:35,120 --> 06:52:37,920
Then for progress this will be zero. For

10024
06:52:37,920 --> 06:52:40,718
the object URL I want to create a new

10025
06:52:40,718 --> 06:52:43,200
object URL. This means we can use this

10026
06:52:43,200 --> 06:52:45,920
URL. How would you call it? Interface.

10027
06:52:45,920 --> 06:52:47,200
Does this make sense? I think it's

10028
06:52:47,200 --> 06:52:49,200
called interface. And then we can use

10029
06:52:49,200 --> 06:52:52,240
the create object URL method. And as an

10030
06:52:52,240 --> 06:52:54,878
argument I want to pass my file. So what

10031
06:52:54,878 --> 06:52:57,920
we can do is click on MDN. So this is

10032
06:52:57,920 --> 06:53:00,400
just the documentation website. and I

10033
06:53:00,400 --> 06:53:02,718
will open it in a new tab. So create

10034
06:53:02,718 --> 06:53:05,920
object URL is a static method and as you

10035
06:53:05,920 --> 06:53:08,878
see the create object URL method is a

10036
06:53:08,878 --> 06:53:11,840
static method of the URL interface and

10037
06:53:11,840 --> 06:53:14,558
it creates a string containing a URL

10038
06:53:14,558 --> 06:53:16,718
representing the object given in the

10039
06:53:16,718 --> 06:53:19,440
parameter. The URL lifetime is tied to

10040
06:53:19,440 --> 06:53:21,520
the document in the window on which it

10041
06:53:21,520 --> 06:53:24,160
was created. The new object URL

10042
06:53:24,160 --> 06:53:27,200
represents the specified file object uh

10043
06:53:27,200 --> 06:53:30,478
or blob object. So what exactly is meant

10044
06:53:30,478 --> 06:53:32,958
by that? Well, this file which we pass

10045
06:53:32,958 --> 06:53:35,520
right here is an object, right? We get

10046
06:53:35,520 --> 06:53:38,160
the um what do we get? We get the size,

10047
06:53:38,160 --> 06:53:40,558
the created at time stamp, stuff like

10048
06:53:40,558 --> 06:53:43,680
that. But this is an object and we can't

10049
06:53:43,680 --> 06:53:46,478
render an object for our image tag

10050
06:53:46,478 --> 06:53:48,798
itself. This means we have to create a

10051
06:53:48,798 --> 06:53:51,600
local representation of the file as a

10052
06:53:51,600 --> 06:53:54,558
URL. And using this URL interface and to

10053
06:53:54,558 --> 06:53:56,400
be more specific using this create

10054
06:53:56,400 --> 06:53:59,120
object URL method we can take the file

10055
06:53:59,120 --> 06:54:01,920
the object and convert it into a local

10056
06:54:01,920 --> 06:54:04,558
URL. This is stored then in our document

10057
06:54:04,558 --> 06:54:07,520
as a memory itself. We will have to then

10058
06:54:07,520 --> 06:54:09,200
also revoke it. But for now we don't

10059
06:54:09,200 --> 06:54:10,478
really have to think about these

10060
06:54:10,478 --> 06:54:12,400
problems. Right now we just generate

10061
06:54:12,400 --> 06:54:15,520
this new URL this local URL and that's

10062
06:54:15,520 --> 06:54:17,920
great. Then as a next step for the error

10063
06:54:17,920 --> 06:54:19,760
this will be false because we don't have

10064
06:54:19,760 --> 06:54:22,160
any error. And for the ID, I want to

10065
06:54:22,160 --> 06:54:24,878
pass a unique ID because this is what I

10066
06:54:24,878 --> 06:54:28,000
will use to map over my files. So we

10067
06:54:28,000 --> 06:54:30,240
could create one using the crypto

10068
06:54:30,240 --> 06:54:32,160
package. But the biggest problem is

10069
06:54:32,160 --> 06:54:33,920
crypto does not really work in a

10070
06:54:33,920 --> 06:54:36,080
serverless environment in versel or in

10071
06:54:36,080 --> 06:54:38,080
the edge environment. This means what I

10072
06:54:38,080 --> 06:54:41,040
will do instead is install the UYU ID

10073
06:54:41,040 --> 06:54:43,600
package. The UU ID um let me get it

10074
06:54:43,600 --> 06:54:46,000
right here. So npm UU ID. This is the

10075
06:54:46,000 --> 06:54:48,080
package which I want to use and all it

10076
06:54:48,080 --> 06:54:50,080
does is it will give us a unique

10077
06:54:50,080 --> 06:54:51,600
identifier. That's it. Nothing

10078
06:54:51,600 --> 06:54:55,120
groundbreaking. So we will use uyu ID v4

10079
06:54:55,120 --> 06:54:58,080
to generate such an ID and this will be

10080
06:54:58,080 --> 06:55:01,600
then used to identify our file. So I can

10081
06:55:01,600 --> 06:55:04,160
copy this uyuid package name and then in

10082
06:55:04,160 --> 06:55:08,400
my terminal I will run pnpmi uyuid. Once

10083
06:55:08,400 --> 06:55:10,638
installed I can restart my dev server

10084
06:55:10,638 --> 06:55:12,718
and then on the top I want to import

10085
06:55:12,718 --> 06:55:15,040
uuid. So I will copy this import

10086
06:55:15,040 --> 06:55:17,200
statement and then on the top I can just

10087
06:55:17,200 --> 06:55:21,040
paste it. This means import v4 as uyu uh

10088
06:55:21,040 --> 06:55:23,920
id v4. I can then copy it. Scroll to the

10089
06:55:23,920 --> 06:55:26,240
uh bottom again not to the top and paste

10090
06:55:26,240 --> 06:55:28,478
it. We have to also invoke it. And now

10091
06:55:28,478 --> 06:55:31,200
we generate a new unique identifier.

10092
06:55:31,200 --> 06:55:33,200
Underneath the ID we also have to update

10093
06:55:33,200 --> 06:55:35,280
the is deleting state. This will be

10094
06:55:35,280 --> 06:55:37,600
false. And then for the file type as

10095
06:55:37,600 --> 06:55:40,400
mentioned this will be an image. So we

10096
06:55:40,400 --> 06:55:42,878
update our file state. That's great.

10097
06:55:42,878 --> 06:55:45,600
This means our file is in our state

10098
06:55:45,600 --> 06:55:48,400
itself. But I want to also upload our

10099
06:55:48,400 --> 06:55:50,878
file. And to upload our file, I will

10100
06:55:50,878 --> 06:55:53,440
create a separate function. So I want to

10101
06:55:53,440 --> 06:55:55,840
go above this onrop function. And I want

10102
06:55:55,840 --> 06:55:57,680
to create a new function. This will be

10103
06:55:57,680 --> 06:56:01,200
called um how about upload file. Then we

10104
06:56:01,200 --> 06:56:03,520
can just open it. And that's it. As a

10105
06:56:03,520 --> 06:56:05,920
param, I want to get the file itself.

10106
06:56:05,920 --> 06:56:08,160
And this will be of type file because we

10107
06:56:08,160 --> 06:56:10,638
want to upload a singular file. You

10108
06:56:10,638 --> 06:56:13,600
can't upload arrays. You can only upload

10109
06:56:13,600 --> 06:56:16,558
singular objects and inside of here we

10110
06:56:16,558 --> 06:56:18,478
want to again first of all again update

10111
06:56:18,478 --> 06:56:21,200
our state because now uploading will be

10112
06:56:21,200 --> 06:56:23,280
true and the progress will still be

10113
06:56:23,280 --> 06:56:26,000
zero. So we can uh get for example or

10114
06:56:26,000 --> 06:56:28,320
not for example we can get our set file

10115
06:56:28,320 --> 06:56:30,400
state the function then we want to

10116
06:56:30,400 --> 06:56:32,558
invoke it as a param. I want to get my

10117
06:56:32,558 --> 06:56:34,400
previous state and then this will be an

10118
06:56:34,400 --> 06:56:36,240
inline callback function. We can

10119
06:56:36,240 --> 06:56:39,040
destruct and inside of here I can update

10120
06:56:39,040 --> 06:56:41,760
my state. So what exactly do we do right

10121
06:56:41,760 --> 06:56:44,638
here? Well, the set file state setter is

10122
06:56:44,638 --> 06:56:47,200
a function and this set file state as a

10123
06:56:47,200 --> 06:56:49,840
param gets our previous files or our

10124
06:56:49,840 --> 06:56:51,600
previous state. What does this mean?

10125
06:56:51,600 --> 06:56:53,200
Well, this previous is just a

10126
06:56:53,200 --> 06:56:55,520
representation of our current state.

10127
06:56:55,520 --> 06:56:57,760
It's pretty much the same thing as file

10128
06:56:57,760 --> 06:57:00,160
state. And I want to now keep my

10129
06:57:00,160 --> 06:57:02,000
previous items. This means I want to

10130
06:57:02,000 --> 06:57:04,638
spread my previous items. So all of my

10131
06:57:04,638 --> 06:57:06,718
previous properties, this means the

10132
06:57:06,718 --> 06:57:09,600
error will be still false. the file will

10133
06:57:09,600 --> 06:57:11,680
still be the file which I added here.

10134
06:57:11,680 --> 06:57:13,840
The ID will stay the same. I won't

10135
06:57:13,840 --> 06:57:16,638
update these fields but I want to update

10136
06:57:16,638 --> 06:57:19,040
the uploading boolean and this should be

10137
06:57:19,040 --> 06:57:21,440
true. And for the progress I will set it

10138
06:57:21,440 --> 06:57:23,840
to zero. I know we already set it to

10139
06:57:23,840 --> 06:57:26,478
zero in this uh onrop function.

10140
06:57:26,478 --> 06:57:27,920
Nevertheless, I want to also do it

10141
06:57:27,920 --> 06:57:30,240
inside of here. So again this set file

10142
06:57:30,240 --> 06:57:32,958
state updates our state itself. this

10143
06:57:32,958 --> 06:57:34,638
previous

10144
06:57:34,638 --> 06:57:36,400
param I guess yeah that's how I will

10145
06:57:36,400 --> 06:57:38,798
call it is the local representation of

10146
06:57:38,798 --> 06:57:41,520
our state it's the exact same thing as

10147
06:57:41,520 --> 06:57:44,240
file state and then we just uh spread

10148
06:57:44,240 --> 06:57:46,798
our previous items this means the error

10149
06:57:46,798 --> 06:57:49,040
the file the ID the progress and stuff

10150
06:57:49,040 --> 06:57:51,680
like that we only up uh update two

10151
06:57:51,680 --> 06:57:53,600
properties and that's the uploading

10152
06:57:53,600 --> 06:57:55,520
property and the progress property

10153
06:57:55,520 --> 06:57:57,920
that's it groundbreaking it's quite

10154
06:57:57,920 --> 06:58:00,478
simple as you see and the next step is

10155
06:58:00,478 --> 06:58:03,440
to already upload our file trial. So I

10156
06:58:03,440 --> 06:58:05,920
will create a try catch statement and

10157
06:58:05,920 --> 06:58:07,760
for now in the catch statement I won't

10158
06:58:07,760 --> 06:58:09,840
do anything. We want to first of all get

10159
06:58:09,840 --> 06:58:11,840
started with the try statement. And

10160
06:58:11,840 --> 06:58:14,240
here's my question to you. How do you

10161
06:58:14,240 --> 06:58:18,080
upload a file in XJS through the server

10162
06:58:18,080 --> 06:58:20,718
side through the client side through the

10163
06:58:20,718 --> 06:58:23,360
server and client side? Well I want to

10164
06:58:23,360 --> 06:58:25,680
show you a little diagram. So your first

10165
06:58:25,680 --> 06:58:28,000
idea might be hey Jan let's upload the

10166
06:58:28,000 --> 06:58:30,160
file on the server side. I mean we have

10167
06:58:30,160 --> 06:58:32,718
Nex.js JS we have route handlers API

10168
06:58:32,718 --> 06:58:35,120
routes let's funnel the request through

10169
06:58:35,120 --> 06:58:37,360
the server sure let's look at this

10170
06:58:37,360 --> 06:58:39,520
diagram so we have a client you for

10171
06:58:39,520 --> 06:58:41,360
example you are the client and you make

10172
06:58:41,360 --> 06:58:43,440
a request to the server with a file so

10173
06:58:43,440 --> 06:58:45,520
you want to make an upload request the

10174
06:58:45,520 --> 06:58:47,600
server gets the request that analyzes

10175
06:58:47,600 --> 06:58:50,558
everything maybe arcjet analyzes the

10176
06:58:50,558 --> 06:58:52,958
request and says hey everything is fine

10177
06:58:52,958 --> 06:58:55,520
and then we forward the request to S3 so

10178
06:58:55,520 --> 06:58:58,400
we make an API request to S3 and we will

10179
06:58:58,400 --> 06:59:01,280
say hey S3 we want to upload this cool

10180
06:59:01,280 --> 06:59:04,080
file. S3 will take the file and it will

10181
06:59:04,080 --> 06:59:06,320
return the URL back to the client or the

10182
06:59:06,320 --> 06:59:08,400
key to be specific and then we are

10183
06:59:08,400 --> 06:59:10,400
finished, right? So, congrats. Great

10184
06:59:10,400 --> 06:59:12,478
idea. Actually, it's not a good idea.

10185
06:59:12,478 --> 06:59:14,160
Why is this not a good idea? Or in other

10186
06:59:14,160 --> 06:59:16,400
words, why is this not a good solution?

10187
06:59:16,400 --> 06:59:19,360
So, Nex.js has a body size limit. By

10188
06:59:19,360 --> 06:59:22,160
default, the maximum size of the request

10189
06:59:22,160 --> 06:59:24,798
body as sent to a server action is 1

10190
06:59:24,798 --> 06:59:27,440
megabyte. Now, you might say, "Hey, Jan,

10191
06:59:27,440 --> 06:59:29,600
who cares? We will use a route handler

10192
06:59:29,600 --> 06:59:32,000
and even if we would use server actions,

10193
06:59:32,000 --> 06:59:34,080
this is just the default. We can update

10194
06:59:34,080 --> 06:59:37,040
it to for example 10 megabytes. Why not?

10195
06:59:37,040 --> 06:59:40,160
Sure, good idea. So later on we will

10196
06:59:40,160 --> 06:59:42,320
deploy our application to Versel and

10197
06:59:42,320 --> 06:59:44,638
then we have a new problem. So Versel is

10198
06:59:44,638 --> 06:59:46,400
a serverless environment as you

10199
06:59:46,400 --> 06:59:48,798
hopefully and probably know. This means

10200
06:59:48,798 --> 06:59:51,040
it uses serverless functions to serve

10201
06:59:51,040 --> 06:59:53,440
your application. And the maximum body

10202
06:59:53,440 --> 06:59:55,440
size limit for the request body or the

10203
06:59:55,440 --> 06:59:58,558
response body of a versel function is

10204
06:59:58,558 --> 07:00:01,680
4.5 MGB. This means if you upload a file

10205
07:00:01,680 --> 07:00:04,160
which is bigger than 4.5 megabytes, it

10206
07:00:04,160 --> 07:00:06,240
will just fail and you can't update the

10207
07:00:06,240 --> 07:00:09,120
body size limit. 4.5 mgabytes is the

10208
07:00:09,120 --> 07:00:11,840
maximum. You can't do anything about it

10209
07:00:11,840 --> 07:00:13,680
because again this is a serverless

10210
07:00:13,680 --> 07:00:16,320
environment. it does not work or there's

10211
07:00:16,320 --> 07:00:18,558
no infinite body size limit. But now you

10212
07:00:18,558 --> 07:00:20,400
might say, "Hey Jan, you know what?

10213
07:00:20,400 --> 07:00:22,958
Forget Versell, forget serverless. Let's

10214
07:00:22,958 --> 07:00:25,280
upload or let's deploy our application

10215
07:00:25,280 --> 07:00:28,240
to a server full serverful provider." So

10216
07:00:28,240 --> 07:00:30,320
let's say Hetszna for example. He hats

10217
07:00:30,320 --> 07:00:32,240
now will give you a box and this is just

10218
07:00:32,240 --> 07:00:35,120
a full-on server and then you will and

10219
07:00:35,120 --> 07:00:37,600
then you won't have any body size limit.

10220
07:00:37,600 --> 07:00:39,520
Sure, this will work. But you don't

10221
07:00:39,520 --> 07:00:41,600
really want to upload a file through the

10222
07:00:41,600 --> 07:00:43,360
server side because with that you will

10223
07:00:43,360 --> 07:00:46,160
also create quite a big strain on your

10224
07:00:46,160 --> 07:00:49,040
memory on your bandwidth on just in

10225
07:00:49,040 --> 07:00:51,280
general you will take up quite a lot

10226
07:00:51,280 --> 07:00:53,760
resources just to upload your file on

10227
07:00:53,760 --> 07:00:55,760
the server side. So the client side is

10228
07:00:55,760 --> 07:00:58,000
way better because your machine won't

10229
07:00:58,000 --> 07:01:00,718
handle this file upload. You won't incur

10230
07:01:00,718 --> 07:01:02,718
any bandwidth or anything like that. So

10231
07:01:02,718 --> 07:01:04,718
now you might say then hey Jan so if you

10232
07:01:04,718 --> 07:01:06,798
say that the client is a better idea

10233
07:01:06,798 --> 07:01:09,120
then let's upload the file on the client

10234
07:01:09,120 --> 07:01:11,440
side why not sure so what we can do is

10235
07:01:11,440 --> 07:01:14,240
get a line let's scratch the server who

10236
07:01:14,240 --> 07:01:16,400
cares about the server and instead we

10237
07:01:16,400 --> 07:01:19,200
will make a direct request to S3 so this

10238
07:01:19,200 --> 07:01:21,360
is this white line the client make a

10239
07:01:21,360 --> 07:01:24,718
will make a request to S3 S3 will upload

10240
07:01:24,718 --> 07:01:26,718
the file and return the key to the

10241
07:01:26,718 --> 07:01:29,360
client great success we now don't have

10242
07:01:29,360 --> 07:01:31,760
any body size limits anymore we don't

10243
07:01:31,760 --> 07:01:33,600
strain stain our machine. So if we are

10244
07:01:33,600 --> 07:01:35,520
on a serverful deployment, we don't

10245
07:01:35,520 --> 07:01:37,600
strain our machine. And if we are

10246
07:01:37,600 --> 07:01:39,680
deployed on a serverless envir or in a

10247
07:01:39,680 --> 07:01:41,200
serverless environment, so if we

10248
07:01:41,200 --> 07:01:43,440
deployed our application using burcell,

10249
07:01:43,440 --> 07:01:46,000
then we won't hit any body size limits.

10250
07:01:46,000 --> 07:01:47,920
Great. But here comes the big butt. But

10251
07:01:47,920 --> 07:01:51,280
but but the client side is insecure. You

10252
07:01:51,280 --> 07:01:53,680
want to never do something like this on

10253
07:01:53,680 --> 07:01:55,760
the client side. You have to always

10254
07:01:55,760 --> 07:01:58,400
validate everything on the server side.

10255
07:01:58,400 --> 07:02:00,160
Because right now, if you give the user

10256
07:02:00,160 --> 07:02:03,040
direct access to S3, the user could

10257
07:02:03,040 --> 07:02:06,320
literally upload anything, a video, a

10258
07:02:06,320 --> 07:02:08,638
photo, some sort of malicious software.

10259
07:02:08,638 --> 07:02:10,478
You can't validate it because this is

10260
07:02:10,478 --> 07:02:12,878
the client side. This means we still

10261
07:02:12,878 --> 07:02:14,478
need the server side. We still need the

10262
07:02:14,478 --> 07:02:17,040
server side to validate the request to

10263
07:02:17,040 --> 07:02:19,040
validate the file to check that

10264
07:02:19,040 --> 07:02:21,360
everything is secure. And only if it's

10265
07:02:21,360 --> 07:02:24,160
secure, we want to then upload the file.

10266
07:02:24,160 --> 07:02:26,160
But again, this does not work. So we

10267
07:02:26,160 --> 07:02:28,400
need some sort of solution which still

10268
07:02:28,400 --> 07:02:30,320
gives us the ability to validate the

10269
07:02:30,320 --> 07:02:32,558
request on the server side and then

10270
07:02:32,558 --> 07:02:34,958
allow the user to upload the file on the

10271
07:02:34,958 --> 07:02:38,160
client side. H what could be a good

10272
07:02:38,160 --> 07:02:40,718
solution? Let me think about it. How

10273
07:02:40,718 --> 07:02:44,000
about we use pre-signed URLs? What are

10274
07:02:44,000 --> 07:02:46,400
pre-signed URLs? Well, let's look at

10275
07:02:46,400 --> 07:02:49,120
this diagram. A user, a client makes a

10276
07:02:49,120 --> 07:02:51,200
request to the server, an upload

10277
07:02:51,200 --> 07:02:53,360
request. The server analyzes the

10278
07:02:53,360 --> 07:02:55,760
request. that analyzes the file. Maybe

10279
07:02:55,760 --> 07:02:58,400
ArcJet analyzes everything and then the

10280
07:02:58,400 --> 07:03:01,600
server makes a request to S3, an API

10281
07:03:01,600 --> 07:03:04,080
call to upload the file. But instead of

10282
07:03:04,080 --> 07:03:07,040
uploading the file, we will instead ask

10283
07:03:07,040 --> 07:03:10,478
S3 for a pre-signed URL. This pre-signed

10284
07:03:10,478 --> 07:03:12,638
URL will be defined with some sort of

10285
07:03:12,638 --> 07:03:15,840
expiration time. Let's say 3 minutes. So

10286
07:03:15,840 --> 07:03:18,878
S3 will generate an URL which is valid

10287
07:03:18,878 --> 07:03:21,920
for 3 minutes. This URL will be returned

10288
07:03:21,920 --> 07:03:24,080
to the client and the client will then

10289
07:03:24,080 --> 07:03:27,120
upload the file on the client side using

10290
07:03:27,120 --> 07:03:30,160
this pre-signed URL. And again, this pre

10291
07:03:30,160 --> 07:03:32,160
why is this safe? Well, that's because

10292
07:03:32,160 --> 07:03:34,240
we validate everything on the server

10293
07:03:34,240 --> 07:03:36,798
side. This pre-signed URL will only

10294
07:03:36,798 --> 07:03:40,400
allow you to upload a file which um how

10295
07:03:40,400 --> 07:03:42,000
would you say it which has the correct

10296
07:03:42,000 --> 07:03:43,600
info because in the server we will

10297
07:03:43,600 --> 07:03:45,920
create this pre-signed URL and when we

10298
07:03:45,920 --> 07:03:48,080
generate the pre-signed URL we will say

10299
07:03:48,080 --> 07:03:51,280
hey the file will have a size of XYZ it

10300
07:03:51,280 --> 07:03:53,920
will have uh I don't know this and that

10301
07:03:53,920 --> 07:03:56,958
XY content type for example will be XYZ

10302
07:03:56,958 --> 07:03:59,040
so this pre-signed URL will have

10303
07:03:59,040 --> 07:04:01,840
specific data and then the user can only

10304
07:04:01,840 --> 07:04:05,040
upload a file which matches this uh

10305
07:04:05,040 --> 07:04:07,280
requirements that's the word that I was

10306
07:04:07,280 --> 07:04:10,320
looking for. So the client will only be

10307
07:04:10,320 --> 07:04:13,040
able to upload a file if the requ if the

10308
07:04:13,040 --> 07:04:15,520
file data the info matches the

10309
07:04:15,520 --> 07:04:18,240
requirements of this pre-signed URL and

10310
07:04:18,240 --> 07:04:20,240
that's why it's safe to use pre-signed

10311
07:04:20,240 --> 07:04:22,400
URLs and why it's also recommended

10312
07:04:22,400 --> 07:04:24,478
because again we don't put any strain on

10313
07:04:24,478 --> 07:04:26,558
our server and we still upload on the

10314
07:04:26,558 --> 07:04:28,958
client side and we validate everything

10315
07:04:28,958 --> 07:04:31,200
which means we want to use pre-signed

10316
07:04:31,200 --> 07:04:34,320
URLs. Yoohoo!

10317
07:04:34,320 --> 07:04:37,120
My god, cringe. Okay, guys, drink some

10318
07:04:37,120 --> 07:04:39,600
water. This was quite an explanation.

10319
07:04:39,600 --> 07:04:41,760
So, this means we can go back to our

10320
07:04:41,760 --> 07:04:44,160
application. And what I want to do is

10321
07:04:44,160 --> 07:04:46,400
create a new route handler. This route

10322
07:04:46,400 --> 07:04:48,878
handler will generate a pre-signed URL.

10323
07:04:48,878 --> 07:04:51,200
We will then use the pre-signed URL to

10324
07:04:51,200 --> 07:04:53,840
upload our file on the client side. And

10325
07:04:53,840 --> 07:04:55,840
once that's done, we will be pretty much

10326
07:04:55,840 --> 07:04:58,080
finished at least with the basic uh

10327
07:04:58,080 --> 07:05:00,400
functionality. So I want to first of all

10328
07:05:00,400 --> 07:05:02,000
create a route handler as already

10329
07:05:02,000 --> 07:05:03,840
mentioned. This means we want to go into

10330
07:05:03,840 --> 07:05:06,080
our app folder and then in the app

10331
07:05:06,080 --> 07:05:08,160
folder I want to create a new folder or

10332
07:05:08,160 --> 07:05:10,638
we already have the API folder and in

10333
07:05:10,638 --> 07:05:13,840
the API folder I want to create a new S3

10334
07:05:13,840 --> 07:05:16,958
folder and then in the S3 folder I want

10335
07:05:16,958 --> 07:05:19,200
to create a child folder and this will

10336
07:05:19,200 --> 07:05:21,680
be called what could be a good name

10337
07:05:21,680 --> 07:05:24,878
maybe upload. Yes, S3 upload. And then

10338
07:05:24,878 --> 07:05:27,040
for the upload folder I want to create a

10339
07:05:27,040 --> 07:05:29,760
new file and this will be route.ts.

10340
07:05:29,760 --> 07:05:32,000
So in this file or in this route handler

10341
07:05:32,000 --> 07:05:34,478
in this API route we will generate the

10342
07:05:34,478 --> 07:05:36,638
pre-signed URL. And I think you all know

10343
07:05:36,638 --> 07:05:38,478
what route handlers are because we

10344
07:05:38,478 --> 07:05:40,718
already discussed it at the start. So

10345
07:05:40,718 --> 07:05:42,638
inside of here I want to create an

10346
07:05:42,638 --> 07:05:45,040
export function or this should be an

10347
07:05:45,040 --> 07:05:47,600
async function. And here's the important

10348
07:05:47,600 --> 07:05:49,760
thing. We have a few request methods

10349
07:05:49,760 --> 07:05:52,638
right? You have a post request, get

10350
07:05:52,638 --> 07:05:55,440
request, put request, delete request,

10351
07:05:55,440 --> 07:05:57,040
and a few other requests. But these are

10352
07:05:57,040 --> 07:05:59,520
the four main requests. What request are

10353
07:05:59,520 --> 07:06:01,920
we trying to do right here? Delete. I

10354
07:06:01,920 --> 07:06:04,558
don't think so. Get I don't think so.

10355
07:06:04,558 --> 07:06:06,798
It's post. We want to do something. We

10356
07:06:06,798 --> 07:06:08,400
want to pretty much create a mutation.

10357
07:06:08,400 --> 07:06:10,320
So, this will be then uppercase post.

10358
07:06:10,320 --> 07:06:12,240
And then we can just open this function.

10359
07:06:12,240 --> 07:06:14,558
And if a user or we could say if a

10360
07:06:14,558 --> 07:06:16,718
malicious user tries to make a request

10361
07:06:16,718 --> 07:06:19,360
here using for example a get request

10362
07:06:19,360 --> 07:06:22,320
this won't accept it. So we only allow

10363
07:06:22,320 --> 07:06:25,040
post requests and in the params I can

10364
07:06:25,040 --> 07:06:27,120
also get a request object and this will

10365
07:06:27,120 --> 07:06:30,000
be of type request. Inside of here we

10366
07:06:30,000 --> 07:06:31,680
can first of all create a try catch

10367
07:06:31,680 --> 07:06:33,600
statement for error handling. So inside

10368
07:06:33,600 --> 07:06:35,600
of here I want to first of all get the

10369
07:06:35,600 --> 07:06:37,680
body itself. This means we can create a

10370
07:06:37,680 --> 07:06:40,080
constant body or and with body I mean

10371
07:06:40,080 --> 07:06:41,680
the request body right? I think you

10372
07:06:41,680 --> 07:06:43,280
understand what I mean. And then this

10373
07:06:43,280 --> 07:06:46,558
will be equal to await request.json.

10374
07:06:46,558 --> 07:06:48,638
And then I want to invoke it. So here's

10375
07:06:48,638 --> 07:06:50,878
the thing. Our body or later on we will

10376
07:06:50,878 --> 07:06:53,760
pass for our body the file name content

10377
07:06:53,760 --> 07:06:56,958
type size and then also if it's an image

10378
07:06:56,958 --> 07:06:59,600
or a video. This means I can create a

10379
07:06:59,600 --> 07:07:01,920
zot schema and we will then validate the

10380
07:07:01,920 --> 07:07:03,920
body against the zot schema. Because

10381
07:07:03,920 --> 07:07:05,760
currently there's no type safety. If I

10382
07:07:05,760 --> 07:07:07,760
say body dot, you see I don't get

10383
07:07:07,760 --> 07:07:09,840
anything. That's why we will use a zot

10384
07:07:09,840 --> 07:07:12,240
schema. This means we will hit two birds

10385
07:07:12,240 --> 07:07:14,400
with one stone. Is this the correct

10386
07:07:14,400 --> 07:07:16,320
saying? I'm not sure. But we will first

10387
07:07:16,320 --> 07:07:18,160
of all validate everything on the server

10388
07:07:18,160 --> 07:07:20,558
side. And secondly, we will get type

10389
07:07:20,558 --> 07:07:23,120
safety. So above the export function, we

10390
07:07:23,120 --> 07:07:25,360
can create a new export constant. This

10391
07:07:25,360 --> 07:07:28,558
will be called file upload schema and

10392
07:07:28,558 --> 07:07:31,280
this will be equal to z.object.

10393
07:07:31,280 --> 07:07:33,840
Z is imported from zot. So on top I can

10394
07:07:33,840 --> 07:07:35,440
create an import statement. The

10395
07:07:35,440 --> 07:07:37,840
structured and this will be from zot.

10396
07:07:37,840 --> 07:07:39,600
Then where we d the structured we can

10397
07:07:39,600 --> 07:07:42,478
get z itself and then as mentioned again

10398
07:07:42,478 --> 07:07:44,718
this will be z.object

10399
07:07:44,718 --> 07:07:46,798
and then we want to invoke it and the

10400
07:07:46,798 --> 07:07:49,440
structured. So what properties do I want

10401
07:07:49,440 --> 07:07:51,680
to get from my body or what properties

10402
07:07:51,680 --> 07:07:54,478
will I pass. First of all the file name

10403
07:07:54,478 --> 07:07:57,360
itself and the file name will be of type

10404
07:07:57,360 --> 07:07:58,878
z.string.

10405
07:07:58,878 --> 07:08:01,040
We can also add further validation. This

10406
07:08:01,040 --> 07:08:03,200
means dot minimum. This will be one at

10407
07:08:03,200 --> 07:08:05,440
least one character and then I want to

10408
07:08:05,440 --> 07:08:07,520
of course return a message an error

10409
07:08:07,520 --> 07:08:10,320
message and this is or this will be file

10410
07:08:10,320 --> 07:08:13,760
name is required. Then I want to also

10411
07:08:13,760 --> 07:08:17,120
pass content type. So is this a video?

10412
07:08:17,120 --> 07:08:20,080
Is this a PNG? Is this a JPEG? Whatever

10413
07:08:20,080 --> 07:08:22,718
this will be also of type Z.string we

10414
07:08:22,718 --> 07:08:24,240
want to invoke it and do further

10415
07:08:24,240 --> 07:08:26,638
validation dot minimum one. And for the

10416
07:08:26,638 --> 07:08:28,958
error message this will be I don't know

10417
07:08:28,958 --> 07:08:32,080
maybe content type is required. Then

10418
07:08:32,080 --> 07:08:33,840
what else are we missing? Well we are

10419
07:08:33,840 --> 07:08:35,920
also missing the size itself or that's

10420
07:08:35,920 --> 07:08:38,400
what I want to pass and the size will be

10421
07:08:38,400 --> 07:08:41,280
of Z or of type Z dot number. I want to

10422
07:08:41,280 --> 07:08:43,520
invoke it again. Further validation dot

10423
07:08:43,520 --> 07:08:45,680
minimum one. And for the error message

10424
07:08:45,680 --> 07:08:49,360
this will be size is required. This is

10425
07:08:49,360 --> 07:08:51,040
finished. And then there's one more

10426
07:08:51,040 --> 07:08:53,600
property and this is the is image

10427
07:08:53,600 --> 07:08:56,478
boolean. So is image will be equal to Z

10428
07:08:56,478 --> 07:08:58,718
dot boolean and then we can invoke it.

10429
07:08:58,718 --> 07:09:00,400
And we need this because I want to then

10430
07:09:00,400 --> 07:09:02,478
later on dynamically update the file

10431
07:09:02,478 --> 07:09:05,120
size limit because for example a video

10432
07:09:05,120 --> 07:09:07,840
should be or or I not a video an image

10433
07:09:07,840 --> 07:09:11,200
should have a max size of 5 MGB. A video

10434
07:09:11,200 --> 07:09:14,160
for example 10 GB. So that's a huge

10435
07:09:14,160 --> 07:09:15,680
difference. So that's why we need this

10436
07:09:15,680 --> 07:09:17,760
boolean. And since I created my Zot

10437
07:09:17,760 --> 07:09:20,320
schema I can now also validate my body

10438
07:09:20,320 --> 07:09:22,718
against this Zot schema. So we can

10439
07:09:22,718 --> 07:09:24,718
create a constant. This will be called

10440
07:09:24,718 --> 07:09:26,958
validation and this will be equal to

10441
07:09:26,958 --> 07:09:29,920
file upload schema dots save pass and as

10442
07:09:29,920 --> 07:09:32,558
an argument we want to pass the body. So

10443
07:09:32,558 --> 07:09:35,840
this save pass um method won't throw any

10444
07:09:35,840 --> 07:09:38,240
error. Instead this validation will now

10445
07:09:38,240 --> 07:09:40,638
have two um could you say results? Yeah

10446
07:09:40,638 --> 07:09:42,240
I think this makes sense. So the

10447
07:09:42,240 --> 07:09:44,798
validation could either be successful or

10448
07:09:44,798 --> 07:09:46,958
it could be failed. If it's failed then

10449
07:09:46,958 --> 07:09:49,120
this means that for example we did not

10450
07:09:49,120 --> 07:09:51,840
add a content type or a size. If it's

10451
07:09:51,840 --> 07:09:54,400
successful then this means that our form

10452
07:09:54,400 --> 07:09:57,040
data or our body compares correctly

10453
07:09:57,040 --> 07:09:59,520
against our Z schema. So underneath the

10454
07:09:59,520 --> 07:10:01,280
validation I want to create an if

10455
07:10:01,280 --> 07:10:03,360
statement and I want to say hey if the

10456
07:10:03,360 --> 07:10:06,320
validation do success is not true. So we

10457
07:10:06,320 --> 07:10:08,240
do that with this exclamation mark. So

10458
07:10:08,240 --> 07:10:10,958
if it's not successful then I want to

10459
07:10:10,958 --> 07:10:14,240
return an error message. So return next

10460
07:10:14,240 --> 07:10:17,280
response. Next response is imported from

10461
07:10:17,280 --> 07:10:19,280
next/server.json

10462
07:10:19,280 --> 07:10:21,760
JSON and then as an argument we want to

10463
07:10:21,760 --> 07:10:24,320
pass the error message itself. So we can

10464
07:10:24,320 --> 07:10:26,718
structure it and for the error itself

10465
07:10:26,718 --> 07:10:30,638
this will be invalid request body and

10466
07:10:30,638 --> 07:10:33,440
then I want to also pass the status. So

10467
07:10:33,440 --> 07:10:35,840
after this object I can create another

10468
07:10:35,840 --> 07:10:39,200
object and this will be a status of 400.

10469
07:10:39,200 --> 07:10:41,520
This means it failed. If the validation

10470
07:10:41,520 --> 07:10:43,840
was successful we can of course get our

10471
07:10:43,840 --> 07:10:45,680
types. This means I can create a

10472
07:10:45,680 --> 07:10:47,840
constant the structure and this will be

10473
07:10:47,840 --> 07:10:50,400
equal to validation dot data and then

10474
07:10:50,400 --> 07:10:52,320
where we the structure we can get the

10475
07:10:52,320 --> 07:10:55,200
file name the content type and also the

10476
07:10:55,200 --> 07:10:58,000
size. So what's the next step? Well the

10477
07:10:58,000 --> 07:11:00,798
next step is to finally generate our

10478
07:11:00,798 --> 07:11:03,120
pre-signed URL. But to generate a

10479
07:11:03,120 --> 07:11:06,558
pre-signed URL we need a S3 bucket. But

10480
07:11:06,558 --> 07:11:08,320
we don't have one right now. So here's

10481
07:11:08,320 --> 07:11:10,400
the thing. There are a lot of S3

10482
07:11:10,400 --> 07:11:13,760
providers. For example, AWS. I mean AWS

10483
07:11:13,760 --> 07:11:16,958
created S3. Of course, they also have an

10484
07:11:16,958 --> 07:11:18,958
offering. The only problem is it

10485
07:11:18,958 --> 07:11:21,120
requires a credit card. It's not free.

10486
07:11:21,120 --> 07:11:23,760
And that's why I won't use AWS in this

10487
07:11:23,760 --> 07:11:25,680
video. All of my videos are structured

10488
07:11:25,680 --> 07:11:27,600
the same. A credit card should not be

10489
07:11:27,600 --> 07:11:30,878
required. And since AWS requires one, we

10490
07:11:30,878 --> 07:11:34,000
won't use AWS. Cloudflare is a great

10491
07:11:34,000 --> 07:11:36,798
option. They offer R2. So, Cloudflare

10492
07:11:36,798 --> 07:11:40,478
R2. Cloudflare R2 is a global object

10493
07:11:40,478 --> 07:11:43,920
storage with zero egress Agress fees and

10494
07:11:43,920 --> 07:11:46,558
it's also S3 compatible and it's very

10495
07:11:46,558 --> 07:11:49,200
very affordable. Again, they have a free

10496
07:11:49,200 --> 07:11:51,920
tier. The only problem is it requires a

10497
07:11:51,920 --> 07:11:55,440
credit card. So sadly I can't use R2

10498
07:11:55,440 --> 07:11:57,680
even though the product is absolutely

10499
07:11:57,680 --> 07:12:00,080
great. That's why we will use in this

10500
07:12:00,080 --> 07:12:02,958
video Tigris. It's not called Tigris. I

10501
07:12:02,958 --> 07:12:04,958
thought that it's called Tigris but it's

10502
07:12:04,958 --> 07:12:08,000
called Tigris. So, Tigris is a globally

10503
07:12:08,000 --> 07:12:11,040
distributed S3 compatible object

10504
07:12:11,040 --> 07:12:13,360
storage. Now, I will use it in this

10505
07:12:13,360 --> 07:12:15,280
video because it does not require a

10506
07:12:15,280 --> 07:12:16,878
credit card and because it has a

10507
07:12:16,878 --> 07:12:18,878
generous free tier. That's it. It's not

10508
07:12:18,878 --> 07:12:21,520
This video is not sponsored by Tigris.

10509
07:12:21,520 --> 07:12:23,680
You can use any other service. I don't

10510
07:12:23,680 --> 07:12:26,000
care. I will only use it because it has

10511
07:12:26,000 --> 07:12:28,400
a free tier which does not require a

10512
07:12:28,400 --> 07:12:30,080
credit card. This does not mean that

10513
07:12:30,080 --> 07:12:32,798
Tigris is bad. No, it has very very

10514
07:12:32,798 --> 07:12:35,920
fancy technology or it has a very fancy

10515
07:12:35,920 --> 07:12:38,160
architecture and it's a very cool

10516
07:12:38,160 --> 07:12:40,718
product. So, Tigris is a globally

10517
07:12:40,718 --> 07:12:44,160
distributed S3 compatible object storage

10518
07:12:44,160 --> 07:12:46,240
service that provides low latency

10519
07:12:46,240 --> 07:12:48,240
anywhere in the world, enabling

10520
07:12:48,240 --> 07:12:50,798
developers to store and access any

10521
07:12:50,798 --> 07:12:53,680
amount of data for a wide range of use

10522
07:12:53,680 --> 07:12:55,520
cases. And the nice thing is again it

10523
07:12:55,520 --> 07:12:58,000
has zero egress fees. So, it's the same

10524
07:12:58,000 --> 07:13:00,958
thing as R2. It's S3 compatible and it's

10525
07:13:00,958 --> 07:13:03,200
globally available. And if I remember

10526
07:13:03,200 --> 07:13:05,680
correctly, it all of your files are also

10527
07:13:05,680 --> 07:13:08,240
behind a CDN, but I'm not sure with that

10528
07:13:08,240 --> 07:13:10,080
right now. It could I could be mistaken.

10529
07:13:10,080 --> 07:13:12,240
So, please don't take my word for that.

10530
07:13:12,240 --> 07:13:14,000
But without any further ado, we want to

10531
07:13:14,000 --> 07:13:16,400
first of all log in. I will continue

10532
07:13:16,400 --> 07:13:18,400
with Google. And then the first step is

10533
07:13:18,400 --> 07:13:20,798
to first of all create a new bucket. So,

10534
07:13:20,798 --> 07:13:23,440
we will click on create bucket. For the

10535
07:13:23,440 --> 07:13:27,718
bucket name, this will be marshall-l

10536
07:13:28,320 --> 07:13:30,240
video-subscribe.

10537
07:13:30,240 --> 07:13:32,240
Then this will be a public bucket. So

10538
07:13:32,240 --> 07:13:34,798
objects in this bucket will be publicly

10539
07:13:34,798 --> 07:13:36,878
readable. And then for the consistency,

10540
07:13:36,878 --> 07:13:39,120
this will be default. We can then click

10541
07:13:39,120 --> 07:13:41,520
on create. This will create our bucket.

10542
07:13:41,520 --> 07:13:45,360
And as you see success, nice. So what we

10543
07:13:45,360 --> 07:13:47,840
can do is first of all create new access

10544
07:13:47,840 --> 07:13:50,400
keys. So in the sidebar you will find

10545
07:13:50,400 --> 07:13:53,120
this access key section. We want to

10546
07:13:53,120 --> 07:13:55,200
click on it and we want to create a new

10547
07:13:55,200 --> 07:13:57,600
access key for the name. This will be

10548
07:13:57,600 --> 07:14:01,840
Marshall or yeah Marshall LMS key. Then

10549
07:14:01,840 --> 07:14:04,718
I want to also enable admin access. And

10550
07:14:04,718 --> 07:14:06,878
it says right here enabling admin

10551
07:14:06,878 --> 07:14:09,280
access. Give the access key admin

10552
07:14:09,280 --> 07:14:11,840
privileges to all the buckets in your

10553
07:14:11,840 --> 07:14:14,558
organization. I can then click on create

10554
07:14:14,558 --> 07:14:16,558
and I should get all of my keys right

10555
07:14:16,558 --> 07:14:19,120
here. So as you see we get an access key

10556
07:14:19,120 --> 07:14:22,638
ID, a secret key, an endpoint URL, an

10557
07:14:22,638 --> 07:14:26,080
endpoint URL I am and then also the

10558
07:14:26,080 --> 07:14:28,478
region. So we want to select environment

10559
07:14:28,478 --> 07:14:30,478
variables and we can then copy these

10560
07:14:30,478 --> 07:14:32,638
environment variables. So we want to

10561
07:14:32,638 --> 07:14:35,280
open our env file and just paste them

10562
07:14:35,280 --> 07:14:37,840
right here underneath the arcjet key. So

10563
07:14:37,840 --> 07:14:41,280
again this is the AWS access key ID, the

10564
07:14:41,280 --> 07:14:44,000
secret access key, the endpoint URL. And

10565
07:14:44,000 --> 07:14:46,798
even though we don't use AWS since it's

10566
07:14:46,798 --> 07:14:50,080
S3 compatible, we have this AWS uh

10567
07:14:50,080 --> 07:14:52,958
prefix. So I can save this. And as you

10568
07:14:52,958 --> 07:14:56,320
all know, we use T3 ENV for type safety,

10569
07:14:56,320 --> 07:14:58,798
which means I want to open the T3 file

10570
07:14:58,798 --> 07:15:02,558
or not T3 file, but the env.ts file. Um

10571
07:15:02,558 --> 07:15:04,240
I can open it right here on the left

10572
07:15:04,240 --> 07:15:06,080
side and then I will just do a bit of

10573
07:15:06,080 --> 07:15:07,680
copy pasting. So all of these

10574
07:15:07,680 --> 07:15:09,520
environment variables are on the server

10575
07:15:09,520 --> 07:15:11,360
side or they should only be accessible

10576
07:15:11,360 --> 07:15:13,440
on the server side. Which means in the

10577
07:15:13,440 --> 07:15:16,638
server object we can get our AWS access

10578
07:15:16,638 --> 07:15:19,360
key ID. This will be of type Z.string.

10579
07:15:19,360 --> 07:15:21,520
And then further validation dominimum

10580
07:15:21,520 --> 07:15:23,280
one. What else do we have? We have the

10581
07:15:23,280 --> 07:15:26,240
AWS secret key. Again I can just copy

10582
07:15:26,240 --> 07:15:28,240
paste it. This will also be of type

10583
07:15:28,240 --> 07:15:30,878
Z.string dot minimum and this will be

10584
07:15:30,878 --> 07:15:33,600
also one. And then we have the what was

10585
07:15:33,600 --> 07:15:36,080
this? The endpoint URL. I will copy it,

10586
07:15:36,080 --> 07:15:38,320
paste it. This will be of type z.tring.

10587
07:15:38,320 --> 07:15:40,240
And then dot minimum one. And then we

10588
07:15:40,240 --> 07:15:44,000
have the AWS endpoint URL. AM. I will

10589
07:15:44,000 --> 07:15:46,160
copy paste it. This will be of type Z

10590
07:15:46,160 --> 07:15:49,840
do. Dot minimum two. No one of course.

10591
07:15:49,840 --> 07:15:52,558
And then also the AWS region. And this

10592
07:15:52,558 --> 07:15:54,878
will be of type Z.S. And then dot

10593
07:15:54,878 --> 07:15:58,000
minimum one. So as a next step, I want

10594
07:15:58,000 --> 07:16:00,478
to generate the pre-signed URL. And to

10595
07:16:00,478 --> 07:16:03,280
generate it, we have to install two AWS

10596
07:16:03,280 --> 07:16:06,718
or S3 specific packages. And this is

10597
07:16:06,718 --> 07:16:10,718
first of all the AWS SDK client S3. So

10598
07:16:10,718 --> 07:16:13,840
this is the official AWS SDK for

10599
07:16:13,840 --> 07:16:16,798
JavaScript projects. It will allow us to

10600
07:16:16,798 --> 07:16:20,080
interact with the S3 API. And then we

10601
07:16:20,080 --> 07:16:23,840
also need the AWS SDK S3 request

10602
07:16:23,840 --> 07:16:26,240
pre-signer package. And this package

10603
07:16:26,240 --> 07:16:28,958
provides a pre-signer based on signature

10604
07:16:28,958 --> 07:16:31,920
v4 uh that will attempt to generate a

10605
07:16:31,920 --> 07:16:35,920
signed URL for S3. So we need this uh

10606
07:16:35,920 --> 07:16:38,000
this package to generate the URL the

10607
07:16:38,000 --> 07:16:40,478
pre-signed URL and this will be there to

10608
07:16:40,478 --> 07:16:44,400
just uh talk to the S3 API in general.

10609
07:16:44,400 --> 07:16:46,240
So I will link of course everything in

10610
07:16:46,240 --> 07:16:48,160
the YouTube description. Don't worry if

10611
07:16:48,160 --> 07:16:50,638
I forget it then please scream at me in

10612
07:16:50,638 --> 07:16:52,400
the comments. But we can first of all

10613
07:16:52,400 --> 07:16:56,240
copy the name which is AWS SDK client S3

10614
07:16:56,240 --> 07:16:59,280
and then AWS request pre-signer. So as

10615
07:16:59,280 --> 07:17:00,958
you see I pasted everything in my

10616
07:17:00,958 --> 07:17:03,600
terminal pnpmi package one package two

10617
07:17:03,600 --> 07:17:05,840
and if I click on enter everything

10618
07:17:05,840 --> 07:17:08,638
should I hope install and yes it worked.

10619
07:17:08,638 --> 07:17:10,400
This means we can again restart our dev

10620
07:17:10,400 --> 07:17:12,478
server and what we have to first of all

10621
07:17:12,478 --> 07:17:15,440
do is create a new S3 client because we

10622
07:17:15,440 --> 07:17:17,440
have to configure S3. we have

10623
07:17:17,440 --> 07:17:18,798
environment variables and these

10624
07:17:18,798 --> 07:17:21,280
environment variables have to be used

10625
07:17:21,280 --> 07:17:23,920
somewhere. This means we can go into our

10626
07:17:23,920 --> 07:17:26,798
lip folder in our root directory and we

10627
07:17:26,798 --> 07:17:30,638
want to create a new S3 client.ts file.

10628
07:17:30,638 --> 07:17:32,958
Inside of here I can create an export

10629
07:17:32,958 --> 07:17:35,520
constant. This will be S3 and then this

10630
07:17:35,520 --> 07:17:39,280
will be equal to new S3 client. S3

10631
07:17:39,280 --> 07:17:40,878
client does not import for me

10632
07:17:40,878 --> 07:17:42,558
automatically. I'm not sure what's

10633
07:17:42,558 --> 07:17:45,200
wrong. So I will do it manually. import

10634
07:17:45,200 --> 07:17:46,798
I can d the structure and then this will

10635
07:17:46,798 --> 07:17:51,040
be from AWS SDK client S3 where I d the

10636
07:17:51,040 --> 07:17:53,840
structure I want to get the S3 client

10637
07:17:53,840 --> 07:17:56,878
and then again we can say new S3 client

10638
07:17:56,878 --> 07:17:58,878
we can invoke it and the structured

10639
07:17:58,878 --> 07:18:01,040
inside of here we have to provide three

10640
07:18:01,040 --> 07:18:03,760
properties first of all the region the

10641
07:18:03,760 --> 07:18:06,400
region will be auto then we want to also

10642
07:18:06,400 --> 07:18:08,718
pass the end point and what will the

10643
07:18:08,718 --> 07:18:11,680
endpoint be good question we can go back

10644
07:18:11,680 --> 07:18:15,040
to our Tigris dashboard And inside of

10645
07:18:15,040 --> 07:18:18,558
here you will find the endpoint URL S3.

10646
07:18:18,558 --> 07:18:20,558
So what we can do is just use our

10647
07:18:20,558 --> 07:18:22,958
environment variable. I will get the ENV

10648
07:18:22,958 --> 07:18:25,280
variable from the env file. And then I

10649
07:18:25,280 --> 07:18:29,360
want to get the S3 endpoint URL. So AWS

10650
07:18:29,360 --> 07:18:31,520
endpoint URL. And then we have to also

10651
07:18:31,520 --> 07:18:34,160
set the force path style property. And

10652
07:18:34,160 --> 07:18:36,080
this will be set to false. You don't

10653
07:18:36,080 --> 07:18:38,320
want to set it to true. This is super

10654
07:18:38,320 --> 07:18:41,600
important. So our S3 client is created

10655
07:18:41,600 --> 07:18:43,760
which is great. And before I continue

10656
07:18:43,760 --> 07:18:45,680
using it, I want to do a bit of

10657
07:18:45,680 --> 07:18:48,160
optimization. So here's the thing. This

10658
07:18:48,160 --> 07:18:51,120
S3 client should only run on the server

10659
07:18:51,120 --> 07:18:53,360
side. It should never run on the client

10660
07:18:53,360 --> 07:18:55,520
side and it should never be called on

10661
07:18:55,520 --> 07:18:57,920
the client side or from the client side.

10662
07:18:57,920 --> 07:18:59,920
This means we have to somehow tell

10663
07:18:59,920 --> 07:19:04,000
Nex.js that this is a server only client

10664
07:19:04,000 --> 07:19:06,400
or that this code should only run on the

10665
07:19:06,400 --> 07:19:09,280
server. And thankfully Nex.js has a very

10666
07:19:09,280 --> 07:19:11,680
nice helper. So let me quickly go to the

10667
07:19:11,680 --> 07:19:13,760
documentation and here you will find a

10668
07:19:13,760 --> 07:19:15,920
section preventing environment

10669
07:19:15,920 --> 07:19:19,440
poisoning. Oh no poisoning. So

10670
07:19:19,440 --> 07:19:21,600
JavaScript modules can be shared between

10671
07:19:21,600 --> 07:19:23,680
both server and client components

10672
07:19:23,680 --> 07:19:26,080
modules. This means it's possible to

10673
07:19:26,080 --> 07:19:28,878
accidentally import server only code

10674
07:19:28,878 --> 07:19:31,520
into the client. For example, consider

10675
07:19:31,520 --> 07:19:33,760
the following function. So here they get

10676
07:19:33,760 --> 07:19:36,558
data and as you see they also pass an

10677
07:19:36,558 --> 07:19:40,240
authorization header with an API key and

10678
07:19:40,240 --> 07:19:43,360
this API key should never be exposed to

10679
07:19:43,360 --> 07:19:45,520
the client. But if I call this on the

10680
07:19:45,520 --> 07:19:48,558
client side then this code will run. You

10681
07:19:48,558 --> 07:19:50,638
don't want that. So what we want to do

10682
07:19:50,638 --> 07:19:53,600
is we want to prevent accidental usage

10683
07:19:53,600 --> 07:19:56,160
in client components and for that we can

10684
07:19:56,160 --> 07:19:58,638
use the server only package because the

10685
07:19:58,638 --> 07:20:00,718
server only package will create a

10686
07:20:00,718 --> 07:20:03,360
buildtime error if the code or if the

10687
07:20:03,360 --> 07:20:06,558
function or in this case our S3 client

10688
07:20:06,558 --> 07:20:09,040
if it will be imported in or it will be

10689
07:20:09,040 --> 07:20:11,360
used in a client component and this

10690
07:20:11,360 --> 07:20:13,520
server only package is installed by

10691
07:20:13,520 --> 07:20:15,920
default. This means we can go back and

10692
07:20:15,920 --> 07:20:18,240
just go to the top and then import

10693
07:20:18,240 --> 07:20:20,320
server only. Again, this is already

10694
07:20:20,320 --> 07:20:22,320
installed. I don't have to do anything.

10695
07:20:22,320 --> 07:20:24,320
And again, in short, this just says,

10696
07:20:24,320 --> 07:20:26,638
hey, this function, this code, this

10697
07:20:26,638 --> 07:20:29,120
whatever should only run on the server

10698
07:20:29,120 --> 07:20:31,600
side and should only be called from the

10699
07:20:31,600 --> 07:20:33,680
server side. If this is called in a

10700
07:20:33,680 --> 07:20:35,760
client component, it will throw an error

10701
07:20:35,760 --> 07:20:38,080
at build time. If I don't add the server

10702
07:20:38,080 --> 07:20:40,400
only, we will only get an error at

10703
07:20:40,400 --> 07:20:42,878
runtime and you don't want that. So we

10704
07:20:42,878 --> 07:20:45,200
can also do that for the rest of our lip

10705
07:20:45,200 --> 07:20:47,760
files. So for example, this resend

10706
07:20:47,760 --> 07:20:50,000
configuration or resend in general

10707
07:20:50,000 --> 07:20:52,478
should only run on the server side. So I

10708
07:20:52,478 --> 07:20:54,638
will import server only. Then for the

10709
07:20:54,638 --> 07:20:57,680
env file, this is fine. For our DB in

10710
07:20:57,680 --> 07:20:59,840
theory, I can also import server only.

10711
07:20:59,840 --> 07:21:02,000
This should only run on the server side.

10712
07:21:02,000 --> 07:21:04,240
Then for the off configuration file,

10713
07:21:04,240 --> 07:21:07,120
sure also import server only. Then how

10714
07:21:07,120 --> 07:21:09,280
about the off client? Yes, this should

10715
07:21:09,280 --> 07:21:11,280
only run on the client side. So I don't

10716
07:21:11,280 --> 07:21:13,440
have to add that. And for ArcJet, I want

10717
07:21:13,440 --> 07:21:15,920
to also import server only because it

10718
07:21:15,920 --> 07:21:18,878
should only run on the server side. And

10719
07:21:18,878 --> 07:21:20,478
yeah, I think that's it to be quite

10720
07:21:20,478 --> 07:21:21,920
honest with you. Maybe I forgot

10721
07:21:21,920 --> 07:21:23,840
something, but I don't think so. So

10722
07:21:23,840 --> 07:21:26,160
since we have our S3 client, we can also

10723
07:21:26,160 --> 07:21:29,440
use it in our S3 upload route. So to get

10724
07:21:29,440 --> 07:21:31,200
started, we want to first of all create

10725
07:21:31,200 --> 07:21:34,080
a put object command. And this put

10726
07:21:34,080 --> 07:21:37,040
object command will be there to specify

10727
07:21:37,040 --> 07:21:39,360
our file content. And in there we will

10728
07:21:39,360 --> 07:21:41,200
for example define the bucket. So but

10729
07:21:41,200 --> 07:21:43,200
which bucket we will use to upload our

10730
07:21:43,200 --> 07:21:45,680
file. Then for example the key. So we

10731
07:21:45,680 --> 07:21:47,360
have to generate a unique key. The

10732
07:21:47,360 --> 07:21:49,120
content type and content length. So the

10733
07:21:49,120 --> 07:21:51,840
put object command is pretty much just

10734
07:21:51,840 --> 07:21:54,240
an object. And then this object will be

10735
07:21:54,240 --> 07:21:57,200
passed to S3 to upload the file or to

10736
07:21:57,200 --> 07:21:59,280
generate the pre-signed URL. If this

10737
07:21:59,280 --> 07:22:01,280
currently confuses you, don't worry. It

10738
07:22:01,280 --> 07:22:03,200
will make sense in a second. So

10739
07:22:03,200 --> 07:22:05,120
underneath this constant file name, we

10740
07:22:05,120 --> 07:22:06,798
can create a new constant. This will be

10741
07:22:06,798 --> 07:22:09,040
command and this will be equal to new

10742
07:22:09,040 --> 07:22:12,320
put object command. Put object command

10743
07:22:12,320 --> 07:22:16,558
is imported from AWS SDK client S3. We

10744
07:22:16,558 --> 07:22:18,558
want to invoke it and the structured

10745
07:22:18,558 --> 07:22:20,798
inside of here we get a few properties.

10746
07:22:20,798 --> 07:22:23,440
First of all the bucket and what will it

10747
07:22:23,440 --> 07:22:25,920
be equal to? Good question. We can head

10748
07:22:25,920 --> 07:22:28,320
over back to the tigress dashboard and

10749
07:22:28,320 --> 07:22:30,478
then here we get our buckets. We already

10750
07:22:30,478 --> 07:22:32,798
created one as you know and this here is

10751
07:22:32,798 --> 07:22:35,520
my bucket name Marshall LMS YouTube

10752
07:22:35,520 --> 07:22:37,840
video subscribe. This means I can just

10753
07:22:37,840 --> 07:22:40,320
copy this bucket name. Then I want to go

10754
07:22:40,320 --> 07:22:42,798
back to my env

10755
07:22:42,798 --> 07:22:45,040
file and I want to paste it inside of

10756
07:22:45,040 --> 07:22:47,200
here. So here's the thing. I will use

10757
07:22:47,200 --> 07:22:49,920
this bucket later on on the client side

10758
07:22:49,920 --> 07:22:51,920
and it's also completely safe to use

10759
07:22:51,920 --> 07:22:54,400
this bucket name on the client side. But

10760
07:22:54,400 --> 07:22:56,478
if I just create an environment variable

10761
07:22:56,478 --> 07:22:59,440
using this uh spelling. Does this make

10762
07:22:59,440 --> 07:23:00,958
sense? Is this is this using this

10763
07:23:00,958 --> 07:23:03,120
definition? Whatever man, if I use this,

10764
07:23:03,120 --> 07:23:05,200
it will only run on the server side. So

10765
07:23:05,200 --> 07:23:07,040
this environment vable will only be

10766
07:23:07,040 --> 07:23:09,040
accessible on the server side. But my

10767
07:23:09,040 --> 07:23:10,878
bucket name should be accessible on the

10768
07:23:10,878 --> 07:23:12,558
client side. This means we want to

10769
07:23:12,558 --> 07:23:14,558
prefix the environment variable with

10770
07:23:14,558 --> 07:23:16,160
next_public

10771
07:23:16,160 --> 07:23:19,280
and then underscore S3 and I will call

10772
07:23:19,280 --> 07:23:21,070
it bucket_ame

10773
07:23:21,070 --> 07:23:22,160
[Music]

10774
07:23:22,160 --> 07:23:24,240
images. So the whole environment

10775
07:23:24,240 --> 07:23:27,280
variable name will be next_public

10776
07:23:27,280 --> 07:23:30,280
s3_bucket_ame

10777
07:23:30,400 --> 07:23:32,638
images and this will be equal to the

10778
07:23:32,638 --> 07:23:34,798
value which I just copied. Then I can

10779
07:23:34,798 --> 07:23:36,638
copy the environment variable name. I

10780
07:23:36,638 --> 07:23:38,958
want to open my env file and then we

10781
07:23:38,958 --> 07:23:41,120
want to pass it inside of here. But we

10782
07:23:41,120 --> 07:23:42,878
don't want to pass it into the server

10783
07:23:42,878 --> 07:23:45,120
object because this is not a server

10784
07:23:45,120 --> 07:23:47,280
environment variable but instead this is

10785
07:23:47,280 --> 07:23:49,280
a client environment variable. This

10786
07:23:49,280 --> 07:23:50,878
means underneath the server we can get

10787
07:23:50,878 --> 07:23:53,520
the client. This is an object and then I

10788
07:23:53,520 --> 07:23:56,160
want to pass my next public s3 bucket

10789
07:23:56,160 --> 07:23:59,120
name images and this will be equal to Z

10790
07:23:59,120 --> 07:24:02,000
dot string and then dot minimum one. As

10791
07:24:02,000 --> 07:24:04,240
you see we get one error. What's the

10792
07:24:04,240 --> 07:24:06,240
problem right here in experimental

10793
07:24:06,240 --> 07:24:08,000
runtime? Well the problem is that we

10794
07:24:08,000 --> 07:24:09,440
have to destructure the client

10795
07:24:09,440 --> 07:24:11,680
variables. So we can again get this next

10796
07:24:11,680 --> 07:24:14,798
public S3 bucket name images and this

10797
07:24:14,798 --> 07:24:18,638
will be equal to process.env env

10798
07:24:18,638 --> 07:24:21,920
next public s3 bucket name images. As

10799
07:24:21,920 --> 07:24:23,680
you see I get one error and that's

10800
07:24:23,680 --> 07:24:26,080
because I forgot the comma here and now

10801
07:24:26,080 --> 07:24:28,160
everything is fine. I can close the env

10802
07:24:28,160 --> 07:24:30,478
files and then for our bucket we can get

10803
07:24:30,478 --> 07:24:33,200
the env variable from the env file and

10804
07:24:33,200 --> 07:24:36,240
then the s3 bucket name. So bucket name.

10805
07:24:36,240 --> 07:24:38,080
Then the second property will be the

10806
07:24:38,080 --> 07:24:40,478
content type and content type will be

10807
07:24:40,478 --> 07:24:42,798
equal to the one which we get from our

10808
07:24:42,798 --> 07:24:44,958
body. So content type is equal to

10809
07:24:44,958 --> 07:24:47,120
content type. Then we also have a

10810
07:24:47,120 --> 07:24:49,280
content length property and this will be

10811
07:24:49,280 --> 07:24:51,360
equal to the size which we get from our

10812
07:24:51,360 --> 07:24:53,360
body. And then there's one more property

10813
07:24:53,360 --> 07:24:55,040
missing and that's the key and this is

10814
07:24:55,040 --> 07:24:57,520
uppercased. So what exactly is the key?

10815
07:24:57,520 --> 07:24:59,360
Well, I already mentioned it at the

10816
07:24:59,360 --> 07:25:00,878
start but you probably already forgot

10817
07:25:00,878 --> 07:25:03,440
it. So the key is the unique identifier

10818
07:25:03,440 --> 07:25:06,320
which will uh which S3 will use to

10819
07:25:06,320 --> 07:25:08,878
identify your file. It's an ID in simple

10820
07:25:08,878 --> 07:25:10,638
terms. So this will then be stored in

10821
07:25:10,638 --> 07:25:12,400
your bucket. So let me show it to you.

10822
07:25:12,400 --> 07:25:14,958
If I upload a file for example, I can

10823
07:25:14,958 --> 07:25:17,440
click on uh browse. Then I will upload

10824
07:25:17,440 --> 07:25:19,280
not this video, not this, not this, but

10825
07:25:19,280 --> 07:25:21,760
this file. And as you see, this is my

10826
07:25:21,760 --> 07:25:24,798
file key. This is the unique identifier.

10827
07:25:24,798 --> 07:25:27,200
But this is not very unique because what

10828
07:25:27,200 --> 07:25:29,840
is if a user uploads another file with

10829
07:25:29,840 --> 07:25:32,240
the same name, we will get an error. We

10830
07:25:32,240 --> 07:25:34,240
don't want that. Therefore, we can't

10831
07:25:34,240 --> 07:25:36,558
just use the file name. So we get our

10832
07:25:36,558 --> 07:25:38,400
file name right here. But again, this is

10833
07:25:38,400 --> 07:25:40,878
not unique. We need something very

10834
07:25:40,878 --> 07:25:43,600
unique. So what could be an idea? What

10835
07:25:43,600 --> 07:25:45,680
could be a solution? Well, as you all

10836
07:25:45,680 --> 07:25:48,718
know, we installed this UYU ID package.

10837
07:25:48,718 --> 07:25:50,240
This means I can copy the import

10838
07:25:50,240 --> 07:25:52,558
statement. I can paste it on top and we

10839
07:25:52,558 --> 07:25:55,440
will use this ID or UU ID package

10840
07:25:55,440 --> 07:25:57,680
function. In other words, to generate a

10841
07:25:57,680 --> 07:25:59,920
unique key. So above the command, I want

10842
07:25:59,920 --> 07:26:02,320
to create a constant unique key. And

10843
07:26:02,320 --> 07:26:04,638
this will be equal to optics. Then we

10844
07:26:04,638 --> 07:26:07,120
can use this dynamic value. And inside

10845
07:26:07,120 --> 07:26:09,600
of here, we want to get the UYU ID V4

10846
07:26:09,600 --> 07:26:11,840
function. we can invoke it and then this

10847
07:26:11,840 --> 07:26:14,160
will be a dash or I want to pass a dash

10848
07:26:14,160 --> 07:26:16,558
after this and then I want to append the

10849
07:26:16,558 --> 07:26:19,360
file name. So file name which we get

10850
07:26:19,360 --> 07:26:22,320
from our body. So at the end our whole

10851
07:26:22,320 --> 07:26:24,478
unique key will look something like a

10852
07:26:24,478 --> 07:26:26,478
lot of jibush this will be the unique

10853
07:26:26,478 --> 07:26:28,558
identifier dash and then for the file

10854
07:26:28,558 --> 07:26:31,360
name I don't know 2024.jpeg

10855
07:26:31,360 --> 07:26:33,360
this will be our unique key which we

10856
07:26:33,360 --> 07:26:35,680
will use to then get our file but also

10857
07:26:35,680 --> 07:26:38,558
to uh to identify it. So for the key I

10858
07:26:38,558 --> 07:26:40,718
can just pass unique key. I forgot to

10859
07:26:40,718 --> 07:26:42,878
say key. So I will copy it and paste it

10860
07:26:42,878 --> 07:26:45,040
for the key. And this is already it. Our

10861
07:26:45,040 --> 07:26:48,160
put object command is finished and we

10862
07:26:48,160 --> 07:26:51,440
can use it and supply it to our um

10863
07:26:51,440 --> 07:26:53,680
serer. So we want to now generate a

10864
07:26:53,680 --> 07:26:55,680
signed URL. This means underneath

10865
07:26:55,680 --> 07:26:57,520
constant command I can create a new

10866
07:26:57,520 --> 07:27:00,558
constant. This will be pre-signed URL

10867
07:27:00,558 --> 07:27:02,558
and then this will be equal to a rate

10868
07:27:02,558 --> 07:27:05,280
get signed URL. As you see it does not

10869
07:27:05,280 --> 07:27:07,760
import for me automatically sadly. This

10870
07:27:07,760 --> 07:27:09,280
means I will go to the top and then

10871
07:27:09,280 --> 07:27:11,040
inside of here I want to create an

10872
07:27:11,040 --> 07:27:13,040
import. I will the structure and this

10873
07:27:13,040 --> 07:27:18,558
will be uh from AWS SDK. So at AWS S3

10874
07:27:18,558 --> 07:27:21,040
request pre-signer and then where I

10875
07:27:21,040 --> 07:27:23,040
structured I want to get the get signed

10876
07:27:23,040 --> 07:27:26,000
URL function. We can then again get our

10877
07:27:26,000 --> 07:27:28,958
get signed URL function and we want to

10878
07:27:28,958 --> 07:27:31,280
invoke it and we have to pass three

10879
07:27:31,280 --> 07:27:34,718
arguments. First of all, our S3 client

10880
07:27:34,718 --> 07:27:37,600
S3 is imported from our lip folder.

10881
07:27:37,600 --> 07:27:39,680
Please make sure that you import it also

10882
07:27:39,680 --> 07:27:42,240
from the lip folder. The second argument

10883
07:27:42,240 --> 07:27:44,958
is our put object command. This means

10884
07:27:44,958 --> 07:27:47,360
our command in general. And the third

10885
07:27:47,360 --> 07:27:50,320
argument is the expiry time. This means

10886
07:27:50,320 --> 07:27:52,878
we can open an object. And here we get

10887
07:27:52,878 --> 07:27:55,360
the expires in property. And this will

10888
07:27:55,360 --> 07:27:57,920
be equal to 306

10889
07:27:57,920 --> 07:28:01,360
360 seconds or in other words 6 minutes.

10890
07:28:01,360 --> 07:28:03,840
I will create a comment and say URL

10891
07:28:03,840 --> 07:28:07,360
expires in 6 minutes. So this means this

10892
07:28:07,360 --> 07:28:09,600
function will generate a pre-signed URL.

10893
07:28:09,600 --> 07:28:12,958
We pass the S3 client to talk to the S3

10894
07:28:12,958 --> 07:28:16,240
API. We pass the command to specify the

10895
07:28:16,240 --> 07:28:18,798
type of our file and also the bucket and

10896
07:28:18,798 --> 07:28:21,600
stuff like that. And we pass an expires

10897
07:28:21,600 --> 07:28:24,878
in property to tell the URL to expire in

10898
07:28:24,878 --> 07:28:27,200
a certain time frame. In this case, 6

10899
07:28:27,200 --> 07:28:30,638
minutes. After 6 minutes, this URL won't

10900
07:28:30,638 --> 07:28:32,878
work anymore, which is nice. And then

10901
07:28:32,878 --> 07:28:35,040
underneath this constant pre-signed URL,

10902
07:28:35,040 --> 07:28:36,878
I want to now return it. So, we can

10903
07:28:36,878 --> 07:28:39,040
create a constant response. This will be

10904
07:28:39,040 --> 07:28:41,360
equal to an object. And inside of here,

10905
07:28:41,360 --> 07:28:43,680
I want to pass the pre-signed URL, but

10906
07:28:43,680 --> 07:28:46,000
also the key. And this means we can pass

10907
07:28:46,000 --> 07:28:48,000
a key, and this will be equal to the

10908
07:28:48,000 --> 07:28:50,160
unique key. So, the response is

10909
07:28:50,160 --> 07:28:52,080
finished, which means we can also return

10910
07:28:52,080 --> 07:28:54,478
it. So, let's create a return next

10911
07:28:54,478 --> 07:28:56,320
response.json.

10912
07:28:56,320 --> 07:28:58,160
And as an argument, we want to return

10913
07:28:58,160 --> 07:29:00,798
the response or we want to pass it. Then

10914
07:29:00,798 --> 07:29:03,040
we also have a catch statement. And

10915
07:29:03,040 --> 07:29:05,520
inside of here, I want to just return

10916
07:29:05,520 --> 07:29:07,840
some sort of error message. So we can

10917
07:29:07,840 --> 07:29:11,200
say return next response.json.

10918
07:29:11,200 --> 07:29:13,680
Then as an argument, we want to pass an

10919
07:29:13,680 --> 07:29:15,920
object. For the error message, I will

10920
07:29:15,920 --> 07:29:18,958
say failed to generate pre-signed or

10921
07:29:18,958 --> 07:29:21,280
yeah pre-signed URL. And then we want to

10922
07:29:21,280 --> 07:29:23,840
also pass a status. This means a new

10923
07:29:23,840 --> 07:29:26,080
object. And for the status this will be

10924
07:29:26,080 --> 07:29:28,798
500. This means again something failed

10925
07:29:28,798 --> 07:29:31,600
terribly. So since this route handler is

10926
07:29:31,600 --> 07:29:33,440
finished, what do you think we can do?

10927
07:29:33,440 --> 07:29:36,160
Well, we can finally get our pre-signed

10928
07:29:36,160 --> 07:29:39,280
URL in our uploader function. This means

10929
07:29:39,280 --> 07:29:41,280
I will go back to the uploader. We can

10930
07:29:41,280 --> 07:29:42,878
scroll a bit to the bottom and we want

10931
07:29:42,878 --> 07:29:45,360
to go into the try statement. So the

10932
07:29:45,360 --> 07:29:47,200
first step is to first of all get the

10933
07:29:47,200 --> 07:29:49,120
pre-signed URL. So we can create a

10934
07:29:49,120 --> 07:29:51,280
comment and we can say step number one

10935
07:29:51,280 --> 07:29:54,160
get pre-signed URL. So how can we get

10936
07:29:54,160 --> 07:29:56,160
our pre-signed URL? Well, it's quite

10937
07:29:56,160 --> 07:29:58,320
simple. We want to fetch this route

10938
07:29:58,320 --> 07:30:01,200
handler or we want to use fetch to fetch

10939
07:30:01,200 --> 07:30:03,040
this route handler. So we can create a

10940
07:30:03,040 --> 07:30:05,520
constant pre-signed response and this

10941
07:30:05,520 --> 07:30:08,080
will be equal to await fetch. We want to

10942
07:30:08,080 --> 07:30:10,398
invoke it and as an argument we have to

10943
07:30:10,398 --> 07:30:12,958
provide the URL of the route handler.

10944
07:30:12,958 --> 07:30:16,320
The route handler URL will be /appi.

10945
07:30:16,320 --> 07:30:18,718
Then where do we have it? App folder. So

10946
07:30:18,718 --> 07:30:21,600
slappi/s3

10947
07:30:21,600 --> 07:30:24,718
/upload. So I can uh paste it right here

10948
07:30:24,718 --> 07:30:26,718
again /appi

10949
07:30:26,718 --> 07:30:30,718
/ s3 /upload and then we have to also

10950
07:30:30,718 --> 07:30:32,958
provide or pass a bit of configuration

10951
07:30:32,958 --> 07:30:35,360
which means we can add a comma open an

10952
07:30:35,360 --> 07:30:37,440
object and first of all we have to pass

10953
07:30:37,440 --> 07:30:40,080
the method. What was the method? Well it

10954
07:30:40,080 --> 07:30:43,600
was get no it was post as you see. So we

10955
07:30:43,600 --> 07:30:45,440
can copy it and paste it right here

10956
07:30:45,440 --> 07:30:47,600
post. Then we have to pass headers and

10957
07:30:47,600 --> 07:30:49,360
then in the headers I want to pass the

10958
07:30:49,360 --> 07:30:51,200
content type. In this case, the content

10959
07:30:51,200 --> 07:30:53,920
type will be application JSON. And this

10960
07:30:53,920 --> 07:30:56,718
is also the most common content type.

10961
07:30:56,718 --> 07:30:58,718
And underneath the headers, we want to

10962
07:30:58,718 --> 07:31:00,958
pass the body. Now, this will be equal

10963
07:31:00,958 --> 07:31:03,680
to JSON dot stringify because we want to

10964
07:31:03,680 --> 07:31:05,920
stringify it. And then we can invoke it

10965
07:31:05,920 --> 07:31:08,558
and open an object inside of here. So,

10966
07:31:08,558 --> 07:31:10,718
what properties do we want to pass?

10967
07:31:10,718 --> 07:31:12,958
Well, we want to pass a file name,

10968
07:31:12,958 --> 07:31:15,600
content type, size, and is image, which

10969
07:31:15,600 --> 07:31:18,000
is a boolean. So I can copy the file

10970
07:31:18,000 --> 07:31:20,160
name and paste it inside of here. This

10971
07:31:20,160 --> 07:31:22,798
will be equal to file.name.

10972
07:31:22,798 --> 07:31:25,600
Then we had our content type. I can copy

10973
07:31:25,600 --> 07:31:28,000
it, paste it, and this will be of type

10974
07:31:28,000 --> 07:31:31,120
or this will be equal to file.ype.

10975
07:31:31,120 --> 07:31:33,520
Then what else did we have? We also had

10976
07:31:33,520 --> 07:31:36,080
the size. I can copy it, paste it, and

10977
07:31:36,080 --> 07:31:38,718
this will be equal to file dot size. And

10978
07:31:38,718 --> 07:31:41,280
then we had one more boolean which is is

10979
07:31:41,280 --> 07:31:43,680
image. And this image will be set to

10980
07:31:43,680 --> 07:31:45,680
true. Again I will later on make a

10981
07:31:45,680 --> 07:31:48,240
dynamic but for now this is fine enough.

10982
07:31:48,240 --> 07:31:50,080
Then we can create an if statement

10983
07:31:50,080 --> 07:31:52,320
because it could be that this pre-signed

10984
07:31:52,320 --> 07:31:54,718
response is not successful. And also we

10985
07:31:54,718 --> 07:31:56,398
currently get an error. So before we do

10986
07:31:56,398 --> 07:31:58,558
that we first of all have to fix this

10987
07:31:58,558 --> 07:32:01,280
await error. So await expressions are

10988
07:32:01,280 --> 07:32:04,160
only allowed with an async functions but

10989
07:32:04,160 --> 07:32:06,798
this function is not asynchronous. So

10990
07:32:06,798 --> 07:32:09,920
this will be an asynchronous uh function

10991
07:32:09,920 --> 07:32:12,638
upload file. this error will go away

10992
07:32:12,638 --> 07:32:14,240
which means we can now create the if

10993
07:32:14,240 --> 07:32:16,398
statement. So underneath the pre-signed

10994
07:32:16,398 --> 07:32:18,398
response I will create an if statement

10995
07:32:18,398 --> 07:32:21,760
and if pre-signed response is not okay.

10996
07:32:21,760 --> 07:32:24,160
So you do that with the exclamation mark

10997
07:32:24,160 --> 07:32:25,920
then we want to first of all return a

10998
07:32:25,920 --> 07:32:28,080
toast. This means I can open it. I can

10999
07:32:28,080 --> 07:32:30,240
get my toast dot error. And for the

11000
07:32:30,240 --> 07:32:32,478
message, this will be failed to get

11001
07:32:32,478 --> 07:32:35,280
pre-signed URL. And then we want to also

11002
07:32:35,280 --> 07:32:37,840
update our state because again if I go

11003
07:32:37,840 --> 07:32:40,240
to my state, we have an error boolean

11004
07:32:40,240 --> 07:32:42,398
and this is set to false. But we want to

11005
07:32:42,398 --> 07:32:45,600
update it and set it to true. This means

11006
07:32:45,600 --> 07:32:48,000
what we can do is copy the set file

11007
07:32:48,000 --> 07:32:50,398
function set file state and then I can

11008
07:32:50,398 --> 07:32:52,718
paste it underneath the toast. So we

11009
07:32:52,718 --> 07:32:54,798
will again spread our previous

11010
07:32:54,798 --> 07:32:57,440
properties. Uploading will now be set to

11011
07:32:57,440 --> 07:33:00,798
false. Progress will be set to zero. And

11012
07:33:00,798 --> 07:33:03,680
then error will be set to true. And also

11013
07:33:03,680 --> 07:33:06,240
to not continue any further. I want you

11014
07:33:06,240 --> 07:33:08,638
also then return it at the end. So if

11015
07:33:08,638 --> 07:33:10,958
this response was not successful, we now

11016
07:33:10,958 --> 07:33:13,600
return a toast and we also update our

11017
07:33:13,600 --> 07:33:16,240
state. If everything was successful, we

11018
07:33:16,240 --> 07:33:18,320
can go underneath this if statement and

11019
07:33:18,320 --> 07:33:20,320
then we want to get the pre-signed URL

11020
07:33:20,320 --> 07:33:22,320
and the key because again this is what

11021
07:33:22,320 --> 07:33:25,520
we return in this object pre-signed URL

11022
07:33:25,520 --> 07:33:27,840
and key. So I can create a constant I

11023
07:33:27,840 --> 07:33:29,680
want to the struct and this will be

11024
07:33:29,680 --> 07:33:33,440
equal to a pre-signed response.json.

11025
07:33:33,440 --> 07:33:35,280
As you see we don't get any TypeScript

11026
07:33:35,280 --> 07:33:37,360
types. That's fine. We can just go back

11027
07:33:37,360 --> 07:33:39,840
copy the pre-signed URL paste it inside

11028
07:33:39,840 --> 07:33:42,718
of here and then also our key. So this

11029
07:33:42,718 --> 07:33:45,120
means we now return our response with

11030
07:33:45,120 --> 07:33:47,680
the pre-signed URL and key and I get it

11031
07:33:47,680 --> 07:33:51,120
in my actual uploader uh component and

11032
07:33:51,120 --> 07:33:54,000
we can use the pre-signed URL to finally

11033
07:33:54,000 --> 07:33:58,000
upload our file to our S3 bucket. So

11034
07:33:58,000 --> 07:34:00,398
let's do it. We are almost finished. So

11035
07:34:00,398 --> 07:34:02,320
as the next step we want to finally

11036
07:34:02,320 --> 07:34:05,600
upload all of the files to this pres to

11037
07:34:05,600 --> 07:34:09,040
S3 using this pre-signed URL. As you all

11038
07:34:09,040 --> 07:34:11,600
know I want to also track the progress.

11039
07:34:11,600 --> 07:34:14,240
So I have this progress property and I

11040
07:34:14,240 --> 07:34:17,040
want to store the uploaded percentage.

11041
07:34:17,040 --> 07:34:19,440
Now here's the thing you might say how

11042
07:34:19,440 --> 07:34:22,080
about we just upload the file using

11043
07:34:22,080 --> 07:34:24,478
fetch. The problem is fetch does not

11044
07:34:24,478 --> 07:34:27,040
provide us with progress tracking uh for

11045
07:34:27,040 --> 07:34:29,520
uploads and this is a huge problem. So

11046
07:34:29,520 --> 07:34:31,760
what's a solution? Well, one solution

11047
07:34:31,760 --> 07:34:34,958
would be to use Axios because Axios

11048
07:34:34,958 --> 07:34:37,200
gives us support or it allows us to

11049
07:34:37,200 --> 07:34:39,760
track the progress of an upload. But

11050
07:34:39,760 --> 07:34:42,718
here's the thing. I will only use Axios

11051
07:34:42,718 --> 07:34:45,360
to track the progress of an upload. This

11052
07:34:45,360 --> 07:34:46,958
is stupid. You don't want to install

11053
07:34:46,958 --> 07:34:50,478
packages just to do one small thing. So,

11054
07:34:50,478 --> 07:34:52,958
is there any native way to track the

11055
07:34:52,958 --> 07:34:55,760
progress of our upload? Yes, there is.

11056
07:34:55,760 --> 07:34:59,520
Because Axios uses XHR in the background

11057
07:34:59,520 --> 07:35:03,360
and XHR is an alternative to fetch. It's

11058
07:35:03,360 --> 07:35:06,478
like the older brother. It's I mean

11059
07:35:06,478 --> 07:35:09,040
fetch is nicer but I guess we will have

11060
07:35:09,040 --> 07:35:13,520
to use XHR. So XHR or how it's actually

11061
07:35:13,520 --> 07:35:17,360
called XML HTTP request objects are used

11062
07:35:17,360 --> 07:35:19,600
to interact with servers. You can

11063
07:35:19,600 --> 07:35:22,320
retrieve data from a URL without having

11064
07:35:22,320 --> 07:35:25,040
to do a full page refresh. This enables

11065
07:35:25,040 --> 07:35:27,760
a web page to update just part of a page

11066
07:35:27,760 --> 07:35:30,240
without disrup uh disrupting what the

11067
07:35:30,240 --> 07:35:31,920
user is doing. We don't really care

11068
07:35:31,920 --> 07:35:33,440
about all of this. At the end of the

11069
07:35:33,440 --> 07:35:36,958
day, XHR will just help us to send data

11070
07:35:36,958 --> 07:35:39,360
to a server and while doing that, it

11071
07:35:39,360 --> 07:35:41,520
will also allow us to track the progress

11072
07:35:41,520 --> 07:35:43,680
and also as they say right here, despite

11073
07:35:43,680 --> 07:35:46,718
its name, so XML, it can still be used

11074
07:35:46,718 --> 07:35:48,878
to retrieve any type of data. It does

11075
07:35:48,878 --> 07:35:51,520
not have to be XML. And what's the

11076
07:35:51,520 --> 07:35:53,520
difference to fetch? You might ask me.

11077
07:35:53,520 --> 07:35:56,160
Well, again, fetch is just the newer and

11078
07:35:56,160 --> 07:35:58,638
better version of you could say XML or

11079
07:35:58,638 --> 07:36:01,840
XHR. The biggest difference is is this

11080
07:36:01,840 --> 07:36:03,840
is that fetch does not allow you to

11081
07:36:03,840 --> 07:36:06,000
track the upload progress. As you see,

11082
07:36:06,000 --> 07:36:09,360
no upload. XHR allows you to do that.

11083
07:36:09,360 --> 07:36:11,760
Fetch only allows you to track a

11084
07:36:11,760 --> 07:36:14,878
download but not an upload. And that's a

11085
07:36:14,878 --> 07:36:17,040
huge problem. So that's why we will use

11086
07:36:17,040 --> 07:36:20,320
XHR. But thankfully it's not that hard

11087
07:36:20,320 --> 07:36:22,558
to set up. But you will have to create a

11088
07:36:22,558 --> 07:36:24,558
lot of boilerplate code. And that's also

11089
07:36:24,558 --> 07:36:26,798
the reason why we now have fetch.

11090
07:36:26,798 --> 07:36:29,120
Nevertheless, underneath this pre-signed

11091
07:36:29,120 --> 07:36:31,200
blah blah blah thing, we can create a

11092
07:36:31,200 --> 07:36:34,000
new promise. So, await new promise and

11093
07:36:34,000 --> 07:36:36,080
then as a param or we will get two

11094
07:36:36,080 --> 07:36:38,558
params. First of all, resolve and then

11095
07:36:38,558 --> 07:36:40,718
also reject. So, we will then either

11096
07:36:40,718 --> 07:36:42,798
resolve the whole request or we will

11097
07:36:42,798 --> 07:36:45,200
reject the request if there's some sort

11098
07:36:45,200 --> 07:36:47,600
of error. Then this is just a standard

11099
07:36:47,600 --> 07:36:49,840
call back or error function. And inside

11100
07:36:49,840 --> 07:36:51,600
of here, we want to first of all

11101
07:36:51,600 --> 07:36:54,638
initialize XHR. So we want to create a

11102
07:36:54,638 --> 07:36:57,680
constant XHR and this will be equal to

11103
07:36:57,680 --> 07:37:02,718
new XML or XML HTTP request. We want to

11104
07:37:02,718 --> 07:37:04,878
then invoke it. And now we already set

11105
07:37:04,878 --> 07:37:08,958
up XHR. So what we want to do or how XHR

11106
07:37:08,958 --> 07:37:12,240
works is is that you listen for events.

11107
07:37:12,240 --> 07:37:14,000
So for example, we want to listen for

11108
07:37:14,000 --> 07:37:15,920
the on progress event. This will give us

11109
07:37:15,920 --> 07:37:18,398
the progress percentage. Then we want to

11110
07:37:18,398 --> 07:37:20,320
listen for the onload event. This is

11111
07:37:20,320 --> 07:37:22,160
once everything is finished and stuff

11112
07:37:22,160 --> 07:37:24,160
like that. So again a lot of boiler

11113
07:37:24,160 --> 07:37:26,958
plate it's you have to write more code

11114
07:37:26,958 --> 07:37:29,360
than with fetch but again the end result

11115
07:37:29,360 --> 07:37:32,558
is the same. So we can say xhr uh

11116
07:37:32,558 --> 07:37:35,280
dotupload and then dot on progress

11117
07:37:35,280 --> 07:37:37,280
because we want to listen for the on

11118
07:37:37,280 --> 07:37:39,440
progress event. Then this will be equal

11119
07:37:39,440 --> 07:37:41,920
to a standard arrow function. So I can

11120
07:37:41,920 --> 07:37:44,798
just open it and as a param right here

11121
07:37:44,798 --> 07:37:47,280
we also get the event itself and this

11122
07:37:47,280 --> 07:37:50,478
event will periodically run. So as our

11123
07:37:50,478 --> 07:37:53,120
file uploads it will run and it will

11124
07:37:53,120 --> 07:37:55,520
give us the progress percent I mean it

11125
07:37:55,520 --> 07:37:57,760
won't give us the progress percentage we

11126
07:37:57,760 --> 07:38:00,160
will calculate it but it will give us a

11127
07:38:00,160 --> 07:38:02,398
progress and we can then use it to

11128
07:38:02,398 --> 07:38:04,958
calculate our percentage. So inside of

11129
07:38:04,958 --> 07:38:06,638
here I can first of all create an if

11130
07:38:06,638 --> 07:38:09,200
statement and I want to check if we even

11131
07:38:09,200 --> 07:38:11,520
get a length computable. What does this

11132
07:38:11,520 --> 07:38:13,440
mean? Well let's imagine you want to

11133
07:38:13,440 --> 07:38:17,040
upload a file 5 megbytes. How do you or

11134
07:38:17,040 --> 07:38:19,200
how will you track the progress? Well,

11135
07:38:19,200 --> 07:38:21,280
you need the total size and the

11136
07:38:21,280 --> 07:38:23,920
currently uploaded size. So, as an

11137
07:38:23,920 --> 07:38:26,558
example, let's say you want to upload a

11138
07:38:26,558 --> 07:38:29,760
5 mgabyte file and you already uploaded

11139
07:38:29,760 --> 07:38:33,360
2 mgabytes. You can then divide 2 by 5,

11140
07:38:33,360 --> 07:38:36,080
this will give you 0.4. If you calculate

11141
07:38:36,080 --> 07:38:38,878
or if you multiply this by 100, you will

11142
07:38:38,878 --> 07:38:41,200
get 40. This means you uploaded your

11143
07:38:41,200 --> 07:38:44,958
file 40%. And to calculate this, as you

11144
07:38:44,958 --> 07:38:47,120
see, we have to get the total size.

11145
07:38:47,120 --> 07:38:49,200
That's why I check if we even get a

11146
07:38:49,200 --> 07:38:51,520
length computable because only if we get

11147
07:38:51,520 --> 07:38:54,160
a length computable I can calculate the

11148
07:38:54,160 --> 07:38:56,958
uploaded progress percentage. So we can

11149
07:38:56,958 --> 07:38:58,798
then open this and we want to first of

11150
07:38:58,798 --> 07:39:01,040
all get the percentage. So we can create

11151
07:39:01,040 --> 07:39:04,080
a constant. This will be percentage

11152
07:39:04,080 --> 07:39:06,558
completed and this will be equal to

11153
07:39:06,558 --> 07:39:08,798
parentheses and inside of here I want to

11154
07:39:08,798 --> 07:39:10,718
create the same code as I just did. This

11155
07:39:10,718 --> 07:39:12,718
means I want to get the loaded size. I

11156
07:39:12,718 --> 07:39:14,798
want to divide it by the total size and

11157
07:39:14,798 --> 07:39:17,200
then multiply it by 100 to get the

11158
07:39:17,200 --> 07:39:19,600
percentage. So we want to get the event

11159
07:39:19,600 --> 07:39:24,398
dot um loaded divided by event dot total

11160
07:39:24,398 --> 07:39:27,520
and then we want to multiply this by 100

11161
07:39:27,520 --> 07:39:30,080
and this will give us our percentage and

11162
07:39:30,080 --> 07:39:32,320
as you all know we want to then update

11163
07:39:32,320 --> 07:39:34,718
our state. This means I can just copy

11164
07:39:34,718 --> 07:39:37,760
the set files uh function setter and I

11165
07:39:37,760 --> 07:39:39,920
will paste it inside of here. We will

11166
07:39:39,920 --> 07:39:42,798
again uh spread our previous properties

11167
07:39:42,798 --> 07:39:45,040
but I want to update the progress

11168
07:39:45,040 --> 07:39:47,360
property and we want to first of all

11169
07:39:47,360 --> 07:39:50,558
round our number. So we can use math and

11170
07:39:50,558 --> 07:39:52,878
then I want to use the round method and

11171
07:39:52,878 --> 07:39:55,120
as an argument we will provide the

11172
07:39:55,120 --> 07:39:57,680
percentage completed constant. So this

11173
07:39:57,680 --> 07:39:59,760
again gets our percentage. We now round

11174
07:39:59,760 --> 07:40:02,160
the percentage and then pass it as a

11175
07:40:02,160 --> 07:40:04,638
property for the progress. So if this is

11176
07:40:04,638 --> 07:40:08,320
50% we will then pass 50 to the progress

11177
07:40:08,320 --> 07:40:10,478
and later on I will then just display a

11178
07:40:10,478 --> 07:40:13,040
percentage symbol and that's it. So this

11179
07:40:13,040 --> 07:40:15,760
is already our on uh on progress event

11180
07:40:15,760 --> 07:40:17,440
we now listen for it and this is

11181
07:40:17,440 --> 07:40:19,360
finished. We want to now listen for the

11182
07:40:19,360 --> 07:40:21,920
onload event. This means once our file

11183
07:40:21,920 --> 07:40:24,320
is finished uploading and this onload

11184
07:40:24,320 --> 07:40:26,878
event will either be successful or it

11185
07:40:26,878 --> 07:40:29,440
will be failed for reason XYZ. I don't

11186
07:40:29,440 --> 07:40:31,680
know what maybe a network issue or

11187
07:40:31,680 --> 07:40:33,760
something else. So what we want to do is

11188
07:40:33,760 --> 07:40:36,080
again use XHR. Then we want to listen

11189
07:40:36,080 --> 07:40:38,718
for the onload um event and this will be

11190
07:40:38,718 --> 07:40:41,120
equal to a standard error function.

11191
07:40:41,120 --> 07:40:42,878
Inside of here we want to create an if

11192
07:40:42,878 --> 07:40:45,040
statement because again the onload event

11193
07:40:45,040 --> 07:40:48,398
or our state yeah our result could

11194
07:40:48,398 --> 07:40:50,958
either be successful or not. This means

11195
07:40:50,958 --> 07:40:52,638
inside of here we will check if the

11196
07:40:52,638 --> 07:40:57,280
status so XHR. status is equal to 200 or

11197
07:40:57,280 --> 07:40:59,600
again we want to use two vertical lines.

11198
07:40:59,600 --> 07:41:04,958
If the xhr status is equal to 204, this

11199
07:41:04,958 --> 07:41:06,798
would also mean that everything was

11200
07:41:06,798 --> 07:41:09,600
successful. If this is true, then we can

11201
07:41:09,600 --> 07:41:11,600
open the if statement and we want to

11202
07:41:11,600 --> 07:41:14,080
first of all again update our state. So

11203
07:41:14,080 --> 07:41:16,240
I will copy the setter. I will paste it

11204
07:41:16,240 --> 07:41:18,320
inside of here. We want to again spread

11205
07:41:18,320 --> 07:41:21,280
our previous uh properties. Then I want

11206
07:41:21,280 --> 07:41:23,360
to update the progress. The progress

11207
07:41:23,360 --> 07:41:26,160
will now be 100 because the file was

11208
07:41:26,160 --> 07:41:28,558
successfully uploaded. The uploading

11209
07:41:28,558 --> 07:41:31,120
boolean will be set to false because our

11210
07:41:31,120 --> 07:41:33,760
file is not uploading anymore. And then

11211
07:41:33,760 --> 07:41:36,398
I want to also pass my key. Where do I

11212
07:41:36,398 --> 07:41:38,478
get my key from? Well, right here we got

11213
07:41:38,478 --> 07:41:41,360
our pre-signed or we got reawaited our

11214
07:41:41,360 --> 07:41:43,680
pre-signed response and we got the

11215
07:41:43,680 --> 07:41:46,160
pre-signed URL and key. We will use the

11216
07:41:46,160 --> 07:41:48,320
pre-signed URL in a second because again

11217
07:41:48,320 --> 07:41:50,638
this is event based. You then upload the

11218
07:41:50,638 --> 07:41:52,638
file at the end. But we already get the

11219
07:41:52,638 --> 07:41:55,040
key which I can just copy and then I can

11220
07:41:55,040 --> 07:41:56,718
paste it right here. So key will be

11221
07:41:56,718 --> 07:41:59,120
equal to key. That's already it. Don't

11222
07:41:59,120 --> 07:42:01,440
worry, we still get a few errors here.

11223
07:42:01,440 --> 07:42:04,080
That's fine. So we created our if

11224
07:42:04,080 --> 07:42:06,718
statement for if it's successful. But I

11225
07:42:06,718 --> 07:42:09,600
want to also then now return a toast. So

11226
07:42:09,600 --> 07:42:11,200
if it was successful, we can go

11227
07:42:11,200 --> 07:42:13,520
underneath that uh the set file state

11228
07:42:13,520 --> 07:42:15,920
then I want to get a toast. And then I

11229
07:42:15,920 --> 07:42:17,600
want to use the success toast and for

11230
07:42:17,600 --> 07:42:21,040
the message I will say file uploaded

11231
07:42:21,040 --> 07:42:22,638
successfully.

11232
07:42:22,638 --> 07:42:24,958
And then at the end we want to also call

11233
07:42:24,958 --> 07:42:28,080
resolve because our request is resolved.

11234
07:42:28,080 --> 07:42:30,240
But as you see I get an error. What's

11235
07:42:30,240 --> 07:42:32,320
the problem? Well, it already gives us

11236
07:42:32,320 --> 07:42:34,878
the uh you could say solution right

11237
07:42:34,878 --> 07:42:37,520
here. It says expected one argument but

11238
07:42:37,520 --> 07:42:39,760
got zero. Did you mean to include void

11239
07:42:39,760 --> 07:42:42,000
in your type argument? Yes, that's what

11240
07:42:42,000 --> 07:42:44,320
we want to do. We want to go to our

11241
07:42:44,320 --> 07:42:46,398
arate new promise. We want to add a new

11242
07:42:46,398 --> 07:42:48,638
generic and this will just be void. And

11243
07:42:48,638 --> 07:42:50,958
with that, this error will go away. And

11244
07:42:50,958 --> 07:42:53,200
by the way, this error annoys me quite a

11245
07:42:53,200 --> 07:42:55,440
bit. I think I misspelled this await new

11246
07:42:55,440 --> 07:42:57,760
promise. So I will just copy all of the

11247
07:42:57,760 --> 07:42:59,920
code in this await new promise and I

11248
07:42:59,920 --> 07:43:01,920
will just write this await new promise

11249
07:43:01,920 --> 07:43:04,320
one more time. So again we can go inside

11250
07:43:04,320 --> 07:43:06,320
of here. I will just copy the whole

11251
07:43:06,320 --> 07:43:09,120
content constant xhr. I will copy it. I

11252
07:43:09,120 --> 07:43:11,040
will delete this await new promise and I

11253
07:43:11,040 --> 07:43:13,040
will write it again. So await new

11254
07:43:13,040 --> 07:43:15,040
promise. Then inside of here I can

11255
07:43:15,040 --> 07:43:16,958
invoke it as a param. I want to get

11256
07:43:16,958 --> 07:43:19,600
resolve and also reject. And then I want

11257
07:43:19,600 --> 07:43:21,760
to just create a standard arrow

11258
07:43:21,760 --> 07:43:23,840
function. Uh I still get one error.

11259
07:43:23,840 --> 07:43:26,080
What's the problem? Promise. I want to

11260
07:43:26,080 --> 07:43:28,080
also pass a generic which will be void.

11261
07:43:28,080 --> 07:43:29,760
And if I again paste my content,

11262
07:43:29,760 --> 07:43:32,080
everything works. So I'm not sure what

11263
07:43:32,080 --> 07:43:34,398
mistake I made. But now everything again

11264
07:43:34,398 --> 07:43:36,798
works. And that's what we wanted. So we

11265
07:43:36,798 --> 07:43:38,478
are finished with this if statement. So

11266
07:43:38,478 --> 07:43:40,558
if everything was successful, but we

11267
07:43:40,558 --> 07:43:42,478
want to also check if it was not

11268
07:43:42,478 --> 07:43:44,718
successful. This means I can create an

11269
07:43:44,718 --> 07:43:46,718
else statement. And inside of here I

11270
07:43:46,718 --> 07:43:49,440
will just reject the response. So I can

11271
07:43:49,440 --> 07:43:52,398
call reject and then as an argument I

11272
07:43:52,398 --> 07:43:54,398
want to return a new error. This means

11273
07:43:54,398 --> 07:43:57,840
new error. Then I can invoke it. And as

11274
07:43:57,840 --> 07:44:01,040
a message I will just say upload failed.

11275
07:44:01,040 --> 07:44:03,280
So this is finished. This looks good. We

11276
07:44:03,280 --> 07:44:04,718
have finished with listening for the

11277
07:44:04,718 --> 07:44:06,558
onload event. And then we can also

11278
07:44:06,558 --> 07:44:09,280
listen for the onair event. So I want to

11279
07:44:09,280 --> 07:44:11,200
go underneath this if statement. And

11280
07:44:11,200 --> 07:44:13,920
then I can again get xhr.on

11281
07:44:13,920 --> 07:44:16,558
error. Again this is equal to a standard

11282
07:44:16,558 --> 07:44:18,638
error function and inside of here we

11283
07:44:18,638 --> 07:44:21,440
want to again reject the um request. I

11284
07:44:21,440 --> 07:44:23,520
can invoke this and inside of here again

11285
07:44:23,520 --> 07:44:25,520
we will create a new error. We want to

11286
07:44:25,520 --> 07:44:27,360
invoke it and for the message this will

11287
07:44:27,360 --> 07:44:29,840
be upload failed. So we have finished

11288
07:44:29,840 --> 07:44:31,920
with all of these events and as the next

11289
07:44:31,920 --> 07:44:35,520
step we can finally create our uh or we

11290
07:44:35,520 --> 07:44:37,840
can open our request. This means

11291
07:44:37,840 --> 07:44:40,160
underneath this on error I will create a

11292
07:44:40,160 --> 07:44:43,360
XHR dot open and inside of here we have

11293
07:44:43,360 --> 07:44:45,760
to provide two arguments. First of all

11294
07:44:45,760 --> 07:44:48,558
the method this will be put uppercase

11295
07:44:48,558 --> 07:44:50,798
put and then the second argument is the

11296
07:44:50,798 --> 07:44:53,040
destination the URL or in other words

11297
07:44:53,040 --> 07:44:55,200
the server in this case this is our

11298
07:44:55,200 --> 07:44:57,760
pre-signed URL. We want to upload our

11299
07:44:57,760 --> 07:45:00,478
file to this pre-signed URL. And again

11300
07:45:00,478 --> 07:45:03,760
this open is just a not formality but

11301
07:45:03,760 --> 07:45:05,600
you right now just configure your

11302
07:45:05,600 --> 07:45:07,920
request as a next step we want to set

11303
07:45:07,920 --> 07:45:11,920
our request header. So xhr set request

11304
07:45:11,920 --> 07:45:14,638
header we can invoke it for the first

11305
07:45:14,638 --> 07:45:17,120
argument this will be the content type.

11306
07:45:17,120 --> 07:45:21,280
So I will say uppercase so content- type

11307
07:45:21,280 --> 07:45:23,440
and for the second argument this will be

11308
07:45:23,440 --> 07:45:26,798
the file type. So file type and then the

11309
07:45:26,798 --> 07:45:29,600
last step is to send our request. This

11310
07:45:29,600 --> 07:45:32,638
means we can say xhr. send and we have

11311
07:45:32,638 --> 07:45:34,558
to provide one argument and what's the

11312
07:45:34,558 --> 07:45:36,798
argument? The argument is the body and

11313
07:45:36,798 --> 07:45:39,840
what's the body? The body is our file.

11314
07:45:39,840 --> 07:45:42,478
This means we can just pass our file as

11315
07:45:42,478 --> 07:45:45,280
an argument. Then as a next step we can

11316
07:45:45,280 --> 07:45:47,680
continue with our catch statement. This

11317
07:45:47,680 --> 07:45:49,520
means inside of here we want to first of

11318
07:45:49,520 --> 07:45:52,478
all render a toast. For the message this

11319
07:45:52,478 --> 07:45:56,398
will be something went wrong. And then I

11320
07:45:56,398 --> 07:45:58,558
want to also update my state because I

11321
07:45:58,558 --> 07:46:01,040
want to showcase an error or I want to

11322
07:46:01,040 --> 07:46:03,360
update the error boolean. So we can just

11323
07:46:03,360 --> 07:46:05,360
copy the setter which we already created

11324
07:46:05,360 --> 07:46:07,680
on top. I will copy it, paste it in the

11325
07:46:07,680 --> 07:46:09,680
catch statement. We want to spread all

11326
07:46:09,680 --> 07:46:12,558
of the previous properties. For progress

11327
07:46:12,558 --> 07:46:14,878
uh this will just be zero. Then for

11328
07:46:14,878 --> 07:46:17,280
uploading this I can just delete it. I

11329
07:46:17,280 --> 07:46:19,040
don't have to update it. For the key I

11330
07:46:19,040 --> 07:46:21,200
will also delete it. I want to just uh

11331
07:46:21,200 --> 07:46:23,680
update my error and the error will be

11332
07:46:23,680 --> 07:46:25,920
true. And then uploading I will set

11333
07:46:25,920 --> 07:46:28,718
uploading to false because we are not uh

11334
07:46:28,718 --> 07:46:31,600
uploading anymore. So I think this is

11335
07:46:31,600 --> 07:46:33,520
finished. So we created our whole

11336
07:46:33,520 --> 07:46:36,638
function upload file. We have hy catch

11337
07:46:36,638 --> 07:46:39,120
statement. We get our pre-signed URL. We

11338
07:46:39,120 --> 07:46:41,440
check that the response is okay. If not,

11339
07:46:41,440 --> 07:46:43,520
we return an error message. If

11340
07:46:43,520 --> 07:46:45,120
everything is fine, we get our

11341
07:46:45,120 --> 07:46:47,440
pre-signed URL. We then create a new

11342
07:46:47,440 --> 07:46:50,558
promise. We use XHR to track our

11343
07:46:50,558 --> 07:46:53,680
progress. We then calculate uh the

11344
07:46:53,680 --> 07:46:56,320
progress as a percentage. We put it into

11345
07:46:56,320 --> 07:46:58,320
state. We listen for the onload event.

11346
07:46:58,320 --> 07:47:00,638
If everything is successful, we update

11347
07:47:00,638 --> 07:47:03,440
our state. If not, we reject throw a new

11348
07:47:03,440 --> 07:47:05,360
error. Then we listen for the on error

11349
07:47:05,360 --> 07:47:07,680
event. We also return a new error. Then

11350
07:47:07,680 --> 07:47:10,638
we finally configure our request using

11351
07:47:10,638 --> 07:47:13,280
the open method set request header and

11352
07:47:13,280 --> 07:47:15,280
send. Then we also have a catch

11353
07:47:15,280 --> 07:47:18,240
statement where we catch an error if

11354
07:47:18,240 --> 07:47:21,840
there is even an error. Quite a lot of

11355
07:47:21,840 --> 07:47:23,920
code as you see quite a lot of boiler

11356
07:47:23,920 --> 07:47:26,398
plate but we have finally finished. So

11357
07:47:26,398 --> 07:47:28,718
we can head over back to our ondrop

11358
07:47:28,718 --> 07:47:31,120
function and I want to call the upload

11359
07:47:31,120 --> 07:47:34,478
file function. So underneath set files I

11360
07:47:34,478 --> 07:47:36,878
can get the upload file function I want

11361
07:47:36,878 --> 07:47:39,280
to call it and as an argument we have to

11362
07:47:39,280 --> 07:47:41,200
provide the file which we want to

11363
07:47:41,200 --> 07:47:44,080
upload. This means I can pass my file as

11364
07:47:44,080 --> 07:47:46,878
an argument. So for see it seems like

11365
07:47:46,878 --> 07:47:49,120
everything is fine to be honest which is

11366
07:47:49,120 --> 07:47:51,120
kind of cool. I did not expect it. I

11367
07:47:51,120 --> 07:47:53,280
thought we would create some sort of

11368
07:47:53,280 --> 07:47:56,000
error but no it looks good. So as the

11369
07:47:56,000 --> 07:47:58,398
next step I want to create a function

11370
07:47:58,398 --> 07:48:00,478
which will be called render content and

11371
07:48:00,478 --> 07:48:02,240
inside of there we will create a lot of

11372
07:48:02,240 --> 07:48:04,478
if statements. We will check is file

11373
07:48:04,478 --> 07:48:06,718
state uploading. If so then we want to

11374
07:48:06,718 --> 07:48:09,280
render our render uploading state. If

11375
07:48:09,280 --> 07:48:12,320
files if our file has an error then we

11376
07:48:12,320 --> 07:48:14,558
want to render our error state. If we

11377
07:48:14,558 --> 07:48:17,680
have a if we have an object URL I want

11378
07:48:17,680 --> 07:48:19,760
to upload the rendered state. And if we

11379
07:48:19,760 --> 07:48:21,840
don't have anything, we will render our

11380
07:48:21,840 --> 07:48:24,478
empty state. So what we can do is just

11381
07:48:24,478 --> 07:48:27,280
go above this uh use drop zone hook and

11382
07:48:27,280 --> 07:48:29,360
then I will create a function which will

11383
07:48:29,360 --> 07:48:32,080
be called render content. Inside of here

11384
07:48:32,080 --> 07:48:34,478
we uh we can create an if statement and

11385
07:48:34,478 --> 07:48:36,558
we want to check if our file is

11386
07:48:36,558 --> 07:48:39,360
uploading. So if file state dot

11387
07:48:39,360 --> 07:48:41,600
uploading if this is true then we want

11388
07:48:41,600 --> 07:48:44,320
to return our render uploading state. We

11389
07:48:44,320 --> 07:48:46,558
haven't created this component yet. So

11390
07:48:46,558 --> 07:48:48,878
instead I will return an H1 which says

11391
07:48:48,878 --> 07:48:51,760
uploading dot dot dot. If this is not

11392
07:48:51,760 --> 07:48:53,520
true then we can create another if

11393
07:48:53,520 --> 07:48:55,760
statement. So if and I want to check for

11394
07:48:55,760 --> 07:48:58,478
the error state. So if file state dot

11395
07:48:58,478 --> 07:49:00,798
error then we can open this and we want

11396
07:49:00,798 --> 07:49:03,120
to render our error state which we

11397
07:49:03,120 --> 07:49:05,520
already created. This means I can return

11398
07:49:05,520 --> 07:49:07,920
the render error state component

11399
07:49:07,920 --> 07:49:10,558
imported from the render state file.

11400
07:49:10,558 --> 07:49:12,398
Then underneath this if statement we

11401
07:49:12,398 --> 07:49:14,478
want to create another if statement. And

11402
07:49:14,478 --> 07:49:16,878
here we want to check if we generate an

11403
07:49:16,878 --> 07:49:19,120
object URL. This means I can create an

11404
07:49:19,120 --> 07:49:21,280
if statement and we can say if file

11405
07:49:21,280 --> 07:49:24,478
state has an object URL then I want to

11406
07:49:24,478 --> 07:49:27,360
return the render uploaded state. We

11407
07:49:27,360 --> 07:49:29,680
haven't created this component yet. So I

11408
07:49:29,680 --> 07:49:32,958
will render in H1 which says uploaded

11409
07:49:32,958 --> 07:49:36,000
file. And as the last return statement,

11410
07:49:36,000 --> 07:49:38,080
I want to render my empty state. I don't

11411
07:49:38,080 --> 07:49:39,680
have to create any if statements for

11412
07:49:39,680 --> 07:49:41,360
that. So I will just create a return

11413
07:49:41,360 --> 07:49:43,280
statement and I want to return the

11414
07:49:43,280 --> 07:49:46,000
render empty state. This is already

11415
07:49:46,000 --> 07:49:48,320
imported but as you see we get one

11416
07:49:48,320 --> 07:49:50,558
error. What's the problem? Well, we are

11417
07:49:50,558 --> 07:49:54,000
missing the is track active boolean. So

11418
07:49:54,000 --> 07:49:56,398
let's get is track active and this will

11419
07:49:56,398 --> 07:49:59,840
be equal to what is it? Is track active?

11420
07:49:59,840 --> 07:50:02,080
Who would have thought? So this looks

11421
07:50:02,080 --> 07:50:04,240
quite good and we can use this render

11422
07:50:04,240 --> 07:50:07,280
content function in our global return

11423
07:50:07,280 --> 07:50:09,520
statement because instead of hard coding

11424
07:50:09,520 --> 07:50:12,240
this render empty state I will instead

11425
07:50:12,240 --> 07:50:14,878
just use my render content function and

11426
07:50:14,878 --> 07:50:16,638
we want to call it this means I will

11427
07:50:16,638 --> 07:50:19,120
invoke it and you know what I think it's

11428
07:50:19,120 --> 07:50:21,520
time to test everything out I mean who

11429
07:50:21,520 --> 07:50:24,398
knows maybe it will work maybe not so I

11430
07:50:24,398 --> 07:50:26,718
will take a file I will drag and drop it

11431
07:50:26,718 --> 07:50:29,040
and uploading dot dot dot yeah that's

11432
07:50:29,040 --> 07:50:32,478
good but hm H that takes way too long. I

11433
07:50:32,478 --> 07:50:34,878
mean this was a small image and nothing

11434
07:50:34,878 --> 07:50:37,200
is updating. If I go to tigress to the

11435
07:50:37,200 --> 07:50:40,478
dashboard, do I get something here? No.

11436
07:50:40,478 --> 07:50:42,478
H

11437
07:50:42,478 --> 07:50:46,320
it's time to investigate. So again d we

11438
07:50:46,320 --> 07:50:49,600
have our upload function here. So we set

11439
07:50:49,600 --> 07:50:51,680
our state. We map over this. We set

11440
07:50:51,680 --> 07:50:54,478
uploading to true progress to zero. Then

11441
07:50:54,478 --> 07:50:57,520
we create a try statement. We right here

11442
07:50:57,520 --> 07:50:59,840
create our pre-signed response. We fetch

11443
07:50:59,840 --> 07:51:01,920
our route handler. Is this the correct

11444
07:51:01,920 --> 07:51:04,160
route handler? I mean, it has to because

11445
07:51:04,160 --> 07:51:06,240
if not, we would get an error here, but

11446
07:51:06,240 --> 07:51:09,360
we don't. Had looks fine. Body looks

11447
07:51:09,360 --> 07:51:12,000
fine. This also all looks fine. We have

11448
07:51:12,000 --> 07:51:14,638
an if statement. We check everything.

11449
07:51:14,638 --> 07:51:16,398
Yeah, this looks good. We also return

11450
07:51:16,398 --> 07:51:18,958
it. So, this shouldn't be the problem.

11451
07:51:18,958 --> 07:51:21,280
Then we get our pre-signed URL. And

11452
07:51:21,280 --> 07:51:23,680
since we get our uploading state, this

11453
07:51:23,680 --> 07:51:26,320
means that we are probably up or that we

11454
07:51:26,320 --> 07:51:29,360
probably upload our file. Hm. Await new

11455
07:51:29,360 --> 07:51:32,478
promise. Void resolve. Reject XHR. Yes,

11456
07:51:32,478 --> 07:51:35,440
this looks good. On upload. Dum. Dumb.

11457
07:51:35,440 --> 07:51:38,080
This also looks good. Onload. We open

11458
07:51:38,080 --> 07:51:41,120
it. We reject. We don't close it. Wait,

11459
07:51:41,120 --> 07:51:44,558
that's weird. On error, open. Ah. Oh my

11460
07:51:44,558 --> 07:51:46,240
god, I see the error. Okay, you see

11461
07:51:46,240 --> 07:51:49,360
onload. This unload opens. And then this

11462
07:51:49,360 --> 07:51:52,160
code on error open set request header

11463
07:51:52,160 --> 07:51:55,120
and send is written in this unload. This

11464
07:51:55,120 --> 07:51:57,280
of course shouldn't happen. So I can

11465
07:51:57,280 --> 07:52:00,240
copy the send set request open and on

11466
07:52:00,240 --> 07:52:02,638
error or all of these functions. I can

11467
07:52:02,638 --> 07:52:04,798
just copy them and paste them down

11468
07:52:04,798 --> 07:52:07,040
below. So they shouldn't live in the

11469
07:52:07,040 --> 07:52:10,320
onload um event function. Instead they

11470
07:52:10,320 --> 07:52:13,040
are their own events, their own thingies

11471
07:52:13,040 --> 07:52:15,680
if you their own functions in this case.

11472
07:52:15,680 --> 07:52:18,160
So if I save this and again go back this

11473
07:52:18,160 --> 07:52:20,718
should work. So if I take So if I take a

11474
07:52:20,718 --> 07:52:23,200
file, drag and drop it. Okay, we get an

11475
07:52:23,200 --> 07:52:25,040
error. But this is already better.

11476
07:52:25,040 --> 07:52:27,920
Something went wrong. Upload failed. So,

11477
07:52:27,920 --> 07:52:30,798
does our terminal give us any hints?

11478
07:52:30,798 --> 07:52:34,000
Nope. This all looks fine. How about our

11479
07:52:34,000 --> 07:52:36,080
console? This is also always a good

11480
07:52:36,080 --> 07:52:39,040
friend. Uh-huh. We get an error. So,

11481
07:52:39,040 --> 07:52:43,680
access to XHR at laala from origin LA

11482
07:52:43,680 --> 07:52:46,320
has been blocked by course policy. So,

11483
07:52:46,320 --> 07:52:48,080
what's the problem? Well, it's quite

11484
07:52:48,080 --> 07:52:50,478
simple. Since we are trying to upload a

11485
07:52:50,478 --> 07:52:53,440
file on the client side course directly

11486
07:52:53,440 --> 07:52:55,840
comes into play and blocks the request

11487
07:52:55,840 --> 07:52:58,080
because I mentioned already at the start

11488
07:52:58,080 --> 07:53:01,120
the client side is very unsafe and this

11489
07:53:01,120 --> 07:53:03,520
server this means tigris is protecting

11490
07:53:03,520 --> 07:53:05,920
itself. It does not uh it does not want

11491
07:53:05,920 --> 07:53:08,878
to allow any client to upload files. No,

11492
07:53:08,878 --> 07:53:11,440
we have to whitelist specific domains

11493
07:53:11,440 --> 07:53:13,360
which are allowed to upload on the

11494
07:53:13,360 --> 07:53:15,200
client side. So even though we have a

11495
07:53:15,200 --> 07:53:17,760
pre-signed URL, this is not enough. We

11496
07:53:17,760 --> 07:53:20,798
need to whitelist our own domain. So we

11497
07:53:20,798 --> 07:53:23,200
can go into the tigris dashboard. We

11498
07:53:23,200 --> 07:53:24,878
want to go into the bucket to the

11499
07:53:24,878 --> 07:53:26,958
settings. And then if you scroll a bit

11500
07:53:26,958 --> 07:53:29,200
to the bottom, you will find this course

11501
07:53:29,200 --> 07:53:32,320
configuration configuration section.

11502
07:53:32,320 --> 07:53:35,040
Yeah. And we want to add a new rule. So

11503
07:53:35,040 --> 07:53:37,280
for the origin, this will be localhost

11504
07:53:37,280 --> 07:53:40,240
3000. I can copy the URL and paste it

11505
07:53:40,240 --> 07:53:42,638
inside of here. Now please make sure

11506
07:53:42,638 --> 07:53:45,040
delete the slash at the end. This should

11507
07:53:45,040 --> 07:53:48,878
be localhost 3000 without any slashes or

11508
07:53:48,878 --> 07:53:51,200
anything like that. Then for the allowed

11509
07:53:51,200 --> 07:53:54,398
methods, this will be put, post, delete,

11510
07:53:54,398 --> 07:53:56,638
and get. That's it. For the allowed

11511
07:53:56,638 --> 07:53:59,040
headers, this will be a star. And for

11512
07:53:59,040 --> 07:54:00,958
the exposed headers, I will leave it

11513
07:54:00,958 --> 07:54:03,920
empty. I can then add the rule and also

11514
07:54:03,920 --> 07:54:06,080
save my configuration. This is also

11515
07:54:06,080 --> 07:54:08,798
important. And in theory, this should

11516
07:54:08,798 --> 07:54:11,120
all work. This means if I do a hard

11517
07:54:11,120 --> 07:54:13,760
refresh, take a file and drag and drop

11518
07:54:13,760 --> 07:54:16,958
it, I should upload the file. Yes,

11519
07:54:16,958 --> 07:54:19,440
uploaded file. File uploaded

11520
07:54:19,440 --> 07:54:21,440
successfully. And if I go into the

11521
07:54:21,440 --> 07:54:24,240
tigress dashboard, I should also see the

11522
07:54:24,240 --> 07:54:27,760
file. Nice. Oh my god, this worked so

11523
07:54:27,760 --> 07:54:30,320
well. That's so great. But we want to of

11524
07:54:30,320 --> 07:54:32,320
course update our render state because

11525
07:54:32,320 --> 07:54:34,798
uploaded file. Yep, that's great. But I

11526
07:54:34,798 --> 07:54:36,878
want to showcase the file and I want to

11527
07:54:36,878 --> 07:54:40,160
showcase a progress state. This means we

11528
07:54:40,160 --> 07:54:41,920
can go back to our render state

11529
07:54:41,920 --> 07:54:44,478
component. We already have a function

11530
07:54:44,478 --> 07:54:47,280
for the render empty state and for the

11531
07:54:47,280 --> 07:54:49,920
render error state. Now I want to also

11532
07:54:49,920 --> 07:54:52,958
create a function for the for example

11533
07:54:52,958 --> 07:54:55,520
let's say uploaded state. So we can

11534
07:54:55,520 --> 07:54:58,080
create an export function. This will be

11535
07:54:58,080 --> 07:55:01,360
called render uploaded state. We can

11536
07:55:01,360 --> 07:55:03,360
then open this function and inside of

11537
07:55:03,360 --> 07:55:05,280
here we can first of all create a return

11538
07:55:05,280 --> 07:55:07,360
statement and in the return statement a

11539
07:55:07,360 --> 07:55:09,920
standard diff element. So through my

11540
07:55:09,920 --> 07:55:12,160
params I want to get a few things. So we

11541
07:55:12,160 --> 07:55:14,638
can structure them and I want to get for

11542
07:55:14,638 --> 07:55:17,040
example the preview URL. This is the

11543
07:55:17,040 --> 07:55:19,440
object URL and then this should be

11544
07:55:19,440 --> 07:55:21,360
enough for now. I will add more things

11545
07:55:21,360 --> 07:55:23,120
later on but for now this is fine

11546
07:55:23,120 --> 07:55:25,920
enough. And the preview URL will have a

11547
07:55:25,920 --> 07:55:28,398
type of string. So this looks good. And

11548
07:55:28,398 --> 07:55:31,040
then in my div I can first of all render

11549
07:55:31,040 --> 07:55:33,440
an image component. This image is

11550
07:55:33,440 --> 07:55:35,920
imported from next / image. This is

11551
07:55:35,920 --> 07:55:38,398
self-closing as you all know. And this

11552
07:55:38,398 --> 07:55:40,718
image needs the source. So for the

11553
07:55:40,718 --> 07:55:43,440
source this will be our preview URL.

11554
07:55:43,440 --> 07:55:45,920
Then we want to also provide an alt and

11555
07:55:45,920 --> 07:55:49,200
this will be uploaded file. And I want

11556
07:55:49,200 --> 07:55:52,080
to also give this image a fill property.

11557
07:55:52,080 --> 07:55:54,958
So fill and then also a class name. And

11558
07:55:54,958 --> 07:55:58,000
this will be object contain. and also

11559
07:55:58,000 --> 07:56:00,320
padding too. This should already be

11560
07:56:00,320 --> 07:56:02,160
enough. And the only thing which I want

11561
07:56:02,160 --> 07:56:04,958
to also render is a delete button uh on

11562
07:56:04,958 --> 07:56:06,958
the top right corner. So we can go

11563
07:56:06,958 --> 07:56:08,718
underneath the image but still in the

11564
07:56:08,718 --> 07:56:10,558
div. And then we can use the button

11565
07:56:10,558 --> 07:56:12,638
component imported from the components

11566
07:56:12,638 --> 07:56:15,120
or it's already imported. Then I want to

11567
07:56:15,120 --> 07:56:17,280
give the button a variant. This will be

11568
07:56:17,280 --> 07:56:20,638
destructive. Also a size. This will be

11569
07:56:20,638 --> 07:56:23,840
icon. Then of course a class name. And I

11570
07:56:23,840 --> 07:56:26,160
want to use the CN helper function

11571
07:56:26,160 --> 07:56:28,160
because later on we will listen for this

11572
07:56:28,160 --> 07:56:30,798
deleting or is deleting boolean. This

11573
07:56:30,798 --> 07:56:32,798
means the CN helper function is already

11574
07:56:32,798 --> 07:56:34,798
imported. And we want to first of all

11575
07:56:34,798 --> 07:56:37,520
add default styles. So this will be

11576
07:56:37,520 --> 07:56:39,680
absolute because I want to position it

11577
07:56:39,680 --> 07:56:41,760
on uh on the top right corner. This

11578
07:56:41,760 --> 07:56:45,120
means absolute top four and right four.

11579
07:56:45,120 --> 07:56:47,360
This should be already enough. Uh we

11580
07:56:47,360 --> 07:56:49,520
will later on also add an on click

11581
07:56:49,520 --> 07:56:52,000
handler and a disabled state but we will

11582
07:56:52,000 --> 07:56:54,398
do that again later on. For the content

11583
07:56:54,398 --> 07:56:56,878
itself I want to just get the standard X

11584
07:56:56,878 --> 07:56:59,200
icon from Lucid React and let's also

11585
07:56:59,200 --> 07:57:01,360
give it a class name which will be size

11586
07:57:01,360 --> 07:57:04,240
4. This should already be enough and I

11587
07:57:04,240 --> 07:57:06,240
think we can test it out. So we can do a

11588
07:57:06,240 --> 07:57:08,718
hard refresh. I will again just drag and

11589
07:57:08,718 --> 07:57:11,440
drop some weird file and in theory I

11590
07:57:11,440 --> 07:57:12,958
should get the image but I don't get

11591
07:57:12,958 --> 07:57:15,200
one. What's the problem? Well, currently

11592
07:57:15,200 --> 07:57:17,600
if I go to my uploader, instead of using

11593
07:57:17,600 --> 07:57:20,080
this component which we just created, we

11594
07:57:20,080 --> 07:57:23,200
showcase an H1 or we render an H1. So,

11595
07:57:23,200 --> 07:57:25,040
we can delete this and instead we want

11596
07:57:25,040 --> 07:57:28,798
to get our what was it? Render uploaded

11597
07:57:28,798 --> 07:57:31,440
state. So, render uploaded state. This

11598
07:57:31,440 --> 07:57:33,280
is imported from the render state

11599
07:57:33,280 --> 07:57:35,840
components. And here we have to provide

11600
07:57:35,840 --> 07:57:38,558
one property. This is the preview URL

11601
07:57:38,558 --> 07:57:41,040
which will be equal to the file

11602
07:57:41,040 --> 07:57:42,878
state.object

11603
07:57:42,878 --> 07:57:45,760
URL. If I save this and go back. Oh my

11604
07:57:45,760 --> 07:57:49,520
god. What is this? This is our image. I

11605
07:57:49,520 --> 07:57:52,000
will cry in a second. I'm so happy. My

11606
07:57:52,000 --> 07:57:54,558
little child. No, my uploading state.

11607
07:57:54,558 --> 07:57:56,558
It's finished. It's beautiful. We have

11608
07:57:56,558 --> 07:57:58,398
this error button. Not error button,

11609
07:57:58,398 --> 07:58:00,000
this deletion button, which does not

11610
07:58:00,000 --> 07:58:02,080
work, but it's fine. We will fix it. In

11611
07:58:02,080 --> 07:58:04,958
general, it looks so good. But if I

11612
07:58:04,958 --> 07:58:06,878
again drag and drop a file, our

11613
07:58:06,878 --> 07:58:09,440
uploading state is still broken. As you

11614
07:58:09,440 --> 07:58:11,760
see, that's not quite what we want. So

11615
07:58:11,760 --> 07:58:14,080
we want to create another component for

11616
07:58:14,080 --> 07:58:16,160
uploading. So I will go to the render

11617
07:58:16,160 --> 07:58:18,958
states fi uh file where we store all of

11618
07:58:18,958 --> 07:58:21,120
our components and then we can create

11619
07:58:21,120 --> 07:58:23,840
another function. So I will create an

11620
07:58:23,840 --> 07:58:26,160
export function. This will be called

11621
07:58:26,160 --> 07:58:29,840
render uploading state. We can then just

11622
07:58:29,840 --> 07:58:32,240
open this function and I want to get in

11623
07:58:32,240 --> 07:58:34,558
the param to properties or I want to get

11624
07:58:34,558 --> 07:58:36,878
two params. This is the progress and

11625
07:58:36,878 --> 07:58:39,600
then also the file. So this means we can

11626
07:58:39,600 --> 07:58:42,080
just structure this. Then I as mentioned

11627
07:58:42,080 --> 07:58:44,958
I want to get progress and then also the

11628
07:58:44,958 --> 07:58:47,200
file. We can also give it a type. So

11629
07:58:47,200 --> 07:58:50,320
progress will be of type number and file

11630
07:58:50,320 --> 07:58:53,520
will be of come on tell me it file will

11631
07:58:53,520 --> 07:58:56,160
be of type file. Yes, you're right. So

11632
07:58:56,160 --> 07:58:57,600
this looks good. And then in the

11633
07:58:57,600 --> 07:58:59,680
function we can first of all open it and

11634
07:58:59,680 --> 07:59:01,760
then we can return a standard div

11635
07:59:01,760 --> 07:59:04,320
element. So diff or I have to first of

11636
07:59:04,320 --> 07:59:06,080
all create a return statement. Then we

11637
07:59:06,080 --> 07:59:08,320
can return a div. For the div we can or

11638
07:59:08,320 --> 07:59:10,080
let's style the div. So let's give it a

11639
07:59:10,080 --> 07:59:12,718
class name. This will be text center

11640
07:59:12,718 --> 07:59:16,000
flex justify center and item center

11641
07:59:16,000 --> 07:59:18,160
because we want to center everything in

11642
07:59:18,160 --> 07:59:20,320
the middle and then also flex column

11643
07:59:20,320 --> 07:59:22,240
because this should be a column layout

11644
07:59:22,240 --> 07:59:24,718
not horizontal layout. In this div I

11645
07:59:24,718 --> 07:59:26,558
want to first of all display an

11646
07:59:26,558 --> 07:59:29,760
uploading text or yeah uploading text.

11647
07:59:29,760 --> 07:59:31,680
So I will get a p tag and then say

11648
07:59:31,680 --> 07:59:34,080
uploading dot dot dot. We can also give

11649
07:59:34,080 --> 07:59:36,000
it a class name and then this will be

11650
07:59:36,000 --> 07:59:38,320
margin top two because we will render

11651
07:59:38,320 --> 07:59:40,718
something above this P tag in a second.

11652
07:59:40,718 --> 07:59:43,280
Then text which will be SM font which

11653
07:59:43,280 --> 07:59:44,958
will be medium. I think you all know

11654
07:59:44,958 --> 07:59:46,798
what these basic styles are. They are

11655
07:59:46,798 --> 07:59:49,680
not groundbreaking. Text SM makes the

11656
07:59:49,680 --> 07:59:52,080
text smaller. Font medium makes the font

11657
07:59:52,080 --> 07:59:54,240
weight bigger and then also text which

11658
07:59:54,240 --> 07:59:57,200
will be foreground. So uh the foreground

11659
07:59:57,200 --> 08:00:00,320
color um underneath the uploading P tag

11660
08:00:00,320 --> 08:00:02,160
I want to then also render the file

11661
08:00:02,160 --> 08:00:04,160
name. So underneath it this means we can

11662
08:00:04,160 --> 08:00:06,080
just get a standard P tag inside of

11663
08:00:06,080 --> 08:00:08,558
here. We can get the file dot name and

11664
08:00:08,558 --> 08:00:10,320
we want to also style it. So let's give

11665
08:00:10,320 --> 08:00:13,040
it a class name margin top one text

11666
08:00:13,040 --> 08:00:15,280
which will be XS text which will be

11667
08:00:15,280 --> 08:00:18,320
muted foreground muted foreground. This

11668
08:00:18,320 --> 08:00:21,120
means this grayish color and then also

11669
08:00:21,120 --> 08:00:24,080
tranate or yeah truncate. What does this

11670
08:00:24,080 --> 08:00:26,558
mean? Well, this means if the text or

11671
08:00:26,558 --> 08:00:28,798
the file name takes too much width, it

11672
08:00:28,798 --> 08:00:31,280
will just create this dot dot dot. So it

11673
08:00:31,280 --> 08:00:33,600
won't overflow or anything like that.

11674
08:00:33,600 --> 08:00:36,080
And also I want to add a maximum width

11675
08:00:36,080 --> 08:00:38,798
to not make it too big. So maximum width

11676
08:00:38,798 --> 08:00:42,160
which will be XS. So again truncate will

11677
08:00:42,160 --> 08:00:44,320
create these three little dots and a

11678
08:00:44,320 --> 08:00:46,558
maximum width will just limit the width.

11679
08:00:46,558 --> 08:00:49,200
I mean yeah not nothing groundbreaking.

11680
08:00:49,200 --> 08:00:51,920
Also above this uploading text for now I

11681
08:00:51,920 --> 08:00:54,080
will just get a standard P tag and then

11682
08:00:54,080 --> 08:00:57,600
render the progress itself. So we can

11683
08:00:57,600 --> 08:00:59,520
test it out. We can copy the name render

11684
08:00:59,520 --> 08:01:01,280
uploading state. We want to go to the

11685
08:01:01,280 --> 08:01:03,760
uploader. Instead of returning this H1,

11686
08:01:03,760 --> 08:01:05,680
we want to return the component. This

11687
08:01:05,680 --> 08:01:08,638
means render upload uploading state.

11688
08:01:08,638 --> 08:01:10,798
This is self-closing. We have to provide

11689
08:01:10,798 --> 08:01:13,600
two properties. First of all, the file.

11690
08:01:13,600 --> 08:01:16,240
This will be equal to the file state dot

11691
08:01:16,240 --> 08:01:19,520
file. And for the progress tracker, this

11692
08:01:19,520 --> 08:01:21,520
will be equal to our file

11693
08:01:21,520 --> 08:01:23,600
state.progress.

11694
08:01:23,600 --> 08:01:25,680
As you see, I get one error and it says

11695
08:01:25,680 --> 08:01:28,160
type file or null is not assignable to

11696
08:01:28,160 --> 08:01:31,040
type file. Yeah, in theory this does not

11697
08:01:31,040 --> 08:01:32,638
work because in the render state we

11698
08:01:32,638 --> 08:01:35,360
expect the file but our file state says

11699
08:01:35,360 --> 08:01:37,760
that the file could either be null or it

11700
08:01:37,760 --> 08:01:39,360
could be defined. Who would have

11701
08:01:39,360 --> 08:01:41,440
thought? And the thing is sure at the

11702
08:01:41,440 --> 08:01:43,920
start it's null. But once we start this

11703
08:01:43,920 --> 08:01:46,798
upload file process, it will be set to

11704
08:01:46,798 --> 08:01:49,440
true or we will get a file. Therefore, I

11705
08:01:49,440 --> 08:01:51,200
will do something that you shouldn't do

11706
08:01:51,200 --> 08:01:54,000
too often and I will just say as file

11707
08:01:54,000 --> 08:01:56,478
because I know that the file will exist.

11708
08:01:56,478 --> 08:01:59,440
This is fine to do. So you can do it. So

11709
08:01:59,440 --> 08:02:02,160
this is in theory already it. So how

11710
08:02:02,160 --> 08:02:04,558
about we test it out? I will do a hard

11711
08:02:04,558 --> 08:02:07,280
refresh just to delete this file again.

11712
08:02:07,280 --> 08:02:10,320
And then I want to again get a new file.

11713
08:02:10,320 --> 08:02:12,638
Let's do something else. This one I will

11714
08:02:12,638 --> 08:02:16,240
drag and drop it. Oh, okay. I didn't see

11715
08:02:16,240 --> 08:02:19,360
much. So how about we just um make this

11716
08:02:19,360 --> 08:02:21,360
whole network request a bit slower. I

11717
08:02:21,360 --> 08:02:23,920
will throttle my response. So I guess

11718
08:02:23,920 --> 08:02:25,840
let's again test it out. I will take a

11719
08:02:25,840 --> 08:02:28,878
file. I will drag and drop it and file

11720
08:02:28,878 --> 08:02:31,680
size exceeds the limit. Oh my god, dude.

11721
08:02:31,680 --> 08:02:34,240
Okay. Uh how about this file? Okay, did

11722
08:02:34,240 --> 08:02:36,320
you see this little progress tracker?

11723
08:02:36,320 --> 08:02:38,558
Wasn't this great? We can again try out

11724
08:02:38,558 --> 08:02:42,240
hard refresh and zero D and then we get

11725
08:02:42,240 --> 08:02:44,558
what's that? Okay, who cares? You saw we

11726
08:02:44,558 --> 08:02:46,798
got this little percentage symbol. And

11727
08:02:46,798 --> 08:02:48,958
here's something very very cool which I

11728
08:02:48,958 --> 08:02:50,958
implemented so please thank me. And

11729
08:02:50,958 --> 08:02:53,360
that's the object URL. So here's the

11730
08:02:53,360 --> 08:02:55,600
thing. Where do we define our object

11731
08:02:55,600 --> 08:02:58,240
URL? Well, we define it in our onrop.

11732
08:02:58,240 --> 08:03:00,398
So, we have our onrop function and then

11733
08:03:00,398 --> 08:03:03,120
we already put our create object URL in

11734
08:03:03,120 --> 08:03:05,520
state. So, we do it inside of here. In

11735
08:03:05,520 --> 08:03:07,360
theory, you could also do it down below.

11736
08:03:07,360 --> 08:03:09,360
You could just say right here, create

11737
08:03:09,360 --> 08:03:11,760
object URL and then pass the file in

11738
08:03:11,760 --> 08:03:13,440
there and then it will also create the

11739
08:03:13,440 --> 08:03:15,600
URL. And that's a mistake that a lot of

11740
08:03:15,600 --> 08:03:18,320
people do. But here's the thing. We have

11741
08:03:18,320 --> 08:03:20,638
progress tracking implemented. our

11742
08:03:20,638 --> 08:03:22,638
number updates and this means this

11743
08:03:22,638 --> 08:03:25,680
content here rerenders 100 times and if

11744
08:03:25,680 --> 08:03:27,680
I would create a create object URL

11745
08:03:27,680 --> 08:03:29,600
inside of here. So if I would create

11746
08:03:29,600 --> 08:03:32,160
this URL then I would also rerender this

11747
08:03:32,160 --> 08:03:35,360
file this image at 100 times. I would

11748
08:03:35,360 --> 08:03:38,958
recreate this image URL 100 times. But

11749
08:03:38,958 --> 08:03:41,280
if I put it right here in state right at

11750
08:03:41,280 --> 08:03:43,600
the start then I won't rerender it. I

11751
08:03:43,600 --> 08:03:45,840
will create it once and that's it. But

11752
08:03:45,840 --> 08:03:47,760
here's one thing which I haven't talked

11753
08:03:47,760 --> 08:03:50,240
about and that's that this create object

11754
08:03:50,240 --> 08:03:53,120
URL creates an URL. This is great. The

11755
08:03:53,120 --> 08:03:55,520
only problem is where's the stored? This

11756
08:03:55,520 --> 08:03:58,798
is stored in memory. So if you create

11757
08:03:58,798 --> 08:04:00,718
one trillion images, so if you allow the

11758
08:04:00,718 --> 08:04:02,638
user to upload one trillion images and

11759
08:04:02,638 --> 08:04:05,760
if you don't clean up these URLs, well

11760
08:04:05,760 --> 08:04:07,760
then you will have a memory leak. You

11761
08:04:07,760 --> 08:04:10,240
don't want that. This means once a file

11762
08:04:10,240 --> 08:04:12,240
is uploaded and then maybe later on

11763
08:04:12,240 --> 08:04:14,718
deleted or not used anymore, you want to

11764
08:04:14,718 --> 08:04:18,398
also revoke this object URL. This means

11765
08:04:18,398 --> 08:04:20,798
we can go to our ondrop function. Where

11766
08:04:20,798 --> 08:04:23,760
is our onrop function? Is it on the top?

11767
08:04:23,760 --> 08:04:26,160
My god. Upload file. No, here we have it

11768
08:04:26,160 --> 08:04:29,040
onrop. And before we set our file state,

11769
08:04:29,040 --> 08:04:31,280
we want to check if we have already an

11770
08:04:31,280 --> 08:04:34,558
object URL. If so, we want to revoke it.

11771
08:04:34,558 --> 08:04:37,120
We want to clean up our memory. This

11772
08:04:37,120 --> 08:04:38,878
means we can create an if statement and

11773
08:04:38,878 --> 08:04:40,718
inside of here I want to check if we

11774
08:04:40,718 --> 08:04:44,320
have our file state.object URL and this

11775
08:04:44,320 --> 08:04:47,520
means two and signs if there's no file

11776
08:04:47,520 --> 08:04:51,600
state dotobject URL dot start with and

11777
08:04:51,600 --> 08:04:54,320
then HTTP. What is meant with the starts

11778
08:04:54,320 --> 08:04:57,280
with HTTP? Good question. How does an

11779
08:04:57,280 --> 08:04:59,760
object URL look like? It does not look

11780
08:04:59,760 --> 08:05:01,760
something like this. No, instead it

11781
08:05:01,760 --> 08:05:05,200
starts with a blob and then colon HTTP.

11782
08:05:05,200 --> 08:05:07,280
And that's why we check if the file or

11783
08:05:07,280 --> 08:05:10,320
if the object URL starts with HTTP

11784
08:05:10,320 --> 08:05:12,638
because if it starts with a standard URL

11785
08:05:12,638 --> 08:05:14,958
then this means the file is uploaded and

11786
08:05:14,958 --> 08:05:18,160
we display a remote URL. You cannot uh

11787
08:05:18,160 --> 08:05:20,878
revoke or you cannot clean up a remote

11788
08:05:20,878 --> 08:05:23,280
URL. You want to only clean up your own

11789
08:05:23,280 --> 08:05:26,000
URLs which start with this blob. And

11790
08:05:26,000 --> 08:05:28,320
that's why we check that it does not

11791
08:05:28,320 --> 08:05:30,798
start with HTTP with this exclamation

11792
08:05:30,798 --> 08:05:33,360
mark. We can then open this if statement

11793
08:05:33,360 --> 08:05:35,440
and inside of here I want to use the URL

11794
08:05:35,440 --> 08:05:37,680
interface. I want to use the revoke

11795
08:05:37,680 --> 08:05:40,398
object URL method and as an argument we

11796
08:05:40,398 --> 08:05:42,558
have to provide the URL. This means the

11797
08:05:42,558 --> 08:05:45,840
file state file stateobject

11798
08:05:45,840 --> 08:05:48,638
URL. And as you see we get one warning.

11799
08:05:48,638 --> 08:05:51,200
So react hook use callback has a missing

11800
08:05:51,200 --> 08:05:55,360
dependency file state.object URL either

11801
08:05:55,360 --> 08:05:58,160
included or remove the dependency array.

11802
08:05:58,160 --> 08:06:00,718
So we will move or we will add the file

11803
08:06:00,718 --> 08:06:03,760
state object URL into the dependence

11804
08:06:03,760 --> 08:06:06,240
into the dependency array. This is

11805
08:06:06,240 --> 08:06:08,240
great. And then I want to create another

11806
08:06:08,240 --> 08:06:11,280
use effect to clean uh to also clean up

11807
08:06:11,280 --> 08:06:13,920
my object URL. Why do we need that? So

11808
08:06:13,920 --> 08:06:16,638
in this or on top we only revoke the

11809
08:06:16,638 --> 08:06:19,600
object URL when we drop a new file into

11810
08:06:19,600 --> 08:06:22,320
our drop zone. But I want to also revoke

11811
08:06:22,320 --> 08:06:25,520
the object or the file URL if our

11812
08:06:25,520 --> 08:06:28,398
component is unmounted. This means what

11813
08:06:28,398 --> 08:06:30,798
we can do is go underneath the on drop.

11814
08:06:30,798 --> 08:06:33,040
We can go underneath the rejected files

11815
08:06:33,040 --> 08:06:35,200
underneath this render content. So just

11816
08:06:35,200 --> 08:06:37,840
above this uh this used drop zone I will

11817
08:06:37,840 --> 08:06:40,958
create a use effect hook. So use effect

11818
08:06:40,958 --> 08:06:43,680
this is imported from react as you all

11819
08:06:43,680 --> 08:06:45,680
know. Then I want to invoke it inside of

11820
08:06:45,680 --> 08:06:47,680
here as you all know a standard arrow

11821
08:06:47,680 --> 08:06:50,080
function. And then we want to create a

11822
08:06:50,080 --> 08:06:52,398
return. This will be equal to an arrow

11823
08:06:52,398 --> 08:06:54,320
function. Return error function. And

11824
08:06:54,320 --> 08:06:56,080
then we can again create the same if

11825
08:06:56,080 --> 08:06:58,878
statement. So I can go back to the on uh

11826
08:06:58,878 --> 08:07:00,958
drop function. I can copy this if

11827
08:07:00,958 --> 08:07:03,680
statement with file state object URL and

11828
08:07:03,680 --> 08:07:06,478
does not start with HTTP. I will copy it

11829
08:07:06,478 --> 08:07:08,718
and paste it into the if statement. If

11830
08:07:08,718 --> 08:07:10,718
this is true then we will just revoke

11831
08:07:10,718 --> 08:07:13,360
the object URL. So when the component

11832
08:07:13,360 --> 08:07:16,000
unmounts but we have to also add a

11833
08:07:16,000 --> 08:07:18,240
dependency array. So at the end I can

11834
08:07:18,240 --> 08:07:20,798
add a comma then open an array and we

11835
08:07:20,798 --> 08:07:23,520
want to you could say listen uh for the

11836
08:07:23,520 --> 08:07:26,798
file state.object object URL and that's

11837
08:07:26,798 --> 08:07:29,200
already it. We now clean up or we

11838
08:07:29,200 --> 08:07:31,360
prevent memory leaks. That's what we do

11839
08:07:31,360 --> 08:07:33,520
in reality. So you know what we are

11840
08:07:33,520 --> 08:07:35,280
almost finished and there's only one

11841
08:07:35,280 --> 08:07:36,878
more thing which we have to implement

11842
08:07:36,878 --> 08:07:39,360
and that's file removal. So deleting

11843
08:07:39,360 --> 08:07:42,240
files this means we can go underneath

11844
08:07:42,240 --> 08:07:45,440
our onrop function for example and then

11845
08:07:45,440 --> 08:07:47,360
uh underneath it I want to create a new

11846
08:07:47,360 --> 08:07:51,280
function handle remove file. So function

11847
08:07:51,280 --> 08:07:54,718
uh handle remove file. This should be

11848
08:07:54,718 --> 08:07:57,200
also an async function. So async

11849
08:07:57,200 --> 08:07:59,360
function and inside of here we want to

11850
08:07:59,360 --> 08:08:01,360
first of all create an if statement. So

11851
08:08:01,360 --> 08:08:03,920
if we are already deleting a file or if

11852
08:08:03,920 --> 08:08:06,320
we don't have an object URL then we want

11853
08:08:06,320 --> 08:08:08,558
to just break pretty much. We don't want

11854
08:08:08,558 --> 08:08:12,000
to continue. So if file state dot is

11855
08:08:12,000 --> 08:08:14,478
deleting or double vertical line if

11856
08:08:14,478 --> 08:08:18,398
there's no file stateobject URL then

11857
08:08:18,398 --> 08:08:20,878
let's just return it. This means we will

11858
08:08:20,878 --> 08:08:23,520
stop. We won't continue any further.

11859
08:08:23,520 --> 08:08:25,360
Then as the next step we want to create

11860
08:08:25,360 --> 08:08:28,398
a try and catch statement. In the try

11861
08:08:28,398 --> 08:08:30,240
statement I want to first of all update

11862
08:08:30,240 --> 08:08:32,478
again my state. So I can go into the

11863
08:08:32,478 --> 08:08:34,638
upload file function and I will just

11864
08:08:34,638 --> 08:08:37,280
copy the set file state setter. I can

11865
08:08:37,280 --> 08:08:39,280
then go into the try statement and again

11866
08:08:39,280 --> 08:08:41,440
paste it inside of here. We want to

11867
08:08:41,440 --> 08:08:43,920
spread our previous items and then we

11868
08:08:43,920 --> 08:08:46,718
want to set is deleting to true because

11869
08:08:46,718 --> 08:08:49,120
we're now deleting the file. Underneath

11870
08:08:49,120 --> 08:08:51,120
the set file state, we want to make a

11871
08:08:51,120 --> 08:08:53,520
response to a route handler to delete

11872
08:08:53,520 --> 08:08:55,760
our file. This means we want to first of

11873
08:08:55,760 --> 08:08:58,240
all create a new route handler. In the

11874
08:08:58,240 --> 08:09:01,120
app folder, in the API folder, in the S3

11875
08:09:01,120 --> 08:09:03,680
folder, we can create a new folder and

11876
08:09:03,680 --> 08:09:05,440
this will be delete. So we have an

11877
08:09:05,440 --> 08:09:07,920
upload folder and the delete folder. In

11878
08:09:07,920 --> 08:09:09,680
the delete folder, we want to create a

11879
08:09:09,680 --> 08:09:12,080
route.ts. And as you all know, we have

11880
08:09:12,080 --> 08:09:14,638
to now first of all define our request

11881
08:09:14,638 --> 08:09:17,680
or our function, I guess. So export

11882
08:09:17,680 --> 08:09:20,398
async function. This will be uppercase

11883
08:09:20,398 --> 08:09:23,040
delete and then we can open it. Inside

11884
08:09:23,040 --> 08:09:25,600
of the params we want to get a request

11885
08:09:25,600 --> 08:09:27,600
and this will be of type uppercase

11886
08:09:27,600 --> 08:09:30,320
request. Inside of here we can create a

11887
08:09:30,320 --> 08:09:33,120
try and catch statement. And then in the

11888
08:09:33,120 --> 08:09:35,120
try statement we want to first of all

11889
08:09:35,120 --> 08:09:38,398
get the body. So constant body equals to

11890
08:09:38,398 --> 08:09:41,760
await request dobody. From the body I

11891
08:09:41,760 --> 08:09:43,600
want to get the key because how can we

11892
08:09:43,600 --> 08:09:46,718
delete a file from S3? Well, to delete a

11893
08:09:46,718 --> 08:09:48,958
file, we need this unique identifier.

11894
08:09:48,958 --> 08:09:52,000
And the unique identifier is our key.

11895
08:09:52,000 --> 08:09:54,240
And also, I get an error and it says

11896
08:09:54,240 --> 08:09:56,240
cannot invoke an object which is

11897
08:09:56,240 --> 08:09:58,160
possibly null. That's because I don't

11898
08:09:58,160 --> 08:10:01,760
want to get the body, but JSON H silly

11899
08:10:01,760 --> 08:10:03,680
mistake. And then inside of here, we

11900
08:10:03,680 --> 08:10:06,320
want to get the key from our body. So,

11901
08:10:06,320 --> 08:10:10,000
constant key will be equal to body.key.

11902
08:10:10,000 --> 08:10:11,840
We don't have to create a Z schema right

11903
08:10:11,840 --> 08:10:14,160
here. This is fine enough for uh I guess

11904
08:10:14,160 --> 08:10:16,000
getting our value. I don't need type

11905
08:10:16,000 --> 08:10:18,240
safety right here. Nevertheless, we want

11906
08:10:18,240 --> 08:10:20,478
to validate it. We want to check that we

11907
08:10:20,478 --> 08:10:22,478
get a key. This means we want to create

11908
08:10:22,478 --> 08:10:24,558
an if statement and we want to say, hey,

11909
08:10:24,558 --> 08:10:26,718
if there's no key, then let's open this

11910
08:10:26,718 --> 08:10:29,360
and let's return a next response.json.

11911
08:10:29,360 --> 08:10:32,958
So, return next response.json,

11912
08:10:32,958 --> 08:10:35,120
I want to invoke it. And inside of here,

11913
08:10:35,120 --> 08:10:37,440
I want to return an object with an

11914
08:10:37,440 --> 08:10:39,840
error. This for the error, I will say

11915
08:10:39,840 --> 08:10:44,320
missing or invalid object key. And then

11916
08:10:44,320 --> 08:10:47,120
I can add a comma open another object

11917
08:10:47,120 --> 08:10:49,680
and for the status this will be 400.

11918
08:10:49,680 --> 08:10:52,398
This means something went wrong. Not

11919
08:10:52,398 --> 08:10:54,798
good. So what's the next step? Well the

11920
08:10:54,798 --> 08:10:57,200
next step is to again create an object.

11921
08:10:57,200 --> 08:11:00,080
So when we uploaded our file. So if I go

11922
08:11:00,080 --> 08:11:02,878
to the upload route.ts you will see that

11923
08:11:02,878 --> 08:11:06,638
we created a put object command. But now

11924
08:11:06,638 --> 08:11:09,040
we want to create a delete object

11925
08:11:09,040 --> 08:11:11,280
command. So let's create a constant

11926
08:11:11,280 --> 08:11:13,760
command. This will be equal to new

11927
08:11:13,760 --> 08:11:16,798
delete object command. This is imported

11928
08:11:16,798 --> 08:11:20,398
from the AWS SDK. We can then invoke

11929
08:11:20,398 --> 08:11:22,638
this the structured and inside of here

11930
08:11:22,638 --> 08:11:25,280
we have to provide two key properties.

11931
08:11:25,280 --> 08:11:27,120
First of all the bucket and this will be

11932
08:11:27,120 --> 08:11:29,600
equal to our env. This means we want to

11933
08:11:29,600 --> 08:11:32,638
get the envable from the lip folder and

11934
08:11:32,638 --> 08:11:36,000
then dot next public s3 bucket name

11935
08:11:36,000 --> 08:11:38,718
images. And we want to also provide the

11936
08:11:38,718 --> 08:11:40,958
key and this will be equal to the key.

11937
08:11:40,958 --> 08:11:43,040
And the next step is to use this command

11938
08:11:43,040 --> 08:11:46,160
this object pass it to our client S3

11939
08:11:46,160 --> 08:11:48,398
client and delete the file. This means

11940
08:11:48,398 --> 08:11:52,080
we can say await s3 s3 is imported from

11941
08:11:52,080 --> 08:11:54,240
our lip folder. Please make also sure

11942
08:11:54,240 --> 08:11:56,638
that you imported from the lip folder

11943
08:11:56,638 --> 08:11:59,040
dot send and as an argument we want to

11944
08:11:59,040 --> 08:12:01,600
provide the command underneath this we

11945
08:12:01,600 --> 08:12:04,160
want to return a successful message.

11946
08:12:04,160 --> 08:12:07,040
This means return next response.json

11947
08:12:07,040 --> 08:12:10,478
JSON for the message. This will just be

11948
08:12:10,478 --> 08:12:13,680
file deleted successfully. And of

11949
08:12:13,680 --> 08:12:16,160
course, we want to also return a status.

11950
08:12:16,160 --> 08:12:18,878
And the status will be 200, meaning

11951
08:12:18,878 --> 08:12:21,600
everything was great. And in the catch

11952
08:12:21,600 --> 08:12:23,920
statement, we want to also return a next

11953
08:12:23,920 --> 08:12:26,558
response.json. I can just copy this one

11954
08:12:26,558 --> 08:12:28,718
and paste it inside of here. For the

11955
08:12:28,718 --> 08:12:30,638
error message, this is fine. And for the

11956
08:12:30,638 --> 08:12:33,840
status, this will be 500. So we created

11957
08:12:33,840 --> 08:12:36,080
our route handler which means I can go

11958
08:12:36,080 --> 08:12:38,160
back to the app uh to the uploader

11959
08:12:38,160 --> 08:12:40,718
component and I want to call this route

11960
08:12:40,718 --> 08:12:43,120
handler. So we can create a constant

11961
08:12:43,120 --> 08:12:45,840
response and this will be equal to await

11962
08:12:45,840 --> 08:12:48,320
fetch as an argument. We have to provide

11963
08:12:48,320 --> 08:12:53,120
the URL and this will be / API/s3

11964
08:12:53,120 --> 08:12:56,080
/delete. Then we want to add a comma

11965
08:12:56,080 --> 08:12:58,638
open an object and we have to pass the

11966
08:12:58,638 --> 08:13:00,958
method. In this case the method will be

11967
08:13:00,958 --> 08:13:03,520
uppercase delete. Then we have to also

11968
08:13:03,520 --> 08:13:06,240
pass headers and headers will be content

11969
08:13:06,240 --> 08:13:09,600
type JSON or application JSON. You can

11970
08:13:09,600 --> 08:13:11,680
just copy it from your upload file

11971
08:13:11,680 --> 08:13:14,160
function. And then we want to also pass

11972
08:13:14,160 --> 08:13:16,320
the body. And for the body again this

11973
08:13:16,320 --> 08:13:18,878
will be JSON dot stringify. We want to

11974
08:13:18,878 --> 08:13:21,200
invoke it the structured and we have to

11975
08:13:21,200 --> 08:13:23,120
provide the key and the key will be

11976
08:13:23,120 --> 08:13:26,558
equal to the file state key. So this

11977
08:13:26,558 --> 08:13:29,280
already looks beautiful and then we have

11978
08:13:29,280 --> 08:13:31,360
to do a bit of error handling. So

11979
08:13:31,360 --> 08:13:33,360
underneath this constant response we

11980
08:13:33,360 --> 08:13:35,600
want to again check if the response was

11981
08:13:35,600 --> 08:13:38,160
successful. This means if the response

11982
08:13:38,160 --> 08:13:41,840
was not okay exclamation mark response.

11983
08:13:41,840 --> 08:13:43,840
Then we want to open this and return

11984
08:13:43,840 --> 08:13:46,718
first of all a to host. For the message

11985
08:13:46,718 --> 08:13:50,320
this will be failed to remove file from

11986
08:13:50,320 --> 08:13:52,798
storage. And then we want to also update

11987
08:13:52,798 --> 08:13:55,520
the state itself. So I can copy the set

11988
08:13:55,520 --> 08:13:57,920
file state. I want to paste it inside of

11989
08:13:57,920 --> 08:14:00,160
here. And we want to set is deleting to

11990
08:14:00,160 --> 08:14:03,120
true. And also error this will be set to

11991
08:14:03,120 --> 08:14:05,440
true because we now have an error. And

11992
08:14:05,440 --> 08:14:07,120
at the end of course we want to create

11993
08:14:07,120 --> 08:14:09,440
an empty return because we don't want to

11994
08:14:09,440 --> 08:14:12,240
continue um yeah we don't want to

11995
08:14:12,240 --> 08:14:14,080
continue with the try statement if this

11996
08:14:14,080 --> 08:14:16,478
makes sense. Then as a next step I want

11997
08:14:16,478 --> 08:14:19,280
to again clean up my preview URL because

11998
08:14:19,280 --> 08:14:21,840
we now delete it in file which means we

11999
08:14:21,840 --> 08:14:24,478
also don't need this preview URL. We

12000
08:14:24,478 --> 08:14:27,520
don't need it to take up our memory. So

12001
08:14:27,520 --> 08:14:29,760
what we can do is for example go to the

12002
08:14:29,760 --> 08:14:31,840
use effect hook and copy this if

12003
08:14:31,840 --> 08:14:34,558
statement. So if we have an object URL

12004
08:14:34,558 --> 08:14:37,120
and if it does not start with HTTP we

12005
08:14:37,120 --> 08:14:40,240
will revoke the object URL and the last

12006
08:14:40,240 --> 08:14:43,280
step is to set our file state. So I will

12007
08:14:43,280 --> 08:14:45,440
again copy the set file state. I will

12008
08:14:45,440 --> 08:14:47,360
paste it down below. I will delete

12009
08:14:47,360 --> 08:14:50,080
everything and I want to set everything

12010
08:14:50,080 --> 08:14:53,600
again. So file will be null. Uploading

12011
08:14:53,600 --> 08:14:57,120
will be false. progress will be zero.

12012
08:14:57,120 --> 08:15:00,160
Object URL this will be undefined. Then

12013
08:15:00,160 --> 08:15:02,718
we also have the error itself. This will

12014
08:15:02,718 --> 08:15:04,478
be false because everything was

12015
08:15:04,478 --> 08:15:07,440
successful. The file type for now I will

12016
08:15:07,440 --> 08:15:09,920
hardcode it and this will be image. The

12017
08:15:09,920 --> 08:15:12,638
ID this will be null and is deleting

12018
08:15:12,638 --> 08:15:14,240
will be false because we are not

12019
08:15:14,240 --> 08:15:16,798
deleting the file anymore. And the last

12020
08:15:16,798 --> 08:15:19,120
thing which I want to do is return a

12021
08:15:19,120 --> 08:15:22,080
successful toast. So toast do.Success

12022
08:15:22,080 --> 08:15:24,398
and for the message this will be file

12023
08:15:24,398 --> 08:15:27,200
removed successfully. In the catch

12024
08:15:27,200 --> 08:15:30,080
statement we want to also return an

12025
08:15:30,080 --> 08:15:33,280
error toast. This means toast dot error

12026
08:15:33,280 --> 08:15:35,360
and for the message this will be our

12027
08:15:35,360 --> 08:15:39,440
removing file dot please try again. And

12028
08:15:39,440 --> 08:15:41,360
then of course we want to also update

12029
08:15:41,360 --> 08:15:43,920
our state. This means I can for example

12030
08:15:43,920 --> 08:15:46,240
copy the set file state. I can also

12031
08:15:46,240 --> 08:15:47,840
delete the previous from here. We don't

12032
08:15:47,840 --> 08:15:50,000
need it. I will again just copy it.

12033
08:15:50,000 --> 08:15:52,398
paste it down below underneath the toast

12034
08:15:52,398 --> 08:15:54,878
and as a param I want to get previous

12035
08:15:54,878 --> 08:15:56,798
here we will need it I will delete

12036
08:15:56,798 --> 08:15:58,718
everything inside of here we want to

12037
08:15:58,718 --> 08:16:01,920
spread our previous items uh but as is

12038
08:16:01,920 --> 08:16:04,638
deleting will be set to false and error

12039
08:16:04,638 --> 08:16:07,440
will be set to true okay this is

12040
08:16:07,440 --> 08:16:10,398
finished handle remove file is finished

12041
08:16:10,398 --> 08:16:13,280
and we can use it to delete our file so

12042
08:16:13,280 --> 08:16:15,040
here's the thing where do we render this

12043
08:16:15,040 --> 08:16:16,878
button the delete button well in the

12044
08:16:16,878 --> 08:16:19,520
render states file we have to render

12045
08:16:19,520 --> 08:16:21,280
uploading state component we don't need

12046
08:16:21,280 --> 08:16:24,000
it but we need the render uploaded state

12047
08:16:24,000 --> 08:16:26,160
component because here we have the

12048
08:16:26,160 --> 08:16:28,798
deletion button this means in my params

12049
08:16:28,798 --> 08:16:31,040
I want to get a few more things I want

12050
08:16:31,040 --> 08:16:34,240
to get the is deleting boolean and also

12051
08:16:34,240 --> 08:16:36,958
handle removal this will be a function

12052
08:16:36,958 --> 08:16:40,000
or handle let's say handle remove file I

12053
08:16:40,000 --> 08:16:41,680
think this is better we want to then

12054
08:16:41,680 --> 08:16:44,558
also add all of the types this means is

12055
08:16:44,558 --> 08:16:47,200
deleting this will be set to boolean

12056
08:16:47,200 --> 08:16:49,680
this is the type and then handle remove

12057
08:16:49,680 --> 08:16:52,240
file. This will be a standard function.

12058
08:16:52,240 --> 08:16:54,558
This means an error function which will

12059
08:16:54,558 --> 08:16:57,120
result in void. As you see, we get two

12060
08:16:57,120 --> 08:16:58,718
errors and that's because we don't use

12061
08:16:58,718 --> 08:17:01,360
these values. So, what do you think?

12062
08:17:01,360 --> 08:17:03,520
It's time to use them. So, I want to

12063
08:17:03,520 --> 08:17:05,600
update my button first of all. For the

12064
08:17:05,600 --> 08:17:07,440
button, I want to add an on click

12065
08:17:07,440 --> 08:17:09,760
handler. And this onclick handler will

12066
08:17:09,760 --> 08:17:12,718
be equal to handle remove file. And then

12067
08:17:12,718 --> 08:17:15,200
we want to also add a disabled state.

12068
08:17:15,200 --> 08:17:17,520
And this will be equal to is deleting.

12069
08:17:17,520 --> 08:17:19,920
So if is deleting is true, the button

12070
08:17:19,920 --> 08:17:22,320
will also be disabled. And then we can

12071
08:17:22,320 --> 08:17:24,638
also create a turnary for the content.

12072
08:17:24,638 --> 08:17:27,360
So if is deleting is true, we can use a

12073
08:17:27,360 --> 08:17:29,280
question mark. I want to return the

12074
08:17:29,280 --> 08:17:31,600
loader to icon. This is imported from

12075
08:17:31,600 --> 08:17:34,320
lucid react and it's self-closing. Then

12076
08:17:34,320 --> 08:17:36,878
for the class name, this will be size 4

12077
08:17:36,878 --> 08:17:39,600
and animate spin. And then if this is

12078
08:17:39,600 --> 08:17:41,920
not true, if we are not deleting, I will

12079
08:17:41,920 --> 08:17:45,280
just again render this X icon. So this

12080
08:17:45,280 --> 08:17:47,440
means we can go back and as you see we

12081
08:17:47,440 --> 08:17:49,760
get one error. What's the problem? Well,

12082
08:17:49,760 --> 08:17:52,080
if we go back to our function render

12083
08:17:52,080 --> 08:17:54,080
states, you will see that we get an

12084
08:17:54,080 --> 08:17:56,320
error for the render uploaded state

12085
08:17:56,320 --> 08:17:58,638
component. And why is that? Well, we are

12086
08:17:58,638 --> 08:18:01,520
missing two properties. First of all,

12087
08:18:01,520 --> 08:18:04,160
handle removal file. This will be equal

12088
08:18:04,160 --> 08:18:06,478
to the function which we just created.

12089
08:18:06,478 --> 08:18:09,280
Handle remove file. I will copy the name

12090
08:18:09,280 --> 08:18:11,600
and paste it inside of here. As you see,

12091
08:18:11,600 --> 08:18:13,360
we still get an error and that's because

12092
08:18:13,360 --> 08:18:16,000
we are also missing is deleting and is

12093
08:18:16,000 --> 08:18:19,840
deleting will be set to um file state is

12094
08:18:19,840 --> 08:18:21,600
deleting. So, what do you think? Is it

12095
08:18:21,600 --> 08:18:23,920
time to test it out? I think so. So, if

12096
08:18:23,920 --> 08:18:26,398
I drag and drop the file, file size

12097
08:18:26,398 --> 08:18:28,320
exceeds the limit. Okay, different file.

12098
08:18:28,320 --> 08:18:31,200
This one. Okay, we get the state file

12099
08:18:31,200 --> 08:18:33,520
uploaded successfully. And if I click on

12100
08:18:33,520 --> 08:18:35,840
this button, it's disabled. And then

12101
08:18:35,840 --> 08:18:38,478
this also looks great. As you see, I

12102
08:18:38,478 --> 08:18:41,840
just got this problem. my drop zone also

12103
08:18:41,840 --> 08:18:44,478
could you say invoked so it again opens

12104
08:18:44,478 --> 08:18:46,478
my finder this shouldn't happen because

12105
08:18:46,478 --> 08:18:49,360
my drop zone should be um disabled if

12106
08:18:49,360 --> 08:18:52,558
I'm uploading a file but also if I'm uh

12107
08:18:52,558 --> 08:18:54,798
deleting a file this means in the use

12108
08:18:54,798 --> 08:18:56,958
drop zone hook where we structured we

12109
08:18:56,958 --> 08:18:59,120
can get the disabled property and this

12110
08:18:59,120 --> 08:19:02,000
will be equal to file state dot

12111
08:19:02,000 --> 08:19:05,360
uploading or double vertical line if uh

12112
08:19:05,360 --> 08:19:07,840
for example we have an object URL so I

12113
08:19:07,840 --> 08:19:09,760
want to use two exclamation marks and

12114
08:19:09,760 --> 08:19:13,040
then file state dot object URL and what

12115
08:19:13,040 --> 08:19:15,520
is this double exclamation mark well

12116
08:19:15,520 --> 08:19:18,958
this converts the state or this look the

12117
08:19:18,958 --> 08:19:21,760
object URL is a string but we don't

12118
08:19:21,760 --> 08:19:23,840
really want to check if we have a string

12119
08:19:23,840 --> 08:19:25,920
we want to check for a boolean right so

12120
08:19:25,920 --> 08:19:28,000
if we have an object URL then this

12121
08:19:28,000 --> 08:19:29,920
should be disabled and using this double

12122
08:19:29,920 --> 08:19:32,160
exclamation mark I convert the value

12123
08:19:32,160 --> 08:19:34,638
into a boolean since we have a string um

12124
08:19:34,638 --> 08:19:36,478
this will be a boolean which will be set

12125
08:19:36,478 --> 08:19:38,798
to true that's it and then we can also

12126
08:19:38,798 --> 08:19:41,200
to test everything out. This means if I

12127
08:19:41,200 --> 08:19:44,320
go to my tigress dashboard and do a hard

12128
08:19:44,320 --> 08:19:46,718
refresh, you will see that I deleted all

12129
08:19:46,718 --> 08:19:49,040
of the files which I had inside of here.

12130
08:19:49,040 --> 08:19:51,920
And let's upload a file again. So for

12131
08:19:51,920 --> 08:19:55,280
example, I will click on select file. I

12132
08:19:55,280 --> 08:19:58,160
want to upload this file. Enter. Nice

12133
08:19:58,160 --> 08:20:00,878
percentages. File uploaded successfully.

12134
08:20:00,878 --> 08:20:03,360
And if I go into the tigress dashboard,

12135
08:20:03,360 --> 08:20:05,760
I will get my file. I can also open it.

12136
08:20:05,760 --> 08:20:08,638
You see this is the correct file. Then I

12137
08:20:08,638 --> 08:20:11,120
can delete the file. File removed

12138
08:20:11,120 --> 08:20:13,920
successfully. Okay. And if I go back and

12139
08:20:13,920 --> 08:20:17,120
do a hard refresh, my file is deleted.

12140
08:20:17,120 --> 08:20:18,718
Here's one thing which I want to quickly

12141
08:20:18,718 --> 08:20:20,878
mention. And that's that if you still

12142
08:20:20,878 --> 08:20:23,440
see this file in your dashboard. That's

12143
08:20:23,440 --> 08:20:26,160
fine. For example, a few hours ago, I

12144
08:20:26,160 --> 08:20:28,080
deleted a file. I went into the

12145
08:20:28,080 --> 08:20:30,240
dashboard, did a hard refresh, and the

12146
08:20:30,240 --> 08:20:32,478
file was still there. Even though my

12147
08:20:32,478 --> 08:20:34,240
operation, this means the deletion

12148
08:20:34,240 --> 08:20:37,360
itself was successful. After coming back

12149
08:20:37,360 --> 08:20:39,920
the file was finally deleted. So I

12150
08:20:39,920 --> 08:20:41,920
probably think that they cached the

12151
08:20:41,920 --> 08:20:44,320
files here but the operation itself is

12152
08:20:44,320 --> 08:20:46,240
successful. I mean you see the toasts

12153
08:20:46,240 --> 08:20:48,638
everything works. If it wouldn't work we

12154
08:20:48,638 --> 08:20:51,360
would get an error. But yeah so file

12155
08:20:51,360 --> 08:20:53,920
uploads work but we have one problem

12156
08:20:53,920 --> 08:20:56,398
currently. If we go back to our page.tsx

12157
08:20:56,398 --> 08:20:59,920
tsxo to the creation route you will see

12158
08:20:59,920 --> 08:21:02,000
yeah we have the uploader component but

12159
08:21:02,000 --> 08:21:04,398
it's not connected with we are took form

12160
08:21:04,398 --> 08:21:06,718
with our client side state or client

12161
08:21:06,718 --> 08:21:08,718
side state what am I talking about with

12162
08:21:08,718 --> 08:21:11,840
our form validation library so our

12163
08:21:11,840 --> 08:21:14,958
uploader will need three prop or two key

12164
08:21:14,958 --> 08:21:17,200
properties and this is again the value

12165
08:21:17,200 --> 08:21:19,440
and then the onv value change so we can

12166
08:21:19,440 --> 08:21:20,878
first of all delete this comment for the

12167
08:21:20,878 --> 08:21:22,718
input we won't need it anymore and then

12168
08:21:22,718 --> 08:21:24,558
in the uploader we will create a new

12169
08:21:24,558 --> 08:21:27,520
interface so right here interface what's

12170
08:21:27,520 --> 08:21:30,000
a good name I props this is my favorite

12171
08:21:30,000 --> 08:21:32,320
name then I want to get a value this

12172
08:21:32,320 --> 08:21:34,478
will be optional and this will be of

12173
08:21:34,478 --> 08:21:36,958
type string then I want to also get the

12174
08:21:36,958 --> 08:21:39,120
onchange handler what is the onchange

12175
08:21:39,120 --> 08:21:43,040
handler it's a function so on change and

12176
08:21:43,040 --> 08:21:45,680
then this will be also optional and as

12177
08:21:45,680 --> 08:21:48,000
mentioned this will be a function and

12178
08:21:48,000 --> 08:21:50,798
this will be void so it will return void

12179
08:21:50,798 --> 08:21:53,200
then as a param I want to also get a

12180
08:21:53,200 --> 08:21:55,600
value and this will be of type string

12181
08:21:55,600 --> 08:21:57,120
Then we can go to the uploader

12182
08:21:57,120 --> 08:21:59,280
component. We can just destructure this.

12183
08:21:59,280 --> 08:22:02,000
This will be of type I props. And then

12184
08:22:02,000 --> 08:22:03,840
where I d the structure, I can get the

12185
08:22:03,840 --> 08:22:06,080
onchange handler and then also the

12186
08:22:06,080 --> 08:22:08,000
value. This means if we go back to the

12187
08:22:08,000 --> 08:22:10,478
page.tsx, go to the uploader and click

12188
08:22:10,478 --> 08:22:12,558
on control spacebar, we get two

12189
08:22:12,558 --> 08:22:15,200
properties on change and then also

12190
08:22:15,200 --> 08:22:18,398
value. This means the onchange property

12191
08:22:18,398 --> 08:22:20,798
will be equal to the field do.change on

12192
08:22:20,798 --> 08:22:24,478
change and value will be equal to field

12193
08:22:24,478 --> 08:22:26,878
do value. So this looks good. We don't

12194
08:22:26,878 --> 08:22:28,958
get any errors here. And if we go back

12195
08:22:28,958 --> 08:22:31,200
to the uploader component, we want to

12196
08:22:31,200 --> 08:22:34,080
use the onchange handler and also the

12197
08:22:34,080 --> 08:22:37,040
value itself. So where do we want to use

12198
08:22:37,040 --> 08:22:39,440
onchange first of all? So when we drop

12199
08:22:39,440 --> 08:22:41,200
our file or in other words when we

12200
08:22:41,200 --> 08:22:44,080
upload our file, we want to update our

12201
08:22:44,080 --> 08:22:46,080
field because again this form field

12202
08:22:46,080 --> 08:22:48,718
stores our file key when I upload my

12203
08:22:48,718 --> 08:22:51,040
file. So I have to first of all find the

12204
08:22:51,040 --> 08:22:53,600
upload file function. So this is the

12205
08:22:53,600 --> 08:22:56,000
upload file function. When I upload my

12206
08:22:56,000 --> 08:22:58,398
file I get a key and I want to store

12207
08:22:58,398 --> 08:23:01,360
this key for the file key. This means

12208
08:23:01,360 --> 08:23:03,280
once uploaded we want to go to the

12209
08:23:03,280 --> 08:23:05,840
onload event. Then underneath this toast

12210
08:23:05,840 --> 08:23:07,680
or above this toast it does not really

12211
08:23:07,680 --> 08:23:11,280
matter. We want to update our field. Um

12212
08:23:11,280 --> 08:23:13,360
is it called field? Yes field. This

12213
08:23:13,360 --> 08:23:15,920
means we can get our onchange handler.

12214
08:23:15,920 --> 08:23:18,718
Then this will be optional dot and as an

12215
08:23:18,718 --> 08:23:21,040
argument we want to provide our key

12216
08:23:21,040 --> 08:23:23,120
because we will store the key for the

12217
08:23:23,120 --> 08:23:26,000
value for the file key. As you see I get

12218
08:23:26,000 --> 08:23:29,120
an error and it says the this context of

12219
08:23:29,120 --> 08:23:31,920
type void is not assignable to methods

12220
08:23:31,920 --> 08:23:34,638
this of type window. Is this English?

12221
08:23:34,638 --> 08:23:36,478
Well it's quite simple. I'm misspelled

12222
08:23:36,478 --> 08:23:38,958
on change. That's it. I know quite

12223
08:23:38,958 --> 08:23:41,120
funny. So this is updated which is

12224
08:23:41,120 --> 08:23:43,200
great. But as you all know when we

12225
08:23:43,200 --> 08:23:45,840
delete a file we want to also update

12226
08:23:45,840 --> 08:23:48,240
this on change handler. This means I

12227
08:23:48,240 --> 08:23:51,120
want to again close this um upload file

12228
08:23:51,120 --> 08:23:53,680
function and I want to go into the into

12229
08:23:53,680 --> 08:23:56,240
the handle remove file and then when a

12230
08:23:56,240 --> 08:23:59,200
file is successfully deleted we want to

12231
08:23:59,200 --> 08:24:01,440
uh update this on change and we want to

12232
08:24:01,440 --> 08:24:03,680
make it empty an empty string. This

12233
08:24:03,680 --> 08:24:05,520
means underneath this if statement where

12234
08:24:05,520 --> 08:24:08,398
we revoke the object URL we can again

12235
08:24:08,398 --> 08:24:11,040
get this on change handler. We can uh

12236
08:24:11,040 --> 08:24:12,558
this is optional. This means we have to

12237
08:24:12,558 --> 08:24:14,718
mark this uh or give it this question

12238
08:24:14,718 --> 08:24:16,080
mark. This means it could be not

12239
08:24:16,080 --> 08:24:18,398
defined. And then when we invoke it and

12240
08:24:18,398 --> 08:24:20,638
as an argument this will we will pass an

12241
08:24:20,638 --> 08:24:22,638
empty string because the key is now

12242
08:24:22,638 --> 08:24:25,040
empty. We deleted the file. There is no

12243
08:24:25,040 --> 08:24:27,680
key. But we want to also implement our

12244
08:24:27,680 --> 08:24:30,478
value. So the value will be the file key

12245
08:24:30,478 --> 08:24:32,558
and again it could be defined but it

12246
08:24:32,558 --> 08:24:35,040
could also be not defined. This means we

12247
08:24:35,040 --> 08:24:37,520
want to go for example into our state

12248
08:24:37,520 --> 08:24:39,840
and we want to update our state. So this

12249
08:24:39,840 --> 08:24:42,000
means I can get my key and this will be

12250
08:24:42,000 --> 08:24:44,320
equal to my value. This value could

12251
08:24:44,320 --> 08:24:47,040
either be a string, a real key or this

12252
08:24:47,040 --> 08:24:48,718
could just be an empty string or in

12253
08:24:48,718 --> 08:24:50,718
other words undefined. So we will either

12254
08:24:50,718 --> 08:24:52,798
have a key or we won't have a key. When

12255
08:24:52,798 --> 08:24:54,958
I create a new course, there will be no

12256
08:24:54,958 --> 08:24:57,600
key. If I addit a course, we will have a

12257
08:24:57,600 --> 08:24:59,360
key. And honestly, I think this is

12258
08:24:59,360 --> 08:25:02,080
already it. So we created our form, we

12259
08:25:02,080 --> 08:25:04,160
update or we put everything into this

12260
08:25:04,160 --> 08:25:06,638
react hook form state, which means it's

12261
08:25:06,638 --> 08:25:09,440
time to create the mutation. So if I

12262
08:25:09,440 --> 08:25:12,160
again go back and for example fill in a

12263
08:25:12,160 --> 08:25:14,478
title, click on generate slug and then

12264
08:25:14,478 --> 08:25:16,718
click on create course, I should get a

12265
08:25:16,718 --> 08:25:19,200
lot of validation errors. So we get a

12266
08:25:19,200 --> 08:25:21,360
validation error for the description. So

12267
08:25:21,360 --> 08:25:24,000
if I add a bit of description, the a bit

12268
08:25:24,000 --> 08:25:26,798
of text, this error goes away. We get an

12269
08:25:26,798 --> 08:25:28,798
error for the big description. This

12270
08:25:28,798 --> 08:25:31,600
means if I create a big description in

12271
08:25:31,600 --> 08:25:33,920
this case, so a lot of content, then

12272
08:25:33,920 --> 08:25:35,840
this error goes away. Then for the

12273
08:25:35,840 --> 08:25:38,240
upload file or for the thumbnail URL we

12274
08:25:38,240 --> 08:25:40,478
get an error. This means if I select the

12275
08:25:40,478 --> 08:25:42,638
file for example this one the error

12276
08:25:42,638 --> 08:25:45,040
should go away and yes it went away.

12277
08:25:45,040 --> 08:25:47,280
Then for the category and level we don't

12278
08:25:47,280 --> 08:25:49,360
get any errors and that's because you

12279
08:25:49,360 --> 08:25:51,680
see default categories are already

12280
08:25:51,680 --> 08:25:54,000
selected. Then we also get errors for

12281
08:25:54,000 --> 08:25:56,240
the duration and price. That's because

12282
08:25:56,240 --> 08:25:58,398
the duration has to be bigger than 1

12283
08:25:58,398 --> 08:26:01,360
hour. So 50 and the price should be also

12284
08:26:01,360 --> 08:26:04,478
bigger or than zero. So, as an example,

12285
08:26:04,478 --> 08:26:06,958
500. And as you see, we don't get any

12286
08:26:06,958 --> 08:26:09,280
errors anymore. But if I click on create

12287
08:26:09,280 --> 08:26:11,120
course, nothing will really happen

12288
08:26:11,120 --> 08:26:13,520
because if we go to the page.tsx and

12289
08:26:13,520 --> 08:26:16,160
scroll to the complete top. Wow, this is

12290
08:26:16,160 --> 08:26:19,360
so much code. Damn. Then you will see we

12291
08:26:19,360 --> 08:26:21,840
will only console log our values. You

12292
08:26:21,840 --> 08:26:23,920
know what? We can test it out. So, if I

12293
08:26:23,920 --> 08:26:26,718
click on create course, hm, no feedback,

12294
08:26:26,718 --> 08:26:29,440
no no toast, no nothing. But I mean,

12295
08:26:29,440 --> 08:26:31,440
this isn't that bad. But if I go to the

12296
08:26:31,440 --> 08:26:33,680
inspector and go to the console, what

12297
08:26:33,680 --> 08:26:35,760
will we see inside of here? Well, we

12298
08:26:35,760 --> 08:26:37,760
have an object. And as you see,

12299
08:26:37,760 --> 08:26:40,558
category, description, duration, file

12300
08:26:40,558 --> 08:26:43,040
key, everything is defined. So this

12301
08:26:43,040 --> 08:26:45,280
means it's time to create our mutation.

12302
08:26:45,280 --> 08:26:47,760
But here's my question to you. How do

12303
08:26:47,760 --> 08:26:50,798
you create mutations with Nex.js? Well,

12304
08:26:50,798 --> 08:26:53,200
it's quite simple. You have two options.

12305
08:26:53,200 --> 08:26:55,440
Option number one is to create a route

12306
08:26:55,440 --> 08:26:58,318
handler. This is what we did for S3. So

12307
08:26:58,318 --> 08:27:01,520
in our API folder we have a S3 folder

12308
08:27:01,520 --> 08:27:03,920
and then a delete and also upload route

12309
08:27:03,920 --> 08:27:06,478
handler. These are API routes and we can

12310
08:27:06,478 --> 08:27:08,718
use them to get data. So this means to

12311
08:27:08,718 --> 08:27:11,440
fetch data but also to mutate data. The

12312
08:27:11,440 --> 08:27:13,440
only problem is it's quite annoying to

12313
08:27:13,440 --> 08:27:15,760
write the boilerplate export async

12314
08:27:15,760 --> 08:27:19,440
function post try catch this that I

12315
08:27:19,440 --> 08:27:21,760
don't want to do that. So what's another

12316
08:27:21,760 --> 08:27:24,160
alternative? Well another alternative is

12317
08:27:24,160 --> 08:27:26,240
server actions and that's what we will

12318
08:27:26,240 --> 08:27:28,160
use. Now, if you want to know when to

12319
08:27:28,160 --> 08:27:30,318
use server actions, when to use route

12320
08:27:30,318 --> 08:27:32,718
handlers, then I created a video on that

12321
08:27:32,718 --> 08:27:34,478
for channel members. So, definitely

12322
08:27:34,478 --> 08:27:36,878
check it out. It's super helpful. But

12323
08:27:36,878 --> 08:27:38,798
again, we will use server actions

12324
08:27:38,798 --> 08:27:41,520
because they are quite easy to write.

12325
08:27:41,520 --> 08:27:43,520
So, as mentioned, I'm a big fan of

12326
08:27:43,520 --> 08:27:46,080
vertical slice architecture. This means

12327
08:27:46,080 --> 08:27:48,638
instead of creating a global actions

12328
08:27:48,638 --> 08:27:50,558
file and defining all of the server

12329
08:27:50,558 --> 08:27:53,120
actions in there, we will instead go

12330
08:27:53,120 --> 08:27:55,760
into the create route and create an

12331
08:27:55,760 --> 08:27:58,558
actions file inside of here. So how do

12332
08:27:58,558 --> 08:28:00,798
you create server actions? Well, I hope

12333
08:28:00,798 --> 08:28:02,478
that you know the basics. You create

12334
08:28:02,478 --> 08:28:04,878
server actions by first of all defining

12335
08:28:04,878 --> 08:28:06,958
the file with use server. So with the

12336
08:28:06,958 --> 08:28:09,120
use server directive, this means all of

12337
08:28:09,120 --> 08:28:10,958
the functions which are exported from

12338
08:28:10,958 --> 08:28:13,680
this file will also be converted into

12339
08:28:13,680 --> 08:28:16,000
server actions. This means inside of

12340
08:28:16,000 --> 08:28:18,318
here we can create an export async

12341
08:28:18,318 --> 08:28:21,040
function. This will be called create

12342
08:28:21,040 --> 08:28:23,520
course and then we can just open this

12343
08:28:23,520 --> 08:28:25,840
inside of here in the params I want to

12344
08:28:25,840 --> 08:28:28,160
get my data. This means we can get data

12345
08:28:28,160 --> 08:28:30,718
and this will be of type course schema

12346
08:28:30,718 --> 08:28:32,798
type which is imported from the zot

12347
08:28:32,798 --> 08:28:35,360
schemas file. Now as you all know we

12348
08:28:35,360 --> 08:28:37,040
already implemented client side

12349
08:28:37,040 --> 08:28:39,040
validation. This is client side form

12350
08:28:39,040 --> 08:28:41,280
validation. But form validation on the

12351
08:28:41,280 --> 08:28:43,760
server side is even more important

12352
08:28:43,760 --> 08:28:45,920
because why is it important? Well,

12353
08:28:45,920 --> 08:28:47,760
here's the thing. A lot of people think

12354
08:28:47,760 --> 08:28:49,840
that server actions are private

12355
08:28:49,840 --> 08:28:51,760
endpoints or something like that. This

12356
08:28:51,760 --> 08:28:53,920
is not true. Server actions are like

12357
08:28:53,920 --> 08:28:56,638
route handlers like standard API routes.

12358
08:28:56,638 --> 08:28:59,120
They are publicly accessible which also

12359
08:28:59,120 --> 08:29:01,840
means anybody can hit the server action.

12360
08:29:01,840 --> 08:29:03,760
I created a lot of videos on server

12361
08:29:03,760 --> 08:29:05,680
actions. So just go through my YouTube

12362
08:29:05,680 --> 08:29:08,160
channel. But the TLDDR is you want to

12363
08:29:08,160 --> 08:29:10,160
validate your data on the server side.

12364
08:29:10,160 --> 08:29:11,840
You want to make sure that the data

12365
08:29:11,840 --> 08:29:13,760
which you get here is the same data

12366
08:29:13,760 --> 08:29:16,000
which is also passed on the client side

12367
08:29:16,000 --> 08:29:17,920
because if it's not the same then this

12368
08:29:17,920 --> 08:29:20,318
means that probably some attacker tried

12369
08:29:20,318 --> 08:29:22,478
to attack your website. So what we want

12370
08:29:22,478 --> 08:29:24,000
to do inside of here is first of all

12371
08:29:24,000 --> 08:29:26,718
create a try catch statement for our

12372
08:29:26,718 --> 08:29:28,958
handling. Then in the try statement I

12373
08:29:28,958 --> 08:29:30,718
want to do serverside validation as

12374
08:29:30,718 --> 08:29:34,000
mentioned. So constant v I will call it

12375
08:29:34,000 --> 08:29:36,638
validation and this will be equal to the

12376
08:29:36,638 --> 08:29:39,040
course schema which we get from our

12377
08:29:39,040 --> 08:29:41,840
schemas file dots save pass and as an

12378
08:29:41,840 --> 08:29:44,318
argument I want to provide the values.

12379
08:29:44,318 --> 08:29:46,958
So again or not values but data. So this

12380
08:29:46,958 --> 08:29:49,200
again means we get our data and then we

12381
08:29:49,200 --> 08:29:51,440
take the data and we compare it against

12382
08:29:51,440 --> 08:29:53,760
the zord schema. If the validation is

12383
08:29:53,760 --> 08:29:56,000
successful then the success property

12384
08:29:56,000 --> 08:29:58,398
will be true. If it's failed then it

12385
08:29:58,398 --> 08:30:00,478
will fail. Who would have thought? So

12386
08:30:00,478 --> 08:30:02,160
underneath the validation we can create

12387
08:30:02,160 --> 08:30:04,478
an if statement and we can say hey if

12388
08:30:04,478 --> 08:30:07,840
the validation is not successful. So if

12389
08:30:07,840 --> 08:30:10,718
not validation dosuccess then we want to

12390
08:30:10,718 --> 08:30:13,200
return an error message. This means I

12391
08:30:13,200 --> 08:30:15,680
will create an return open an object and

12392
08:30:15,680 --> 08:30:17,760
inside of here I want to first of all

12393
08:30:17,760 --> 08:30:20,240
return a status and this will be error

12394
08:30:20,240 --> 08:30:22,958
and then also a message and the message

12395
08:30:22,958 --> 08:30:27,840
will say invalid form data. Great. So

12396
08:30:27,840 --> 08:30:30,000
this is finished and now we make sure

12397
08:30:30,000 --> 08:30:32,240
that all of the data is correct and

12398
08:30:32,240 --> 08:30:34,478
validated. This means underneath this if

12399
08:30:34,478 --> 08:30:37,120
statement I can create a mutation using

12400
08:30:37,120 --> 08:30:39,760
Prisma. So we can create a constant data

12401
08:30:39,760 --> 08:30:42,160
and this will be equal to arate then

12402
08:30:42,160 --> 08:30:44,318
Prisma. Prisma is imported from the lip

12403
08:30:44,318 --> 08:30:48,240
folder dot course then dot create since

12404
08:30:48,240 --> 08:30:50,318
we want to create a new course and then

12405
08:30:50,318 --> 08:30:52,318
we have to use the data property since

12406
08:30:52,318 --> 08:30:54,478
we want to pass data. This means I can

12407
08:30:54,478 --> 08:30:56,878
just get my validation. So I can spread

12408
08:30:56,878 --> 08:30:59,680
my validation dot data. And as you see,

12409
08:30:59,680 --> 08:31:01,520
we still get an error. What's the

12410
08:31:01,520 --> 08:31:03,920
problem? Well, if you hover over data,

12411
08:31:03,920 --> 08:31:06,160
you will see a lot of error messages or

12412
08:31:06,160 --> 08:31:08,638
a lot of text. But right here, they say

12413
08:31:08,638 --> 08:31:11,200
property user is missing because if you

12414
08:31:11,200 --> 08:31:13,200
go back to the schema, then you should

12415
08:31:13,200 --> 08:31:15,040
remember that we have a one to many

12416
08:31:15,040 --> 08:31:17,040
relationship between the user and the

12417
08:31:17,040 --> 08:31:18,878
course. This means I have to define the

12418
08:31:18,878 --> 08:31:22,638
user ID. It's required. So if we go back

12419
08:31:22,638 --> 08:31:25,200
I can just for now get the user ID and

12420
08:31:25,200 --> 08:31:27,200
this will be equal to some random

12421
08:31:27,200 --> 08:31:29,360
string. We will get the user ID a bit

12422
08:31:29,360 --> 08:31:31,840
later on. So again we take our data

12423
08:31:31,840 --> 08:31:34,000
which we validated. We just spread it.

12424
08:31:34,000 --> 08:31:36,240
You could also in theory just hardcode

12425
08:31:36,240 --> 08:31:38,478
everything. So we could get the category

12426
08:31:38,478 --> 08:31:41,040
set it true or set it equal to our

12427
08:31:41,040 --> 08:31:43,840
validation dot data dot category. This

12428
08:31:43,840 --> 08:31:45,600
is the same thing. It does not matter

12429
08:31:45,600 --> 08:31:47,920
but it's just easier to spread our

12430
08:31:47,920 --> 08:31:50,478
validation dot data. You don't have to

12431
08:31:50,478 --> 08:31:52,718
write so much code and it's just a cool

12432
08:31:52,718 --> 08:31:55,760
helper I guess. So this is nice. We

12433
08:31:55,760 --> 08:31:57,520
create the mutation using Prisma. This

12434
08:31:57,520 --> 08:31:59,120
means we create the course and then

12435
08:31:59,120 --> 08:32:01,120
underneath this constant data I can

12436
08:32:01,120 --> 08:32:03,760
create a return object. This means we

12437
08:32:03,760 --> 08:32:06,478
can return an object. And then I want to

12438
08:32:06,478 --> 08:32:08,558
again get a status. This will be

12439
08:32:08,558 --> 08:32:11,040
success. And then also of course a

12440
08:32:11,040 --> 08:32:13,120
message. And for the message this will

12441
08:32:13,120 --> 08:32:16,718
be cause created successfully.

12442
08:32:16,718 --> 08:32:19,120
But here's one problem. So as you see I

12443
08:32:19,120 --> 08:32:21,520
want to always return objects. But the

12444
08:32:21,520 --> 08:32:23,680
thing is right now it's very easy to

12445
08:32:23,680 --> 08:32:26,080
just misspell something. So here I could

12446
08:32:26,080 --> 08:32:29,760
say status and here I could say status.

12447
08:32:29,760 --> 08:32:33,040
As you see I misspelled both statuses

12448
08:32:33,040 --> 08:32:35,440
but I still return them. I don't get any

12449
08:32:35,440 --> 08:32:37,680
type safety or anything like that.

12450
08:32:37,680 --> 08:32:40,080
That's not nice. I want to always return

12451
08:32:40,080 --> 08:32:41,920
something and it should always have the

12452
08:32:41,920 --> 08:32:43,760
same you could say vables the same

12453
08:32:43,760 --> 08:32:46,318
properties a status and a message. And

12454
08:32:46,318 --> 08:32:49,360
the status should only be either error

12455
08:32:49,360 --> 08:32:51,920
or success. This means we want to create

12456
08:32:51,920 --> 08:32:54,160
a type. Now we could of course create an

12457
08:32:54,160 --> 08:32:56,558
interface on the top and then use it as

12458
08:32:56,558 --> 08:32:58,478
a return type. This is fine. But since

12459
08:32:58,478 --> 08:33:00,878
we will reuse this type in all of our

12460
08:33:00,878 --> 08:33:03,280
server actions, it makes a lot of sense

12461
08:33:03,280 --> 08:33:06,240
to go into our lip folder and create a

12462
08:33:06,240 --> 08:33:09,360
types.ts file. Inside of here, we will

12463
08:33:09,360 --> 08:33:12,000
store general types which we will reuse

12464
08:33:12,000 --> 08:33:14,318
throughout the application. So I want to

12465
08:33:14,318 --> 08:33:16,958
create a type for the API response. This

12466
08:33:16,958 --> 08:33:19,600
isn't an API response, but it's pretty

12467
08:33:19,600 --> 08:33:21,760
much an API. So that's why I will call

12468
08:33:21,760 --> 08:33:25,120
it API response. So export then type.

12469
08:33:25,120 --> 08:33:28,160
This will be API response. And this will

12470
08:33:28,160 --> 08:33:30,878
be equal to an object inside of here. As

12471
08:33:30,878 --> 08:33:33,280
mentioned, I want to have a status. And

12472
08:33:33,280 --> 08:33:36,398
this status can either be success or it

12473
08:33:36,398 --> 08:33:38,000
can be error. So we can get this

12474
08:33:38,000 --> 08:33:40,318
vertical line and then error. And then

12475
08:33:40,318 --> 08:33:42,878
we want to also return a message. And

12476
08:33:42,878 --> 08:33:45,200
this will be of type string. So this is

12477
08:33:45,200 --> 08:33:47,200
the API response. I want to always

12478
08:33:47,200 --> 08:33:50,000
return these values. And how can we now

12479
08:33:50,000 --> 08:33:52,398
tell the server action that I want to

12480
08:33:52,398 --> 08:33:55,280
specifically return an object with these

12481
08:33:55,280 --> 08:33:57,600
two properties. Well, it's quite simple.

12482
08:33:57,600 --> 08:34:00,240
You call it the return type parameter.

12483
08:34:00,240 --> 08:34:02,798
Here after the parentheses, uh we can

12484
08:34:02,798 --> 08:34:05,200
add a colon, then use a promise, and

12485
08:34:05,200 --> 08:34:06,958
then for the promise, we can add a

12486
08:34:06,958 --> 08:34:09,120
generic. And in the generic, we want to

12487
08:34:09,120 --> 08:34:12,080
pass the API response type. This means

12488
08:34:12,080 --> 08:34:15,040
if I go back, I instantly get an error.

12489
08:34:15,040 --> 08:34:17,680
It says status does not exist. You

12490
08:34:17,680 --> 08:34:20,398
probably mean status. And right here,

12491
08:34:20,398 --> 08:34:22,718
status does not exist. You probably want

12492
08:34:22,718 --> 08:34:25,280
to get the correct status. As you see,

12493
08:34:25,280 --> 08:34:27,600
this looks and works beautifully.

12494
08:34:27,600 --> 08:34:29,680
Nevertheless, we still get one error.

12495
08:34:29,680 --> 08:34:31,680
What's the problem? Well, currently we

12496
08:34:31,680 --> 08:34:34,638
only return objects if our data or if

12497
08:34:34,638 --> 08:34:37,440
our whole submission was successful. But

12498
08:34:37,440 --> 08:34:39,840
we have to also return data in this

12499
08:34:39,840 --> 08:34:41,920
catch statement. So in the catch

12500
08:34:41,920 --> 08:34:44,240
statement I can again create a return

12501
08:34:44,240 --> 08:34:46,718
then open an object and if I click on

12502
08:34:46,718 --> 08:34:50,160
control spacebar wow typescript typing.

12503
08:34:50,160 --> 08:34:52,878
So for the status this will be error

12504
08:34:52,878 --> 08:34:56,398
correct and for the message

12505
08:34:56,398 --> 08:34:59,280
I guess failed to create course because

12506
08:34:59,280 --> 08:35:02,000
the user probably failed and as you see

12507
08:35:02,000 --> 08:35:04,398
if you again go back this promise API

12508
08:35:04,398 --> 08:35:06,080
response does not throw any error

12509
08:35:06,080 --> 08:35:08,398
anymore and that's because we we return

12510
08:35:08,398 --> 08:35:10,798
these objects. Here's one thing which I

12511
08:35:10,798 --> 08:35:12,958
want to quickly mention. A lot of people

12512
08:35:12,958 --> 08:35:15,360
might say, "Hey Jan, why do we return

12513
08:35:15,360 --> 08:35:17,840
objects?" How about we just comment this

12514
08:35:17,840 --> 08:35:21,120
out and throw a new error? So, throw new

12515
08:35:21,120 --> 08:35:22,958
error. And then for the message, we will

12516
08:35:22,958 --> 08:35:25,520
say something failed. And throw new

12517
08:35:25,520 --> 08:35:27,280
error should of course be uppercased.

12518
08:35:27,280 --> 08:35:29,600
So, error uppercased. Why don't we do

12519
08:35:29,600 --> 08:35:32,000
something like this? Very good question.

12520
08:35:32,000 --> 08:35:34,638
I also created a video on this already.

12521
08:35:34,638 --> 08:35:36,958
Nevertheless, I will quickly explain it.

12522
08:35:36,958 --> 08:35:38,958
So later on I want to get the error

12523
08:35:38,958 --> 08:35:42,000
message in my page.tsx. So we will call

12524
08:35:42,000 --> 08:35:44,318
the server action in this onsubmit

12525
08:35:44,318 --> 08:35:46,798
handler. Then this of course will have a

12526
08:35:46,798 --> 08:35:49,360
result. This means our server action our

12527
08:35:49,360 --> 08:35:51,200
whole submission could either be

12528
08:35:51,200 --> 08:35:53,680
successful or it could fail. If it's

12529
08:35:53,680 --> 08:35:55,360
successful I want to get the error

12530
08:35:55,360 --> 08:35:58,000
message. If it's failed if it fails I

12531
08:35:58,000 --> 08:35:59,920
want to also get the error message. So

12532
08:35:59,920 --> 08:36:02,160
this message which we provide. So I will

12533
08:36:02,160 --> 08:36:04,318
get the result message and then return

12534
08:36:04,318 --> 08:36:07,360
it in a toast. If I use this throw new

12535
08:36:07,360 --> 08:36:09,760
error and want to then render this error

12536
08:36:09,760 --> 08:36:13,440
message, it won't work because React is

12537
08:36:13,440 --> 08:36:16,398
it it tries to do things very securely.

12538
08:36:16,398 --> 08:36:18,240
So it will omit the message in

12539
08:36:18,240 --> 08:36:20,558
production to not leak anything. And

12540
08:36:20,558 --> 08:36:22,558
that's a huge problem. I don't want that

12541
08:36:22,558 --> 08:36:24,080
because the thing is it will work in

12542
08:36:24,080 --> 08:36:26,080
development. So if I use throw you

12543
08:36:26,080 --> 08:36:28,080
error, it will render this error message

12544
08:36:28,080 --> 08:36:30,318
in uh development. But once you push

12545
08:36:30,318 --> 08:36:32,958
your application to production, it won't

12546
08:36:32,958 --> 08:36:34,958
render this error message anymore. it

12547
08:36:34,958 --> 08:36:37,040
will just omit it and instead it will

12548
08:36:37,040 --> 08:36:38,878
create an error message which will say

12549
08:36:38,878 --> 08:36:41,120
hey this error message has been omitted

12550
08:36:41,120 --> 08:36:43,760
due to security reasons blah blah blah

12551
08:36:43,760 --> 08:36:45,680
so that's the reason why we don't use

12552
08:36:45,680 --> 08:36:47,760
throw new error and instead we just

12553
08:36:47,760 --> 08:36:50,798
return a plain object and then uh I

12554
08:36:50,798 --> 08:36:53,200
guess render the correct state using the

12555
08:36:53,200 --> 08:36:55,680
status so yeah that's the easy and

12556
08:36:55,680 --> 08:36:58,318
simple explanation this means we can go

12557
08:36:58,318 --> 08:37:01,280
back to the page tsx and inside of here

12558
08:37:01,280 --> 08:37:03,840
I want to call the server action but

12559
08:37:03,840 --> 08:37:06,398
here's the We have a try catch statement

12560
08:37:06,398 --> 08:37:08,878
in the server action. But I want to also

12561
08:37:08,878 --> 08:37:11,200
create a try catch statement inside of

12562
08:37:11,200 --> 08:37:13,440
here. But here's the thing. Always

12563
08:37:13,440 --> 08:37:16,398
writing try then again catch. You know

12564
08:37:16,398 --> 08:37:18,398
what? This is kind of annoying. I don't

12565
08:37:18,398 --> 08:37:20,478
want to do that. So is there anything

12566
08:37:20,478 --> 08:37:22,878
else which maybe allows us to create a

12567
08:37:22,878 --> 08:37:25,600
try catch statement without writing this

12568
08:37:25,600 --> 08:37:28,000
annoying code? Good question. There

12569
08:37:28,000 --> 08:37:30,878
actually is a very nice solution. So,

12570
08:37:30,878 --> 08:37:32,958
what you can do is go to Google and type

12571
08:37:32,958 --> 08:37:36,160
in T3 try catch. Honestly, I always

12572
08:37:36,160 --> 08:37:37,840
thought that this was just some weird

12573
08:37:37,840 --> 08:37:41,040
gimmick created by Theo, but no, it's

12574
08:37:41,040 --> 08:37:43,440
actually a game changer and I started

12575
08:37:43,440 --> 08:37:46,240
using it literally everywhere. So, this

12576
08:37:46,240 --> 08:37:49,280
is like a simple, as he says, Theo's

12577
08:37:49,280 --> 08:37:51,760
preferred way of handling try catch and

12578
08:37:51,760 --> 08:37:54,000
TypeScript. It's literally just a

12579
08:37:54,000 --> 08:37:56,558
wrapper around try catch. So it still

12580
08:37:56,558 --> 08:37:58,718
creates a try catch statement but you

12581
08:37:58,718 --> 08:38:00,558
don't have to write so much boilerplate

12582
08:38:00,558 --> 08:38:03,120
anymore because you can now just h say

12583
08:38:03,120 --> 08:38:05,200
try catch this will be a new function

12584
08:38:05,200 --> 08:38:06,798
and then you invoke it and as an

12585
08:38:06,798 --> 08:38:09,200
argument you provide your function you

12586
08:38:09,200 --> 08:38:12,000
don't have to write anymore try catch

12587
08:38:12,000 --> 08:38:14,558
return console log no so what we can do

12588
08:38:14,558 --> 08:38:17,120
is just copy this code I will copy it

12589
08:38:17,120 --> 08:38:19,280
then we can go back and then in the

12590
08:38:19,280 --> 08:38:21,680
hooks folder I want to create a new file

12591
08:38:21,680 --> 08:38:24,398
which will be called schwai-catch.ts

12592
08:38:24,398 --> 08:38:26,638
ts and then we will paste the code

12593
08:38:26,638 --> 08:38:29,200
inside of here. So again this is a

12594
08:38:29,200 --> 08:38:31,760
wrapper around standard try catch we get

12595
08:38:31,760 --> 08:38:34,240
right here try and catch but how does it

12596
08:38:34,240 --> 08:38:36,318
work in effect I mean I show you boring

12597
08:38:36,318 --> 08:38:38,398
code TypeScript nobody understands

12598
08:38:38,398 --> 08:38:40,798
anything so how does it work well I can

12599
08:38:40,798 --> 08:38:42,718
first of all delete this try catch we

12600
08:38:42,718 --> 08:38:44,558
don't need it anymore instead we will

12601
08:38:44,558 --> 08:38:47,200
use the try catch code library let's

12602
08:38:47,200 --> 08:38:49,760
call it function library let's call it

12603
08:38:49,760 --> 08:38:52,638
function so in this function on submit I

12604
08:38:52,638 --> 08:38:55,040
can first of all start a transition so

12605
08:38:55,040 --> 08:38:56,878
because I want to show a pending state

12606
08:38:56,878 --> 08:38:58,798
this means above the form we can first

12607
08:38:58,798 --> 08:39:00,958
of all create a constant. Then we want

12608
08:39:00,958 --> 08:39:03,440
to create or get a getter and setter.

12609
08:39:03,440 --> 08:39:05,680
This means this will be is pending and

12610
08:39:05,680 --> 08:39:08,558
then also start transition and this will

12611
08:39:08,558 --> 08:39:11,200
be equal to use transition and use

12612
08:39:11,200 --> 08:39:13,840
transition is imported from react. Then

12613
08:39:13,840 --> 08:39:16,398
we can copy start transition go back and

12614
08:39:16,398 --> 08:39:18,718
then in the onsubmit function I will get

12615
08:39:18,718 --> 08:39:20,958
start transition. I want to invoke it

12616
08:39:20,958 --> 08:39:22,958
and inside of here we will create a

12617
08:39:22,958 --> 08:39:25,920
standard async arrow function. So let's

12618
08:39:25,920 --> 08:39:27,920
open it and then inside of here we can

12619
08:39:27,920 --> 08:39:31,520
finally use this uh try catch function.

12620
08:39:31,520 --> 08:39:33,200
So we can create a constant we want to

12621
08:39:33,200 --> 08:39:35,920
destruct and then this will be equal to

12622
08:39:35,920 --> 08:39:39,120
a rate try catch. Try catch is imported

12623
08:39:39,120 --> 08:39:41,200
from the hooks file. Don't click on this

12624
08:39:41,200 --> 08:39:42,718
try catch because it will create a

12625
08:39:42,718 --> 08:39:45,280
standard try catch but import try catch

12626
08:39:45,280 --> 08:39:47,920
from the hooks folder. And then inside

12627
08:39:47,920 --> 08:39:50,240
of here we can invoke it and as an

12628
08:39:50,240 --> 08:39:52,478
argument we want to provide the function

12629
08:39:52,478 --> 08:39:54,958
the server action. How is our server

12630
08:39:54,958 --> 08:39:57,040
action called? It's called create

12631
08:39:57,040 --> 08:39:59,360
course. We will copy the name, paste it

12632
08:39:59,360 --> 08:40:01,040
inside of here. We can import it from

12633
08:40:01,040 --> 08:40:03,520
the actions. We want to invoke it and as

12634
08:40:03,520 --> 08:40:06,398
an argument, we want to pass our values.

12635
08:40:06,398 --> 08:40:08,798
Okay, this looks nice. But what exactly

12636
08:40:08,798 --> 08:40:10,798
does this code do now? Well, where we

12637
08:40:10,798 --> 08:40:12,958
destructure this try catch or the

12638
08:40:12,958 --> 08:40:15,520
result, we will get two properties.

12639
08:40:15,520 --> 08:40:18,080
First of all, data and then error. And

12640
08:40:18,080 --> 08:40:20,718
this data is what would result if our

12641
08:40:20,718 --> 08:40:23,280
try is successful. This error is the

12642
08:40:23,280 --> 08:40:25,360
response which will be handled in the

12643
08:40:25,360 --> 08:40:27,440
catch statement if this makes sense. So

12644
08:40:27,440 --> 08:40:29,680
this is literally just your try. This is

12645
08:40:29,680 --> 08:40:31,520
your catch. That's it. This means

12646
08:40:31,520 --> 08:40:33,440
underneath the constant we can create

12647
08:40:33,440 --> 08:40:35,600
first of all an if statement. And if

12648
08:40:35,600 --> 08:40:38,000
error is true, this means if our catch

12649
08:40:38,000 --> 08:40:40,558
statement I don't want to say was

12650
08:40:40,558 --> 08:40:43,440
successful but if it catched something

12651
08:40:43,440 --> 08:40:45,920
then we can return a toast error and

12652
08:40:45,920 --> 08:40:48,558
host is imported from sona. Then for the

12653
08:40:48,558 --> 08:40:51,760
message this will just be an unexpected

12654
08:40:51,760 --> 08:40:53,840
error occurred. And of course we want to

12655
08:40:53,840 --> 08:40:56,000
also return it at the end to not check

12656
08:40:56,000 --> 08:40:58,000
any further. Then after this if

12657
08:40:58,000 --> 08:40:59,760
statement we can create another if

12658
08:40:59,760 --> 08:41:01,920
statement because this means if this

12659
08:41:01,920 --> 08:41:04,000
error wasn't triggered then our

12660
08:41:04,000 --> 08:41:06,398
submission was successful. And I want to

12661
08:41:06,398 --> 08:41:09,680
check if our result type was success or

12662
08:41:09,680 --> 08:41:11,600
error because here's again the thing we

12663
08:41:11,600 --> 08:41:14,558
have two try catch statements. our our

12664
08:41:14,558 --> 08:41:16,240
submission could either fail on the

12665
08:41:16,240 --> 08:41:18,160
server side and land in the catch

12666
08:41:18,160 --> 08:41:20,558
statement or our validate or our

12667
08:41:20,558 --> 08:41:23,040
submission could fail on the client

12668
08:41:23,040 --> 08:41:25,840
side. We now check if the uh submission

12669
08:41:25,840 --> 08:41:27,360
failed on the client side with this

12670
08:41:27,360 --> 08:41:29,120
error state. But one we want to also

12671
08:41:29,120 --> 08:41:31,600
check if the uh submission failed on the

12672
08:41:31,600 --> 08:41:34,000
server side. This means if data do

12673
08:41:34,000 --> 08:41:36,798
status is equal to success. As you see

12674
08:41:36,798 --> 08:41:39,440
we get nice typescript types then we can

12675
08:41:39,440 --> 08:41:41,600
open this and I want to return a toast.

12676
08:41:41,600 --> 08:41:43,680
This means toast this it's already

12677
08:41:43,680 --> 08:41:45,840
imported dots success and for the

12678
08:41:45,840 --> 08:41:48,240
message this will be data dot message

12679
08:41:48,240 --> 08:41:50,558
and honestly I don't like this name data

12680
08:41:50,558 --> 08:41:52,718
so I will rename it to result I think

12681
08:41:52,718 --> 08:41:55,760
this is a bit better so if result status

12682
08:41:55,760 --> 08:41:58,638
is success then we will return data uh a

12683
08:41:58,638 --> 08:42:01,200
toast dosuccess with the argument result

12684
08:42:01,200 --> 08:42:04,000
dossage if this is not true then we can

12685
08:42:04,000 --> 08:42:06,080
create an else if statement and inside

12686
08:42:06,080 --> 08:42:08,478
of here I want to check if the result do

12687
08:42:08,478 --> 08:42:11,520
status is equal to

12688
08:42:11,520 --> 08:42:14,080
If so, we want to again return a toast

12689
08:42:14,080 --> 08:42:15,920
dot error. And for the message, this

12690
08:42:15,920 --> 08:42:19,280
will be result dossage. Great. Then also

12691
08:42:19,280 --> 08:42:22,240
if success is true, I want to also reset

12692
08:42:22,240 --> 08:42:25,520
the form. This means form dot reset. We

12693
08:42:25,520 --> 08:42:27,600
can invoke it. And then I want to also

12694
08:42:27,600 --> 08:42:29,600
redirect the user. I want to redirect

12695
08:42:29,600 --> 08:42:31,920
the user to the courses route. How do

12696
08:42:31,920 --> 08:42:33,840
you redirect a user in a client

12697
08:42:33,840 --> 08:42:36,398
component? You use the use router hook.

12698
08:42:36,398 --> 08:42:37,920
This means if we again scroll to the

12699
08:42:37,920 --> 08:42:39,440
top, we can go underneath the use

12700
08:42:39,440 --> 08:42:41,200
transition and we want to create a

12701
08:42:41,200 --> 08:42:43,120
constant router and this will be equal

12702
08:42:43,120 --> 08:42:45,760
to use router. Use router is imported

12703
08:42:45,760 --> 08:42:48,558
from next /navigation we want to invoke

12704
08:42:48,558 --> 08:42:50,798
it and then we can copy the router. This

12705
08:42:50,798 --> 08:42:53,200
means we want to redirect the user. So

12706
08:42:53,200 --> 08:42:56,240
router dop and as an argument this will

12707
08:42:56,240 --> 08:42:59,840
be /admin /courses. Then there's only

12708
08:42:59,840 --> 08:43:01,280
one more thing which I want to do and

12709
08:43:01,280 --> 08:43:02,878
that's first of all delete these stupid

12710
08:43:02,878 --> 08:43:05,120
imports which I made and secondly I want

12711
08:43:05,120 --> 08:43:07,040
to use the pending boolean for the

12712
08:43:07,040 --> 08:43:09,040
submit button. So I will scroll

12713
08:43:09,040 --> 08:43:13,360
completely to the bottom. D wow wow wow.

12714
08:43:13,360 --> 08:43:14,958
Here we have the button. First of all

12715
08:43:14,958 --> 08:43:17,200
the button should be of type submit.

12716
08:43:17,200 --> 08:43:19,200
This is number one. Secondly for the

12717
08:43:19,200 --> 08:43:21,440
disabled state and this will be equal to

12718
08:43:21,440 --> 08:43:23,600
pending. So I renamed it from is pending

12719
08:43:23,600 --> 08:43:25,200
to pending. I like the name a bit

12720
08:43:25,200 --> 08:43:27,280
better. So if we are pending the button

12721
08:43:27,280 --> 08:43:29,520
will be disabled. And for the content, I

12722
08:43:29,520 --> 08:43:31,520
don't want to render create course, but

12723
08:43:31,520 --> 08:43:34,000
instead I want to render the uh content

12724
08:43:34,000 --> 08:43:36,318
dynamically. If pending is true, we will

12725
08:43:36,318 --> 08:43:38,958
return a loader icon. If pending is not

12726
08:43:38,958 --> 08:43:40,958
true, we will just return this thing.

12727
08:43:40,958 --> 08:43:42,878
So, we can just copy this. Don't delete

12728
08:43:42,878 --> 08:43:44,798
it. Keep it in your clipboard. And then

12729
08:43:44,798 --> 08:43:46,558
we can use the pending boolean. We want

12730
08:43:46,558 --> 08:43:49,120
to create a turnary. If pending is true,

12731
08:43:49,120 --> 08:43:51,120
let's use empty tags. And inside of

12732
08:43:51,120 --> 08:43:53,600
here, we can say creating dot dot dot.

12733
08:43:53,600 --> 08:43:55,760
And then we want to get the loader icon.

12734
08:43:55,760 --> 08:43:58,240
So I will uh get the loader icon from

12735
08:43:58,240 --> 08:44:01,040
lucid react. This is self-closing and

12736
08:44:01,040 --> 08:44:02,878
then we can give it a class name which

12737
08:44:02,878 --> 08:44:05,360
will be animate spin. If this is not

12738
08:44:05,360 --> 08:44:07,600
true we can use columns and then we want

12739
08:44:07,600 --> 08:44:09,760
to return what I just copied. So I will

12740
08:44:09,760 --> 08:44:12,000
use empty tags and then paste what I

12741
08:44:12,000 --> 08:44:14,958
just copied. Also for this load two icon

12742
08:44:14,958 --> 08:44:17,520
I want to give it margin left of one.

12743
08:44:17,520 --> 08:44:20,398
And in theory this should be it. So do

12744
08:44:20,398 --> 08:44:23,360
you want to test it out? I think so. So

12745
08:44:23,360 --> 08:44:25,920
we can go back. We can do a hard refresh

12746
08:44:25,920 --> 08:44:28,398
and I honestly hope for the best. So

12747
08:44:28,398 --> 08:44:30,878
this will be subscribe now. I can

12748
08:44:30,878 --> 08:44:32,558
generate this lock for the small

12749
08:44:32,558 --> 08:44:35,280
description. Hey, how are you doing

12750
08:44:35,280 --> 08:44:39,520
today? For the description, hey, how are

12751
08:44:39,520 --> 08:44:42,478
you? Then for the thumbnail URL, I will

12752
08:44:42,478 --> 08:44:45,680
select this file. For the category, how

12753
08:44:45,680 --> 08:44:48,160
about music? Level intermediate,

12754
08:44:48,160 --> 08:44:52,638
duration 50 hours, price $500. and for

12755
08:44:52,638 --> 08:44:55,440
the status publish.

12756
08:44:55,440 --> 08:44:57,520
Okay, I hope for the best I will click

12757
08:44:57,520 --> 08:44:59,040
on create course. We have a pending

12758
08:44:59,040 --> 08:45:02,638
state and failed to create course. No,

12759
08:45:02,638 --> 08:45:05,040
no, no, no. So, let's analyze our

12760
08:45:05,040 --> 08:45:07,280
actions file because as you see the

12761
08:45:07,280 --> 08:45:09,440
message was failed to create course.

12762
08:45:09,440 --> 08:45:11,200
This means this error message was

12763
08:45:11,200 --> 08:45:13,680
rendered which means our catch statement

12764
08:45:13,680 --> 08:45:17,280
was um triggered. So if we analyze the

12765
08:45:17,280 --> 08:45:19,280
code the validation can't be the problem

12766
08:45:19,280 --> 08:45:21,280
because if the validation would fail

12767
08:45:21,280 --> 08:45:23,360
then we would render this error message.

12768
08:45:23,360 --> 08:45:25,680
This means there's some sort of data uh

12769
08:45:25,680 --> 08:45:28,958
database error and yes I passed the fake

12770
08:45:28,958 --> 08:45:31,360
user ID. So we can also console log the

12771
08:45:31,360 --> 08:45:33,600
error in the catch statement as a param

12772
08:45:33,600 --> 08:45:35,440
I can get the error and then I can just

12773
08:45:35,440 --> 08:45:37,920
console log it down below. So error this

12774
08:45:37,920 --> 08:45:39,680
means if I go back and click on create

12775
08:45:39,680 --> 08:45:41,440
course we get the pending state we get

12776
08:45:41,440 --> 08:45:43,920
the toast and if I open my terminal you

12777
08:45:43,920 --> 08:45:46,160
will see invalid Prisma course.create

12778
08:45:46,160 --> 08:45:48,080
create an invocation foreign key

12779
08:45:48,080 --> 08:45:50,878
constraint uh constraint violated on the

12780
08:45:50,878 --> 08:45:54,080
constraint course user ID foreign key so

12781
08:45:54,080 --> 08:45:57,120
we are missing a valid user ID so we can

12782
08:45:57,120 --> 08:45:58,638
first of all delete or I can delete the

12783
08:45:58,638 --> 08:46:00,398
console log I can delete the error it's

12784
08:46:00,398 --> 08:46:02,798
not needed anymore and I want to get my

12785
08:46:02,798 --> 08:46:05,680
real user ID so above this constant

12786
08:46:05,680 --> 08:46:07,600
validation I will create a constant

12787
08:46:07,600 --> 08:46:10,318
session this will be equal to a weight

12788
08:46:10,318 --> 08:46:13,040
of off is imported from the lip folder

12789
08:46:13,040 --> 08:46:16,558
dot API get session we can invoke it the

12790
08:46:16,558 --> 08:46:18,718
structured and we want to pass headers

12791
08:46:18,718 --> 08:46:20,958
and headers will be equal to await

12792
08:46:20,958 --> 08:46:23,360
headers and then we can just invoke it.

12793
08:46:23,360 --> 08:46:25,360
So we get our session which means I can

12794
08:46:25,360 --> 08:46:27,760
copy the session itself. Then for the

12795
08:46:27,760 --> 08:46:30,478
user ID this will be equal to session do

12796
08:46:30,478 --> 08:46:33,440
user do ID and also you see we get an

12797
08:46:33,440 --> 08:46:35,200
error. What's the problem? Well it says

12798
08:46:35,200 --> 08:46:37,520
type string or undefined is not

12799
08:46:37,520 --> 08:46:39,600
assignable to type string because this

12800
08:46:39,600 --> 08:46:41,520
currently could be undefined but the

12801
08:46:41,520 --> 08:46:44,318
user ID has to be defined. I know this

12802
08:46:44,318 --> 08:46:46,638
is a big problem for now. I will mark it

12803
08:46:46,638 --> 08:46:48,638
as string. But we will make a lot of

12804
08:46:48,638 --> 08:46:51,120
changes. So that's fine for now. This

12805
08:46:51,120 --> 08:46:53,120
means if I again go back and click on

12806
08:46:53,120 --> 08:46:55,840
create course d course created

12807
08:46:55,840 --> 08:46:58,958
successfully and we got redirected. So

12808
08:46:58,958 --> 08:47:01,200
how about we check out our database? So

12809
08:47:01,200 --> 08:47:03,600
I will head over to the neon console.

12810
08:47:03,600 --> 08:47:06,558
And if I go to my tables I should see a

12811
08:47:06,558 --> 08:47:09,040
new course. So course and yes one new

12812
08:47:09,040 --> 08:47:11,360
course. So we have an ID, we have a

12813
08:47:11,360 --> 08:47:14,080
title, description, we get the file key.

12814
08:47:14,080 --> 08:47:15,680
Then what else do we have? We have the

12815
08:47:15,680 --> 08:47:18,080
price, we have the duration, the level,

12816
08:47:18,080 --> 08:47:20,718
category, small description, slug,

12817
08:47:20,718 --> 08:47:23,840
status, created at, and then updated at,

12818
08:47:23,840 --> 08:47:26,000
and of course the user ID. So this

12819
08:47:26,000 --> 08:47:28,478
worked exactly as expected, which is

12820
08:47:28,478 --> 08:47:30,558
super nice. But I don't display my

12821
08:47:30,558 --> 08:47:32,638
courses here. Don't worry, this is not a

12822
08:47:32,638 --> 08:47:35,520
huge problem. For now, I want to fix a

12823
08:47:35,520 --> 08:47:37,840
few small things. So let's start with

12824
08:47:37,840 --> 08:47:39,760
the first problem or the first thing

12825
08:47:39,760 --> 08:47:42,478
which I have to or want to change. So we

12826
08:47:42,478 --> 08:47:44,878
have two route handlers to upload a file

12827
08:47:44,878 --> 08:47:47,120
and then also to delete a file. The

12828
08:47:47,120 --> 08:47:48,798
thing is these are public route

12829
08:47:48,798 --> 08:47:51,760
handlers, public API routes. Anybody can

12830
08:47:51,760 --> 08:47:53,600
hit this route handler for example the

12831
08:47:53,600 --> 08:47:56,478
deletion route. This somebody could pass

12832
08:47:56,478 --> 08:47:59,040
some fake ID, some fake key and then

12833
08:47:59,040 --> 08:48:01,360
just hit this route handler. The same

12834
08:48:01,360 --> 08:48:03,360
thing is also true for the upload route

12835
08:48:03,360 --> 08:48:06,000
handler. Any user can hit this post

12836
08:48:06,000 --> 08:48:08,958
request just add uh these properties a

12837
08:48:08,958 --> 08:48:10,798
file name content type size and then

12838
08:48:10,798 --> 08:48:13,040
this is image property and can then just

12839
08:48:13,040 --> 08:48:15,280
literally upload a file. This means we

12840
08:48:15,280 --> 08:48:17,920
if we take my friend he's not a friend

12841
08:48:17,920 --> 08:48:20,080
but let's say next to me I have somebody

12842
08:48:20,080 --> 08:48:22,318
he is called John and John is a very

12843
08:48:22,318 --> 08:48:24,718
malicious user he wants to attack your

12844
08:48:24,718 --> 08:48:26,638
application and he sees that you have

12845
08:48:26,638 --> 08:48:28,558
this beautiful route handler which is

12846
08:48:28,558 --> 08:48:31,440
not protected. So he will say hm how

12847
08:48:31,440 --> 08:48:34,558
about I create a bot army a bot farm and

12848
08:48:34,558 --> 08:48:37,280
this bot uh farm will attack this

12849
08:48:37,280 --> 08:48:39,840
application thousands of upload requests

12850
08:48:39,840 --> 08:48:42,160
but because again I don't validate

12851
08:48:42,160 --> 08:48:44,318
anything I mean I validate that I get

12852
08:48:44,318 --> 08:48:46,318
these properties but there's no bot

12853
08:48:46,318 --> 08:48:48,558
protection and there's no rate limiting

12854
08:48:48,558 --> 08:48:51,040
that's not great so we will implement

12855
08:48:51,040 --> 08:48:53,520
arc chat again let's get started first

12856
08:48:53,520 --> 08:48:55,600
of all with the upload route and we want

12857
08:48:55,600 --> 08:48:58,000
to first of all set up arc chat this

12858
08:48:58,000 --> 08:49:00,080
means we want to define the rules the

12859
08:49:00,080 --> 08:49:02,080
properties. This means we can create a

12860
08:49:02,080 --> 08:49:04,558
constant. This will be called AJ. And

12861
08:49:04,558 --> 08:49:06,478
you have to do that or you should do it

12862
08:49:06,478 --> 08:49:08,958
above the export async function. And

12863
08:49:08,958 --> 08:49:10,958
then this will be equal to arcjet.

12864
08:49:10,958 --> 08:49:13,280
Please make sure that you import arcjet

12865
08:49:13,280 --> 08:49:15,360
from the lip folder. And then we want to

12866
08:49:15,360 --> 08:49:17,840
use the with rule method because again

12867
08:49:17,840 --> 08:49:20,878
we already have an arcjet base instance.

12868
08:49:20,878 --> 08:49:23,280
This caches everything. And using this

12869
08:49:23,280 --> 08:49:26,558
with rule method I can add um more rules

12870
08:49:26,558 --> 08:49:28,798
because we have one base rule. This is

12871
08:49:28,798 --> 08:49:31,520
shield. Wherever we use arcjet, shield

12872
08:49:31,520 --> 08:49:34,080
will also run. But in addition to shield

12873
08:49:34,080 --> 08:49:36,478
inside of here, I want to use the bot

12874
08:49:36,478 --> 08:49:39,040
rule and then also um weight limiting.

12875
08:49:39,040 --> 08:49:40,958
And then I want to use the fixed window

12876
08:49:40,958 --> 08:49:42,798
algorithm. So let's first of all get

12877
08:49:42,798 --> 08:49:45,360
started with the detect bot rule. So I

12878
08:49:45,360 --> 08:49:46,958
want to invoke it. Then I want to get

12879
08:49:46,958 --> 08:49:49,120
detect the bot and detect bot is

12880
08:49:49,120 --> 08:49:51,280
imported from the lip folder. We want to

12881
08:49:51,280 --> 08:49:53,280
invoke it the structured and there are

12882
08:49:53,280 --> 08:49:55,360
two properties which we have to pass.

12883
08:49:55,360 --> 08:49:57,360
This is first of all the mode and this

12884
08:49:57,360 --> 08:50:00,000
could either be dry one or live. Again

12885
08:50:00,000 --> 08:50:02,398
dry one will console lock everything.

12886
08:50:02,398 --> 08:50:05,360
Live will block the request if needed.

12887
08:50:05,360 --> 08:50:07,760
And then we can also get the allow array

12888
08:50:07,760 --> 08:50:10,000
or the allow property which is an array.

12889
08:50:10,000 --> 08:50:12,558
And here we can say for example the open

12890
08:50:12,558 --> 08:50:15,360
AI bot is allowed to interact with our

12891
08:50:15,360 --> 08:50:17,280
website. But in this case I don't want

12892
08:50:17,280 --> 08:50:20,160
to allow any bot to interact with my uh

12893
08:50:20,160 --> 08:50:22,080
route handler. That's why this will be

12894
08:50:22,080 --> 08:50:24,160
an empty array. Then I want to use

12895
08:50:24,160 --> 08:50:26,398
another rule and this will be a weight

12896
08:50:26,398 --> 08:50:28,080
limiting and I want to use the fixed

12897
08:50:28,080 --> 08:50:30,160
window algorithm. This means we can

12898
08:50:30,160 --> 08:50:33,040
again chain with rule we want to invoke

12899
08:50:33,040 --> 08:50:35,360
it and inside of here I will get fixed

12900
08:50:35,360 --> 08:50:37,840
window. Again fixed window is imported

12901
08:50:37,840 --> 08:50:39,840
from the lip folder. We want to invoke

12902
08:50:39,840 --> 08:50:42,398
it and the structure. So this fixed

12903
08:50:42,398 --> 08:50:44,878
window needs three properties. First of

12904
08:50:44,878 --> 08:50:47,200
all the mode again this will be live.

12905
08:50:47,200 --> 08:50:49,600
Then we have to pass the window and also

12906
08:50:49,600 --> 08:50:52,558
the maximum amount of requests. So I

12907
08:50:52,558 --> 08:50:55,440
want to say a user is allowed to upload

12908
08:50:55,440 --> 08:50:58,398
five files in a 1 minute window. This

12909
08:50:58,398 --> 08:51:01,520
means we will just say 1 minute and then

12910
08:51:01,520 --> 08:51:04,878
max will be five. So five requests in a

12911
08:51:04,878 --> 08:51:07,040
1 minute window. If you want to you can

12912
08:51:07,040 --> 08:51:10,240
make it bigger, smaller, you decide. I

12913
08:51:10,240 --> 08:51:11,840
think this is good. I think this is a

12914
08:51:11,840 --> 08:51:14,240
good limit but again you can change it.

12915
08:51:14,240 --> 08:51:16,798
And also we can quickly go to the arcad

12916
08:51:16,798 --> 08:51:19,520
documentation and look at the detect bot

12917
08:51:19,520 --> 08:51:22,478
or bot protection itself. So, Arcjet bot

12918
08:51:22,478 --> 08:51:24,798
detection allows you to manage traffic

12919
08:51:24,798 --> 08:51:27,520
by automated clients and bots. This

12920
08:51:27,520 --> 08:51:29,520
means if my friend John, who is again

12921
08:51:29,520 --> 08:51:31,840
not my friend, attacks your website with

12922
08:51:31,840 --> 08:51:34,080
bots, we will see that or Arcjet will

12923
08:51:34,080 --> 08:51:36,478
get a request. Arcjet will analyze the

12924
08:51:36,478 --> 08:51:39,200
request and it will see hm this kind of

12925
08:51:39,200 --> 08:51:41,360
looks weird. This is probably a bot. I

12926
08:51:41,360 --> 08:51:43,360
think I will just deny the request. So,

12927
08:51:43,360 --> 08:51:45,520
Arcjet will deny it. But currently, we

12928
08:51:45,520 --> 08:51:47,920
just set up Arcjet the rules. We want to

12929
08:51:47,920 --> 08:51:50,878
also now pass the request to Arkhat.

12930
08:51:50,878 --> 08:51:53,120
This means we can go into our post

12931
08:51:53,120 --> 08:51:55,440
request and we want to go underneath the

12932
08:51:55,440 --> 08:51:58,000
try or into the try statement and above

12933
08:51:58,000 --> 08:52:00,398
this constant body. Arcjet should first

12934
08:52:00,398 --> 08:52:02,638
of all validate the request and only

12935
08:52:02,638 --> 08:52:04,558
after that we will do the rest. This

12936
08:52:04,558 --> 08:52:06,160
means delete or in other words upload

12937
08:52:06,160 --> 08:52:08,478
the file. So this will be a constant

12938
08:52:08,478 --> 08:52:10,798
decision and this will be equal to a

12939
08:52:10,798 --> 08:52:13,120
rate h.protect.

12940
08:52:13,120 --> 08:52:15,360
We want to use the protect method and as

12941
08:52:15,360 --> 08:52:17,440
an argument we have to pass the request

12942
08:52:17,440 --> 08:52:20,000
itself. Since we use a route handler, we

12943
08:52:20,000 --> 08:52:22,318
get the request uh right through our

12944
08:52:22,318 --> 08:52:24,558
params. And as you see, we get an error

12945
08:52:24,558 --> 08:52:27,280
and it says expected two arguments but

12946
08:52:27,280 --> 08:52:29,440
got one. What is missing? Well, we are

12947
08:52:29,440 --> 08:52:31,280
missing the fingerprint because in the

12948
08:52:31,280 --> 08:52:33,920
arcjet configuration file, we added

12949
08:52:33,920 --> 08:52:36,478
custom characteristics. And right here,

12950
08:52:36,478 --> 08:52:38,798
we want to now pass some sort of unique

12951
08:52:38,798 --> 08:52:41,520
value which we will use to um not

12952
08:52:41,520 --> 08:52:44,318
verify, but you could say track the requ

12953
08:52:44,318 --> 08:52:47,040
identify and track the request. So we

12954
08:52:47,040 --> 08:52:49,120
can either use for example the user's

12955
08:52:49,120 --> 08:52:51,040
IP. But again this is not very

12956
08:52:51,040 --> 08:52:54,240
recommended or we can use the users uh

12957
08:52:54,240 --> 08:52:57,120
ID so the session ID. This means what I

12958
08:52:57,120 --> 08:52:59,440
will do is go above this try statement.

12959
08:52:59,440 --> 08:53:01,440
I will create a constant session and

12960
08:53:01,440 --> 08:53:04,318
this will be equal to a rate of off is

12961
08:53:04,318 --> 08:53:07,680
imported from the lip folder API.get

12962
08:53:07,680 --> 08:53:09,920
session. we can invoke it the structured

12963
08:53:09,920 --> 08:53:12,160
and we have to pass headers and headers

12964
08:53:12,160 --> 08:53:14,240
will be equal to await headers and

12965
08:53:14,240 --> 08:53:17,600
headers is imported from next/ headers.

12966
08:53:17,600 --> 08:53:19,680
This means here uh for aj.protect

12967
08:53:19,680 --> 08:53:22,718
protect I can add a comma open an object

12968
08:53:22,718 --> 08:53:24,798
pass the fingerprint property and this

12969
08:53:24,798 --> 08:53:28,000
will be equal to session do user do ID

12970
08:53:28,000 --> 08:53:29,840
this means and we can also mark this as

12971
08:53:29,840 --> 08:53:32,080
string don't worry we will fix all of

12972
08:53:32,080 --> 08:53:34,000
this I will rewrite the code later on

12973
08:53:34,000 --> 08:53:36,718
but for now this is fine enough so arjet

12974
08:53:36,718 --> 08:53:39,600
will now verify or it will identify the

12975
08:53:39,600 --> 08:53:41,840
request using the user's ID and this is

12976
08:53:41,840 --> 08:53:44,398
also nice because this isn't related to

12977
08:53:44,398 --> 08:53:47,600
some specific IP means if the user for

12978
08:53:47,600 --> 08:53:50,080
example creates an attack from home, he

12979
08:53:50,080 --> 08:53:52,558
will have one IP. If the user then also

12980
08:53:52,558 --> 08:53:54,958
creates an attack from uh for example

12981
08:53:54,958 --> 08:53:57,200
some sort of cafe which has a different

12982
08:53:57,200 --> 08:53:59,440
IP, then this would of course have

12983
08:53:59,440 --> 08:54:01,440
different IPs. This means if we use the

12984
08:54:01,440 --> 08:54:03,360
user ID, we don't really care where the

12985
08:54:03,360 --> 08:54:05,440
user is. We don't care about the IP

12986
08:54:05,440 --> 08:54:07,840
because we identify the user using this

12987
08:54:07,840 --> 08:54:10,000
unique identifier and this is a huge

12988
08:54:10,000 --> 08:54:12,080
benefit. And you know what we can also

12989
08:54:12,080 --> 08:54:14,160
test it out or before we test it out, we

12990
08:54:14,160 --> 08:54:16,318
have to of course check if the decision

12991
08:54:16,318 --> 08:54:18,878
was denied or allowed. This means we can

12992
08:54:18,878 --> 08:54:20,798
go underneath the decision create an if

12993
08:54:20,798 --> 08:54:22,558
statement and I want to say if the

12994
08:54:22,558 --> 08:54:26,240
decision not this but if the decision is

12995
08:54:26,240 --> 08:54:28,558
denied we want to invoke it then we can

12996
08:54:28,558 --> 08:54:30,958
return just a new response. This means

12997
08:54:30,958 --> 08:54:34,398
return next response.json JSON. Uh, for

12998
08:54:34,398 --> 08:54:37,200
the error, this will just be Hm. What do

12999
08:54:37,200 --> 08:54:40,000
we want to say, dude? Not good. Of

13000
08:54:40,000 --> 08:54:41,280
course, you want to add something

13001
08:54:41,280 --> 08:54:43,440
better, but this is fine enough. And

13002
08:54:43,440 --> 08:54:45,200
then for the status, so I can add a

13003
08:54:45,200 --> 08:54:47,360
comma, open an object, and the status

13004
08:54:47,360 --> 08:54:50,878
will be 4 to 9. So, we will protect our

13005
08:54:50,878 --> 08:54:53,120
route handler. And a user in this case

13006
08:54:53,120 --> 08:54:55,680
will only be allowed to upload five

13007
08:54:55,680 --> 08:54:58,478
files in a 1 minute window. I want to

13008
08:54:58,478 --> 08:55:00,558
also do the same thing for the deletion

13009
08:55:00,558 --> 08:55:02,638
route. So we can go into the delete

13010
08:55:02,638 --> 08:55:05,200
route and I will just copy this constant

13011
08:55:05,200 --> 08:55:07,600
AJ paste it in the deletion route above

13012
08:55:07,600 --> 08:55:10,160
the export async function and then we

13013
08:55:10,160 --> 08:55:12,160
want to import arcjet from the lip

13014
08:55:12,160 --> 08:55:14,718
folder. Detect bot this will be imported

13015
08:55:14,718 --> 08:55:17,200
from the lip folder and fixed window

13016
08:55:17,200 --> 08:55:19,760
will be imported from the lip folder. As

13017
08:55:19,760 --> 08:55:21,760
you all know we want to await the

13018
08:55:21,760 --> 08:55:23,520
decision or in other words we want to

13019
08:55:23,520 --> 08:55:26,558
pass the request to arjet. This means we

13020
08:55:26,558 --> 08:55:29,040
can just copy this constant decision,

13021
08:55:29,040 --> 08:55:31,680
paste it into our try statement. We want

13022
08:55:31,680 --> 08:55:34,000
to get the user session. So I can copy

13023
08:55:34,000 --> 08:55:36,000
this constant session, paste it above

13024
08:55:36,000 --> 08:55:38,240
the try statement. Then we want to get

13025
08:55:38,240 --> 08:55:40,398
off or we want to import it from the lip

13026
08:55:40,398 --> 08:55:42,160
folder. And we want to import the

13027
08:55:42,160 --> 08:55:44,958
headers from next/ headers. We want to

13028
08:55:44,958 --> 08:55:46,558
then create an if statement for the

13029
08:55:46,558 --> 08:55:48,558
decision. So I will copy this if

13030
08:55:48,558 --> 08:55:50,478
statement and then just paste it down

13031
08:55:50,478 --> 08:55:52,878
below. This means our create or our

13032
08:55:52,878 --> 08:55:55,440
upload route is protected. and then also

13033
08:55:55,440 --> 08:55:57,760
our deletion route. Both are protected

13034
08:55:57,760 --> 08:55:59,760
and that's super nice. So, what do you

13035
08:55:59,760 --> 08:56:01,360
think? Should we test it out? I think

13036
08:56:01,360 --> 08:56:03,360
so. So, you know what? I will implement

13037
08:56:03,360 --> 08:56:05,520
a very small weight limit. This means

13038
08:56:05,520 --> 08:56:07,760
for the upload route, I will say in a

13039
08:56:07,760 --> 08:56:10,318
window, so in a 1 minute window, a user

13040
08:56:10,318 --> 08:56:13,120
is only allowed to upload two files. I

13041
08:56:13,120 --> 08:56:14,958
will later on update this again. So, if

13042
08:56:14,958 --> 08:56:17,840
I select a file, um I can just get this

13043
08:56:17,840 --> 08:56:19,760
one. If I click on enter, this will

13044
08:56:19,760 --> 08:56:22,000
upload everything. As you see, uploaded

13045
08:56:22,000 --> 08:56:24,478
successfully. I can delete it. This

13046
08:56:24,478 --> 08:56:26,958
should work. Yes. And then if I select

13047
08:56:26,958 --> 08:56:31,080
the file one more time.

13048
08:56:34,558 --> 08:56:36,798
And if I select one more file, you see

13049
08:56:36,798 --> 08:56:40,240
upload failed. Retry file selection. And

13050
08:56:40,240 --> 08:56:42,478
this is because arc chat blocked the

13051
08:56:42,478 --> 08:56:45,360
request. So if I open the terminal API

13052
08:56:45,360 --> 08:56:49,680
S3 upload 429 and 429 was the error

13053
08:56:49,680 --> 08:56:52,398
which we returned with um AR. So for

13054
08:56:52,398 --> 08:56:55,280
arcjet as you see dude not good status

13055
08:56:55,280 --> 08:56:58,398
429. We can also open the arcad

13056
08:56:58,398 --> 08:57:00,160
dashboard and here you will see

13057
08:57:00,160 --> 08:57:02,240
something interesting. The request was

13058
08:57:02,240 --> 08:57:04,958
denied. The reason weight limit of

13059
08:57:04,958 --> 08:57:07,120
course we can also open the request and

13060
08:57:07,120 --> 08:57:09,120
inside of here again the conclusion was

13061
08:57:09,120 --> 08:57:11,760
denied. The reason was weight limit. Why

13062
08:57:11,760 --> 08:57:13,440
is the reason weight limit? Because the

13063
08:57:13,440 --> 08:57:16,398
maximum amount of requests was two, but

13064
08:57:16,398 --> 08:57:19,040
I used two requests. And this weight

13065
08:57:19,040 --> 08:57:21,760
limit will only reset in 45 seconds

13066
08:57:21,760 --> 08:57:24,240
again. And in the configuration tab, you

13067
08:57:24,240 --> 08:57:26,558
can also see what rules we configured.

13068
08:57:26,558 --> 08:57:28,478
We configured the shield rule. This is

13069
08:57:28,478 --> 08:57:31,280
the base configuration or we implemented

13070
08:57:31,280 --> 08:57:33,520
the rule in our base configuration. We

13071
08:57:33,520 --> 08:57:35,840
implemented weight limit and also bot

13072
08:57:35,840 --> 08:57:37,760
detection. And in this case, weight

13073
08:57:37,760 --> 08:57:39,760
limit was triggered. So I want to again

13074
08:57:39,760 --> 08:57:41,680
go back. Of course, I want to update the

13075
08:57:41,680 --> 08:57:44,478
maximum window. Two is not enough. Five

13076
08:57:44,478 --> 08:57:46,398
is a bit better. If you want to, you can

13077
08:57:46,398 --> 08:57:48,398
make it bigger because five is also not

13078
08:57:48,398 --> 08:57:50,478
that big. But I think this is fine

13079
08:57:50,478 --> 08:57:52,318
enough. So, this means our two route

13080
08:57:52,318 --> 08:57:55,360
handlers are uh completely secured. This

13081
08:57:55,360 --> 08:57:57,280
means no bots can attack this route

13082
08:57:57,280 --> 08:57:59,680
handler. No malicious users can attack

13083
08:57:59,680 --> 08:58:01,440
this route handler or these route

13084
08:58:01,440 --> 08:58:03,920
handlers. Everything is great. So, we

13085
08:58:03,920 --> 08:58:05,600
can close this. We are finished with all

13086
08:58:05,600 --> 08:58:07,840
of this. But there's one problem. You

13087
08:58:07,840 --> 08:58:10,878
see currently any user um can upload

13088
08:58:10,878 --> 08:58:13,840
files but I want to only allow verified

13089
08:58:13,840 --> 08:58:16,240
or not verified but authenticated users

13090
08:58:16,240 --> 08:58:18,958
to upload files and also I want to only

13091
08:58:18,958 --> 08:58:21,680
allow authenticated users to create

13092
08:58:21,680 --> 08:58:24,080
courses. Right now anybody can access

13093
08:58:24,080 --> 08:58:26,638
this admin dashboard and anybody can

13094
08:58:26,638 --> 08:58:28,958
interact with this website or with this

13095
08:58:28,958 --> 08:58:31,360
admin dashboard. I don't want that. I

13096
08:58:31,360 --> 08:58:34,080
want to only allow admins to view this

13097
08:58:34,080 --> 08:58:36,398
dashboard and interact with this

13098
08:58:36,398 --> 08:58:38,878
dashboard. This means what we can do is

13099
08:58:38,878 --> 08:58:41,440
we can head over back to the better of

13100
08:58:41,440 --> 08:58:43,520
documentation website. Then you can

13101
08:58:43,520 --> 08:58:45,680
click on documentation. You want to then

13102
08:58:45,680 --> 08:58:47,280
click on integrations or not

13103
08:58:47,280 --> 08:58:49,600
integrations but plugins and here you

13104
08:58:49,600 --> 08:58:51,920
will find a very interesting plug-in

13105
08:58:51,920 --> 08:58:54,240
called admin. So the admin plug-in

13106
08:58:54,240 --> 08:58:56,318
provides a set of administrative

13107
08:58:56,318 --> 08:58:58,638
functions for user management in your

13108
08:58:58,638 --> 08:59:01,200
application. It allows administrators to

13109
08:59:01,200 --> 08:59:03,920
perform various operations such as

13110
08:59:03,920 --> 08:59:06,240
creating users, managing user roles,

13111
08:59:06,240 --> 08:59:08,798
banning, unbanning users, impersonating

13112
08:59:08,798 --> 08:59:11,680
users, and more. So, we want to use this

13113
08:59:11,680 --> 08:59:13,840
um plug-in because we will then have two

13114
08:59:13,840 --> 08:59:16,558
roles, either a standard user role or an

13115
08:59:16,558 --> 08:59:18,878
admin role. An admin will be able to

13116
08:59:18,878 --> 08:59:21,120
interact with this dashboard. A standard

13117
08:59:21,120 --> 08:59:23,840
user won't be able to interact with this

13118
08:59:23,840 --> 08:59:26,160
dashboard. So the first step is to first

13119
08:59:26,160 --> 08:59:28,398
of all use this admin plugin or in other

13120
08:59:28,398 --> 08:59:30,558
words to configure it in the off config

13121
08:59:30,558 --> 08:59:32,718
file. This means we can copy the import

13122
08:59:32,718 --> 08:59:35,280
statement go into the off.ts file and

13123
08:59:35,280 --> 08:59:37,840
paste it on top. So import admin from

13124
08:59:37,840 --> 08:59:40,160
better off plugins. Then we want to add

13125
08:59:40,160 --> 08:59:42,558
it into the plugins array. So underneath

13126
08:59:42,558 --> 08:59:45,840
email OTP I will just add admin and I

13127
08:59:45,840 --> 08:59:47,600
want to invoke it. So this is step

13128
08:59:47,600 --> 08:59:50,000
number one. And step number two is to

13129
08:59:50,000 --> 08:59:52,478
migrate our database or in other words

13130
08:59:52,478 --> 08:59:54,718
generate a new database schema because

13131
08:59:54,718 --> 08:59:57,120
we want to add a few more fields. This

13132
08:59:57,120 --> 08:59:59,360
means I will copy this generate command.

13133
08:59:59,360 --> 09:00:01,920
I can go back and then in my terminal I

13134
09:00:01,920 --> 09:00:05,440
will run pnpm dlx better off cli

13135
09:00:05,440 --> 09:00:07,600
generate. So this will generate new

13136
09:00:07,600 --> 09:00:09,680
tables. In theory it will just update

13137
09:00:09,680 --> 09:00:12,160
our database schema and add a few more

13138
09:00:12,160 --> 09:00:14,558
properties. But as you see I got an

13139
09:00:14,558 --> 09:00:16,718
error. What's the problem? Hm. cannot

13140
09:00:16,718 --> 09:00:19,120
read your offconfig file. Error cannot

13141
09:00:19,120 --> 09:00:21,680
find module server only. Yes, this is

13142
09:00:21,680 --> 09:00:23,600
correct. So we don't want to import

13143
09:00:23,600 --> 09:00:26,478
server only in the off.ts file. So we

13144
09:00:26,478 --> 09:00:28,478
can delete it again. And if I again want

13145
09:00:28,478 --> 09:00:31,760
PNPM DLX better off CLI generate, then

13146
09:00:31,760 --> 09:00:33,760
this error should go away. But it did

13147
09:00:33,760 --> 09:00:35,680
not go away. What's now the problem?

13148
09:00:35,680 --> 09:00:37,440
Better off couldn't read your offconfig

13149
09:00:37,440 --> 09:00:39,760
file. So this could be our DB file. So

13150
09:00:39,760 --> 09:00:42,080
if I delete import server only from

13151
09:00:42,080 --> 09:00:45,200
there, will it then work? PNPM DLX.

13152
09:00:45,200 --> 09:00:47,200
Again I will paste the command and this

13153
09:00:47,200 --> 09:00:49,360
should then work. Nope. I again got an

13154
09:00:49,360 --> 09:00:51,680
error. Hm. Ah require stack. Oh

13155
09:00:51,680 --> 09:00:53,760
thankfully they even have a path. So

13156
09:00:53,760 --> 09:00:55,200
this means we want you also delete the

13157
09:00:55,200 --> 09:00:57,600
import server only from the recent file.

13158
09:00:57,600 --> 09:00:59,520
So we can open the recent configuration

13159
09:00:59,520 --> 09:01:01,920
file. Delete this import server only.

13160
09:01:01,920 --> 09:01:04,958
And then again if I run pnpmdlx better

13161
09:01:04,958 --> 09:01:08,240
off cli generate it should work. Oh my

13162
09:01:08,240 --> 09:01:10,958
god. Thank you. So the file

13163
09:01:10,958 --> 09:01:13,520
schema.prisma already exists. Yes it

13164
09:01:13,520 --> 09:01:15,600
exists. Do you want to overwrite the

13165
09:01:15,600 --> 09:01:18,558
schema to the file? Yes. And if I again

13166
09:01:18,558 --> 09:01:20,798
open the schema, we will have a new

13167
09:01:20,798 --> 09:01:23,360
property or I think multiple properties.

13168
09:01:23,360 --> 09:01:25,600
So in the user model, we have a new

13169
09:01:25,600 --> 09:01:28,398
role, a banned property ban reason and

13170
09:01:28,398 --> 09:01:31,280
ban expires. So the role as a default

13171
09:01:31,280 --> 09:01:33,520
will be user. Every user will have the

13172
09:01:33,520 --> 09:01:35,680
role user. But we can update the role

13173
09:01:35,680 --> 09:01:38,160
and set an admin role. So what we can do

13174
09:01:38,160 --> 09:01:40,160
is first of all again push this new

13175
09:01:40,160 --> 09:01:42,878
schema to our database to neon. This

13176
09:01:42,878 --> 09:01:46,638
means pnpm dx prisma db push. This will

13177
09:01:46,638 --> 09:01:49,440
sync our local database schema with our

13178
09:01:49,440 --> 09:01:52,398
remote real database schema. So as you

13179
09:01:52,398 --> 09:01:54,478
see your database is now in sync. By the

13180
09:01:54,478 --> 09:01:56,318
way, don't worry about this error. Then

13181
09:01:56,318 --> 09:01:58,558
we want you again open our Prisma

13182
09:01:58,558 --> 09:02:01,520
studio. This means pnpm dx Prisma

13183
09:02:01,520 --> 09:02:04,000
studio. And this is like a local

13184
09:02:04,000 --> 09:02:06,160
representation of your database provided

13185
09:02:06,160 --> 09:02:08,798
by Prisma. So as you see um if I zoom in

13186
09:02:08,798 --> 09:02:11,360
a bit we get all of our models account

13187
09:02:11,360 --> 09:02:14,718
course session user uh verification and

13188
09:02:14,718 --> 09:02:16,798
if I open the user model and here you

13189
09:02:16,798 --> 09:02:18,318
will see first of all on the left side

13190
09:02:18,318 --> 09:02:20,558
we have an email but I won't showcase it

13191
09:02:20,558 --> 09:02:22,638
email verified this all looks good and

13192
09:02:22,638 --> 09:02:25,440
if we scroll to the right side we have a

13193
09:02:25,440 --> 09:02:27,520
role and this is null because we just

13194
09:02:27,520 --> 09:02:29,920
added this admin plugin but once new

13195
09:02:29,920 --> 09:02:32,398
users will be created uh these plugins

13196
09:02:32,398 --> 09:02:35,040
or these roles be will be um propagated

13197
09:02:35,040 --> 09:02:37,440
with user so what we can do is just

13198
09:02:37,440 --> 09:02:39,520
delete both users. I will delete the two

13199
09:02:39,520 --> 09:02:41,680
records. Then the course has also been

13200
09:02:41,680 --> 09:02:44,160
automatically deleted. This means if I

13201
09:02:44,160 --> 09:02:46,638
again close this and again go back. We

13202
09:02:46,638 --> 09:02:49,440
can restart the def server with PNPMe

13203
09:02:49,440 --> 09:02:51,360
defaf. Then we can head over back to

13204
09:02:51,360 --> 09:02:54,878
localhost 3000. As you see everything

13205
09:02:54,878 --> 09:02:57,200
works and on the top right corner it

13206
09:02:57,200 --> 09:02:59,520
showcases a login and get started

13207
09:02:59,520 --> 09:03:01,520
button. That's because we don't have a

13208
09:03:01,520 --> 09:03:03,760
valid session. We don't have any users.

13209
09:03:03,760 --> 09:03:06,080
We had a valid session a few moments

13210
09:03:06,080 --> 09:03:08,318
ago. But because I deleted all users,

13211
09:03:08,318 --> 09:03:10,080
there's no user anymore, which also

13212
09:03:10,080 --> 09:03:12,478
means there's no valid session anymore.

13213
09:03:12,478 --> 09:03:15,040
So I will click on log in. Then I will

13214
09:03:15,040 --> 09:03:17,440
continue with GitHub. As you see, signed

13215
09:03:17,440 --> 09:03:19,760
in with GitHub. You will be redirected.

13216
09:03:19,760 --> 09:03:21,920
I got redirected. I see my beautiful

13217
09:03:21,920 --> 09:03:23,840
image here. And then I can again head

13218
09:03:23,840 --> 09:03:26,318
over back to the admin dashboard. This

13219
09:03:26,318 --> 09:03:28,478
should still open. Yes, it works. That's

13220
09:03:28,478 --> 09:03:30,638
great. And then we want to again open

13221
09:03:30,638 --> 09:03:32,958
our Prisma Studio. So I will just create

13222
09:03:32,958 --> 09:03:35,040
a new terminal tab and then inside of

13223
09:03:35,040 --> 09:03:38,638
here I will run pnpmd dlx prisma studio

13224
09:03:38,638 --> 09:03:40,798
and as you see the user role as a

13225
09:03:40,798 --> 09:03:43,280
default is user and that's exactly what

13226
09:03:43,280 --> 09:03:45,840
we wanted. So we can again close this.

13227
09:03:45,840 --> 09:03:47,760
We don't need it anymore. Then we can

13228
09:03:47,760 --> 09:03:49,520
head over back because we're still not

13229
09:03:49,520 --> 09:03:51,760
finished with the could you say quick

13230
09:03:51,760 --> 09:03:53,360
start guide. So we are finished with

13231
09:03:53,360 --> 09:03:55,120
step number one. This means to add the

13232
09:03:55,120 --> 09:03:58,398
plugin to our off config. we migrated or

13233
09:03:58,398 --> 09:04:00,318
in other words generated our database

13234
09:04:00,318 --> 09:04:02,398
and the next step is to add the plug-in

13235
09:04:02,398 --> 09:04:05,200
to our off client itself. This means I

13236
09:04:05,200 --> 09:04:06,878
will just copy this import statement

13237
09:04:06,878 --> 09:04:09,360
again. We can open the off client. This

13238
09:04:09,360 --> 09:04:12,240
means in our lip folder we have an off

13239
09:04:12,240 --> 09:04:14,718
client and then we can add a comma after

13240
09:04:14,718 --> 09:04:17,280
this email OTB client and or and first

13241
09:04:17,280 --> 09:04:19,040
of all we have to import it of course.

13242
09:04:19,040 --> 09:04:21,600
So import admin client from better of

13243
09:04:21,600 --> 09:04:23,920
client plugins and then we can add the

13244
09:04:23,920 --> 09:04:26,478
admin client and we want to invoke it.

13245
09:04:26,478 --> 09:04:28,558
So this is finished and we set up this

13246
09:04:28,558 --> 09:04:31,120
admin plug-in. This means we can head

13247
09:04:31,120 --> 09:04:33,840
over back first of all to our two route

13248
09:04:33,840 --> 09:04:35,920
handlers. So in the app folder, we want

13249
09:04:35,920 --> 09:04:38,478
to go into the API folder into the S3

13250
09:04:38,478 --> 09:04:40,638
folder and then into the delet into the

13251
09:04:40,638 --> 09:04:43,040
deletion route handler. And inside of

13252
09:04:43,040 --> 09:04:45,920
here, I want to check if the user is an

13253
09:04:45,920 --> 09:04:48,398
admin and also has a valid session

13254
09:04:48,398 --> 09:04:50,160
because currently we just get the user

13255
09:04:50,160 --> 09:04:52,318
session, but we don't really verify if

13256
09:04:52,318 --> 09:04:55,120
the user has a valid session and also if

13257
09:04:55,120 --> 09:04:57,760
the user is an admin. Now, here's the

13258
09:04:57,760 --> 09:04:59,360
thing. We could of course just create a

13259
09:04:59,360 --> 09:05:01,040
code inside of here. It's completely

13260
09:05:01,040 --> 09:05:03,280
fine. You can do that. But since we will

13261
09:05:03,280 --> 09:05:05,760
reuse this code in multiple places, this

13262
09:05:05,760 --> 09:05:08,000
means in the deletion route, in this

13263
09:05:08,000 --> 09:05:10,318
upload route, wouldn't it make sense to

13264
09:05:10,318 --> 09:05:13,040
create a separate file and then just or

13265
09:05:13,040 --> 09:05:15,200
a separate function and store the code

13266
09:05:15,200 --> 09:05:17,760
inside of there? Yes, it will make so

13267
09:05:17,760 --> 09:05:20,000
much sense you can't even believe it.

13268
09:05:20,000 --> 09:05:22,878
So, Nex.js recommends you to use the

13269
09:05:22,878 --> 09:05:25,440
data access layer. So, we can head over

13270
09:05:25,440 --> 09:05:27,760
back to the documentation and search for

13271
09:05:27,760 --> 09:05:30,958
data access layer. So how to implement

13272
09:05:30,958 --> 09:05:33,680
authentication in X.js. And if you

13273
09:05:33,680 --> 09:05:36,718
search for the data um access layer then

13274
09:05:36,718 --> 09:05:39,200
you will see we recommend creating a

13275
09:05:39,200 --> 09:05:41,760
data access layer to centralize your

13276
09:05:41,760 --> 09:05:44,478
data requests and authorization logic.

13277
09:05:44,478 --> 09:05:47,040
The data access layer should include a

13278
09:05:47,040 --> 09:05:49,680
function that verifies the user session

13279
09:05:49,680 --> 09:05:52,080
as they interact with your application.

13280
09:05:52,080 --> 09:05:53,920
So this means what are they trying to

13281
09:05:53,920 --> 09:05:56,718
tell us? Well, Nex.js wants us to create

13282
09:05:56,718 --> 09:05:59,040
a separate file, a separate folder. This

13283
09:05:59,040 --> 09:06:00,718
does not really matter but in this case

13284
09:06:00,718 --> 09:06:02,798
just a separate file and then in this

13285
09:06:02,798 --> 09:06:05,440
separate file we want to move all of our

13286
09:06:05,440 --> 09:06:08,238
data related logic into this file into

13287
09:06:08,238 --> 09:06:10,078
the separate location. So this will then

13288
09:06:10,078 --> 09:06:13,278
be a separate data access layer because

13289
09:06:13,278 --> 09:06:15,918
all of the data axis will happen in this

13290
09:06:15,918 --> 09:06:18,398
one uh you could say section I think

13291
09:06:18,398 --> 09:06:19,918
this uh you should then understand it

13292
09:06:19,918 --> 09:06:22,320
better. So it will be a separate section

13293
09:06:22,320 --> 09:06:24,398
and in this section we will store all of

13294
09:06:24,398 --> 09:06:27,200
our data access related logic. This

13295
09:06:27,200 --> 09:06:29,438
means we will when we fetch our data we

13296
09:06:29,438 --> 09:06:31,278
will create the file in the separate

13297
09:06:31,278 --> 09:06:34,238
section and then call this function from

13298
09:06:34,238 --> 09:06:36,800
our actual component. So for example for

13299
09:06:36,800 --> 09:06:38,960
in the route handler I want to call a

13300
09:06:38,960 --> 09:06:41,040
verify user function and this will

13301
09:06:41,040 --> 09:06:43,360
verify the user and also check that the

13302
09:06:43,360 --> 09:06:46,078
user has a valid session and the benefit

13303
09:06:46,078 --> 09:06:48,878
is that we then have centralized logic

13304
09:06:48,878 --> 09:06:51,520
because our data access logic will be

13305
09:06:51,520 --> 09:06:53,758
stored in one place. it won't be stored

13306
09:06:53,758 --> 09:06:56,800
in multiple places which also means we

13307
09:06:56,800 --> 09:06:58,878
uh will centralize everything. We will

13308
09:06:58,878 --> 09:07:01,438
centralize our business logic. What we

13309
09:07:01,438 --> 09:07:03,598
can do is open our explorer. Then we

13310
09:07:03,598 --> 09:07:05,520
want to go into the app folder and to

13311
09:07:05,520 --> 09:07:07,758
create a separate data access layer. It

13312
09:07:07,758 --> 09:07:09,520
makes a lot of sense to create a new

13313
09:07:09,520 --> 09:07:12,160
folder and name it data. I do that in

13314
09:07:12,160 --> 09:07:14,398
most cases. And since this function

13315
09:07:14,398 --> 09:07:16,398
which we want to call or which we want

13316
09:07:16,398 --> 09:07:18,398
to create is directly related to the

13317
09:07:18,398 --> 09:07:21,200
user, we can also or to the admin or to

13318
09:07:21,200 --> 09:07:23,758
the user, we can create an admin folder

13319
09:07:23,758 --> 09:07:26,718
in the data folder. So app folder then

13320
09:07:26,718 --> 09:07:29,520
data and in the data folder an admin

13321
09:07:29,520 --> 09:07:32,000
folder and in the admin folder we want

13322
09:07:32,000 --> 09:07:33,840
to create a new file and this will be

13323
09:07:33,840 --> 09:07:36,960
called require- user.ts.

13324
09:07:36,960 --> 09:07:39,040
And again the code which will be or the

13325
09:07:39,040 --> 09:07:40,640
code which we will create inside of here

13326
09:07:40,640 --> 09:07:42,640
is quite simple. we will get the user

13327
09:07:42,640 --> 09:07:44,718
session. We will check if the user has a

13328
09:07:44,718 --> 09:07:47,200
valid session. If so, we will check uh

13329
09:07:47,200 --> 09:07:49,520
if the user is an admin and if this is

13330
09:07:49,520 --> 09:07:52,000
also true, then we will just return the

13331
09:07:52,000 --> 09:07:53,598
user. And this means we will then get

13332
09:07:53,598 --> 09:07:56,238
the user ID and then we can uh create or

13333
09:07:56,238 --> 09:07:58,238
we can get the decision from arc chat.

13334
09:07:58,238 --> 09:08:00,320
If the user does not have a valid user

13335
09:08:00,320 --> 09:08:02,878
session or is not an admin, then we will

13336
09:08:02,878 --> 09:08:05,040
just redirect the user. So that's what

13337
09:08:05,040 --> 09:08:07,520
we want to do. So for this require user

13338
09:08:07,520 --> 09:08:09,520
function we want to first of all create

13339
09:08:09,520 --> 09:08:12,398
an export async function. This will be

13340
09:08:12,398 --> 09:08:15,040
called require user. Then we can just

13341
09:08:15,040 --> 09:08:17,200
open this function and inside of here we

13342
09:08:17,200 --> 09:08:18,878
want to first of all get the user

13343
09:08:18,878 --> 09:08:21,680
session. This means constant session

13344
09:08:21,680 --> 09:08:24,558
equals to arate of off is imported from

13345
09:08:24,558 --> 09:08:27,598
the lip folder dot API.get

13346
09:08:27,598 --> 09:08:30,238
session. We can invoke it the structured

13347
09:08:30,238 --> 09:08:32,558
we want to pass headers and headers will

13348
09:08:32,558 --> 09:08:35,200
be equal to await headers. headers is

13349
09:08:35,200 --> 09:08:37,680
imported from next slash headers and we

13350
09:08:37,680 --> 09:08:39,360
want to invoke it because this is a

13351
09:08:39,360 --> 09:08:41,918
function. After this constant session,

13352
09:08:41,918 --> 09:08:44,558
we want to check if the user has a valid

13353
09:08:44,558 --> 09:08:47,040
session. This means if there's no

13354
09:08:47,040 --> 09:08:49,122
session, then we want to redirect the

13355
09:08:49,122 --> 09:08:51,758
user and we want to uh so let's say

13356
09:08:51,758 --> 09:08:55,040
return redirect and redirect is imported

13357
09:08:55,040 --> 09:08:57,758
from next slashnavigation and we want to

13358
09:08:57,758 --> 09:09:00,960
redirect the user to /loin because this

13359
09:09:00,960 --> 09:09:03,122
means the user is not authenticated.

13360
09:09:03,122 --> 09:09:04,878
It's that simple. By the way, I also

13361
09:09:04,878 --> 09:09:06,320
made a mistake. This shouldn't be

13362
09:09:06,320 --> 09:09:09,278
require user, but instead require admin.

13363
09:09:09,278 --> 09:09:11,758
I'm not sure why I said require user.

13364
09:09:11,758 --> 09:09:14,160
So, require admin. And then the function

13365
09:09:14,160 --> 09:09:17,278
will also be require admin because again

13366
09:09:17,278 --> 09:09:20,238
we want to require an admin. So, we now

13367
09:09:20,238 --> 09:09:22,320
check if the user has a valid session

13368
09:09:22,320 --> 09:09:24,640
and we can also check if the user has

13369
09:09:24,640 --> 09:09:26,718
the correct role. This means we create

13370
09:09:26,718 --> 09:09:28,878
we will create another if statement and

13371
09:09:28,878 --> 09:09:32,398
if the session do user.roll role is not

13372
09:09:32,398 --> 09:09:34,480
equal. This means exclamation mark and

13373
09:09:34,480 --> 09:09:36,878
then two equal signs. If this is not

13374
09:09:36,878 --> 09:09:39,122
equal to admin, then this means the user

13375
09:09:39,122 --> 09:09:41,122
is not an admin. So we want to again

13376
09:09:41,122 --> 09:09:43,680
create a return redirect and we want to

13377
09:09:43,680 --> 09:09:45,918
redirect the user to a route which will

13378
09:09:45,918 --> 09:09:48,558
be not /admin. If these two if

13379
09:09:48,558 --> 09:09:50,558
statements are not true, then I will

13380
09:09:50,558 --> 09:09:52,320
just return the session again because

13381
09:09:52,320 --> 09:09:54,640
this means the user has a valid session

13382
09:09:54,640 --> 09:09:57,840
and also the user is an admin. Also

13383
09:09:57,840 --> 09:09:59,680
since this is a function which should

13384
09:09:59,680 --> 09:10:02,000
only be called and also should only run

13385
09:10:02,000 --> 09:10:04,320
on the server side. We want to import

13386
09:10:04,320 --> 09:10:06,640
server only. So we created our function

13387
09:10:06,640 --> 09:10:09,278
require admin. We imported server only

13388
09:10:09,278 --> 09:10:11,278
which means we can also use it. We can

13389
09:10:11,278 --> 09:10:13,598
go back to our route handler and we want

13390
09:10:13,598 --> 09:10:15,278
to delete this constant session. And

13391
09:10:15,278 --> 09:10:17,438
then instead we want to use the require

13392
09:10:17,438 --> 09:10:20,000
admin function. So I want to go above

13393
09:10:20,000 --> 09:10:22,000
the try statement and then we can create

13394
09:10:22,000 --> 09:10:24,480
a constant. um this will be session and

13395
09:10:24,480 --> 09:10:27,278
this will be equal to a wait require

13396
09:10:27,278 --> 09:10:29,680
admin. We want to import this from our

13397
09:10:29,680 --> 09:10:32,398
data folder and then we can invoke it.

13398
09:10:32,398 --> 09:10:34,640
We want to do the same thing for our

13399
09:10:34,640 --> 09:10:37,360
deletion route handler. So above the try

13400
09:10:37,360 --> 09:10:39,918
statement I will again paste this await

13401
09:10:39,918 --> 09:10:42,878
require admin function or this code. I

13402
09:10:42,878 --> 09:10:44,480
mean we are not pasting a function we

13403
09:10:44,480 --> 09:10:46,640
are pasting code. So we now in both

13404
09:10:46,640 --> 09:10:48,960
routes check that we have a valid user

13405
09:10:48,960 --> 09:10:51,520
and also that the user is an admin that

13406
09:10:51,520 --> 09:10:53,758
the user has the role of admin. This

13407
09:10:53,758 --> 09:10:56,078
means if I go back and do a hard refresh

13408
09:10:56,078 --> 09:10:58,078
everything works. We currently don't

13409
09:10:58,078 --> 09:11:00,078
validate the user on the page level. We

13410
09:11:00,078 --> 09:11:01,918
will do that a bit later on but for now

13411
09:11:01,918 --> 09:11:03,758
we want to check out or test out this

13412
09:11:03,758 --> 09:11:06,078
thumbnail or image upload or file

13413
09:11:06,078 --> 09:11:08,800
upload. So if I click on select file and

13414
09:11:08,800 --> 09:11:11,438
select this file I will get an error

13415
09:11:11,438 --> 09:11:14,878
failed to get presigned URL. Hm. And if

13416
09:11:14,878 --> 09:11:16,718
we open the terminal, what do we see

13417
09:11:16,718 --> 09:11:21,598
inside of here? API S3 upload 307. So

13418
09:11:21,598 --> 09:11:23,598
what's exactly the problem? Well, it's

13419
09:11:23,598 --> 09:11:26,800
quite simple. If I open my require user

13420
09:11:26,800 --> 09:11:29,122
require admin function, we use the

13421
09:11:29,122 --> 09:11:31,520
redirect function. And the redirect

13422
09:11:31,520 --> 09:11:34,558
function um responds with a 307 as you

13423
09:11:34,558 --> 09:11:36,878
see. So again in the terminal, we get a

13424
09:11:36,878 --> 09:11:39,438
307. And the redirect function also

13425
09:11:39,438 --> 09:11:43,122
returns or responds with a 307 code. The

13426
09:11:43,122 --> 09:11:46,160
thing is since we use this function in a

13427
09:11:46,160 --> 09:11:48,238
route handler, it does not work as

13428
09:11:48,238 --> 09:11:50,398
expected. So it does not redirect the

13429
09:11:50,398 --> 09:11:52,558
user. This is fine. I don't also really

13430
09:11:52,558 --> 09:11:54,320
want to redirect the user inside of

13431
09:11:54,320 --> 09:11:56,640
here. We can just throw an error. The

13432
09:11:56,640 --> 09:11:58,238
thing is once we later on use the

13433
09:11:58,238 --> 09:12:00,718
require admin function in, for example,

13434
09:12:00,718 --> 09:12:03,598
a server action, it will work fine. But

13435
09:12:03,598 --> 09:12:05,598
in this route handler, it cannot

13436
09:12:05,598 --> 09:12:07,598
redirect the user. But this is fine. We

13437
09:12:07,598 --> 09:12:10,160
don't need it. Also one thing or you

13438
09:12:10,160 --> 09:12:12,000
might ask me, hey Jean, why did we

13439
09:12:12,000 --> 09:12:14,640
define this require admin function not

13440
09:12:14,640 --> 09:12:16,878
in the try statement? I mean I can just

13441
09:12:16,878 --> 09:12:18,878
go here and put it into the try

13442
09:12:18,878 --> 09:12:20,960
statement. Why don't we do that? Good

13443
09:12:20,960 --> 09:12:22,960
question. Because if I go back and do a

13444
09:12:22,960 --> 09:12:25,598
hard refresh and again select a file and

13445
09:12:25,598 --> 09:12:27,598
click on enter, we still get the same

13446
09:12:27,598 --> 09:12:29,840
error. Everything is still protected.

13447
09:12:29,840 --> 09:12:32,238
But if I open my terminal, there's a new

13448
09:12:32,238 --> 09:12:35,122
error. This time 500. So here's the

13449
09:12:35,122 --> 09:12:37,122
thing again. This redirect function

13450
09:12:37,122 --> 09:12:39,680
responds with a 307. As you all know,

13451
09:12:39,680 --> 09:12:41,520
the thing is when you use a redirect

13452
09:12:41,520 --> 09:12:44,078
function in the try statement, it throws

13453
09:12:44,078 --> 09:12:46,320
an internal error. It throws an it

13454
09:12:46,320 --> 09:12:48,558
throws a redirect error and that's why

13455
09:12:48,558 --> 09:12:50,718
this catch is triggered and we return

13456
09:12:50,718 --> 09:12:54,238
the status of 500. So whenever you use a

13457
09:12:54,238 --> 09:12:57,040
require admin function or a require user

13458
09:12:57,040 --> 09:12:59,200
function which uses internally the

13459
09:12:59,200 --> 09:13:01,200
redirect function or where you want to

13460
09:13:01,200 --> 09:13:03,840
redirect the user then you want to never

13461
09:13:03,840 --> 09:13:06,718
put this session or this function into a

13462
09:13:06,718 --> 09:13:09,360
try statement. It has to live outside of

13463
09:13:09,360 --> 09:13:11,598
a try catch statement. So that's why I

13464
09:13:11,598 --> 09:13:13,438
define this constant session await

13465
09:13:13,438 --> 09:13:16,160
require admin above the try statement.

13466
09:13:16,160 --> 09:13:18,000
Of course I could do it inside of here.

13467
09:13:18,000 --> 09:13:20,000
It does not matter in this context in

13468
09:13:20,000 --> 09:13:22,160
the route handler example. But when we

13469
09:13:22,160 --> 09:13:24,558
use the function in a server action, we

13470
09:13:24,558 --> 09:13:27,040
want to never implement it or define it

13471
09:13:27,040 --> 09:13:29,438
in the try statement itself. And that's

13472
09:13:29,438 --> 09:13:30,960
already it. As you see, it's quite

13473
09:13:30,960 --> 09:13:33,438
simple. So we are protecting our route

13474
09:13:33,438 --> 09:13:36,160
handlers, but our creation route itself

13475
09:13:36,160 --> 09:13:37,918
is not protected. What do I mean by

13476
09:13:37,918 --> 09:13:40,800
that? Well, if we open our actions file,

13477
09:13:40,800 --> 09:13:42,878
you will see currently we get the user

13478
09:13:42,878 --> 09:13:45,360
session, but we don't check if the user

13479
09:13:45,360 --> 09:13:47,598
has a real valid session and that the

13480
09:13:47,598 --> 09:13:49,758
user is an admin. This means we can

13481
09:13:49,758 --> 09:13:51,918
delete this constant session and instead

13482
09:13:51,918 --> 09:13:54,238
we can go above the try statement and

13483
09:13:54,238 --> 09:13:57,040
again say constant session equals to a

13484
09:13:57,040 --> 09:14:00,480
rate require admin. We can import it and

13485
09:14:00,480 --> 09:14:02,960
invoke it. As you see this all works. We

13486
09:14:02,960 --> 09:14:04,640
can delete the unused imports. We don't

13487
09:14:04,640 --> 09:14:07,200
need them anymore. And this all looks

13488
09:14:07,200 --> 09:14:09,278
good. Now here's the thing. What I will

13489
09:14:09,278 --> 09:14:11,520
do quickly is go back to the upload

13490
09:14:11,520 --> 09:14:13,918
route handler and I will comment out

13491
09:14:13,918 --> 09:14:16,800
this decision or this constant session

13492
09:14:16,800 --> 09:14:19,040
and I will also comment out this arc

13493
09:14:19,040 --> 09:14:21,200
chat code because I want to test out if

13494
09:14:21,200 --> 09:14:23,840
this redirect works itself. This means

13495
09:14:23,840 --> 09:14:26,320
if I go back and do a hard refresh

13496
09:14:26,320 --> 09:14:29,122
everything works. If I select a file

13497
09:14:29,122 --> 09:14:31,278
everything works. So as you see uploaded

13498
09:14:31,278 --> 09:14:33,438
but I got an error. What's the problem?

13499
09:14:33,438 --> 09:14:34,960
Hm. Was this the ah this was the

13500
09:14:34,960 --> 09:14:37,040
deletion route? My god. So I want to go

13501
09:14:37,040 --> 09:14:38,800
into the upload route not into the

13502
09:14:38,800 --> 09:14:41,200
deletion route handler. Then I can com

13503
09:14:41,200 --> 09:14:43,520
uh comment out this constant session and

13504
09:14:43,520 --> 09:14:45,918
then also the arc chat code itself. This

13505
09:14:45,918 --> 09:14:48,718
means if I again go back and select a

13506
09:14:48,718 --> 09:14:51,360
file it should also work. And yes

13507
09:14:51,360 --> 09:14:53,918
uploading uploaded. Then for the title

13508
09:14:53,918 --> 09:14:55,360
this will be some gibberish. For the

13509
09:14:55,360 --> 09:14:57,122
slug this will be some gibberish. For

13510
09:14:57,122 --> 09:14:58,718
the small description this will be some

13511
09:14:58,718 --> 09:15:00,800
gibberish. For the category this will be

13512
09:15:00,800 --> 09:15:04,000
design for level intermediate price 500.

13513
09:15:04,000 --> 09:15:05,680
Duration 50. This does not matter

13514
09:15:05,680 --> 09:15:07,360
because we will get an error. And for

13515
09:15:07,360 --> 09:15:09,278
the status published, if I click on

13516
09:15:09,278 --> 09:15:10,960
create course, we get an error. That's

13517
09:15:10,960 --> 09:15:13,040
because I forgot the description. Silly

13518
09:15:13,040 --> 09:15:15,200
mistake. So I can add a bit of content.

13519
09:15:15,200 --> 09:15:17,278
And if I click on create course, we

13520
09:15:17,278 --> 09:15:19,122
should get redirected. And we got

13521
09:15:19,122 --> 09:15:21,122
redirected. We got a toast. An

13522
09:15:21,122 --> 09:15:23,758
unexpected error occurred. And also we

13523
09:15:23,758 --> 09:15:27,680
got redirected to notadmin or /notadmin.

13524
09:15:27,680 --> 09:15:29,438
That's again because if we go back to

13525
09:15:29,438 --> 09:15:32,558
the actions file, we check or we verify

13526
09:15:32,558 --> 09:15:34,640
the user session, we check that the user

13527
09:15:34,640 --> 09:15:36,800
has a valid session and also that the

13528
09:15:36,800 --> 09:15:39,278
user is an admin. Currently I'm signed

13529
09:15:39,278 --> 09:15:41,520
in but I don't have the correct role and

13530
09:15:41,520 --> 09:15:44,238
that's why I got redirected to not admin

13531
09:15:44,238 --> 09:15:46,800
and as you also see I got redirected and

13532
09:15:46,800 --> 09:15:49,040
the reason for that is uh quite simply

13533
09:15:49,040 --> 09:15:51,840
because the redirect works in a server

13534
09:15:51,840 --> 09:15:53,758
action and if I would define this

13535
09:15:53,758 --> 09:15:55,598
constant session code in the try

13536
09:15:55,598 --> 09:15:57,680
statement I wouldn't get redirected

13537
09:15:57,680 --> 09:15:59,758
instead this catch statement would

13538
09:15:59,758 --> 09:16:01,520
trigger and then this error message

13539
09:16:01,520 --> 09:16:03,520
would be returned because again this

13540
09:16:03,520 --> 09:16:06,480
redirect function internally throws a

13541
09:16:06,480 --> 09:16:08,238
new error even though it's not really an

13542
09:16:08,238 --> 09:16:10,640
error but it throws an internal error

13543
09:16:10,640 --> 09:16:12,320
which means the catch statement is

13544
09:16:12,320 --> 09:16:14,160
triggered. So this all looks good. We

13545
09:16:14,160 --> 09:16:16,320
can go back to the upload code. I can

13546
09:16:16,320 --> 09:16:18,718
again uncomment my decision and I can

13547
09:16:18,718 --> 09:16:20,878
also uncomment the session code and I

13548
09:16:20,878 --> 09:16:22,878
want to also protect my server action

13549
09:16:22,878 --> 09:16:24,718
because yeah right now we check that the

13550
09:16:24,718 --> 09:16:27,360
user is an admin and also has a valid

13551
09:16:27,360 --> 09:16:29,840
session. Nevertheless, let's imagine a

13552
09:16:29,840 --> 09:16:32,960
user somehow gets the admin rule then he

13553
09:16:32,960 --> 09:16:35,278
could still attack this create course

13554
09:16:35,278 --> 09:16:37,598
route. We don't want that. That's why I

13555
09:16:37,598 --> 09:16:39,918
want to again implement arcjet and I

13556
09:16:39,918 --> 09:16:41,918
want to implement weight limits and bot

13557
09:16:41,918 --> 09:16:44,238
detection or bot protection. This means

13558
09:16:44,238 --> 09:16:46,160
we can just open our route handler the

13559
09:16:46,160 --> 09:16:48,238
upload route handler and we already

13560
09:16:48,238 --> 09:16:50,718
created the code constant AJ equals to

13561
09:16:50,718 --> 09:16:53,680
arcjet with rule with rule. So I will

13562
09:16:53,680 --> 09:16:55,680
just copy this code. Then in the actions

13563
09:16:55,680 --> 09:16:58,238
file I will paste it above the export

13564
09:16:58,238 --> 09:17:01,122
async function. We want to import arcjet

13565
09:17:01,122 --> 09:17:03,200
from the lip folder and we want to also

13566
09:17:03,200 --> 09:17:05,840
import detect bot from the lip folder

13567
09:17:05,840 --> 09:17:08,238
and then fixed window will also be

13568
09:17:08,238 --> 09:17:10,398
imported from the lip folder. Then we

13569
09:17:10,398 --> 09:17:12,238
want to get the decision itself. This

13570
09:17:12,238 --> 09:17:14,480
means in the try statement above the

13571
09:17:14,480 --> 09:17:16,398
validation we can create a constant.

13572
09:17:16,398 --> 09:17:18,878
This will be called decision and this

13573
09:17:18,878 --> 09:17:21,840
will be equal to a rate arc jet dot

13574
09:17:21,840 --> 09:17:24,320
protect and as an argument we have to

13575
09:17:24,320 --> 09:17:26,238
pass the request. But here's the thing.

13576
09:17:26,238 --> 09:17:28,558
We don't get a request in a server

13577
09:17:28,558 --> 09:17:31,200
action. We get our values but no

13578
09:17:31,200 --> 09:17:34,000
request. So how can we fix this problem?

13579
09:17:34,000 --> 09:17:35,360
Well, we can go back to the

13580
09:17:35,360 --> 09:17:37,840
documentation. So to the archae docs.

13581
09:17:37,840 --> 09:17:39,598
Then you can scroll a bit to the bottom

13582
09:17:39,598 --> 09:17:42,160
and then you will find the SDK reference

13583
09:17:42,160 --> 09:17:45,360
section. We want to click on nextjs not

13584
09:17:45,360 --> 09:17:48,000
nest js and here you will find the

13585
09:17:48,000 --> 09:17:51,520
section um server actions. So arjet

13586
09:17:51,520 --> 09:17:53,598
supports server actions in both

13587
09:17:53,598 --> 09:17:57,040
next.js14 JS14 and 15 for all features

13588
09:17:57,040 --> 09:17:59,680
except sensitive data detection. But we

13589
09:17:59,680 --> 09:18:01,520
don't use this rule, so we don't really

13590
09:18:01,520 --> 09:18:03,840
care. So what we need to do is call a

13591
09:18:03,840 --> 09:18:06,000
utility function called request. And

13592
09:18:06,000 --> 09:18:07,598
with that, we will get the request

13593
09:18:07,598 --> 09:18:09,840
because again in the route handler, we

13594
09:18:09,840 --> 09:18:12,000
natively get a request. In a server

13595
09:18:12,000 --> 09:18:14,078
action, we sadly don't get it. But

13596
09:18:14,078 --> 09:18:16,320
thankfully, Arjet created a helper

13597
09:18:16,320 --> 09:18:19,122
function request which we can use. So I

13598
09:18:19,122 --> 09:18:20,718
will just copy this code. We can go

13599
09:18:20,718 --> 09:18:22,960
back. We can paste it. And as you see

13600
09:18:22,960 --> 09:18:25,360
access request data that archet needs

13601
09:18:25,360 --> 09:18:27,680
when you call protect. It's similar to

13602
09:18:27,680 --> 09:18:30,000
await headers and await cookies and next

13603
09:18:30,000 --> 09:18:32,078
headers. So this gives us or this gets

13604
09:18:32,078 --> 09:18:34,398
us the request. We want to also import

13605
09:18:34,398 --> 09:18:36,718
this request function and it's imported

13606
09:18:36,718 --> 09:18:39,598
from arcjet next. And then we can pass

13607
09:18:39,598 --> 09:18:41,918
the request as an argument.

13608
09:18:41,918 --> 09:18:44,000
Nevertheless, we still get one error.

13609
09:18:44,000 --> 09:18:45,840
What's the problem? We have to pass the

13610
09:18:45,840 --> 09:18:47,840
fingerprint. What was the fingerprint?

13611
09:18:47,840 --> 09:18:50,718
It could either be the user's IP or we

13612
09:18:50,718 --> 09:18:53,598
can for example pass the user ID and as

13613
09:18:53,598 --> 09:18:56,238
mentioned the user ID is preferred. And

13614
09:18:56,238 --> 09:18:58,640
why exactly is again the user ID

13615
09:18:58,640 --> 09:19:00,320
preferred? Well, let's imagine the

13616
09:19:00,320 --> 09:19:02,238
following. A malicious user can create

13617
09:19:02,238 --> 09:19:05,598
attack from his home with the IP XYZ. He

13618
09:19:05,598 --> 09:19:08,238
can also create an attack from an cafe,

13619
09:19:08,238 --> 09:19:10,558
from a restaurant with a different IP.

13620
09:19:10,558 --> 09:19:13,040
So this means he could also create a bot

13621
09:19:13,040 --> 09:19:15,596
army with different IPs. And that's why

13622
09:19:15,596 --> 09:19:17,680
we don't want to really in most cases

13623
09:19:17,680 --> 09:19:19,840
use the IP but instead we want to use

13624
09:19:19,840 --> 09:19:22,480
something which can be identified uh

13625
09:19:22,480 --> 09:19:25,040
without looking at the IP and the user

13626
09:19:25,040 --> 09:19:26,960
ID is something which we can use for

13627
09:19:26,960 --> 09:19:29,360
that because it never changes. So for

13628
09:19:29,360 --> 09:19:31,596
the fingerprint this will be equal to

13629
09:19:31,596 --> 09:19:34,640
session do user do ID and this looks

13630
09:19:34,640 --> 09:19:37,040
great. As you all know we have to also

13631
09:19:37,040 --> 09:19:39,200
um check if the decision is denied or

13632
09:19:39,200 --> 09:19:40,960
allowed. So we can create an if

13633
09:19:40,960 --> 09:19:43,120
statement and then if the decision dot

13634
09:19:43,120 --> 09:19:45,596
is denied we want to invoke it then we

13635
09:19:45,596 --> 09:19:47,596
want to return an object. So I can

13636
09:19:47,596 --> 09:19:49,520
create a return then I want to return an

13637
09:19:49,520 --> 09:19:52,240
object for the status this will just be

13638
09:19:52,240 --> 09:19:54,320
error because we have an error and then

13639
09:19:54,320 --> 09:19:56,560
we can also add a message and for the

13640
09:19:56,560 --> 09:20:00,720
message um we can say looks like you are

13641
09:20:00,720 --> 09:20:03,040
a malicious user and you know what we

13642
09:20:03,040 --> 09:20:04,720
can of course also create multiple

13643
09:20:04,720 --> 09:20:06,640
statements because if statements because

13644
09:20:06,640 --> 09:20:09,040
currently we only check for the global

13645
09:20:09,040 --> 09:20:11,436
is the night you could say event or for

13646
09:20:11,436 --> 09:20:13,596
the global decision but we could also

13647
09:20:13,596 --> 09:20:15,756
check for the specific reason. So I

13648
09:20:15,756 --> 09:20:17,360
could for example delete this return

13649
09:20:17,360 --> 09:20:19,436
statement and instead create another if

13650
09:20:19,436 --> 09:20:21,200
statement and we can check if the

13651
09:20:21,200 --> 09:20:24,880
decision not describe but decision dot

13652
09:20:24,880 --> 09:20:27,200
reason and then we can say is weight

13653
09:20:27,200 --> 09:20:29,360
limit for example we can invoke it and

13654
09:20:29,360 --> 09:20:32,080
then return a different object. So let's

13655
09:20:32,080 --> 09:20:33,756
do it. You know what? Why not? So we

13656
09:20:33,756 --> 09:20:35,756
will return again an object for the

13657
09:20:35,756 --> 09:20:38,160
status. This will be error. And then for

13658
09:20:38,160 --> 09:20:40,320
the message we can say you have been

13659
09:20:40,320 --> 09:20:42,640
blocked due to weight limiting. Yeah, I

13660
09:20:42,640 --> 09:20:44,160
think this is fine. Then we can create

13661
09:20:44,160 --> 09:20:46,480
an else statement. And here we will just

13662
09:20:46,480 --> 09:20:48,800
return again an object for the status.

13663
09:20:48,800 --> 09:20:50,560
This will be error. And here we will

13664
09:20:50,560 --> 09:20:52,800
know that the user has been um blocked

13665
09:20:52,800 --> 09:20:55,360
because he's probably a bot. So for the

13666
09:20:55,360 --> 09:20:58,800
message we can just say you are a bot.

13667
09:20:58,800 --> 09:21:00,880
Never touch my website again. No, I'm

13668
09:21:00,880 --> 09:21:03,276
joking. You are a bot. If this is a

13669
09:21:03,276 --> 09:21:05,680
mistake, contact support. Yeah, I think

13670
09:21:05,680 --> 09:21:07,596
this is fine enough. So, we now check if

13671
09:21:07,596 --> 09:21:09,680
the decision is denied. If so, we check

13672
09:21:09,680 --> 09:21:11,840
if the reason is weight limit. If so, we

13673
09:21:11,840 --> 09:21:14,080
then return a specific weight limit

13674
09:21:14,080 --> 09:21:16,000
error message. And if not, then we

13675
09:21:16,000 --> 09:21:17,916
return a error message which

13676
09:21:17,916 --> 09:21:20,240
specifically mentions that the user is

13677
09:21:20,240 --> 09:21:22,480
probably a bot. And I just realized that

13678
09:21:22,480 --> 09:21:25,040
I made a mistake here. I use arcjet, but

13679
09:21:25,040 --> 09:21:26,800
I don't want to use arcjet. I want to

13680
09:21:26,800 --> 09:21:29,276
use AJ because I just configured the

13681
09:21:29,276 --> 09:21:31,596
arcjet rules because if I just use

13682
09:21:31,596 --> 09:21:33,916
arcjet and use the protect method then

13683
09:21:33,916 --> 09:21:36,240
we will only use shield but I want to

13684
09:21:36,240 --> 09:21:39,276
use shield detect bot and fixed window.

13685
09:21:39,276 --> 09:21:41,436
So I will copy AJ and then instead of

13686
09:21:41,436 --> 09:21:43,916
saying arcjet this will be AJ. This

13687
09:21:43,916 --> 09:21:45,756
looks good. Did I also make the same

13688
09:21:45,756 --> 09:21:47,840
mistake in the route handlers? No, this

13689
09:21:47,840 --> 09:21:49,756
looks good. So what's the next step?

13690
09:21:49,756 --> 09:21:52,080
Well the next step is to again first of

13691
09:21:52,080 --> 09:21:54,160
all go back or you know what we can

13692
09:21:54,160 --> 09:21:56,640
create this notadmin route. So this will

13693
09:21:56,640 --> 09:21:58,960
be a simple page which will just say hey

13694
09:21:58,960 --> 09:22:02,000
you are not an admin go away from here.

13695
09:22:02,000 --> 09:22:04,480
So we can open the explorer again or we

13696
09:22:04,480 --> 09:22:06,800
want to go back to our codebase. Then in

13697
09:22:06,800 --> 09:22:08,800
the app folder we want to create a new

13698
09:22:08,800 --> 09:22:11,680
folder. This will be not dashadmin. And

13699
09:22:11,680 --> 09:22:13,756
then inside of here we want to create a

13700
09:22:13,756 --> 09:22:16,560
page.tsx because again how do you create

13701
09:22:16,560 --> 09:22:19,276
routes in x.js? You should all know it.

13702
09:22:19,276 --> 09:22:21,200
You create a new folder and you create a

13703
09:22:21,200 --> 09:22:23,916
new page.tsx. That's it. It's that

13704
09:22:23,916 --> 09:22:26,240
simple. So the UI will be relatively

13705
09:22:26,240 --> 09:22:28,080
simple. First of all, since this is a

13706
09:22:28,080 --> 09:22:30,560
route and not just a standard component,

13707
09:22:30,560 --> 09:22:32,800
we have to create an export default

13708
09:22:32,800 --> 09:22:34,640
function. Then for the name, this will

13709
09:22:34,640 --> 09:22:37,360
just be not admin route. And then we can

13710
09:22:37,360 --> 09:22:39,756
just open this function. Let's create a

13711
09:22:39,756 --> 09:22:41,840
return statement. And inside of here, we

13712
09:22:41,840 --> 09:22:44,000
want to use a div. Then I want to style

13713
09:22:44,000 --> 09:22:45,916
the div. And this will be a class name,

13714
09:22:45,916 --> 09:22:48,080
which is minimum height screen. So we

13715
09:22:48,080 --> 09:22:50,560
want to take the whole height. Then flex

13716
09:22:50,560 --> 09:22:53,520
item center and also justify center. So

13717
09:22:53,520 --> 09:22:54,880
this means we just take the whole

13718
09:22:54,880 --> 09:22:56,160
screen, the whole width and the whole

13719
09:22:56,160 --> 09:22:57,596
height. And then we just take our

13720
09:22:57,596 --> 09:22:59,436
children and we put them in the middle.

13721
09:22:59,436 --> 09:23:00,960
That's it. Or in the center, I'm not

13722
09:23:00,960 --> 09:23:02,640
sure how you want to call it. And in the

13723
09:23:02,640 --> 09:23:05,916
div, I want to center my card. So I want

13724
09:23:05,916 --> 09:23:07,756
to create a card component or I want to

13725
09:23:07,756 --> 09:23:10,080
render it because we already created it.

13726
09:23:10,080 --> 09:23:11,916
And for the class name or for the cart,

13727
09:23:11,916 --> 09:23:13,680
we want to give it a class name. And

13728
09:23:13,680 --> 09:23:16,320
this will be a maximum width of MD. This

13729
09:23:16,320 --> 09:23:20,080
means 448 pixels and width full. Then in

13730
09:23:20,080 --> 09:23:21,916
the cart we want to first of all get the

13731
09:23:21,916 --> 09:23:24,320
cart header from the components. And for

13732
09:23:24,320 --> 09:23:26,560
the cart header I want to render an

13733
09:23:26,560 --> 09:23:28,800
icon. This means we can create first of

13734
09:23:28,800 --> 09:23:31,040
all a wpper div which will create a

13735
09:23:31,040 --> 09:23:33,360
background color. And inside of here we

13736
09:23:33,360 --> 09:23:36,560
want to get the shield x icon from lucid

13737
09:23:36,560 --> 09:23:38,800
react. This is self-closing. We can give

13738
09:23:38,800 --> 09:23:40,800
it a class name. And then this will be

13739
09:23:40,800 --> 09:23:44,400
size 16. And then text destructive. This

13740
09:23:44,400 --> 09:23:47,596
means this red color. And for the wrap

13741
09:23:47,596 --> 09:23:49,200
again this will create the background

13742
09:23:49,200 --> 09:23:51,520
color. So we can also give it a class

13743
09:23:51,520 --> 09:23:55,276
name. This will be bg destructive and it

13744
09:23:55,276 --> 09:23:56,880
shouldn't take or it shouldn't have the

13745
09:23:56,880 --> 09:24:00,080
full opacity but instead an opacity of

13746
09:24:00,080 --> 09:24:04,320
50%. So / 50 or not 5010 I'm sorry. So

13747
09:24:04,320 --> 09:24:07,680
slash 10 and then also rounded full we

13748
09:24:07,680 --> 09:24:09,680
want to say padding four to have some

13749
09:24:09,680 --> 09:24:11,916
spacing and then also width which will

13750
09:24:11,916 --> 09:24:15,120
be fit and MX auto to center everything.

13751
09:24:15,120 --> 09:24:17,200
So if we go back then we should already

13752
09:24:17,200 --> 09:24:19,120
see something. And you know what? This

13753
09:24:19,120 --> 09:24:21,436
looks kind of good to be honest with

13754
09:24:21,436 --> 09:24:23,916
you. So underneath this card header or

13755
09:24:23,916 --> 09:24:26,000
underneath this icon, I want to render a

13756
09:24:26,000 --> 09:24:28,480
title and a card description. So we can

13757
09:24:28,480 --> 09:24:30,240
go underneath the div, but we want to

13758
09:24:30,240 --> 09:24:32,480
stay in the card header and we can first

13759
09:24:32,480 --> 09:24:34,720
of all get the card title component.

13760
09:24:34,720 --> 09:24:37,436
Inside of here, I will say access

13761
09:24:37,436 --> 09:24:40,480
restricted. Then um if I go back, you

13762
09:24:40,480 --> 09:24:42,480
see this is not centered. This is not

13763
09:24:42,480 --> 09:24:45,040
quite what I want. So what wraps the

13764
09:24:45,040 --> 09:24:47,596
cart title? Well, it uh the cart header

13765
09:24:47,596 --> 09:24:50,000
wraps the card title. This means we can

13766
09:24:50,000 --> 09:24:51,916
style the cart header and give it a

13767
09:24:51,916 --> 09:24:54,400
class name which will be text center.

13768
09:24:54,400 --> 09:24:56,640
And with that, this card title will be

13769
09:24:56,640 --> 09:24:59,360
automatically centered. Also, this title

13770
09:24:59,360 --> 09:25:01,680
is a bit too small. So we can give it a

13771
09:25:01,680 --> 09:25:04,640
class name which will be text to Excel.

13772
09:25:04,640 --> 09:25:06,640
Underneath the card title, we want to

13773
09:25:06,640 --> 09:25:09,276
get a card description. And for the card

13774
09:25:09,276 --> 09:25:12,960
description, I want to say, "Hey user,

13775
09:25:12,960 --> 09:25:17,436
you are not an admin, which means you

13776
09:25:17,436 --> 09:25:22,000
cannot create any courses or stuff like

13777
09:25:22,000 --> 09:25:24,640
that." Dot dot dot. Then if we go back,

13778
09:25:24,640 --> 09:25:26,560
you will see, you know what, this looks

13779
09:25:26,560 --> 09:25:28,960
quite good, but maybe we should add a

13780
09:25:28,960 --> 09:25:31,040
maximum width. So for the cut

13781
09:25:31,040 --> 09:25:32,640
description, we can give it a class

13782
09:25:32,640 --> 09:25:35,756
name, which will be maximum width of MD.

13783
09:25:35,756 --> 09:25:39,436
Maybe let's see. N MD does not work. So

13784
09:25:39,436 --> 09:25:43,436
probably SM. Yeah, SM is fine. Maybe XS

13785
09:25:43,436 --> 09:25:46,640
will be even better. Uh yeah, I don't

13786
09:25:46,640 --> 09:25:48,480
know. And this is not centered anymore.

13787
09:25:48,480 --> 09:25:50,960
This is a big problem. But XS is quite

13788
09:25:50,960 --> 09:25:53,756
good. So we can also give this a text or

13789
09:25:53,756 --> 09:25:56,000
MX auto. And this should already look

13790
09:25:56,000 --> 09:25:59,200
way better. Yes. So text uh text XS and

13791
09:25:59,200 --> 09:26:01,840
then also MX auto to center it. Then

13792
09:26:01,840 --> 09:26:03,680
underneath this card header, I want to

13793
09:26:03,680 --> 09:26:05,680
also display card content which will

13794
09:26:05,680 --> 09:26:07,840
just be a standard button to redirect

13795
09:26:07,840 --> 09:26:10,400
the user back to the index page. So we

13796
09:26:10,400 --> 09:26:12,720
can go underneath the uh cart header. We

13797
09:26:12,720 --> 09:26:14,800
can get the cart content component from

13798
09:26:14,800 --> 09:26:17,120
the components and then we want to use

13799
09:26:17,120 --> 09:26:19,520
the link component inside of here import

13800
09:26:19,520 --> 09:26:21,596
it from next/link

13801
09:26:21,596 --> 09:26:24,080
and for the content this will be back to

13802
09:26:24,080 --> 09:26:26,960
home. Also we can render an icon in

13803
09:26:26,960 --> 09:26:29,200
front of this text. So this will be the

13804
09:26:29,200 --> 09:26:32,000
arrow left icon imported from lucid

13805
09:26:32,000 --> 09:26:34,480
react. We can also give it a class name

13806
09:26:34,480 --> 09:26:36,720
and then this will be margin right one

13807
09:26:36,720 --> 09:26:39,916
and then size 4. As you see the link

13808
09:26:39,916 --> 09:26:41,520
currently complaints and that's because

13809
09:26:41,520 --> 09:26:44,000
it's missing one key property which is

13810
09:26:44,000 --> 09:26:46,880
the href and the href will be an empty

13811
09:26:46,880 --> 09:26:50,080
slash. We can also add a class name and

13812
09:26:50,080 --> 09:26:52,000
this will just be button variance

13813
09:26:52,000 --> 09:26:54,720
because I want to style this link like a

13814
09:26:54,720 --> 09:26:57,840
shad CN button. We want to invoke it and

13815
09:26:57,840 --> 09:27:00,480
we can also you know what save it for

13816
09:27:00,480 --> 09:27:02,720
now. And as you see this is the button

13817
09:27:02,720 --> 09:27:04,480
but the button should take the whole

13818
09:27:04,480 --> 09:27:06,400
width. I think this will look better.

13819
09:27:06,400 --> 09:27:08,240
This means we can go back to the button

13820
09:27:08,240 --> 09:27:10,320
variance function. We can just d the

13821
09:27:10,320 --> 09:27:13,120
structured and give it a class name. And

13822
09:27:13,120 --> 09:27:16,400
this will be equal to width full. And if

13823
09:27:16,400 --> 09:27:18,560
I save this you see the button takes the

13824
09:27:18,560 --> 09:27:20,560
whole width. And this looks already way

13825
09:27:20,560 --> 09:27:23,120
better. Is there anything missing? If I

13826
09:27:23,120 --> 09:27:24,400
click on the button I will get

13827
09:27:24,400 --> 09:27:26,400
redirected. Honestly, I think this is

13828
09:27:26,400 --> 09:27:28,080
it. The button works. That's what I

13829
09:27:28,080 --> 09:27:30,560
wanted. So, we are finished. This means

13830
09:27:30,560 --> 09:27:33,436
we can again close this page.x. But our

13831
09:27:33,436 --> 09:27:35,840
core problem is still not fixed. I'm not

13832
09:27:35,840 --> 09:27:38,160
an admin. This means we want to again

13833
09:27:38,160 --> 09:27:40,880
start our Prisma Studio, our local

13834
09:27:40,880 --> 09:27:43,520
representation of our database. So, I

13835
09:27:43,520 --> 09:27:46,160
will just again say PNPM DLX Prisma

13836
09:27:46,160 --> 09:27:48,640
Studio. Then we want to open the user

13837
09:27:48,640 --> 09:27:51,040
model. We want to go to the right and we

13838
09:27:51,040 --> 09:27:53,040
want to update the role. And instead of

13839
09:27:53,040 --> 09:27:55,436
saying user, I will say admin because

13840
09:27:55,436 --> 09:27:57,520
I'm an admin. We can then save the

13841
09:27:57,520 --> 09:28:00,000
change. And in theory, everything should

13842
09:28:00,000 --> 09:28:02,400
work. So we can go back to the admin

13843
09:28:02,400 --> 09:28:04,800
dashboard. We want to go to the courses.

13844
09:28:04,800 --> 09:28:06,960
And I want to create a new course. So

13845
09:28:06,960 --> 09:28:09,360
for the title, this will be subscribe.

13846
09:28:09,360 --> 09:28:12,160
Now for the slug, I can generate a slug.

13847
09:28:12,160 --> 09:28:15,040
For the small description, hey, how are

13848
09:28:15,040 --> 09:28:17,680
you doing today? We want to also update

13849
09:28:17,680 --> 09:28:19,916
the big description. So I will add a bit

13850
09:28:19,916 --> 09:28:23,040
of content. Then we can up uh upload an

13851
09:28:23,040 --> 09:28:26,400
image. So this one as you see uploading

13852
09:28:26,400 --> 09:28:28,560
successful. Then for the category this

13853
09:28:28,560 --> 09:28:30,560
is fine. For the level this is fine. For

13854
09:28:30,560 --> 09:28:32,720
the duration this will be 50. For the

13855
09:28:32,720 --> 09:28:34,880
price this will be 500. And for the

13856
09:28:34,880 --> 09:28:37,120
status this will be published. If I

13857
09:28:37,120 --> 09:28:39,276
click on create course we have a pending

13858
09:28:39,276 --> 09:28:41,520
state. I got redirected and it says

13859
09:28:41,520 --> 09:28:44,160
course created successfully. But there's

13860
09:28:44,160 --> 09:28:46,880
one problem. We don't see any courses.

13861
09:28:46,880 --> 09:28:48,720
So what's the next step? Well, as the

13862
09:28:48,720 --> 09:28:50,800
next step, we want to render the courses

13863
09:28:50,800 --> 09:28:53,360
here. And also, currently, anybody can

13864
09:28:53,360 --> 09:28:55,120
reach this route. So, if I open the

13865
09:28:55,120 --> 09:28:57,360
route in the new incognito tab, I can

13866
09:28:57,360 --> 09:28:59,520
still view it and I'm not logged in.

13867
09:28:59,520 --> 09:29:01,680
Don't worry, we will fix it later on. We

13868
09:29:01,680 --> 09:29:03,360
want to first of all finish off this

13869
09:29:03,360 --> 09:29:05,680
overview page and then we will fix this

13870
09:29:05,680 --> 09:29:08,240
authorization problem. So, we want to

13871
09:29:08,240 --> 09:29:10,800
first of all get our courses. This means

13872
09:29:10,800 --> 09:29:13,596
we have to go back to our explorer and

13873
09:29:13,596 --> 09:29:16,000
in as you all know we use the data

13874
09:29:16,000 --> 09:29:18,880
access layer to get our data. This means

13875
09:29:18,880 --> 09:29:21,120
in the data or in the app folder in the

13876
09:29:21,120 --> 09:29:23,680
data folder we want to create a new file

13877
09:29:23,680 --> 09:29:25,680
which will be called something like

13878
09:29:25,680 --> 09:29:28,240
admin getcourses or something like that.

13879
09:29:28,240 --> 09:29:29,840
This means I can go into the admin

13880
09:29:29,840 --> 09:29:32,080
folder create a new file and this will

13881
09:29:32,080 --> 09:29:35,240
be admin-get-courses.ts

13882
09:29:35,360 --> 09:29:37,916
TS and inside of here we can create a

13883
09:29:37,916 --> 09:29:40,160
function to get the courses. And if this

13884
09:29:40,160 --> 09:29:42,560
data access layer still confuses you,

13885
09:29:42,560 --> 09:29:45,120
don't worry. I will um explain it a bit

13886
09:29:45,120 --> 09:29:46,880
further later on because then I will

13887
09:29:46,880 --> 09:29:49,120
also show you a diagram and why it's so

13888
09:29:49,120 --> 09:29:51,120
cool. So we can first of all create an

13889
09:29:51,120 --> 09:29:53,520
export async function. This will be

13890
09:29:53,520 --> 09:29:56,640
called admin get courses. And inside of

13891
09:29:56,640 --> 09:29:58,640
here before getting the data I want to

13892
09:29:58,640 --> 09:30:01,120
first of all verify that the user is an

13893
09:30:01,120 --> 09:30:03,360
admin. I don't want to allow anybody to

13894
09:30:03,360 --> 09:30:06,000
fetch this data. Only admins should be

13895
09:30:06,000 --> 09:30:07,916
able to fetch this data or in other

13896
09:30:07,916 --> 09:30:10,240
words see this data. This means we can

13897
09:30:10,240 --> 09:30:13,276
create or we can say await require admin

13898
09:30:13,276 --> 09:30:15,360
and then we can just import it from the

13899
09:30:15,360 --> 09:30:18,000
require admin file. So underneath this

13900
09:30:18,000 --> 09:30:20,080
aait require admin. We can create a

13901
09:30:20,080 --> 09:30:22,320
constant data and this will be equal to

13902
09:30:22,320 --> 09:30:24,720
arate prisma. Prisma is imported from

13903
09:30:24,720 --> 09:30:27,916
the lip folder dot course.find

13904
09:30:27,916 --> 09:30:29,916
many. Then we can invoke it the

13905
09:30:29,916 --> 09:30:32,160
structured and in here we can first of

13906
09:30:32,160 --> 09:30:34,560
all use the select property because we

13907
09:30:34,560 --> 09:30:36,720
don't want you select everything we want

13908
09:30:36,720 --> 09:30:38,960
you only get specific fields like for

13909
09:30:38,960 --> 09:30:41,436
example the title small description

13910
09:30:41,436 --> 09:30:43,840
duration and stuff like that but I don't

13911
09:30:43,840 --> 09:30:46,160
need the big description as an example

13912
09:30:46,160 --> 09:30:48,640
this means we can set ID to true then we

13913
09:30:48,640 --> 09:30:51,200
can set the title to true we can get the

13914
09:30:51,200 --> 09:30:53,276
small description let's set this to true

13915
09:30:53,276 --> 09:30:55,120
we can get the duration let's set this

13916
09:30:55,120 --> 09:30:57,596
to true how about the level yes let's

13917
09:30:57,596 --> 09:30:59,840
set it to true. Then the status, this

13918
09:30:59,840 --> 09:31:02,160
will also be true. The price, this will

13919
09:31:02,160 --> 09:31:04,160
be true. I want to get the price. And

13920
09:31:04,160 --> 09:31:06,800
then also the file key. And finally also

13921
09:31:06,800 --> 09:31:09,520
the sluck itself. So as you see, we will

13922
09:31:09,520 --> 09:31:11,840
get an ID, title, small description,

13923
09:31:11,840 --> 09:31:14,640
duration, level, status, price, file

13924
09:31:14,640 --> 09:31:16,880
key, and slug. The rest of the

13925
09:31:16,880 --> 09:31:18,880
properties won't be returned because we

13926
09:31:18,880 --> 09:31:20,640
don't select them. Again, with that, I

13927
09:31:20,640 --> 09:31:23,200
mean, for example, the big description.

13928
09:31:23,200 --> 09:31:25,040
And also, we can order the result

13929
09:31:25,040 --> 09:31:27,200
because we will get an array. So an

13930
09:31:27,200 --> 09:31:29,916
array with multiple objects and each

13931
09:31:29,916 --> 09:31:32,720
specific object will be one course but

13932
09:31:32,720 --> 09:31:35,756
currently the order will be completely

13933
09:31:35,756 --> 09:31:38,240
random. So for example the first object

13934
09:31:38,240 --> 09:31:40,080
could be a course which I created two

13935
09:31:40,080 --> 09:31:42,160
months ago and then the second object

13936
09:31:42,160 --> 09:31:44,560
could be a course which I created today.

13937
09:31:44,560 --> 09:31:46,640
I don't want that. I want to order the

13938
09:31:46,640 --> 09:31:48,720
result. This means our array based on

13939
09:31:48,720 --> 09:31:51,596
the created at time stamp. So above the

13940
09:31:51,596 --> 09:31:53,680
select statement we can get the order by

13941
09:31:53,680 --> 09:31:56,240
property. This is an object and we want

13942
09:31:56,240 --> 09:31:59,120
to order our result based on the created

13943
09:31:59,120 --> 09:32:01,840
at time stamp. And you have two options

13944
09:32:01,840 --> 09:32:04,080
either ascending or descending.

13945
09:32:04,080 --> 09:32:06,400
Ascending means that you get the oldest

13946
09:32:06,400 --> 09:32:09,040
results first. Descending means you get

13947
09:32:09,040 --> 09:32:11,756
the newest results first. And we want to

13948
09:32:11,756 --> 09:32:14,240
get the newest results. So I will select

13949
09:32:14,240 --> 09:32:16,560
descending. And then we can add a comma

13950
09:32:16,560 --> 09:32:19,040
also here. So this should already be it.

13951
09:32:19,040 --> 09:32:21,520
We can of course also return our data.

13952
09:32:21,520 --> 09:32:23,200
This means we can go back to our

13953
09:32:23,200 --> 09:32:26,400
page.ts. tsx this means admin courses

13954
09:32:26,400 --> 09:32:29,360
page.tsx and then we can get our data

13955
09:32:29,360 --> 09:32:31,596
inside of here. So this means inside of

13956
09:32:31,596 --> 09:32:34,000
here we can create a constant data and

13957
09:32:34,000 --> 09:32:37,120
this will be equal to arate um admin get

13958
09:32:37,120 --> 09:32:39,840
courses we can import it and of course

13959
09:32:39,840 --> 09:32:42,480
invoke this function. As you see we get

13960
09:32:42,480 --> 09:32:44,880
one error and that's because uh we

13961
09:32:44,880 --> 09:32:46,960
haven't marked this function as

13962
09:32:46,960 --> 09:32:49,276
asynchronous. This means this will be an

13963
09:32:49,276 --> 09:32:52,000
export default async function. And

13964
09:32:52,000 --> 09:32:54,400
again, this is safe to do so because

13965
09:32:54,400 --> 09:32:57,276
this is a server component which only

13966
09:32:57,276 --> 09:33:00,160
runs on the server side. Great. So we

13967
09:33:00,160 --> 09:33:02,400
get our data which means we can also map

13968
09:33:02,400 --> 09:33:04,640
over it. So underneath the div but still

13969
09:33:04,640 --> 09:33:06,640
in the empty tags we can create another

13970
09:33:06,640 --> 09:33:08,560
div and inside of here we can get our

13971
09:33:08,560 --> 09:33:10,960
data. We can use the map method as a

13972
09:33:10,960 --> 09:33:13,756
param. We can get a singular course and

13973
09:33:13,756 --> 09:33:16,240
then just uh return this. Then what do

13974
09:33:16,240 --> 09:33:18,400
we want to return? Maybe a simple P tag

13975
09:33:18,400 --> 09:33:20,240
and in the P tag we can render the

13976
09:33:20,240 --> 09:33:22,640
title. So autocomp completion where are

13977
09:33:22,640 --> 09:33:24,800
you and then I want to get the course

13978
09:33:24,800 --> 09:33:27,680
dot title. Of course we get one error.

13979
09:33:27,680 --> 09:33:29,596
What's the error? You should know it.

13980
09:33:29,596 --> 09:33:32,000
Well when we map over data we have to

13981
09:33:32,000 --> 09:33:34,560
provide a key a unique key. What's

13982
09:33:34,560 --> 09:33:37,040
unique? Our ID is unique. This means

13983
09:33:37,040 --> 09:33:39,840
course do ID. If I save this and again

13984
09:33:39,840 --> 09:33:42,560
go back you will see subscribe. Now,

13985
09:33:42,560 --> 09:33:45,436
this is the title of what of our course

13986
09:33:45,436 --> 09:33:47,276
because we only have one course and

13987
09:33:47,276 --> 09:33:50,080
that's also why we only get one title.

13988
09:33:50,080 --> 09:33:52,560
But is this beautiful? No. Does this

13989
09:33:52,560 --> 09:33:55,276
resemble a course cut? No. So, I want

13990
09:33:55,276 --> 09:33:57,596
you to create like an admin course cut

13991
09:33:57,596 --> 09:33:59,596
which looks beautiful, which is

13992
09:33:59,596 --> 09:34:01,840
appealing and which also works because

13993
09:34:01,840 --> 09:34:03,596
um at the end of the day, we want you

13994
09:34:03,596 --> 09:34:05,840
also edit the course. This means we want

13995
09:34:05,840 --> 09:34:07,840
to create a separate component and this

13996
09:34:07,840 --> 09:34:10,480
will be the admin course card. As you

13997
09:34:10,480 --> 09:34:13,276
all know, I love vertical slice

13998
09:34:13,276 --> 09:34:15,360
architecture. This means we will create

13999
09:34:15,360 --> 09:34:17,680
a separate component in or we will

14000
09:34:17,680 --> 09:34:20,000
create a new components folder in the

14001
09:34:20,000 --> 09:34:22,320
courses folder. So, we can create a new

14002
09:34:22,320 --> 09:34:24,400
folder. This will be underscore

14003
09:34:24,400 --> 09:34:27,596
components and inside of here I want to

14004
09:34:27,596 --> 09:34:31,880
create an add minourse.tsx.

14005
09:34:32,480 --> 09:34:35,200
So, this will be the component and right

14006
09:34:35,200 --> 09:34:37,200
now it's empty. So, let's get started.

14007
09:34:37,200 --> 09:34:39,596
Since this is a component, we can get

14008
09:34:39,596 --> 09:34:42,240
started with an export function. This

14009
09:34:42,240 --> 09:34:44,960
will be called admin course cart. And

14010
09:34:44,960 --> 09:34:47,120
then we can just open it. Inside of

14011
09:34:47,120 --> 09:34:49,200
here, we can get started with a return

14012
09:34:49,200 --> 09:34:51,680
statement. And I want to create a card.

14013
09:34:51,680 --> 09:34:53,436
So here's the thing. We will create a

14014
09:34:53,436 --> 09:34:55,436
card. On the top, we will render the

14015
09:34:55,436 --> 09:34:57,756
image, the thumbnail URL which we

14016
09:34:57,756 --> 09:35:00,000
uploaded. Underneath the image, we will

14017
09:35:00,000 --> 09:35:02,400
render the title, a small description,

14018
09:35:02,400 --> 09:35:04,960
and then an edit button. And then also

14019
09:35:04,960 --> 09:35:07,040
on the top right corner we will create

14020
09:35:07,040 --> 09:35:09,840
like a drop-down. So this drop-down will

14021
09:35:09,840 --> 09:35:12,000
then have a button to first of all edit

14022
09:35:12,000 --> 09:35:14,080
the course then to preview the course

14023
09:35:14,080 --> 09:35:16,640
and also to delete it. So first of all

14024
09:35:16,640 --> 09:35:18,560
we want to get the cart component from

14025
09:35:18,560 --> 09:35:20,960
the components. Then we want to also

14026
09:35:20,960 --> 09:35:23,276
already style the cart component. So we

14027
09:35:23,276 --> 09:35:25,200
can give it a class name and this will

14028
09:35:25,200 --> 09:35:27,916
be group and then also relative. in the

14029
09:35:27,916 --> 09:35:30,240
cart. Um I want to first of all create

14030
09:35:30,240 --> 09:35:32,320
or we will create a div and you know

14031
09:35:32,320 --> 09:35:34,640
what I will also create a comment to not

14032
09:35:34,640 --> 09:35:37,040
forget it and I will say inside of here

14033
09:35:37,040 --> 09:35:40,240
absolute uh dropdown. So again this is

14034
09:35:40,240 --> 09:35:42,000
this thing which we will render on the

14035
09:35:42,000 --> 09:35:44,080
top right corner but for now I don't

14036
09:35:44,080 --> 09:35:45,756
want to create it. I want to first of

14037
09:35:45,756 --> 09:35:47,680
all render the image. So we can go

14038
09:35:47,680 --> 09:35:49,596
underneath the diff and then we want to

14039
09:35:49,596 --> 09:35:52,240
get the image component from next /

14040
09:35:52,240 --> 09:35:54,640
image. This image component needs two

14041
09:35:54,640 --> 09:35:56,640
properties. First of all, the source,

14042
09:35:56,640 --> 09:35:58,960
then also the alt for the source. This

14043
09:35:58,960 --> 09:36:02,160
will be equal to our thumbnail URL. But

14044
09:36:02,160 --> 09:36:04,560
here's the thing. We don't get any data.

14045
09:36:04,560 --> 09:36:06,320
We want to get right here. If I hover

14046
09:36:06,320 --> 09:36:09,360
over course, we want to get these types.

14047
09:36:09,360 --> 09:36:11,276
So, how can we get them? Well, we want

14048
09:36:11,276 --> 09:36:13,200
to get them through the params, right? I

14049
09:36:13,200 --> 09:36:15,120
want to pass them here as props and then

14050
09:36:15,120 --> 09:36:18,160
use them and pass my thumbnail URL for

14051
09:36:18,160 --> 09:36:20,720
the source. So, in theory, we could, for

14052
09:36:20,720 --> 09:36:23,756
example, create an interface I props.

14053
09:36:23,756 --> 09:36:26,240
Then I can h could go here just copy all

14054
09:36:26,240 --> 09:36:28,080
of the types paste them inside of here

14055
09:36:28,080 --> 09:36:30,480
then the structure everything and then I

14056
09:36:30,480 --> 09:36:32,720
will get my data. Yes, this works and

14057
09:36:32,720 --> 09:36:35,120
this is also what I have done for most

14058
09:36:35,120 --> 09:36:37,680
of my career to be honest with you. But

14059
09:36:37,680 --> 09:36:39,596
here's the thing. If we for example

14060
09:36:39,596 --> 09:36:42,160
later on update this query so we could

14061
09:36:42,160 --> 09:36:44,960
for example get the category and if I

14062
09:36:44,960 --> 09:36:47,120
select or set this to true our whole

14063
09:36:47,120 --> 09:36:48,960
interface would break because we would

14064
09:36:48,960 --> 09:36:51,120
have a new item. then I would have to go

14065
09:36:51,120 --> 09:36:53,276
to the admin course card, update the

14066
09:36:53,276 --> 09:36:55,276
interface. You see the problem? It's

14067
09:36:55,276 --> 09:36:57,436
annoying and it's not scalable because

14068
09:36:57,436 --> 09:37:00,160
if we reuse this type in multiple places

14069
09:37:00,160 --> 09:37:02,560
and then also recreated in multiple

14070
09:37:02,560 --> 09:37:05,200
places, then it won't work. So, we want

14071
09:37:05,200 --> 09:37:08,080
you to somehow infer the types from this

14072
09:37:08,080 --> 09:37:10,240
query itself. This means the types

14073
09:37:10,240 --> 09:37:12,400
should be almost dynamic. They should

14074
09:37:12,400 --> 09:37:15,360
update with the query itself. So, how

14075
09:37:15,360 --> 09:37:17,360
can we achieve something like that?

14076
09:37:17,360 --> 09:37:19,596
Well, thankfully I recently found uh

14077
09:37:19,596 --> 09:37:23,120
found out about a way to infer the type

14078
09:37:23,120 --> 09:37:26,560
of or the types of this query. We can go

14079
09:37:26,560 --> 09:37:28,640
underneath the export async function. So

14080
09:37:28,640 --> 09:37:31,916
in this admin get courses um file and

14081
09:37:31,916 --> 09:37:34,800
then we can create an export type admin

14082
09:37:34,800 --> 09:37:37,756
course type and this will be equal to

14083
09:37:37,756 --> 09:37:40,640
awaited. Then we want to pass a generic

14084
09:37:40,640 --> 09:37:42,880
and inside of here we want to get the

14085
09:37:42,880 --> 09:37:45,916
return type and we can again pass a

14086
09:37:45,916 --> 09:37:48,800
generic and this will be type of admin

14087
09:37:48,800 --> 09:37:51,200
get courses. This means the name of this

14088
09:37:51,200 --> 09:37:53,596
function admin get courses. So we pass

14089
09:37:53,596 --> 09:37:55,840
it as a generic and since this is an

14090
09:37:55,840 --> 09:37:57,436
array because if I would hover over

14091
09:37:57,436 --> 09:37:59,756
admin get courses you will see that this

14092
09:37:59,756 --> 09:38:02,160
will return as an array but I want to

14093
09:38:02,160 --> 09:38:04,480
get this singular object. This means we

14094
09:38:04,480 --> 09:38:06,400
can append an array symbol or we can

14095
09:38:06,400 --> 09:38:08,960
append array symbols with a zero inside

14096
09:38:08,960 --> 09:38:11,436
of there. And if I hover over the admin

14097
09:38:11,436 --> 09:38:13,520
uh course type, then you will see that

14098
09:38:13,520 --> 09:38:16,000
we get all of the types here. And I and

14099
09:38:16,000 --> 09:38:18,480
if I for example add the category inside

14100
09:38:18,480 --> 09:38:20,480
of here, this would also update. So if I

14101
09:38:20,480 --> 09:38:22,320
set this to true and hover again over

14102
09:38:22,320 --> 09:38:24,720
here, I will get the category. So this

14103
09:38:24,720 --> 09:38:27,276
is dynamic and that's exactly what you

14104
09:38:27,276 --> 09:38:29,520
want. So we can copy the name admin

14105
09:38:29,520 --> 09:38:31,756
course type. Then we can go back to the

14106
09:38:31,756 --> 09:38:34,000
admin course card. I want you still

14107
09:38:34,000 --> 09:38:35,680
create an interface. We will still need

14108
09:38:35,680 --> 09:38:39,040
it. So I uh props great name and inside

14109
09:38:39,040 --> 09:38:41,680
of here we will get data and data will

14110
09:38:41,680 --> 09:38:44,480
be of type admin course type. We want to

14111
09:38:44,480 --> 09:38:46,880
import that from our data access layer.

14112
09:38:46,880 --> 09:38:48,480
And then in our params we can

14113
09:38:48,480 --> 09:38:50,240
destructure them and this will be of

14114
09:38:50,240 --> 09:38:52,400
type I app props. Then where I

14115
09:38:52,400 --> 09:38:54,720
destructure it I want to get the data

14116
09:38:54,720 --> 09:38:57,200
and we can finally get started using the

14117
09:38:57,200 --> 09:39:00,240
data. So we can pass our data dot file

14118
09:39:00,240 --> 09:39:02,640
key for the source and for the alt this

14119
09:39:02,640 --> 09:39:05,756
will just be I don't know thumbnail URL.

14120
09:39:05,756 --> 09:39:08,000
Yeah, I don't really care. So we want to

14121
09:39:08,000 --> 09:39:10,560
then use the admin course card for or in

14122
09:39:10,560 --> 09:39:13,120
our page. So we can delete the P tag. We

14123
09:39:13,120 --> 09:39:15,436
can get the admin course card from the

14124
09:39:15,436 --> 09:39:17,680
components. This is self-closing. As you

14125
09:39:17,680 --> 09:39:19,840
see, we get an error and that's first of

14126
09:39:19,840 --> 09:39:21,520
all because we are missing the key

14127
09:39:21,520 --> 09:39:23,756
property. This will be equal to course

14128
09:39:23,756 --> 09:39:26,480
do ID and also we are missing the data

14129
09:39:26,480 --> 09:39:28,800
property. And this will be equal to our

14130
09:39:28,800 --> 09:39:31,596
data. So if we pass our course, you will

14131
09:39:31,596 --> 09:39:34,240
see that this error goes away. So if we

14132
09:39:34,240 --> 09:39:37,360
go back and do a hard refresh, we get an

14133
09:39:37,360 --> 09:39:40,000
error. Image with source laala is

14134
09:39:40,000 --> 09:39:42,480
missing required width property. You

14135
09:39:42,480 --> 09:39:43,916
know what? We can add a width and

14136
09:39:43,916 --> 09:39:45,520
height. So here's the thing. When you

14137
09:39:45,520 --> 09:39:48,080
use the image component in XJS and you

14138
09:39:48,080 --> 09:39:51,120
use a remote URL as we do right now, we

14139
09:39:51,120 --> 09:39:53,360
have to then define a width and height

14140
09:39:53,360 --> 09:39:56,080
property. If you use just a local image

14141
09:39:56,080 --> 09:39:57,916
which you import here, then you don't

14142
09:39:57,916 --> 09:39:59,596
have to define the width and height

14143
09:39:59,596 --> 09:40:02,000
because it's just inferred. But since

14144
09:40:02,000 --> 09:40:05,120
this is a remote URL, Nex.js can't

14145
09:40:05,120 --> 09:40:08,160
really infer the width and height. So we

14146
09:40:08,160 --> 09:40:10,160
can just add a width and height. So for

14147
09:40:10,160 --> 09:40:12,800
the width, this will be 600. And then

14148
09:40:12,800 --> 09:40:15,840
for the height, this will be 400. This

14149
09:40:15,840 --> 09:40:18,080
means if we again go back, we shouldn't

14150
09:40:18,080 --> 09:40:20,480
get this error anymore. But we get a new

14151
09:40:20,480 --> 09:40:24,000
error. Failed to construct URL. invalid

14152
09:40:24,000 --> 09:40:26,400
URL. What's the problem? Well, here's

14153
09:40:26,400 --> 09:40:28,160
the thing. What do we store in our

14154
09:40:28,160 --> 09:40:31,120
database for the file key? Well, we just

14155
09:40:31,120 --> 09:40:33,360
store the file key. We don't store the

14156
09:40:33,360 --> 09:40:36,080
real URL. So, we can head over back to

14157
09:40:36,080 --> 09:40:38,480
the Tigris dashboard. And then inside of

14158
09:40:38,480 --> 09:40:40,400
here, we can click on any file. It does

14159
09:40:40,400 --> 09:40:42,400
not really matter. So, for example, I

14160
09:40:42,400 --> 09:40:45,276
can get this file and I can just not

14161
09:40:45,276 --> 09:40:48,160
download it, but we can copy the URL and

14162
09:40:48,160 --> 09:40:50,320
open it in a new tab. And here you will

14163
09:40:50,320 --> 09:40:52,720
see the domain Marshall LMS YouTube

14164
09:40:52,720 --> 09:40:56,120
video subscribe.fly.sto.tigwress.deaf

14165
09:40:57,436 --> 09:41:01,040
and then slash the ID or slash the key.

14166
09:41:01,040 --> 09:41:03,120
This means we can copy everything which

14167
09:41:03,120 --> 09:41:05,596
is in front of the key. So again this is

14168
09:41:05,596 --> 09:41:07,916
the bucket name. Thenfly dots

14169
09:41:07,916 --> 09:41:10,400
storage.tigress.deaf.

14170
09:41:10,400 --> 09:41:12,880
I will copy this. We can go back and

14171
09:41:12,880 --> 09:41:14,880
just to not forget it or to not delete

14172
09:41:14,880 --> 09:41:17,916
it I will paste it right here. So again,

14173
09:41:17,916 --> 09:41:20,916
https/bucket

14174
09:41:21,040 --> 09:41:24,040
name.fly.sto.tigy.deaf.

14175
09:41:24,320 --> 09:41:27,200
So how can we construct our URL? Well,

14176
09:41:27,200 --> 09:41:29,040
it would make a lot of sense to just

14177
09:41:29,040 --> 09:41:31,916
create a new hook and then use it or

14178
09:41:31,916 --> 09:41:34,560
yeah, use the hook to construct the URL.

14179
09:41:34,560 --> 09:41:36,480
So we can open the explorer again. We

14180
09:41:36,480 --> 09:41:38,720
want to go into the hooks folder and we

14181
09:41:38,720 --> 09:41:40,640
will create a new file called

14182
09:41:40,640 --> 09:41:43,640
use-construct.ts.

14183
09:41:44,000 --> 09:41:46,480
I hope I spelled this correctly. I think

14184
09:41:46,480 --> 09:41:48,400
so. And then inside of here, we want to

14185
09:41:48,400 --> 09:41:50,320
create pretty much a new hook. So,

14186
09:41:50,320 --> 09:41:52,480
here's the thing. For example, is this

14187
09:41:52,480 --> 09:41:55,520
try catch file function a hook? No, it

14188
09:41:55,520 --> 09:41:57,680
isn't a hook. But still, I store it in

14189
09:41:57,680 --> 09:42:00,160
the hooks folder because it just kind of

14190
09:42:00,160 --> 09:42:02,960
makes sense to me. Of course, in theory,

14191
09:42:02,960 --> 09:42:04,640
you would probably want to create some

14192
09:42:04,640 --> 09:42:07,200
sort of functions folder or stuff like

14193
09:42:07,200 --> 09:42:09,200
that, but it would be empty. So, that's

14194
09:42:09,200 --> 09:42:10,800
the reason or it would only have this

14195
09:42:10,800 --> 09:42:12,880
one file. So that's the reason why I

14196
09:42:12,880 --> 09:42:14,960
store the try catch file in the hooks

14197
09:42:14,960 --> 09:42:16,720
folder even though it's not really a

14198
09:42:16,720 --> 09:42:18,640
hook. And the same thing is also true

14199
09:42:18,640 --> 09:42:21,520
for um use construct. This won't really

14200
09:42:21,520 --> 09:42:23,756
be a hook. It will be just a function.

14201
09:42:23,756 --> 09:42:25,756
Nevertheless, it makes a lot of sense to

14202
09:42:25,756 --> 09:42:27,840
store it inside of here. And also this

14203
09:42:27,840 --> 09:42:30,080
shouldn't be use construct but use

14204
09:42:30,080 --> 09:42:32,960
construct URL. So this will make a bit

14205
09:42:32,960 --> 09:42:35,040
more sense. Then inside of here we want

14206
09:42:35,040 --> 09:42:37,200
to create an export function. This will

14207
09:42:37,200 --> 09:42:41,200
be use construct URL. And then we want

14208
09:42:41,200 --> 09:42:43,276
to get the key in the params. This will

14209
09:42:43,276 --> 09:42:45,436
be of type string. And then we can just

14210
09:42:45,436 --> 09:42:47,360
open it. Inside of here we want to

14211
09:42:47,360 --> 09:42:49,436
create a return statement. And we will

14212
09:42:49,436 --> 09:42:52,080
construct the URL here. This means we

14213
09:42:52,080 --> 09:42:54,480
can use optics. Then if I go back to my

14214
09:42:54,480 --> 09:42:56,640
admin course card, we can first of all

14215
09:42:56,640 --> 09:43:00,960
copy this https colon / slash. We can

14216
09:43:00,960 --> 09:43:03,200
paste it inside of here. Then what was

14217
09:43:03,200 --> 09:43:06,080
the next value? The next value was the

14218
09:43:06,080 --> 09:43:08,160
bucket name. This means we can use

14219
09:43:08,160 --> 09:43:10,960
dynamic values. We can get our envy

14220
09:43:10,960 --> 09:43:13,200
variable from the lip folder and we want

14221
09:43:13,200 --> 09:43:15,916
to get the bucket name. So next public

14222
09:43:15,916 --> 09:43:19,120
s3 bucket name images. Okay. And then

14223
09:43:19,120 --> 09:43:21,276
the next value we can again go back. So

14224
09:43:21,276 --> 09:43:23,520
bucket name then it was dofly.s

14225
09:43:23,520 --> 09:43:25,360
storage.tigus.deaf.

14226
09:43:25,360 --> 09:43:27,436
We want to copy that paste it right

14227
09:43:27,436 --> 09:43:30,160
here. And then we want to add a slash

14228
09:43:30,160 --> 09:43:32,800
and the next value will be the key. This

14229
09:43:32,800 --> 09:43:34,880
means again a dynamic value. And then

14230
09:43:34,880 --> 09:43:38,400
key. And this is our URL. again https

14231
09:43:38,400 --> 09:43:40,320
col//bucket

14232
09:43:40,320 --> 09:43:41,520
name.fly.s

14233
09:43:41,520 --> 09:43:44,520
storage.htigquest.deaf/dynamic

14234
09:43:44,560 --> 09:43:47,360
value key and this should already be it.

14235
09:43:47,360 --> 09:43:49,276
One thing which we can do is maybe also

14236
09:43:49,276 --> 09:43:51,840
add a return type right uh why not this

14237
09:43:51,840 --> 09:43:53,680
will be of type string. This means the

14238
09:43:53,680 --> 09:43:55,520
return type of this function is a

14239
09:43:55,520 --> 09:43:57,436
string. As you see we don't have to do

14240
09:43:57,436 --> 09:43:59,276
that because it's already inferred but

14241
09:43:59,276 --> 09:44:01,680
it's always nice to explicitly mention

14242
09:44:01,680 --> 09:44:04,240
it. So we can again close this file and

14243
09:44:04,240 --> 09:44:06,800
we can also delete this comment and we

14244
09:44:06,800 --> 09:44:10,080
can use this hook this function and get

14245
09:44:10,080 --> 09:44:12,400
or construct the URL. So above the

14246
09:44:12,400 --> 09:44:14,160
return statement I will create a

14247
09:44:14,160 --> 09:44:17,276
constant farm nail URL and this will be

14248
09:44:17,276 --> 09:44:20,320
equal to use construct URL. This is

14249
09:44:20,320 --> 09:44:22,720
imported from the hooks folder and as an

14250
09:44:22,720 --> 09:44:25,120
argument we want to pass the file key.

14251
09:44:25,120 --> 09:44:27,840
This means data dofile key and then

14252
09:44:27,840 --> 09:44:30,080
instead of passing the file key as a

14253
09:44:30,080 --> 09:44:33,120
source we will pass the thumbnail URL.

14254
09:44:33,120 --> 09:44:35,276
This means if I again go back I can

14255
09:44:35,276 --> 09:44:38,000
close this and again do a hard refresh I

14256
09:44:38,000 --> 09:44:40,880
get a new error invalid source prop blah

14257
09:44:40,880 --> 09:44:44,560
blah blah or next image host name la is

14258
09:44:44,560 --> 09:44:46,720
not configured. So what's the problem?

14259
09:44:46,720 --> 09:44:49,756
Well nextjs or not next.js but the image

14260
09:44:49,756 --> 09:44:52,160
component optimizes your images. This

14261
09:44:52,160 --> 09:44:55,040
has a resource cost. And if we again we

14262
09:44:55,040 --> 09:44:57,596
want to look at our application from an

14263
09:44:57,596 --> 09:44:59,840
attacker's uh perspective. If an

14264
09:44:59,840 --> 09:45:01,756
attacker sees that, what would he say?

14265
09:45:01,756 --> 09:45:04,240
Damn, this user optimizes images for

14266
09:45:04,240 --> 09:45:07,360
free. Let me just pass my URL. You don't

14267
09:45:07,360 --> 09:45:09,680
want that. And this is also a security.

14268
09:45:09,680 --> 09:45:11,436
You could say they try to prevent

14269
09:45:11,436 --> 09:45:13,040
something like that. And that's the

14270
09:45:13,040 --> 09:45:15,200
reason why you have to specifically pass

14271
09:45:15,200 --> 09:45:17,840
the host name in your configuration file

14272
09:45:17,840 --> 09:45:19,916
because with that you say, hey, Nex.js

14273
09:45:19,916 --> 09:45:23,360
JS or Versel only optimize these images

14274
09:45:23,360 --> 09:45:25,360
from this host name. If it's a different

14275
09:45:25,360 --> 09:45:28,160
host name then don't optimize the files.

14276
09:45:28,160 --> 09:45:30,000
So we can first of all copy the host

14277
09:45:30,000 --> 09:45:31,840
name which they already provide us with

14278
09:45:31,840 --> 09:45:34,160
here. Then we can go back to the next

14279
09:45:34,160 --> 09:45:36,880
doconfig file. And inside of here we

14280
09:45:36,880 --> 09:45:38,960
want to get the images property. This is

14281
09:45:38,960 --> 09:45:41,276
an object. Inside of here we can get

14282
09:45:41,276 --> 09:45:44,080
remote patterns. Sorry this is my Gmail.

14283
09:45:44,080 --> 09:45:46,000
And this will be equal to an array. And

14284
09:45:46,000 --> 09:45:48,320
then also we want to open an object

14285
09:45:48,320 --> 09:45:51,436
inside of here because the object is the

14286
09:45:51,436 --> 09:45:53,520
individual host name if this makes

14287
09:45:53,520 --> 09:45:55,916
sense. So we will get a few properties.

14288
09:45:55,916 --> 09:45:58,160
First of all the host name. This is what

14289
09:45:58,160 --> 09:46:00,720
I just copied. So this is the URL. Then

14290
09:46:00,720 --> 09:46:02,960
we have to also pass the port and the

14291
09:46:02,960 --> 09:46:05,596
port will be an empty string. And then

14292
09:46:05,596 --> 09:46:07,756
we want to also pass the host or not

14293
09:46:07,756 --> 09:46:10,320
host but the protocol and this will be

14294
09:46:10,320 --> 09:46:12,640
HTTPS. I don't know what's wrong.

14295
09:46:12,640 --> 09:46:14,400
Normally they also give us auto

14296
09:46:14,400 --> 09:46:17,520
completion. Probably some intern made a

14297
09:46:17,520 --> 09:46:20,320
mistake. So yeah, it should be https.

14298
09:46:20,320 --> 09:46:22,560
And if I open my terminal, I get an

14299
09:46:22,560 --> 09:46:25,680
error here. Hm. So they've found or they

14300
09:46:25,680 --> 09:46:27,680
tried to restart the server. It didn't

14301
09:46:27,680 --> 09:46:30,240
work. So I will just restart it myself.

14302
09:46:30,240 --> 09:46:32,160
Maybe this will fix the problem. Who

14303
09:46:32,160 --> 09:46:34,480
knows? So if I go back and do a hard

14304
09:46:34,480 --> 09:46:37,120
refresh, will this error go away? Yeah,

14305
09:46:37,120 --> 09:46:39,200
it works again. So this is the image.

14306
09:46:39,200 --> 09:46:41,436
And in my terminal, I also don't get any

14307
09:46:41,436 --> 09:46:43,360
errors anymore. This means we can close

14308
09:46:43,360 --> 09:46:46,160
the next doconfig file. And yeah, again,

14309
09:46:46,160 --> 09:46:48,720
we get the image. It's a bit too big as

14310
09:46:48,720 --> 09:46:50,720
you see, but we will fix it a bit later

14311
09:46:50,720 --> 09:46:53,436
on. For now, I want to style the image.

14312
09:46:53,436 --> 09:46:55,916
This means we can add a class name and

14313
09:46:55,916 --> 09:46:58,240
this will be width of full rounded top

14314
09:46:58,240 --> 09:47:01,436
which will be LG aspect and this will be

14315
09:47:01,436 --> 09:47:05,120
video. This is like a 16x9 aspect ratio.

14316
09:47:05,120 --> 09:47:07,520
Then we can also say height full and

14317
09:47:07,520 --> 09:47:10,000
object which will be cover. So this

14318
09:47:10,000 --> 09:47:12,080
should already look quite nice. Yeah,

14319
09:47:12,080 --> 09:47:14,240
it's a bit too big as you see. But don't

14320
09:47:14,240 --> 09:47:16,720
worry, we will fix it later on. Then we

14321
09:47:16,720 --> 09:47:19,120
can continue. This is our image. As the

14322
09:47:19,120 --> 09:47:21,040
next step, I want to render the title,

14323
09:47:21,040 --> 09:47:23,596
small description, a bit of info like

14324
09:47:23,596 --> 09:47:25,916
the duration and also the level and then

14325
09:47:25,916 --> 09:47:28,080
the button to edit the course. This

14326
09:47:28,080 --> 09:47:29,840
means we can go underneath the image. We

14327
09:47:29,840 --> 09:47:32,000
want to get the cart content component.

14328
09:47:32,000 --> 09:47:33,916
And in the cart content, we can get the

14329
09:47:33,916 --> 09:47:37,360
link component from next /link. Inside

14330
09:47:37,360 --> 09:47:39,596
of here, uh we I want to first of all

14331
09:47:39,596 --> 09:47:42,640
render the title. This means data.title.

14332
09:47:42,640 --> 09:47:44,000
And for the link, we have to also

14333
09:47:44,000 --> 09:47:46,240
provide an href. And then inside of

14334
09:47:46,240 --> 09:47:48,320
here, I want to use optics because I

14335
09:47:48,320 --> 09:47:51,200
want to pass the course ID into the URL.

14336
09:47:51,200 --> 09:47:52,240
This means this will be

14337
09:47:52,240 --> 09:47:55,240
/admin/courses/data.

14338
09:47:56,880 --> 09:47:58,960
ID because we when the user clicks on

14339
09:47:58,960 --> 09:48:01,360
the title I want to redirect the user to

14340
09:48:01,360 --> 09:48:03,200
the edit route. Currently we don't have

14341
09:48:03,200 --> 09:48:05,596
an edit route but later on we will have

14342
09:48:05,596 --> 09:48:07,840
one. Then we can also give it a class

14343
09:48:07,840 --> 09:48:10,720
name and this will be font medium text

14344
09:48:10,720 --> 09:48:14,720
LG line clamp 2. Line clamp 2 means that

14345
09:48:14,720 --> 09:48:16,880
if the text is too big it will just be

14346
09:48:16,880 --> 09:48:19,436
limited at two lines. So it won't create

14347
09:48:19,436 --> 09:48:21,596
four lines or five lines or anything

14348
09:48:21,596 --> 09:48:24,400
like that. The limit is two lines. We

14349
09:48:24,400 --> 09:48:26,960
can also say on hover underline so a

14350
09:48:26,960 --> 09:48:29,200
nice little animation and then also

14351
09:48:29,200 --> 09:48:32,160
group dash hover and this will be text

14352
09:48:32,160 --> 09:48:34,880
primary and also transition which will

14353
09:48:34,880 --> 09:48:37,200
be colors. So this should already look

14354
09:48:37,200 --> 09:48:39,756
quite nice and yeah this is our title

14355
09:48:39,756 --> 09:48:42,400
subscribe now. So we can again go back

14356
09:48:42,400 --> 09:48:45,040
and you know what this big image kind of

14357
09:48:45,040 --> 09:48:47,520
I don't know it breaks everything so I

14358
09:48:47,520 --> 09:48:49,680
think we should maybe update this a bit.

14359
09:48:49,680 --> 09:48:52,320
So we can go back to our page.tsx tsx

14360
09:48:52,320 --> 09:48:54,400
and inside of here I want to create a

14361
09:48:54,400 --> 09:48:56,480
grid layout because honestly the image

14362
09:48:56,480 --> 09:48:58,960
is just too big. So we can give this

14363
09:48:58,960 --> 09:49:01,840
wrapper div uh a class name and this

14364
09:49:01,840 --> 09:49:04,640
will be grid then also grid columns of

14365
09:49:04,640 --> 09:49:07,596
one this will be on the mobile screen or

14366
09:49:07,596 --> 09:49:10,320
bigger this will be grid columns two and

14367
09:49:10,320 --> 09:49:12,560
then on MD or bigger this will be again

14368
09:49:12,560 --> 09:49:15,680
grid columns one and on LG or bigger

14369
09:49:15,680 --> 09:49:18,720
this will be grid columns of two. Also I

14370
09:49:18,720 --> 09:49:20,720
want to give it a gap and this will be

14371
09:49:20,720 --> 09:49:22,640
seven. So this should already look way

14372
09:49:22,640 --> 09:49:24,880
better and yes as you see it takes less

14373
09:49:24,880 --> 09:49:27,360
space and with that it also looks

14374
09:49:27,360 --> 09:49:29,520
better. This means we can go back to the

14375
09:49:29,520 --> 09:49:32,400
admin course card again to our component

14376
09:49:32,400 --> 09:49:34,640
and we can continue. So we have finished

14377
09:49:34,640 --> 09:49:36,320
with the title and what's the next

14378
09:49:36,320 --> 09:49:38,160
thing? Well the next thing is our

14379
09:49:38,160 --> 09:49:40,000
description. This means underneath the

14380
09:49:40,000 --> 09:49:42,560
link component we can create a p tag and

14381
09:49:42,560 --> 09:49:44,720
inside of here we want to get a data do

14382
09:49:44,720 --> 09:49:47,120
small description. We can also style it.

14383
09:49:47,120 --> 09:49:49,276
So we can give it a class name first of

14384
09:49:49,276 --> 09:49:52,080
all line clamp two. This means the text

14385
09:49:52,080 --> 09:49:54,400
will have a maximum you could say

14386
09:49:54,400 --> 09:49:56,640
length. So it will only again take two

14387
09:49:56,640 --> 09:49:59,360
lines not anymore. It can be smaller. It

14388
09:49:59,360 --> 09:50:01,520
can be one line but it can't be bigger

14389
09:50:01,520 --> 09:50:03,916
than two lines. Then we can also say

14390
09:50:03,916 --> 09:50:07,040
text which will be SM text muted

14391
09:50:07,040 --> 09:50:09,916
foreground to have this grayish color

14392
09:50:09,916 --> 09:50:11,916
leading which will be tight. What is

14393
09:50:11,916 --> 09:50:14,000
leading? This is the line height and

14394
09:50:14,000 --> 09:50:16,880
then also margin top two. So as you see

14395
09:50:16,880 --> 09:50:19,040
this is our description. It's quite

14396
09:50:19,040 --> 09:50:21,360
small but nevertheless we have a

14397
09:50:21,360 --> 09:50:23,680
description. So what's the next thing?

14398
09:50:23,680 --> 09:50:25,436
Well as a next step I want to render

14399
09:50:25,436 --> 09:50:27,840
like a little bit how would you say like

14400
09:50:27,840 --> 09:50:30,480
little info slots. This means first of

14401
09:50:30,480 --> 09:50:33,596
all the duration and then also the um

14402
09:50:33,596 --> 09:50:37,040
level. So intermediate hard or advanced

14403
09:50:37,040 --> 09:50:39,436
or beginner. This means we can go back

14404
09:50:39,436 --> 09:50:41,520
and we want to go underneath the P tag

14405
09:50:41,520 --> 09:50:43,276
and we want to create a new div. This

14406
09:50:43,276 --> 09:50:45,360
will be the wrapper div. So we can give

14407
09:50:45,360 --> 09:50:47,520
it a class name. This will be margin top

14408
09:50:47,520 --> 09:50:50,800
four flex items which will be center and

14409
09:50:50,800 --> 09:50:54,320
gap x5 to have some spacing in between

14410
09:50:54,320 --> 09:50:56,640
because we will have two slots. Then we

14411
09:50:56,640 --> 09:50:58,320
want to create another div and this will

14412
09:50:58,320 --> 09:51:00,400
be the wrapper div for first of all the

14413
09:51:00,400 --> 09:51:02,560
duration. Inside of here I want to get

14414
09:51:02,560 --> 09:51:04,880
the timer icon. This is imported from

14415
09:51:04,880 --> 09:51:06,960
lucid react. And I want to give it a

14416
09:51:06,960 --> 09:51:09,840
class name. This will be size six. This

14417
09:51:09,840 --> 09:51:12,880
means width six and height six padding

14418
09:51:12,880 --> 09:51:16,000
one and rounded which will be MD. So it

14419
09:51:16,000 --> 09:51:18,160
won't be very rounded. It will have a

14420
09:51:18,160 --> 09:51:20,640
light rounding. Then the text will be

14421
09:51:20,640 --> 09:51:22,800
primary. This means the orange color.

14422
09:51:22,800 --> 09:51:25,040
And BG will be primary but this

14423
09:51:25,040 --> 09:51:26,880
shouldn't take the full opacity. This

14424
09:51:26,880 --> 09:51:31,276
means / 10 10% opacity. And if I again

14425
09:51:31,276 --> 09:51:33,360
go back you will see yeah this looks

14426
09:51:33,360 --> 09:51:35,596
kind of nice. Nevertheless, we still

14427
09:51:35,596 --> 09:51:38,320
want to also render the duration itself.

14428
09:51:38,320 --> 09:51:40,560
This means underneath the timer icon but

14429
09:51:40,560 --> 09:51:43,200
still in the div we can get a p tag and

14430
09:51:43,200 --> 09:51:45,840
we want to get the data dot duration.

14431
09:51:45,840 --> 09:51:48,720
Also I want to append an h at the end.

14432
09:51:48,720 --> 09:51:51,840
So this means xyz hours. And we can of

14433
09:51:51,840 --> 09:51:54,000
course also style it and this will be

14434
09:51:54,000 --> 09:51:57,520
text sm and text muted foreground. This

14435
09:51:57,520 --> 09:52:00,400
means a grayish color as you see. Yeah

14436
09:52:00,400 --> 09:52:02,480
this is good but it should be aligned

14437
09:52:02,480 --> 09:52:04,400
horizontally. Currently it's aligned as

14438
09:52:04,400 --> 09:52:06,880
a column. This means flex column. So we

14439
09:52:06,880 --> 09:52:08,960
can style this diff and this will be

14440
09:52:08,960 --> 09:52:12,640
flex item center and gap x of two to

14441
09:52:12,640 --> 09:52:15,040
have some spacing in between and this

14442
09:52:15,040 --> 09:52:17,360
already looks quite nice. Then we can

14443
09:52:17,360 --> 09:52:19,680
copy paste this diff one more time and

14444
09:52:19,680 --> 09:52:21,840
this will be for the level. So instead

14445
09:52:21,840 --> 09:52:24,240
of rendering a timer icon I want to get

14446
09:52:24,240 --> 09:52:26,800
the school icon and for the p tag

14447
09:52:26,800 --> 09:52:29,276
instead of rendering the data duration

14448
09:52:29,276 --> 09:52:31,596
we want to get the level. Uh we can also

14449
09:52:31,596 --> 09:52:34,400
delete the h because this isn't an hour

14450
09:52:34,400 --> 09:52:37,680
anymore. And if we go back 50 hours and

14451
09:52:37,680 --> 09:52:40,160
beginner very cool. And as the last

14452
09:52:40,160 --> 09:52:42,240
step, we want to display a button down

14453
09:52:42,240 --> 09:52:44,720
below to edit the course. This means we

14454
09:52:44,720 --> 09:52:46,560
can go back. We want to go underneath

14455
09:52:46,560 --> 09:52:48,800
this div and this div. So just above the

14456
09:52:48,800 --> 09:52:50,960
card content and we can get the link

14457
09:52:50,960 --> 09:52:53,360
component or we already imported it.

14458
09:52:53,360 --> 09:52:55,360
This means we can open it and inside of

14459
09:52:55,360 --> 09:52:58,560
here I want to just say edit course.

14460
09:52:58,560 --> 09:53:01,040
Also I want to render an icon. This

14461
09:53:01,040 --> 09:53:03,756
means I can get the arrow uh white icon

14462
09:53:03,756 --> 09:53:06,560
from lucid react. This is self-closing.

14463
09:53:06,560 --> 09:53:08,640
And then I can give it a class name

14464
09:53:08,640 --> 09:53:10,880
which will be size four. As you see the

14465
09:53:10,880 --> 09:53:12,640
link currently complains and that's

14466
09:53:12,640 --> 09:53:15,436
because we have to pass an href. And for

14467
09:53:15,436 --> 09:53:17,916
the href, I want to again pass up takes

14468
09:53:17,916 --> 09:53:19,840
because when the user clicks on this

14469
09:53:19,840 --> 09:53:22,240
button, we want to redirect the user to

14470
09:53:22,240 --> 09:53:24,480
this edit route. This means um we can

14471
09:53:24,480 --> 09:53:26,720
just scroll to the top and we can copy

14472
09:53:26,720 --> 09:53:29,520
this URL. So this href I will copy it

14473
09:53:29,520 --> 09:53:31,916
and then again paste it down below. And

14474
09:53:31,916 --> 09:53:35,276
also after this data do ID I want to add

14475
09:53:35,276 --> 09:53:37,840
/edit. The same thing is also true for

14476
09:53:37,840 --> 09:53:41,680
this title or this href slashedit. Yeah

14477
09:53:41,680 --> 09:53:43,916
this should already be it. This means if

14478
09:53:43,916 --> 09:53:46,640
we again go back. Yeah this is a link

14479
09:53:46,640 --> 09:53:48,960
but this should look like a shared CN

14480
09:53:48,960 --> 09:53:51,040
button. This means we can give the link

14481
09:53:51,040 --> 09:53:53,596
a class name. And as you all know what

14482
09:53:53,596 --> 09:53:55,680
will we use? We will use the button

14483
09:53:55,680 --> 09:53:58,640
variance function. we can invoke it and

14484
09:53:58,640 --> 09:54:01,596
then we want to also destructure it

14485
09:54:01,596 --> 09:54:04,000
because um we want to give it the width

14486
09:54:04,000 --> 09:54:06,800
full. This means we can add a class name

14487
09:54:06,800 --> 09:54:08,800
and then for the class name this will be

14488
09:54:08,800 --> 09:54:11,360
width full. As you see the button takes

14489
09:54:11,360 --> 09:54:13,200
the whole width and this is already way

14490
09:54:13,200 --> 09:54:15,040
better. Nevertheless, we need some

14491
09:54:15,040 --> 09:54:17,120
margin to the top. This means we can

14492
09:54:17,120 --> 09:54:19,680
also add a margin top which will be

14493
09:54:19,680 --> 09:54:22,160
four. And this is already very very

14494
09:54:22,160 --> 09:54:24,800
nice. Nevertheless, we have one problem.

14495
09:54:24,800 --> 09:54:27,520
You see this is our cart but on the top

14496
09:54:27,520 --> 09:54:30,160
it literally has some padding. I don't

14497
09:54:30,160 --> 09:54:33,040
want that. This looks ugly. So we can go

14498
09:54:33,040 --> 09:54:35,276
back. We can go to the main div and we

14499
09:54:35,276 --> 09:54:38,560
want to also say padding Y will be zero

14500
09:54:38,560 --> 09:54:41,276
and gap will be zero. This means if we

14501
09:54:41,276 --> 09:54:43,840
go back yeah this already looks better

14502
09:54:43,840 --> 09:54:46,160
but the bottom is kind of broken. This

14503
09:54:46,160 --> 09:54:49,040
means our content. So we can also style

14504
09:54:49,040 --> 09:54:51,520
our cart content itself and we can give

14505
09:54:51,520 --> 09:54:54,080
it a class name and this will be padding

14506
09:54:54,080 --> 09:54:56,880
4. And as you see this also looks way

14507
09:54:56,880 --> 09:54:59,436
better. So the admin cart is almost

14508
09:54:59,436 --> 09:55:02,000
finished and we want to also uh render

14509
09:55:02,000 --> 09:55:04,640
the drop-down menu. This means we can go

14510
09:55:04,640 --> 09:55:06,800
back into this div. So here I created

14511
09:55:06,800 --> 09:55:09,040
this dummy diff and first of all we want

14512
09:55:09,040 --> 09:55:10,880
to give it a class name because this

14513
09:55:10,880 --> 09:55:13,436
will be positioned absolutely on the top

14514
09:55:13,436 --> 09:55:16,480
right corner. So this will be absolute

14515
09:55:16,480 --> 09:55:18,560
top which will be two and then also

14516
09:55:18,560 --> 09:55:21,120
right two. Then we want to give it a Z

14517
09:55:21,120 --> 09:55:23,436
index and this will be 10. Inside of

14518
09:55:23,436 --> 09:55:25,840
this div as mentioned I want to create a

14519
09:55:25,840 --> 09:55:28,000
drop-down menu. This means we can get

14520
09:55:28,000 --> 09:55:30,480
the drop-down menu component from the

14521
09:55:30,480 --> 09:55:32,800
components. We want to open it. Inside

14522
09:55:32,800 --> 09:55:35,200
of here we can get a drop-down menu

14523
09:55:35,200 --> 09:55:38,240
trigger. This is also imported from the

14524
09:55:38,240 --> 09:55:40,560
components. Then inside of here I want

14525
09:55:40,560 --> 09:55:42,640
to render a button. And since this is a

14526
09:55:42,640 --> 09:55:44,960
component in a component, I have to also

14527
09:55:44,960 --> 09:55:47,276
give the drop-down menu trigger an ask

14528
09:55:47,276 --> 09:55:49,756
child property. Inside of here, I can

14529
09:55:49,756 --> 09:55:51,436
get the button component from the

14530
09:55:51,436 --> 09:55:53,596
components. And the button needs a

14531
09:55:53,596 --> 09:55:56,560
variant. The variant will be secondary.

14532
09:55:56,560 --> 09:55:58,960
Then uh the size, this will be icon

14533
09:55:58,960 --> 09:56:00,800
because it shouldn't be too big. And

14534
09:56:00,800 --> 09:56:02,800
then for the button itself, I want to

14535
09:56:02,800 --> 09:56:05,520
get a more vertical icon. This is

14536
09:56:05,520 --> 09:56:07,756
imported from Lucid React. And then I

14537
09:56:07,756 --> 09:56:09,840
want to give it a class name which will

14538
09:56:09,840 --> 09:56:12,880
be size four. As you see, we should see

14539
09:56:12,880 --> 09:56:14,800
the trigger or the button here. And yes,

14540
09:56:14,800 --> 09:56:17,436
it looks quite nice. The only problem is

14541
09:56:17,436 --> 09:56:19,680
if I click on it, literally nothing

14542
09:56:19,680 --> 09:56:21,840
happens. This means we want to create

14543
09:56:21,840 --> 09:56:24,400
drop-down menu content. So, underneath

14544
09:56:24,400 --> 09:56:26,640
the drop-own menu trigger, we can get

14545
09:56:26,640 --> 09:56:29,360
drop or the drop-down menu content

14546
09:56:29,360 --> 09:56:32,160
component imported from the components.

14547
09:56:32,160 --> 09:56:34,720
And this drop-down menu content needs

14548
09:56:34,720 --> 09:56:37,200
one property, one key property, which is

14549
09:56:37,200 --> 09:56:39,200
the align property. I mean you don't

14550
09:56:39,200 --> 09:56:41,200
have to define it because as a default

14551
09:56:41,200 --> 09:56:44,400
it will just um select center but I want

14552
09:56:44,400 --> 09:56:46,960
to align this drop-own menu content to

14553
09:56:46,960 --> 09:56:49,680
the right side. This means end. And if I

14554
09:56:49,680 --> 09:56:51,840
click on it again nothing happens or we

14555
09:56:51,840 --> 09:56:54,000
get this little thingy but of course the

14556
09:56:54,000 --> 09:56:56,560
content itself is missing. Also we can

14557
09:56:56,560 --> 09:56:58,800
give it a class name with a width and

14558
09:56:58,800 --> 09:57:01,120
this will be 48. And then in the

14559
09:57:01,120 --> 09:57:03,520
drop-own menu content we want to render

14560
09:57:03,520 --> 09:57:06,560
drop-down menu items. So we can get the

14561
09:57:06,560 --> 09:57:08,880
drop-own menu item component from the

14562
09:57:08,880 --> 09:57:11,596
components and inside of here I want to

14563
09:57:11,596 --> 09:57:13,680
render the link component. The thing is

14564
09:57:13,680 --> 09:57:16,000
since this is a component in a component

14565
09:57:16,000 --> 09:57:18,160
we have to give the drop-down menu item

14566
09:57:18,160 --> 09:57:21,040
an as child property. Then for the link

14567
09:57:21,040 --> 09:57:23,360
we want to give it an href and if the

14568
09:57:23,360 --> 09:57:25,120
user clicks on the link we want to

14569
09:57:25,120 --> 09:57:27,840
redirect the user to edit um or to the

14570
09:57:27,840 --> 09:57:30,000
edit page. This means we can just copy

14571
09:57:30,000 --> 09:57:32,960
the href from our previous link and

14572
09:57:32,960 --> 09:57:35,276
paste it inside of here. Then in the

14573
09:57:35,276 --> 09:57:37,840
link um I want to first of all get the

14574
09:57:37,840 --> 09:57:40,320
pencil icon from Lucid React. This is

14575
09:57:40,320 --> 09:57:42,560
self-closing. And then for the class

14576
09:57:42,560 --> 09:57:45,436
name this will be size 4 and margin

14577
09:57:45,436 --> 09:57:47,756
right two. And after the pencil but

14578
09:57:47,756 --> 09:57:50,240
still in the link um I want you to say

14579
09:57:50,240 --> 09:57:53,276
edit course. So I guess it's time to

14580
09:57:53,276 --> 09:57:55,120
test it out. And what do we see right

14581
09:57:55,120 --> 09:57:57,756
here? Yes, edit course. And if I click

14582
09:57:57,756 --> 09:58:00,320
on it I will get redirected but we get a

14583
09:58:00,320 --> 09:58:02,640
four not found. And that's because this

14584
09:58:02,640 --> 09:58:05,756
edit route right now does not exist.

14585
09:58:05,756 --> 09:58:07,756
Then I want to create one more drop-down

14586
09:58:07,756 --> 09:58:10,400
menu item and this will be to preview

14587
09:58:10,400 --> 09:58:12,640
the course. This means we can just copy

14588
09:58:12,640 --> 09:58:14,800
paste drop-own menu item. So the

14589
09:58:14,800 --> 09:58:17,520
component instead of saying edit course

14590
09:58:17,520 --> 09:58:20,320
we will say preview for the icon this

14591
09:58:20,320 --> 09:58:23,040
will be the I icon imported from Lucid

14592
09:58:23,040 --> 09:58:26,320
React. And for the href um this will be

14593
09:58:26,320 --> 09:58:29,320
slashcourses/data.sluck.

14594
09:58:30,080 --> 09:58:31,840
And then I want to also delete the

14595
09:58:31,840 --> 09:58:34,480
slashedit at the end. This means if I

14596
09:58:34,480 --> 09:58:36,560
again go back. Yes, this looks quite

14597
09:58:36,560 --> 09:58:38,960
good. And then as the last item I want

14598
09:58:38,960 --> 09:58:41,436
to display a delete button. This means

14599
09:58:41,436 --> 09:58:43,360
we can go back underneath the drop-own

14600
09:58:43,360 --> 09:58:46,720
menu item. We can get the drop-down menu

14601
09:58:46,720 --> 09:58:48,960
separator. This is imported from the

14602
09:58:48,960 --> 09:58:51,200
components and it's self-closing. And

14603
09:58:51,200 --> 09:58:53,680
here we can get the drop-down menu or we

14604
09:58:53,680 --> 09:58:55,520
can just copy paste again this drop-own

14605
09:58:55,520 --> 09:58:57,756
menu item component underneath the

14606
09:58:57,756 --> 09:59:00,240
separator for the text. This will be

14607
09:59:00,240 --> 09:59:03,120
delete course for the link. This will be

14608
09:59:03,120 --> 09:59:04,800
/admin

14609
09:59:04,800 --> 09:59:06,320
/courses

14610
09:59:06,320 --> 09:59:07,916
/data.

14611
09:59:07,916 --> 09:59:10,880
ID and then slash delete. And this

14612
09:59:10,880 --> 09:59:12,960
should already be it. Maybe we can also

14613
09:59:12,960 --> 09:59:15,040
update. We have to update the icon of

14614
09:59:15,040 --> 09:59:17,680
course. So this will be the trash 2 icon

14615
09:59:17,680 --> 09:59:20,080
imported from Lucid React. And I want to

14616
09:59:20,080 --> 09:59:22,720
also give it a color. This means text

14617
09:59:22,720 --> 09:59:25,520
which will be uh destructive. If I save

14618
09:59:25,520 --> 09:59:28,160
this and again go back. Yes, this looks

14619
09:59:28,160 --> 09:59:30,640
absolutely beautiful. So, we are

14620
09:59:30,640 --> 09:59:32,560
finished with our admin course card or

14621
09:59:32,560 --> 09:59:34,720
in other words with our general course

14622
09:59:34,720 --> 09:59:37,276
overview route and as the next step I

14623
09:59:37,276 --> 09:59:40,000
want to create the edit course route.

14624
09:59:40,000 --> 09:59:43,200
So, to create our edit route, we have to

14625
09:59:43,200 --> 09:59:44,960
first of all create a new route. Who

14626
09:59:44,960 --> 09:59:46,720
would have thought? Because if I click

14627
09:59:46,720 --> 09:59:48,720
on edit course, what will happen? Well,

14628
09:59:48,720 --> 09:59:51,040
we will get redirected and as you see

14629
09:59:51,040 --> 09:59:53,436
this is a 44 not found. The route does

14630
09:59:53,436 --> 09:59:55,840
not exist. But how does the URL

14631
09:59:55,840 --> 09:59:58,160
structure look like? Well,

14632
09:59:58,160 --> 10:00:00,480
slashadmin/courses

14633
10:00:00,480 --> 10:00:03,916
slash a course ID itself/add

14634
10:00:03,916 --> 10:00:06,480
uh slashedit. This means we can also

14635
10:00:06,480 --> 10:00:09,436
update our code structure, right? We can

14636
10:00:09,436 --> 10:00:11,680
create a new route. So in the we want to

14637
10:00:11,680 --> 10:00:13,756
go into the app folder into the admin

14638
10:00:13,756 --> 10:00:16,000
folder into the courses folder and then

14639
10:00:16,000 --> 10:00:17,916
inside of here we want to create a

14640
10:00:17,916 --> 10:00:20,480
dynamic route because we want to get the

14641
10:00:20,480 --> 10:00:23,040
course ID. How do you create dynamic

14642
10:00:23,040 --> 10:00:26,320
routes in XJS? Well, you use array

14643
10:00:26,320 --> 10:00:28,880
brackets. So in the courses folder, we

14644
10:00:28,880 --> 10:00:31,200
can create a new folder. Since this is a

14645
10:00:31,200 --> 10:00:33,200
dynamic route, this will be array

14646
10:00:33,200 --> 10:00:35,040
brackets or we will right here create

14647
10:00:35,040 --> 10:00:37,360
array brackets. And then in the array

14648
10:00:37,360 --> 10:00:39,520
brackets, we will create the name. This

14649
10:00:39,520 --> 10:00:42,480
will be the course ID. In this folder,

14650
10:00:42,480 --> 10:00:44,480
we can create another folder because

14651
10:00:44,480 --> 10:00:46,640
again, how does the route structure look

14652
10:00:46,640 --> 10:00:50,720
like? Well, slashcourse id /edit. This

14653
10:00:50,720 --> 10:00:52,800
means we can go back and inside of here

14654
10:00:52,800 --> 10:00:55,360
we will create a new folder, a new route

14655
10:00:55,360 --> 10:00:57,756
called edit and then we can create a

14656
10:00:57,756 --> 10:01:00,640
page.tsx. Since this is a route we can

14657
10:01:00,640 --> 10:01:03,840
do or we can create an export default

14658
10:01:03,840 --> 10:01:07,040
function called edit route and then we

14659
10:01:07,040 --> 10:01:09,200
can just open this function. Inside of

14660
10:01:09,200 --> 10:01:11,436
here we can create a standard return

14661
10:01:11,436 --> 10:01:14,160
with a statement with a diff h1. And I

14662
10:01:14,160 --> 10:01:17,360
will say hello world yo. That means if I

14663
10:01:17,360 --> 10:01:19,756
go back and do a hard refresh, I should

14664
10:01:19,756 --> 10:01:22,400
see hello world. Yo, and that's exactly

14665
10:01:22,400 --> 10:01:24,400
what is happening. And also, by the way,

14666
10:01:24,400 --> 10:01:26,800
here's a quick shortcut. If you click on

14667
10:01:26,800 --> 10:01:29,596
commandB, the sidebar collapses. So,

14668
10:01:29,596 --> 10:01:32,320
this is this is very cool. As you see, I

14669
10:01:32,320 --> 10:01:35,040
love it. Oh, I love the component. So,

14670
10:01:35,040 --> 10:01:37,200
we can style or we can get started with

14671
10:01:37,200 --> 10:01:40,080
the route. So, um I will delete this H1.

14672
10:01:40,080 --> 10:01:41,916
We will leave the div. And I want to

14673
10:01:41,916 --> 10:01:44,320
create a new H1 for the content. This

14674
10:01:44,320 --> 10:01:46,800
will be edit course. and then colon

14675
10:01:46,800 --> 10:01:49,040
because I want to render the name of the

14676
10:01:49,040 --> 10:01:50,960
course. But for that we have to first of

14677
10:01:50,960 --> 10:01:53,520
all fetch the course itself the data for

14678
10:01:53,520 --> 10:01:56,000
the course. This means we want to also

14679
10:01:56,000 --> 10:01:59,200
create a new file in our data access

14680
10:01:59,200 --> 10:02:01,360
layer. This means we want to go into our

14681
10:02:01,360 --> 10:02:04,320
app folder into the data folder into the

14682
10:02:04,320 --> 10:02:06,640
admin folder and we want to create a new

14683
10:02:06,640 --> 10:02:10,400
file called admin-get-course

14684
10:02:10,400 --> 10:02:13,916
because this is a singular course.ts.

14685
10:02:13,916 --> 10:02:16,400
Again we want to import server only

14686
10:02:16,400 --> 10:02:18,480
because this function should only run

14687
10:02:18,480 --> 10:02:21,040
and should also only be called in server

14688
10:02:21,040 --> 10:02:23,360
or in other words uh in a server

14689
10:02:23,360 --> 10:02:26,000
environment. So in server components as

14690
10:02:26,000 --> 10:02:28,640
an example. Then what we want to do is

14691
10:02:28,640 --> 10:02:31,200
create an export function or export

14692
10:02:31,200 --> 10:02:33,200
async function because we will fetch

14693
10:02:33,200 --> 10:02:36,320
data. This will be called admin get

14694
10:02:36,320 --> 10:02:38,640
course. Uh and then we can just open the

14695
10:02:38,640 --> 10:02:40,640
function inside of here. We want to

14696
10:02:40,640 --> 10:02:42,800
first of all call the require admin

14697
10:02:42,800 --> 10:02:45,436
function because only admins should get

14698
10:02:45,436 --> 10:02:48,000
this data or should have the ability to

14699
10:02:48,000 --> 10:02:50,640
get this data and also view the data.

14700
10:02:50,640 --> 10:02:53,120
And then underneath this function we

14701
10:02:53,120 --> 10:02:55,120
want to get our data with Prisma because

14702
10:02:55,120 --> 10:02:57,200
we now validate that the user is

14703
10:02:57,200 --> 10:03:00,000
verified or has a valid user session and

14704
10:03:00,000 --> 10:03:02,720
is also an admin. So we can create a

14705
10:03:02,720 --> 10:03:05,276
constant data and this will be equal to

14706
10:03:05,276 --> 10:03:07,596
a rate Prisma. Prismos imported from the

14707
10:03:07,596 --> 10:03:10,720
lip folder dot course.find find unique

14708
10:03:10,720 --> 10:03:13,596
because we want to find one unique

14709
10:03:13,596 --> 10:03:15,840
singular whatever course I think you

14710
10:03:15,840 --> 10:03:17,756
understand what I mean so we can invoke

14711
10:03:17,756 --> 10:03:20,160
this the structured and here's the thing

14712
10:03:20,160 --> 10:03:22,320
since we want to find a specific course

14713
10:03:22,320 --> 10:03:24,720
we have to pass a wear property because

14714
10:03:24,720 --> 10:03:27,360
again if I don't pass a wear property we

14715
10:03:27,360 --> 10:03:29,916
will just get any course but I want to

14716
10:03:29,916 --> 10:03:32,000
find a specific one and what is

14717
10:03:32,000 --> 10:03:34,480
something unique what is the primary key

14718
10:03:34,480 --> 10:03:37,520
in our schema it's the ID this means I

14719
10:03:37,520 --> 10:03:39,756
want to find a course where the ID

14720
10:03:39,756 --> 10:03:42,400
matches the ID which I provide. This

14721
10:03:42,400 --> 10:03:44,880
means in the params we can get an ID

14722
10:03:44,880 --> 10:03:46,800
which will be of type string and then we

14723
10:03:46,800 --> 10:03:49,436
can pass it here for the ID. Then we

14724
10:03:49,436 --> 10:03:51,680
want to of course create an uh select

14725
10:03:51,680 --> 10:03:54,000
statement. And what do we want to get?

14726
10:03:54,000 --> 10:03:55,840
Well, we want to get an ID. So we can

14727
10:03:55,840 --> 10:03:58,560
set this to true. Maybe also a title,

14728
10:03:58,560 --> 10:04:01,200
then a description. I want to also get

14729
10:04:01,200 --> 10:04:04,320
the file key. Um for example, also the

14730
10:04:04,320 --> 10:04:06,880
price, then also the duration. And you

14731
10:04:06,880 --> 10:04:08,640
want to always set this to true as you

14732
10:04:08,640 --> 10:04:10,640
see because with that you select the

14733
10:04:10,640 --> 10:04:13,276
individual property then maybe also the

14734
10:04:13,276 --> 10:04:15,436
level. I pretty much want to get almost

14735
10:04:15,436 --> 10:04:18,080
everything. So um level then also the

14736
10:04:18,080 --> 10:04:21,596
status then also the slug itself and

14737
10:04:21,596 --> 10:04:24,640
also the small description and then also

14738
10:04:24,640 --> 10:04:27,276
at the end the category. This should be

14739
10:04:27,276 --> 10:04:29,680
it for now. Maybe we will have to update

14740
10:04:29,680 --> 10:04:32,400
it later on or we will have to update it

14741
10:04:32,400 --> 10:04:34,560
later on but for now this is fine

14742
10:04:34,560 --> 10:04:36,960
enough. Then underneath this constant

14743
10:04:36,960 --> 10:04:38,640
data, I want you to create an if

14744
10:04:38,640 --> 10:04:40,240
statement. Because here's the thing,

14745
10:04:40,240 --> 10:04:42,640
this data could be defined. We could get

14746
10:04:42,640 --> 10:04:45,120
a result, but it could also be null.

14747
10:04:45,120 --> 10:04:47,916
Because if the ID is incorrect, for

14748
10:04:47,916 --> 10:04:50,720
example, instead of passing this ID, I

14749
10:04:50,720 --> 10:04:53,120
will pass some dumb gibberish. Then the

14750
10:04:53,120 --> 10:04:55,120
data will not be defined. We won't get

14751
10:04:55,120 --> 10:04:57,276
any cause. This means we can create an

14752
10:04:57,276 --> 10:04:59,756
if statement and we want to say if we

14753
10:04:59,756 --> 10:05:01,916
don't get any data, then we want to

14754
10:05:01,916 --> 10:05:04,880
return not found. Not found is imported

14755
10:05:04,880 --> 10:05:07,360
from next slashnavigation and we can

14756
10:05:07,360 --> 10:05:09,840
then invoke it. What is not found? Good

14757
10:05:09,840 --> 10:05:12,480
question. Not found will trigger a four

14758
10:05:12,480 --> 10:05:15,520
for not found page. So it will redirect

14759
10:05:15,520 --> 10:05:18,960
you internally to a non not found route

14760
10:05:18,960 --> 10:05:21,680
and this not found route will display a

14761
10:05:21,680 --> 10:05:24,400
404 not found error. That's it. It's

14762
10:05:24,400 --> 10:05:26,400
quite simple. Again, you can also head

14763
10:05:26,400 --> 10:05:28,400
over to the YouTube uh to the not

14764
10:05:28,400 --> 10:05:30,320
YouTube but to the next.js JS

14765
10:05:30,320 --> 10:05:32,640
documentation to learn more about this

14766
10:05:32,640 --> 10:05:36,240
not found function and if we get data we

14767
10:05:36,240 --> 10:05:38,480
want to then also return the data. This

14768
10:05:38,480 --> 10:05:41,200
means we can go back to the page.tsx and

14769
10:05:41,200 --> 10:05:43,436
we can fetch the data. So above the

14770
10:05:43,436 --> 10:05:44,880
return statement we can create a

14771
10:05:44,880 --> 10:05:47,436
constant data and this will be equal to

14772
10:05:47,436 --> 10:05:50,240
a rate admin get course. We can invoke

14773
10:05:50,240 --> 10:05:52,880
it and as you see we get two errors. The

14774
10:05:52,880 --> 10:05:55,520
first problem is related to um marking

14775
10:05:55,520 --> 10:05:57,916
the function as asynchronous. This means

14776
10:05:57,916 --> 10:06:01,276
we can say export default async function

14777
10:06:01,276 --> 10:06:03,520
and the second error relates to our

14778
10:06:03,520 --> 10:06:06,160
arguments because the function expects

14779
10:06:06,160 --> 10:06:08,800
one argument but we pass zero. And

14780
10:06:08,800 --> 10:06:11,120
what's the argument? It's the ID. But

14781
10:06:11,120 --> 10:06:13,596
how can we get the ID? The ID is stored

14782
10:06:13,596 --> 10:06:16,160
in our URL. Well, here's the thing. This

14783
10:06:16,160 --> 10:06:18,560
is a dynamic folder, a dynamic route. I

14784
10:06:18,560 --> 10:06:20,320
mean the folder is not dynamic. It's

14785
10:06:20,320 --> 10:06:22,880
static. The route is dynamic. This means

14786
10:06:22,880 --> 10:06:25,596
we can get the key or yeah, the key in

14787
10:06:25,596 --> 10:06:28,400
this case. So this ID not key and we can

14788
10:06:28,400 --> 10:06:30,640
get it through our params. And here's

14789
10:06:30,640 --> 10:06:33,360
the thing in previous versions of Nex.js

14790
10:06:33,360 --> 10:06:35,596
you could just structure the params and

14791
10:06:35,596 --> 10:06:38,240
then get the ID itself the course ID.

14792
10:06:38,240 --> 10:06:41,200
But with NexJS15 they changed it up a

14793
10:06:41,200 --> 10:06:43,756
bit because the params are now um a

14794
10:06:43,756 --> 10:06:46,160
promise. This means what we can do is

14795
10:06:46,160 --> 10:06:49,360
create a type. This type will be called

14796
10:06:49,360 --> 10:06:51,916
params uppercased and this will be equal

14797
10:06:51,916 --> 10:06:54,960
to a promise. Then we can pass a generic

14798
10:06:54,960 --> 10:06:58,160
open an object and how is our ID called

14799
10:06:58,160 --> 10:07:01,120
or how is our dynamic route called?

14800
10:07:01,120 --> 10:07:03,840
Well, it's called course ID. This means

14801
10:07:03,840 --> 10:07:06,480
inside of here I can pass course ID and

14802
10:07:06,480 --> 10:07:08,480
this will be of type string. Also, I

14803
10:07:08,480 --> 10:07:10,720
want to spell promise correctly. And

14804
10:07:10,720 --> 10:07:12,720
this looks good. So here's the thing. If

14805
10:07:12,720 --> 10:07:14,960
this dynamic folder would be called

14806
10:07:14,960 --> 10:07:16,960
hello, then you would want to get hello

14807
10:07:16,960 --> 10:07:19,120
here. If this would be called hey, then

14808
10:07:19,120 --> 10:07:21,120
you would want to get hey. I think you

14809
10:07:21,120 --> 10:07:23,120
understand what I'm trying to tell you.

14810
10:07:23,120 --> 10:07:24,720
And then we want to get the params. So

14811
10:07:24,720 --> 10:07:26,720
we can d the structure and then the

14812
10:07:26,720 --> 10:07:29,200
params will have a type of uppercase

14813
10:07:29,200 --> 10:07:31,916
params. So this should already be it. As

14814
10:07:31,916 --> 10:07:33,916
you all know again this is a promise

14815
10:07:33,916 --> 10:07:36,480
which means we have to await these um or

14816
10:07:36,480 --> 10:07:39,040
this param itself the course ID. So this

14817
10:07:39,040 --> 10:07:40,880
will be a constant. we can destructure

14818
10:07:40,880 --> 10:07:42,960
it and this will be equal to arate

14819
10:07:42,960 --> 10:07:45,436
params and then where I d the structure

14820
10:07:45,436 --> 10:07:48,000
I can get the course ID itself and then

14821
10:07:48,000 --> 10:07:50,400
we can just copy it and paste it as an

14822
10:07:50,400 --> 10:07:53,360
argument. So this means in theory we

14823
10:07:53,360 --> 10:07:55,840
should get our data. So for the edit

14824
10:07:55,840 --> 10:07:58,800
course we can then pass a span element

14825
10:07:58,800 --> 10:08:01,596
not PSN but span and then we can get the

14826
10:08:01,596 --> 10:08:04,160
data dot title. Of course, we want to

14827
10:08:04,160 --> 10:08:06,320
also style the span. But you know what?

14828
10:08:06,320 --> 10:08:08,560
For now, I want to first of all see if

14829
10:08:08,560 --> 10:08:10,800
we even get the data because if I go

14830
10:08:10,800 --> 10:08:14,000
back edit course, subscribe. Now, so as

14831
10:08:14,000 --> 10:08:16,080
you see, we get the correct data. But

14832
10:08:16,080 --> 10:08:18,000
you know what? I will now for example

14833
10:08:18,000 --> 10:08:20,400
delete the ID or I will create a fake

14834
10:08:20,400 --> 10:08:22,800
ID. If I click on enter, we will get

14835
10:08:22,800 --> 10:08:25,840
this four for not found page because the

14836
10:08:25,840 --> 10:08:28,720
id which we passed as a param here or so

14837
10:08:28,720 --> 10:08:31,436
or in the where statement is not a real

14838
10:08:31,436 --> 10:08:33,756
id which means this not found function

14839
10:08:33,756 --> 10:08:36,160
was triggered and it returned this four

14840
10:08:36,160 --> 10:08:39,120
for not found page. So this works

14841
10:08:39,120 --> 10:08:42,000
exactly as expected which means we can

14842
10:08:42,000 --> 10:08:44,000
finish off or not finish I guess we have

14843
10:08:44,000 --> 10:08:46,320
to first of all start with this edit

14844
10:08:46,320 --> 10:08:48,880
route. So we can first of all style the

14845
10:08:48,880 --> 10:08:52,560
H1. This will be text 3 XL font which

14846
10:08:52,560 --> 10:08:55,520
will be bold and margin bottom of eight.

14847
10:08:55,520 --> 10:08:57,840
And then uh we want to also style the

14848
10:08:57,840 --> 10:09:00,080
span and this will have a class name

14849
10:09:00,080 --> 10:09:02,640
which will be text primary the orange

14850
10:09:02,640 --> 10:09:05,360
color and then also underline. And as a

14851
10:09:05,360 --> 10:09:07,120
next step I want to create an

14852
10:09:07,120 --> 10:09:09,520
interesting layout. So um I will come to

14853
10:09:09,520 --> 10:09:10,800
this a bit later on. This is

14854
10:09:10,800 --> 10:09:12,960
interesting. This is the data access

14855
10:09:12,960 --> 10:09:15,436
layer but I want to show you the UI for

14856
10:09:15,436 --> 10:09:18,880
now. So this is our screen. Our yeah our

14857
10:09:18,880 --> 10:09:20,640
screen. And here's the thing. On the top

14858
10:09:20,640 --> 10:09:22,720
we first of all have a little title.

14859
10:09:22,720 --> 10:09:25,120
This is this one. Then I want to display

14860
10:09:25,120 --> 10:09:28,800
two tabs. So tab one and tap two. This

14861
10:09:28,800 --> 10:09:32,720
tab will be there to edit base info. And

14862
10:09:32,720 --> 10:09:35,200
this tab will be there for the course

14863
10:09:35,200 --> 10:09:37,756
structure. So if the user clicks on this

14864
10:09:37,756 --> 10:09:39,840
tab, we will again just showcase the

14865
10:09:39,840 --> 10:09:42,000
form or we will render the form then to

14866
10:09:42,000 --> 10:09:44,160
update the title, to update the slug,

14867
10:09:44,160 --> 10:09:46,560
the thumbnail and stuff like that. And

14868
10:09:46,560 --> 10:09:48,880
if the user clicks on this tab, then we

14869
10:09:48,880 --> 10:09:50,480
will display the course structure. This

14870
10:09:50,480 --> 10:09:53,120
means this drag u is it called? Yeah,

14871
10:09:53,120 --> 10:09:55,596
drag and drop thingy. So where the user

14872
10:09:55,596 --> 10:09:57,680
can then create a new chapter, a new

14873
10:09:57,680 --> 10:10:00,480
lesson and stuff like that. This means

14874
10:10:00,480 --> 10:10:02,640
what we can do is again go back and we

14875
10:10:02,640 --> 10:10:04,960
want to first of all create the tabs. So

14876
10:10:04,960 --> 10:10:07,276
underneath the H1 but still in the div

14877
10:10:07,276 --> 10:10:09,680
we want to get a tabs component from the

14878
10:10:09,680 --> 10:10:12,080
components. Then we want to open it. The

14879
10:10:12,080 --> 10:10:14,880
tabs has to get one key property and

14880
10:10:14,880 --> 10:10:17,360
this is the default value. Currently we

14881
10:10:17,360 --> 10:10:19,596
haven't implemented any value. So this

14882
10:10:19,596 --> 10:10:21,756
will be an empty string for now but we

14883
10:10:21,756 --> 10:10:24,240
will update it later on. Then in the

14884
10:10:24,240 --> 10:10:27,040
tabs we have to create a tabs list or we

14885
10:10:27,040 --> 10:10:29,436
have to render the tabs list component.

14886
10:10:29,436 --> 10:10:31,596
This is imported from the components and

14887
10:10:31,596 --> 10:10:33,680
inside of here we want to get the tabs

14888
10:10:33,680 --> 10:10:36,400
trigger component. So the tabs trigger

14889
10:10:36,400 --> 10:10:38,560
is this button. The button which we will

14890
10:10:38,560 --> 10:10:40,880
then showcase again basic info and

14891
10:10:40,880 --> 10:10:43,120
course structure. This means if we go

14892
10:10:43,120 --> 10:10:46,400
back the value will be basic info. And

14893
10:10:46,400 --> 10:10:48,720
as you see this uh tabs trigger

14894
10:10:48,720 --> 10:10:51,120
currently complaints. That's because it

14895
10:10:51,120 --> 10:10:54,080
expects one property which is the value

14896
10:10:54,080 --> 10:10:56,880
property. So in this case value will be

14897
10:10:56,880 --> 10:11:00,160
equal to basic dash info and then we can

14898
10:11:00,160 --> 10:11:02,160
copy paste the tabs trigger and this

14899
10:11:02,160 --> 10:11:04,320
will be for the course structure. So

14900
10:11:04,320 --> 10:11:07,840
course structure for the value this will

14901
10:11:07,840 --> 10:11:10,640
also be course dash structure and this

14902
10:11:10,640 --> 10:11:12,800
should be lowercase and then we can also

14903
10:11:12,800 --> 10:11:15,436
set our default value and this will be

14904
10:11:15,436 --> 10:11:18,240
basic info. So this means if we again go

14905
10:11:18,240 --> 10:11:20,480
back we should see something and yeah

14906
10:11:20,480 --> 10:11:23,596
these are our two tabs and you know what

14907
10:11:23,596 --> 10:11:25,276
they don't look good what I mean by that

14908
10:11:25,276 --> 10:11:28,320
is these two these two buttons this tabs

14909
10:11:28,320 --> 10:11:30,640
component should take the whole width

14910
10:11:30,640 --> 10:11:32,400
this means we can update the tabs

14911
10:11:32,400 --> 10:11:34,880
component give it a class name and this

14912
10:11:34,880 --> 10:11:37,120
will be width full and this should in

14913
10:11:37,120 --> 10:11:39,756
theory take the whole width let's see hm

14914
10:11:39,756 --> 10:11:41,916
this didn't work what's the problem well

14915
10:11:41,916 --> 10:11:44,560
it's quite simple we want to also update

14916
10:11:44,560 --> 10:11:47,680
our tabs list because For our tabs list,

14917
10:11:47,680 --> 10:11:50,640
we want to um create first of all a grid

14918
10:11:50,640 --> 10:11:52,560
with two columns. This means grid

14919
10:11:52,560 --> 10:11:55,436
columns too because we have two uh tabs

14920
10:11:55,436 --> 10:11:58,240
trigger and also width of full to take

14921
10:11:58,240 --> 10:12:00,320
the whole width. Yes, that's what I

14922
10:12:00,320 --> 10:12:02,720
wanted. So these are our two buttons.

14923
10:12:02,720 --> 10:12:04,720
This means we can go back and underneath

14924
10:12:04,720 --> 10:12:07,360
the tabs list we want to render tabs

14925
10:12:07,360 --> 10:12:09,840
content or the tabs content component.

14926
10:12:09,840 --> 10:12:12,320
This is imported from the components and

14927
10:12:12,320 --> 10:12:14,240
for the tabs content we have to also

14928
10:12:14,240 --> 10:12:18,000
provide the value because chat CN UI or

14929
10:12:18,000 --> 10:12:21,040
I guess in theory radics UI has to know

14930
10:12:21,040 --> 10:12:23,680
um to which tabs trigger it corresponds

14931
10:12:23,680 --> 10:12:25,596
to. In this case this will be for the

14932
10:12:25,596 --> 10:12:28,320
basic info. So I can copy the value name

14933
10:12:28,320 --> 10:12:30,640
and paste it for the value. Then inside

14934
10:12:30,640 --> 10:12:32,800
of here we want to render a cart. This

14935
10:12:32,800 --> 10:12:34,240
means we can get the cart from the

14936
10:12:34,240 --> 10:12:36,640
components. Then a cart header. This is

14937
10:12:36,640 --> 10:12:38,640
the next step. And in the cart header,

14938
10:12:38,640 --> 10:12:40,800
we want to get the card title. For the

14939
10:12:40,800 --> 10:12:43,840
card title, this will be uh basic info.

14940
10:12:43,840 --> 10:12:45,436
Then we can also get the card

14941
10:12:45,436 --> 10:12:47,360
description. For the card description,

14942
10:12:47,360 --> 10:12:51,120
this will be added basic information

14943
10:12:51,120 --> 10:12:53,916
about the course. This means if we again

14944
10:12:53,916 --> 10:12:56,000
go back, you will see the title and then

14945
10:12:56,000 --> 10:12:58,400
the description. I think the font weight

14946
10:12:58,400 --> 10:13:00,960
and the size is big enough. So I don't

14947
10:13:00,960 --> 10:13:03,596
see any reason to update anything. As

14948
10:13:03,596 --> 10:13:05,360
next step, we want to render the card

14949
10:13:05,360 --> 10:13:07,040
content. This means underneath the cart

14950
10:13:07,040 --> 10:13:09,596
header, we can get a card content from

14951
10:13:09,596 --> 10:13:11,756
the components. And here's the thing. We

14952
10:13:11,756 --> 10:13:14,000
want to create a separate component. Why

14953
10:13:14,000 --> 10:13:16,640
is that? Well, what is this? This is a

14954
10:13:16,640 --> 10:13:18,640
file. Who would have thought? But what

14955
10:13:18,640 --> 10:13:21,200
is it also? It's a server component.

14956
10:13:21,200 --> 10:13:23,596
This means if we need interactivity, it

14957
10:13:23,596 --> 10:13:26,320
won't work. But our form will need the

14958
10:13:26,320 --> 10:13:28,320
use form hook. It will need the use

14959
10:13:28,320 --> 10:13:30,640
stated. It will need interactivity and

14960
10:13:30,640 --> 10:13:32,960
it won't work inside of here. This means

14961
10:13:32,960 --> 10:13:35,756
we want to open our explorer and what we

14962
10:13:35,756 --> 10:13:38,240
want to do is create another components

14963
10:13:38,240 --> 10:13:40,240
folder because here's the thing. We will

14964
10:13:40,240 --> 10:13:42,240
create a separate component. I already

14965
10:13:42,240 --> 10:13:44,720
mentioned that. But where should we

14966
10:13:44,720 --> 10:13:46,560
store it? I mean the component will be

14967
10:13:46,560 --> 10:13:48,960
called for example edit form. Let's call

14968
10:13:48,960 --> 10:13:51,120
it like that. Where would you store it?

14969
10:13:51,120 --> 10:13:52,880
Would you store it in this components

14970
10:13:52,880 --> 10:13:54,800
folder? Would you store it in your main

14971
10:13:54,800 --> 10:13:56,640
components folder? What do you think?

14972
10:13:56,640 --> 10:13:59,276
What's the best location for this edit

14973
10:13:59,276 --> 10:14:01,276
form component? Well, here's the thing.

14974
10:14:01,276 --> 10:14:03,840
In my opinion, this is a very local

14975
10:14:03,840 --> 10:14:06,080
component. What I mean by that is I will

14976
10:14:06,080 --> 10:14:08,320
only use it in the edit route. This

14977
10:14:08,320 --> 10:14:10,480
means it would also make a lot of sense

14978
10:14:10,480 --> 10:14:12,800
to create a separate component uh

14979
10:14:12,800 --> 10:14:15,436
components folder for this edit route

14980
10:14:15,436 --> 10:14:18,320
itself because this component this um

14981
10:14:18,320 --> 10:14:21,200
edit form will only be used in the edit

14982
10:14:21,200 --> 10:14:23,596
route itself. If I would reuse it of

14983
10:14:23,596 --> 10:14:25,520
course for example throughout the

14984
10:14:25,520 --> 10:14:28,560
courses folder as an example then I

14985
10:14:28,560 --> 10:14:30,320
would create it in this components

14986
10:14:30,320 --> 10:14:32,560
folder. But since I will only use it in

14987
10:14:32,560 --> 10:14:34,960
the edit route, I will also create a new

14988
10:14:34,960 --> 10:14:37,596
components folder in the edit folder

14989
10:14:37,596 --> 10:14:39,680
itself or route. Call it however you

14990
10:14:39,680 --> 10:14:41,916
want to. So this will be underscore

14991
10:14:41,916 --> 10:14:44,400
components. And then inside of here we

14992
10:14:44,400 --> 10:14:46,160
can create a new file. What do you think

14993
10:14:46,160 --> 10:14:48,560
would be a good name? Maybe edit form.

14994
10:14:48,560 --> 10:14:50,720
Is this fine enough? Maybe edit course

14995
10:14:50,720 --> 10:14:54,480
form. Yeah, edit course form.tsx.

14996
10:14:54,480 --> 10:14:56,320
So first of all, this will be a client

14997
10:14:56,320 --> 10:14:59,040
component. This means use client. And

14998
10:14:59,040 --> 10:15:01,200
then since this is just a simple

14999
10:15:01,200 --> 10:15:03,200
function, we can create an export

15000
10:15:03,200 --> 10:15:05,436
function. This will be called edit

15001
10:15:05,436 --> 10:15:07,756
course form. And then we want to just

15002
10:15:07,756 --> 10:15:09,840
open it. And of course inside of here,

15003
10:15:09,840 --> 10:15:11,756
we want to create a return statement

15004
10:15:11,756 --> 10:15:14,560
with for example an H1 with some dummy

15005
10:15:14,560 --> 10:15:16,640
data. We can then go back to the edit

15006
10:15:16,640 --> 10:15:18,960
route and then just render the edit

15007
10:15:18,960 --> 10:15:21,436
course form component which is imported

15008
10:15:21,436 --> 10:15:24,000
from the components. As you see, we see

15009
10:15:24,000 --> 10:15:26,480
a lot of gibberish. So here's the thing

15010
10:15:26,480 --> 10:15:28,320
inside of here. I want to literally

15011
10:15:28,320 --> 10:15:30,880
showcase or render the same form as the

15012
10:15:30,880 --> 10:15:33,436
one which we already created in the

15013
10:15:33,436 --> 10:15:36,560
creation route. So what can we do? Well,

15014
10:15:36,560 --> 10:15:38,560
we can literally just copy everything

15015
10:15:38,560 --> 10:15:40,720
from the return statement. Maybe not

15016
10:15:40,720 --> 10:15:43,276
everything. We will just copy this form.

15017
10:15:43,276 --> 10:15:45,756
So as you see in the creation route, we

15018
10:15:45,756 --> 10:15:47,436
have a link. We don't need it. We have a

15019
10:15:47,436 --> 10:15:48,960
card. We don't need it. We already have

15020
10:15:48,960 --> 10:15:52,080
our own card. We only need the form and

15021
10:15:52,080 --> 10:15:54,080
of course also the content in the form.

15022
10:15:54,080 --> 10:15:56,240
This means we can just copy it and paste

15023
10:15:56,240 --> 10:15:57,916
it inside of here. I can delete

15024
10:15:57,916 --> 10:15:59,596
everything in the return statement and

15025
10:15:59,596 --> 10:16:02,480
paste it inside of here. As you see, we

15026
10:16:02,480 --> 10:16:04,880
get a lot of errors. But that's fine. We

15027
10:16:04,880 --> 10:16:07,040
can just do a lot of copy pasting. So

15028
10:16:07,040 --> 10:16:09,120
from our creation route, we can first of

15029
10:16:09,120 --> 10:16:11,436
all copy this constant form. So where we

15030
10:16:11,436 --> 10:16:13,916
initialize the use form hook, we will I

15031
10:16:13,916 --> 10:16:16,080
will copy it, go back and paste it above

15032
10:16:16,080 --> 10:16:18,400
the return statement. As you see again,

15033
10:16:18,400 --> 10:16:20,800
I get a few import errors. That's fine.

15034
10:16:20,800 --> 10:16:23,360
Don't worry about it. Then I can also

15035
10:16:23,360 --> 10:16:25,756
copy the onsubmit function and I will

15036
10:16:25,756 --> 10:16:27,680
also copy the comment paste it

15037
10:16:27,680 --> 10:16:30,000
underneath the constant form. And as you

15038
10:16:30,000 --> 10:16:32,400
see we get even more errors but it's

15039
10:16:32,400 --> 10:16:34,640
okay don't worry. Then from the creation

15040
10:16:34,640 --> 10:16:36,960
route I want you also copy this use

15041
10:16:36,960 --> 10:16:39,596
router uh hook and then also the use

15042
10:16:39,596 --> 10:16:41,916
transition. So I will copy both and

15043
10:16:41,916 --> 10:16:45,040
paste it also above the form itself. So

15044
10:16:45,040 --> 10:16:48,000
I think everything has been defined and

15045
10:16:48,000 --> 10:16:50,640
the last problem is that we have all of

15046
10:16:50,640 --> 10:16:53,120
these import errors. This means what we

15047
10:16:53,120 --> 10:16:55,756
can do for now is literally just copy

15048
10:16:55,756 --> 10:16:57,916
paste everything. So we can copy the

15049
10:16:57,916 --> 10:16:59,840
import statement for for the button

15050
10:16:59,840 --> 10:17:02,160
itself. Paste it inside of here. As you

15051
10:17:02,160 --> 10:17:04,400
see the import statement is correct. But

15052
10:17:04,400 --> 10:17:06,400
we won't use the button variance. So we

15053
10:17:06,400 --> 10:17:08,640
can delete it. Then we have the cart.

15054
10:17:08,640 --> 10:17:11,200
Again I can copy it and paste it. This

15055
10:17:11,200 --> 10:17:13,040
will import everything but the cart is

15056
10:17:13,040 --> 10:17:15,120
not used. So we can again delete it.

15057
10:17:15,120 --> 10:17:16,960
Then we have the course categories,

15058
10:17:16,960 --> 10:17:18,880
course schema, stuff like that. We can

15059
10:17:18,880 --> 10:17:21,120
copy the import statement and paste it.

15060
10:17:21,120 --> 10:17:23,596
As you see, no errors. The next step is

15061
10:17:23,596 --> 10:17:25,200
to get all of the icons. And you know

15062
10:17:25,200 --> 10:17:27,756
what? I will just copy everything and

15063
10:17:27,756 --> 10:17:29,916
then remove everything that I don't

15064
10:17:29,916 --> 10:17:32,080
need. So I will just copy it, paste it,

15065
10:17:32,080 --> 10:17:34,320
and voila. And as you see, we get a few

15066
10:17:34,320 --> 10:17:36,080
errors, but that's fine. So we don't

15067
10:17:36,080 --> 10:17:37,680
need the link component. We can delete

15068
10:17:37,680 --> 10:17:39,756
it. We don't need the arrow left icon.

15069
10:17:39,756 --> 10:17:41,680
We can delete it. Then we don't need the

15070
10:17:41,680 --> 10:17:43,680
card component. We can delete it. We

15071
10:17:43,680 --> 10:17:45,276
don't need the button variants. And then

15072
10:17:45,276 --> 10:17:47,120
there's only one more error left and

15073
10:17:47,120 --> 10:17:49,200
that's for the create course server

15074
10:17:49,200 --> 10:17:51,840
action. So I will comment it out for

15075
10:17:51,840 --> 10:17:54,320
now. It's fine. Uh what other errors do

15076
10:17:54,320 --> 10:17:55,916
we have? This one. That's fine. This

15077
10:17:55,916 --> 10:17:57,840
one. This one. This is also fine. I

15078
10:17:57,840 --> 10:18:00,160
think this is the only error. So our

15079
10:18:00,160 --> 10:18:02,720
server action itself. This means we want

15080
10:18:02,720 --> 10:18:05,520
to create a new edit course server

15081
10:18:05,520 --> 10:18:07,916
action. So where would it make sense to

15082
10:18:07,916 --> 10:18:10,560
create this new actions file in the

15083
10:18:10,560 --> 10:18:13,276
courses route? in the create route or in

15084
10:18:13,276 --> 10:18:15,360
the folder. Well, it will make a lot of

15085
10:18:15,360 --> 10:18:17,840
sense to create the actions file in the

15086
10:18:17,840 --> 10:18:20,160
edit folder because inside of there I

15087
10:18:20,160 --> 10:18:22,080
want to specifically store the server

15088
10:18:22,080 --> 10:18:24,800
action to edit the course. This means in

15089
10:18:24,800 --> 10:18:26,800
the edit folder we can create an

15090
10:18:26,800 --> 10:18:30,000
actions.ts file and since inside of here

15091
10:18:30,000 --> 10:18:32,240
we want to create server actions we have

15092
10:18:32,240 --> 10:18:34,800
to also mark the file with the use

15093
10:18:34,800 --> 10:18:37,596
server directive. Inside of here we want

15094
10:18:37,596 --> 10:18:40,480
to first of all export an a function.

15095
10:18:40,480 --> 10:18:43,436
This means export async function. This

15096
10:18:43,436 --> 10:18:46,080
will be called edit course and then we

15097
10:18:46,080 --> 10:18:48,240
can just open it. So here's the thing.

15098
10:18:48,240 --> 10:18:50,080
We want to first of all make sure that

15099
10:18:50,080 --> 10:18:52,880
the user has a valid user session and is

15100
10:18:52,880 --> 10:18:55,120
also an admin. This means we can say

15101
10:18:55,120 --> 10:18:58,640
constant user equals to a rate require

15102
10:18:58,640 --> 10:19:01,360
admin. We can import it from our data

15103
10:19:01,360 --> 10:19:03,596
access layer. And with this we make sure

15104
10:19:03,596 --> 10:19:06,160
that the user has a valid user session

15105
10:19:06,160 --> 10:19:08,720
and is an admin. If not, we will

15106
10:19:08,720 --> 10:19:11,276
redirect the user to the correct URL.

15107
10:19:11,276 --> 10:19:13,680
The next step is to create a try and

15108
10:19:13,680 --> 10:19:16,160
also catch statement. And as you know,

15109
10:19:16,160 --> 10:19:18,880
we want to return objects. And if I

15110
10:19:18,880 --> 10:19:21,276
currently try to return an object, I

15111
10:19:21,276 --> 10:19:23,520
don't get any TypeScript types. This

15112
10:19:23,520 --> 10:19:26,000
isn't great. So, how can we fix this

15113
10:19:26,000 --> 10:19:28,000
problem? Well, as you all know, I hope

15114
10:19:28,000 --> 10:19:30,160
you remember it at least, we created

15115
10:19:30,160 --> 10:19:33,040
this type API response and we want to

15116
10:19:33,040 --> 10:19:35,756
add it to our return type. So we want to

15117
10:19:35,756 --> 10:19:38,480
create a return type parameter. This

15118
10:19:38,480 --> 10:19:40,640
means after these parentheses we can

15119
10:19:40,640 --> 10:19:42,960
create a colon. This will be equal to a

15120
10:19:42,960 --> 10:19:45,200
promise. We want to pass generic and in

15121
10:19:45,200 --> 10:19:47,436
the generic we want to get the API

15122
10:19:47,436 --> 10:19:50,240
response type. This means if I again try

15123
10:19:50,240 --> 10:19:53,360
to create a return object we will get a

15124
10:19:53,360 --> 10:19:56,240
status and message. Great. This works

15125
10:19:56,240 --> 10:19:58,320
beautifully. And what's the next step?

15126
10:19:58,320 --> 10:20:00,240
Well what do we want to get through our

15127
10:20:00,240 --> 10:20:03,360
params? The data who fought. This means

15128
10:20:03,360 --> 10:20:05,840
we can get data and this will be of type

15129
10:20:05,840 --> 10:20:08,800
or of the type course schema type

15130
10:20:08,800 --> 10:20:11,756
imported from the Z schemas file. What's

15131
10:20:11,756 --> 10:20:13,916
the next step? The next step is to do

15132
10:20:13,916 --> 10:20:16,240
serverside validation. This means we can

15133
10:20:16,240 --> 10:20:18,560
create a constant result and this will

15134
10:20:18,560 --> 10:20:21,436
be equal to course schema imported from

15135
10:20:21,436 --> 10:20:25,040
the Z schemas files save pass and as an

15136
10:20:25,040 --> 10:20:27,120
argument we want to pass the data

15137
10:20:27,120 --> 10:20:29,840
itself. The next step is to check if the

15138
10:20:29,840 --> 10:20:32,640
result if the validation was successful

15139
10:20:32,640 --> 10:20:34,800
or not. This means we can create an if

15140
10:20:34,800 --> 10:20:37,360
statement and if the result is not

15141
10:20:37,360 --> 10:20:39,756
successful then we want to return an

15142
10:20:39,756 --> 10:20:42,240
object. For the status this will be

15143
10:20:42,240 --> 10:20:44,720
error and for the message this will just

15144
10:20:44,720 --> 10:20:47,520
be invalid data because the data is

15145
10:20:47,520 --> 10:20:50,240
quite invalid. So after the if statement

15146
10:20:50,240 --> 10:20:52,480
we know that the data is safe to use and

15147
10:20:52,480 --> 10:20:54,640
that we can create a mutation. This

15148
10:20:54,640 --> 10:20:57,436
means we can say await Prisma. Prisma is

15149
10:20:57,436 --> 10:21:00,400
imported from the lip folder dot course

15150
10:21:00,400 --> 10:21:02,640
and we want to update the course. This

15151
10:21:02,640 --> 10:21:04,960
means we can use the update method. We

15152
10:21:04,960 --> 10:21:06,960
want to invoke it the structured and

15153
10:21:06,960 --> 10:21:08,800
inside of here we have to first of all

15154
10:21:08,800 --> 10:21:10,960
provide the wear method because we don't

15155
10:21:10,960 --> 10:21:13,120
want to update any course. We want to

15156
10:21:13,120 --> 10:21:16,160
update a specific course. This means we

15157
10:21:16,160 --> 10:21:18,560
want to use the primary key. This is our

15158
10:21:18,560 --> 10:21:21,040
ID and I want to update a course where

15159
10:21:21,040 --> 10:21:24,400
the ID matches the course ID. Hm, but I

15160
10:21:24,400 --> 10:21:26,480
don't get the course ID. Well, I want to

15161
10:21:26,480 --> 10:21:28,800
get it through my params. So, we will

15162
10:21:28,800 --> 10:21:31,436
get data and we will also get the course

15163
10:21:31,436 --> 10:21:33,596
ID itself. This means we can add a

15164
10:21:33,596 --> 10:21:36,080
comma, get the course ID and this will

15165
10:21:36,080 --> 10:21:38,880
be of type string. Did I spell course ID

15166
10:21:38,880 --> 10:21:41,756
correctly? I think so. So, course ID

15167
10:21:41,756 --> 10:21:43,916
looks good and we can paste it uh right

15168
10:21:43,916 --> 10:21:46,560
here for the ID. But as you see, I still

15169
10:21:46,560 --> 10:21:48,800
get an error. What's the problem? Well,

15170
10:21:48,800 --> 10:21:51,276
we have to also define the user ID

15171
10:21:51,276 --> 10:21:53,120
because again we have a one to many

15172
10:21:53,120 --> 10:21:55,680
relationship and the user could you say

15173
10:21:55,680 --> 10:21:57,436
relation? Yeah, I think the user

15174
10:21:57,436 --> 10:21:59,840
relation is not optional. This means we

15175
10:21:59,840 --> 10:22:02,320
have to define the user ID because only

15176
10:22:02,320 --> 10:22:05,120
the user who um created the course can

15177
10:22:05,120 --> 10:22:07,596
also update the course and this will be

15178
10:22:07,596 --> 10:22:12,560
equal to the user user id. As you see we

15179
10:22:12,560 --> 10:22:14,880
still get an error. What's the problem?

15180
10:22:14,880 --> 10:22:17,040
Well, we are missing data. We want to

15181
10:22:17,040 --> 10:22:19,680
update data. And as you all know, in

15182
10:22:19,680 --> 10:22:22,000
theory, we could do everything manually.

15183
10:22:22,000 --> 10:22:24,000
We could get the categories, set it

15184
10:22:24,000 --> 10:22:27,120
equal to the result dot data category.

15185
10:22:27,120 --> 10:22:29,840
But this is so annoying. Instead, we can

15186
10:22:29,840 --> 10:22:32,480
spread our result. So, dot dot dot

15187
10:22:32,480 --> 10:22:35,200
result dot data. And voila, this already

15188
10:22:35,200 --> 10:22:37,276
looks way better. The last step is to

15189
10:22:37,276 --> 10:22:39,916
also return a success object. This means

15190
10:22:39,916 --> 10:22:42,560
return object. For the status, this will

15191
10:22:42,560 --> 10:22:44,800
be success. And then for the message

15192
10:22:44,800 --> 10:22:48,000
this will be cause updated successfully.

15193
10:22:48,000 --> 10:22:50,480
Of course we want to also catch any

15194
10:22:50,480 --> 10:22:52,880
errors. This means we can also create a

15195
10:22:52,880 --> 10:22:55,200
return. We want to open an object for

15196
10:22:55,200 --> 10:22:57,596
the status. This will be error. And then

15197
10:22:57,596 --> 10:23:00,080
for the message itself this will be

15198
10:23:00,080 --> 10:23:03,680
failed to update course. So this looks

15199
10:23:03,680 --> 10:23:06,160
good and we can use the server action

15200
10:23:06,160 --> 10:23:08,960
and we can copy the name edit course and

15201
10:23:08,960 --> 10:23:11,276
use it in the edit course form because

15202
10:23:11,276 --> 10:23:13,840
currently we call the create course

15203
10:23:13,840 --> 10:23:16,160
function server action. We don't want to

15204
10:23:16,160 --> 10:23:18,640
do that. So I will delete it and instead

15205
10:23:18,640 --> 10:23:21,040
I want to import edit course from the

15206
10:23:21,040 --> 10:23:23,840
actions file. As you see we get one

15207
10:23:23,840 --> 10:23:26,240
error and that's because expected two

15208
10:23:26,240 --> 10:23:28,880
arguments but got one. We passed the

15209
10:23:28,880 --> 10:23:31,436
data but we did not pass the course ID.

15210
10:23:31,436 --> 10:23:34,080
And how will we get our ID? Good

15211
10:23:34,080 --> 10:23:36,480
question. So here's the thing. I want to

15212
10:23:36,480 --> 10:23:39,200
get my data through the params. So here

15213
10:23:39,200 --> 10:23:41,120
I have my params and I want to get all

15214
10:23:41,120 --> 10:23:43,360
of the data. And also as you see

15215
10:23:43,360 --> 10:23:45,120
currently we pass for the default

15216
10:23:45,120 --> 10:23:47,756
values, nothing. So empty strings and

15217
10:23:47,756 --> 10:23:49,520
price zero and stuff like that. But this

15218
10:23:49,520 --> 10:23:52,720
is not true. Our form our course already

15219
10:23:52,720 --> 10:23:55,200
exists. We already have data which we

15220
10:23:55,200 --> 10:23:57,200
can propagate here. This means through

15221
10:23:57,200 --> 10:23:59,596
the params I want to get my data. But

15222
10:23:59,596 --> 10:24:01,520
here's again the thing. If I go to the

15223
10:24:01,520 --> 10:24:04,400
edit route and hover over data, I get my

15224
10:24:04,400 --> 10:24:06,720
data. But do I want to copy paste it?

15225
10:24:06,720 --> 10:24:09,360
No, not really. Instead, I want to again

15226
10:24:09,360 --> 10:24:12,160
infer the type right from the query.

15227
10:24:12,160 --> 10:24:14,640
This means we can go back to our data

15228
10:24:14,640 --> 10:24:17,200
access layer. So into the data folder,

15229
10:24:17,200 --> 10:24:20,160
admin folder, admin get course. And then

15230
10:24:20,160 --> 10:24:22,240
we can create a new type. This means

15231
10:24:22,240 --> 10:24:25,120
export type. This will be called admin

15232
10:24:25,120 --> 10:24:27,916
course type. And this will be equal to

15233
10:24:27,916 --> 10:24:30,800
awaited. Then we want to pass a generic

15234
10:24:30,800 --> 10:24:33,360
return type. Again we want to pass a

15235
10:24:33,360 --> 10:24:36,160
generic and this will be type of admin

15236
10:24:36,160 --> 10:24:38,480
get course. This means the name of the

15237
10:24:38,480 --> 10:24:40,960
function itself. And if I hover over

15238
10:24:40,960 --> 10:24:43,436
this type you will see that I get all of

15239
10:24:43,436 --> 10:24:46,320
the correct types. Great. So I will copy

15240
10:24:46,320 --> 10:24:48,240
the name go back to the creation or not

15241
10:24:48,240 --> 10:24:50,400
to the creation but to the edit course

15242
10:24:50,400 --> 10:24:52,560
form and inside of here I want to first

15243
10:24:52,560 --> 10:24:54,720
of all again create an interface. This

15244
10:24:54,720 --> 10:24:58,320
means interface app props. Then I want

15245
10:24:58,320 --> 10:25:00,480
to get data and this will be of type

15246
10:25:00,480 --> 10:25:03,276
admin get course type. And as you see I

15247
10:25:03,276 --> 10:25:06,640
get two options admin course type admin

15248
10:25:06,640 --> 10:25:09,520
course type. This isn't great. So I will

15249
10:25:09,520 --> 10:25:11,916
rename it. Instead of admin course type

15250
10:25:11,916 --> 10:25:15,436
this will be admin course singular type.

15251
10:25:15,436 --> 10:25:17,120
I think this will be a bit better or

15252
10:25:17,120 --> 10:25:19,596
could we say edit? No admin course

15253
10:25:19,596 --> 10:25:21,840
singular type. And then again inside of

15254
10:25:21,840 --> 10:25:24,640
here I can get the admin course singular

15255
10:25:24,640 --> 10:25:27,520
type imported from the data access

15256
10:25:27,520 --> 10:25:29,520
layer. And then in the params we can the

15257
10:25:29,520 --> 10:25:32,240
swapshot this will be of type I props

15258
10:25:32,240 --> 10:25:34,880
and then we can get our data. Then for

15259
10:25:34,880 --> 10:25:37,916
our default values we can paste our real

15260
10:25:37,916 --> 10:25:40,320
data. This means for the title this will

15261
10:25:40,320 --> 10:25:43,200
be equal to data.title.

15262
10:25:43,200 --> 10:25:45,040
For the description this will be equal

15263
10:25:45,040 --> 10:25:47,040
to data.escription.

15264
10:25:47,040 --> 10:25:49,276
For the file key, this will be data

15265
10:25:49,276 --> 10:25:52,400
dofile key. For the price, data dot

15266
10:25:52,400 --> 10:25:55,360
price. For the duration, data dot

15267
10:25:55,360 --> 10:25:57,520
duration. For the uh level, not

15268
10:25:57,520 --> 10:26:00,640
beginner, but data dot uh not beginner

15269
10:26:00,640 --> 10:26:04,320
data. For the category, this will be who

15270
10:26:04,320 --> 10:26:06,720
would have thought data.category.

15271
10:26:06,720 --> 10:26:09,120
For the status, this will be data.

15272
10:26:09,120 --> 10:26:12,480
status. For the slug, this will be data

15273
10:26:12,480 --> 10:26:15,756
dot slug. And for the small description,

15274
10:26:15,756 --> 10:26:18,960
data do small description. As you see,

15275
10:26:18,960 --> 10:26:21,360
we get one error and that's kind of

15276
10:26:21,360 --> 10:26:23,680
annoying. What's the problem? It says

15277
10:26:23,680 --> 10:26:26,000
type string is not assignable to type

15278
10:26:26,000 --> 10:26:28,560
development, business, finance. So all

15279
10:26:28,560 --> 10:26:30,640
of our categories. So what the error is

15280
10:26:30,640 --> 10:26:33,360
trying to tell us is that data.category

15281
10:26:33,360 --> 10:26:36,400
is a string. But our Z schemas file or

15282
10:26:36,400 --> 10:26:39,436
our Z schema itself expects uh this

15283
10:26:39,436 --> 10:26:41,840
category property as you see. But this

15284
10:26:41,840 --> 10:26:44,400
is not a normal string. but instead it's

15285
10:26:44,400 --> 10:26:46,800
an array of different strings. So,

15286
10:26:46,800 --> 10:26:48,800
development, business, finance, and it

15287
10:26:48,800 --> 10:26:50,880
says this random string is not

15288
10:26:50,880 --> 10:26:54,400
assignable to this um array. So, how can

15289
10:26:54,400 --> 10:26:56,240
we fix it? Because we know that the data

15290
10:26:56,240 --> 10:26:58,800
category is the correct type. Well, we

15291
10:26:58,800 --> 10:27:02,080
can say as course schema type. This is

15292
10:27:02,080 --> 10:27:04,400
the zot schema itself. And then we can

15293
10:27:04,400 --> 10:27:06,400
add an array and we want to get the

15294
10:27:06,400 --> 10:27:08,800
category. And this will remove this

15295
10:27:08,800 --> 10:27:10,960
error as you see. And the and this is

15296
10:27:10,960 --> 10:27:12,720
already great. Nevertheless, there's

15297
10:27:12,720 --> 10:27:14,640
still one problem and this is the edit

15298
10:27:14,640 --> 10:27:17,040
course because we want to pass the ID.

15299
10:27:17,040 --> 10:27:19,276
This means we can add a comma and then

15300
10:27:19,276 --> 10:27:22,720
this will be our data do ID. Then do we

15301
10:27:22,720 --> 10:27:24,720
want to update anything for the onsubmit

15302
10:27:24,720 --> 10:27:27,276
function? D. This all looks good. No.

15303
10:27:27,276 --> 10:27:29,200
Nope. This is great. Uh I think the

15304
10:27:29,200 --> 10:27:30,880
submit button this will need a change

15305
10:27:30,880 --> 10:27:33,200
because we currently say create course.

15306
10:27:33,200 --> 10:27:35,596
But do we create a course? No, we added

15307
10:27:35,596 --> 10:27:37,596
the course. This means instead of saying

15308
10:27:37,596 --> 10:27:39,916
create course I will just say for

15309
10:27:39,916 --> 10:27:43,120
example update course and then for the

15310
10:27:43,120 --> 10:27:45,276
pending state instead of saying uh

15311
10:27:45,276 --> 10:27:48,640
creating I will say updating. So this

15312
10:27:48,640 --> 10:27:50,560
should or this already looks good. We

15313
10:27:50,560 --> 10:27:52,720
can also update our edit route because

15314
10:27:52,720 --> 10:27:55,040
it currently throws one error. What's

15315
10:27:55,040 --> 10:27:57,360
the problem? Well the edit course form

15316
10:27:57,360 --> 10:28:00,560
needs one property the data property. So

15317
10:28:00,560 --> 10:28:02,720
we can get data and this will be equal

15318
10:28:02,720 --> 10:28:05,596
to our data. This error is gone. And

15319
10:28:05,596 --> 10:28:07,840
this means if we go back and do a hard

15320
10:28:07,840 --> 10:28:11,040
refresh. Oh my god, this is our form. It

15321
10:28:11,040 --> 10:28:14,240
looks so beautiful. Title slug. Small

15322
10:28:14,240 --> 10:28:16,720
description. Big description. Huh?

15323
10:28:16,720 --> 10:28:20,160
Where's my thumbnail URL? H. This is not

15324
10:28:20,160 --> 10:28:22,000
good. This does not look good. What's

15325
10:28:22,000 --> 10:28:24,240
the problem? Well, here's the thing. If

15326
10:28:24,240 --> 10:28:26,560
we go back and open our uploader

15327
10:28:26,560 --> 10:28:28,720
component, you will see that we get the

15328
10:28:28,720 --> 10:28:32,000
value. The value is the file key itself.

15329
10:28:32,000 --> 10:28:34,480
And we only set the key itself but we

15330
10:28:34,480 --> 10:28:37,436
want to also set the object URL. So we

15331
10:28:37,436 --> 10:28:39,520
get this object URL and since we have

15332
10:28:39,520 --> 10:28:41,916
the value we can also construct uh

15333
10:28:41,916 --> 10:28:44,800
construct the URL. This means above the

15334
10:28:44,800 --> 10:28:47,680
use state we can use our use construct

15335
10:28:47,680 --> 10:28:50,720
URL hook. So this will be or a constant

15336
10:28:50,720 --> 10:28:53,276
then this will be called file URL and

15337
10:28:53,276 --> 10:28:56,960
this will be equal to use construct URL

15338
10:28:56,960 --> 10:28:59,276
imported from the hooks folder and then

15339
10:28:59,276 --> 10:29:01,596
as an argument we want to provide our

15340
10:29:01,596 --> 10:29:03,916
value. As you see we get an error.

15341
10:29:03,916 --> 10:29:05,916
What's the problem? Type string or

15342
10:29:05,916 --> 10:29:08,400
undefined is not assignable to type

15343
10:29:08,400 --> 10:29:10,800
string. So here's the thing. This value

15344
10:29:10,800 --> 10:29:13,200
as you know is optional. That's why we

15345
10:29:13,200 --> 10:29:15,756
want to say if we don't have any value,

15346
10:29:15,756 --> 10:29:17,840
then we can use the or sign and just

15347
10:29:17,840 --> 10:29:20,080
pass an empty string. And then for the

15348
10:29:20,080 --> 10:29:22,960
object URL, this will be equal to the

15349
10:29:22,960 --> 10:29:25,596
file URL. And this should already be it.

15350
10:29:25,596 --> 10:29:29,040
This means if I go back. Wow. Oh my god.

15351
10:29:29,040 --> 10:29:31,520
We get the thumbnail image. Wow. I'm so

15352
10:29:31,520 --> 10:29:33,596
proud of you guys. We have finished. We

15353
10:29:33,596 --> 10:29:35,596
implemented the edit route. It looks

15354
10:29:35,596 --> 10:29:37,200
beautiful. But of course, we have to

15355
10:29:37,200 --> 10:29:38,960
test it out. This means we have to see

15356
10:29:38,960 --> 10:29:41,360
if it really works. This means instead

15357
10:29:41,360 --> 10:29:43,596
of saying subscribe now, this will now

15358
10:29:43,596 --> 10:29:47,200
be subscribe today exclamation mark.

15359
10:29:47,200 --> 10:29:49,040
Then I want to also generate the new

15360
10:29:49,040 --> 10:29:52,160
slug. And if I click on update course

15361
10:29:52,160 --> 10:29:55,120
duh course updated successfully, we got

15362
10:29:55,120 --> 10:29:57,596
redirected and it says subscri uh

15363
10:29:57,596 --> 10:30:00,240
subscribe today. So it really worked.

15364
10:30:00,240 --> 10:30:02,240
And if I click on edit course, it should

15365
10:30:02,240 --> 10:30:06,320
also update and it updated. Oh my god,

15366
10:30:06,320 --> 10:30:09,680
it works. So as the next step I want to

15367
10:30:09,680 --> 10:30:12,160
continue with the course structure and

15368
10:30:12,160 --> 10:30:14,720
inside of there we will allow the user

15369
10:30:14,720 --> 10:30:17,596
to create um chapters and then also

15370
10:30:17,596 --> 10:30:20,160
lessons. Chapters will pretty much

15371
10:30:20,160 --> 10:30:22,560
function like categories. So chapter

15372
10:30:22,560 --> 10:30:24,640
number one and then this chapter will

15373
10:30:24,640 --> 10:30:26,400
have multiple lessons. Lesson number

15374
10:30:26,400 --> 10:30:28,720
one, lesson number two, lesson number

15375
10:30:28,720 --> 10:30:30,720
three. And the thing is we will also

15376
10:30:30,720 --> 10:30:33,436
implement drag and drop functionality so

15377
10:30:33,436 --> 10:30:35,916
that the user can reorder chapters and

15378
10:30:35,916 --> 10:30:39,120
lessons. So for example, for now chapter

15379
10:30:39,120 --> 10:30:41,360
1 is the first and chapter 2 comes down

15380
10:30:41,360 --> 10:30:43,596
and chapter 3. But now I want to reorder

15381
10:30:43,596 --> 10:30:46,000
the structure and chapter uh three

15382
10:30:46,000 --> 10:30:48,240
should be the first chapter using this

15383
10:30:48,240 --> 10:30:50,480
D&D. So using drag and drop we will

15384
10:30:50,480 --> 10:30:53,040
allow the user to reorder the structure

15385
10:30:53,040 --> 10:30:55,756
easily. This means we want to first of

15386
10:30:55,756 --> 10:30:57,840
all go back to the edit form or to the

15387
10:30:57,840 --> 10:30:59,360
page.tsx.

15388
10:30:59,360 --> 10:31:01,916
And currently we only have one tabs

15389
10:31:01,916 --> 10:31:04,720
content and this is for as you see this

15390
10:31:04,720 --> 10:31:07,040
basic info. This means what we can do is

15391
10:31:07,040 --> 10:31:09,040
literally just copy paste the tabs

15392
10:31:09,040 --> 10:31:12,000
content instead of uh passing basic info

15393
10:31:12,000 --> 10:31:14,240
for the value. This will instead be

15394
10:31:14,240 --> 10:31:16,880
course structure. So we can pay uh copy

15395
10:31:16,880 --> 10:31:19,360
the name paste it. My god, copy it and

15396
10:31:19,360 --> 10:31:21,360
paste it inside of here. For the card

15397
10:31:21,360 --> 10:31:24,240
title, this will be course structure. So

15398
10:31:24,240 --> 10:31:26,720
I will just copy it and paste it. And

15399
10:31:26,720 --> 10:31:28,880
then for the card description, we can

15400
10:31:28,880 --> 10:31:31,596
just say something like here you can

15401
10:31:31,596 --> 10:31:34,960
update your course structure. So this

15402
10:31:34,960 --> 10:31:37,120
looks quite good. And then for the card

15403
10:31:37,120 --> 10:31:39,360
content, do we want to render the edit

15404
10:31:39,360 --> 10:31:41,840
course form? No, of course not. Because

15405
10:31:41,840 --> 10:31:45,276
if I go back course form, course form,

15406
10:31:45,276 --> 10:31:47,680
course form, course form. This isn't

15407
10:31:47,680 --> 10:31:49,916
nice. So uh we can just delete it from

15408
10:31:49,916 --> 10:31:51,680
here. And instead we want to create a

15409
10:31:51,680 --> 10:31:53,520
new component. This means we can open

15410
10:31:53,520 --> 10:31:55,596
the explorer go into this underscore

15411
10:31:55,596 --> 10:31:57,680
components folder where we already have

15412
10:31:57,680 --> 10:31:59,916
the added course form and we will create

15413
10:31:59,916 --> 10:32:02,320
another component and this will be the

15414
10:32:02,320 --> 10:32:05,276
course structure.tsx

15415
10:32:05,276 --> 10:32:07,680
file or the component itself. So since

15416
10:32:07,680 --> 10:32:10,240
this is a component we can create an

15417
10:32:10,240 --> 10:32:12,320
export function. This will be called

15418
10:32:12,320 --> 10:32:14,880
course structure and then we can just

15419
10:32:14,880 --> 10:32:17,120
open it. Then inside of here we can

15420
10:32:17,120 --> 10:32:18,880
first of all create a dummy return

15421
10:32:18,880 --> 10:32:21,040
statement with an H1 and hello world

15422
10:32:21,040 --> 10:32:23,360
just to see that everything works. This

15423
10:32:23,360 --> 10:32:25,120
means if we go back we can get the

15424
10:32:25,120 --> 10:32:27,596
course structure component from the

15425
10:32:27,596 --> 10:32:30,000
components. And if we again go back you

15426
10:32:30,000 --> 10:32:32,800
see hello spelling mistake. Yeah that's

15427
10:32:32,800 --> 10:32:34,880
fine. Then we can go back to the course

15428
10:32:34,880 --> 10:32:37,040
structure. And here's the thing I will

15429
10:32:37,040 --> 10:32:39,200
be honest with you. This section of this

15430
10:32:39,200 --> 10:32:42,320
video will be a bit dry because we will

15431
10:32:42,320 --> 10:32:44,720
write a lot of code and a lot of

15432
10:32:44,720 --> 10:32:46,560
complicated code. I will be honest with

15433
10:32:46,560 --> 10:32:48,480
you, it's not that easy and it was

15434
10:32:48,480 --> 10:32:50,320
probably this part is probably one of

15435
10:32:50,320 --> 10:32:52,800
the hardest parts or it is the hardest

15436
10:32:52,800 --> 10:32:55,200
part of this whole video. It's quite

15437
10:32:55,200 --> 10:32:57,840
complex. Nevertheless, I will try to

15438
10:32:57,840 --> 10:32:59,840
break down everything so that you can

15439
10:32:59,840 --> 10:33:02,480
also understand everything as I always

15440
10:33:02,480 --> 10:33:04,400
do. So we want to first of all delete

15441
10:33:04,400 --> 10:33:06,000
this return statement and we want to

15442
10:33:06,000 --> 10:33:08,080
create a new one inside of here. As

15443
10:33:08,080 --> 10:33:10,240
mentioned I want to implement drag and

15444
10:33:10,240 --> 10:33:12,480
drop functionality. Implementing drag

15445
10:33:12,480 --> 10:33:15,840
and drop functionality is not easy. It's

15446
10:33:15,840 --> 10:33:18,160
super hard especially if you want to do

15447
10:33:18,160 --> 10:33:20,400
it natively because you can of course

15448
10:33:20,400 --> 10:33:22,000
try to implement drag and drop

15449
10:33:22,000 --> 10:33:25,120
functionality without using any external

15450
10:33:25,120 --> 10:33:27,596
package. It's possible but you will

15451
10:33:27,596 --> 10:33:30,400
probably spend months uh implementing

15452
10:33:30,400 --> 10:33:32,400
everything. That's why we will use

15453
10:33:32,400 --> 10:33:35,680
DNDKit in this video. So, the website is

15454
10:33:35,680 --> 10:33:37,756
just dndkit.com

15455
10:33:37,756 --> 10:33:40,160
and as you see there's a new kit on the

15456
10:33:40,160 --> 10:33:43,436
blog. Wow, so funny. So, DND kit is a

15457
10:33:43,436 --> 10:33:45,916
lightweight, performant, accessible drag

15458
10:33:45,916 --> 10:33:49,200
and drop toolkit for React and we want

15459
10:33:49,200 --> 10:33:51,680
to use it to implement drag and drop

15460
10:33:51,680 --> 10:33:53,840
functionality. So, if we go to the

15461
10:33:53,840 --> 10:33:55,596
documentation, you will find the

15462
10:33:55,596 --> 10:33:57,436
sidebar. Here they give you a lot of

15463
10:33:57,436 --> 10:33:59,436
information about D&D kit. Again, it's

15464
10:33:59,436 --> 10:34:01,680
lightweight, modular, performant, and

15465
10:34:01,680 --> 10:34:04,240
most importantly, of course, accessible.

15466
10:34:04,240 --> 10:34:07,360
Accessibility is always important. And I

15467
10:34:07,360 --> 10:34:09,596
think or for my experience, this is

15468
10:34:09,596 --> 10:34:12,160
probably the best library on the market,

15469
10:34:12,160 --> 10:34:14,800
both based on the feature set, but also

15470
10:34:14,800 --> 10:34:16,880
based on the developer experience and

15471
10:34:16,880 --> 10:34:19,276
how easy it is to implement. It's still

15472
10:34:19,276 --> 10:34:22,000
not that easy to implement. It takes a

15473
10:34:22,000 --> 10:34:24,160
lot of boilerplate code, but it's better

15474
10:34:24,160 --> 10:34:26,480
than its alternatives. And we want to

15475
10:34:26,480 --> 10:34:29,120
specifically use the sortable preset

15476
10:34:29,120 --> 10:34:31,200
because we want to allow the user to

15477
10:34:31,200 --> 10:34:34,080
sort specific fields. So we will for

15478
10:34:34,080 --> 10:34:36,320
example allow the user to sort the

15479
10:34:36,320 --> 10:34:39,276
lessons but also the not categories but

15480
10:34:39,276 --> 10:34:41,596
the chapters. So we will pretty much

15481
10:34:41,596 --> 10:34:44,320
have um two containers and two

15482
10:34:44,320 --> 10:34:47,040
containers which can be sorted. So this

15483
10:34:47,040 --> 10:34:49,040
is even harder because we will have two

15484
10:34:49,040 --> 10:34:51,916
sortable contacts with multiple sortable

15485
10:34:51,916 --> 10:34:54,240
items. This is not that easy to

15486
10:34:54,240 --> 10:34:56,320
implement but we will do it in this

15487
10:34:56,320 --> 10:34:58,880
video. So what we can do is first of all

15488
10:34:58,880 --> 10:35:01,200
install dndkit. For that we want to

15489
10:35:01,200 --> 10:35:03,916
install the at dndkit/core

15490
10:35:03,916 --> 10:35:06,320
package. We can copy the name and then

15491
10:35:06,320 --> 10:35:08,240
in our terminal I will stop the dev

15492
10:35:08,240 --> 10:35:12,160
server and run pnpmi at dndkit core.

15493
10:35:12,160 --> 10:35:14,560
Then since we want to specifically

15494
10:35:14,560 --> 10:35:17,120
implement the sortable preset we have to

15495
10:35:17,120 --> 10:35:19,916
also install the uh sortable package.

15496
10:35:19,916 --> 10:35:22,160
And also what exactly does sortable

15497
10:35:22,160 --> 10:35:24,560
mean? Well, the sortable preset provides

15498
10:35:24,560 --> 10:35:27,276
the building blocks to build sortable

15499
10:35:27,276 --> 10:35:29,756
interfaces. And since we want to create

15500
10:35:29,756 --> 10:35:32,480
a sortable interface, we need this

15501
10:35:32,480 --> 10:35:35,436
sortable preset. This means we can copy

15502
10:35:35,436 --> 10:35:37,916
this package name and also install it.

15503
10:35:37,916 --> 10:35:41,756
PNPMI uh DND kit sortable. Then we can

15504
10:35:41,756 --> 10:35:44,000
restart the dev server and uh again and

15505
10:35:44,000 --> 10:35:46,560
then it's time to get started. So how

15506
10:35:46,560 --> 10:35:48,800
does the architecture look like? Well,

15507
10:35:48,800 --> 10:35:50,800
we can scroll a bit to the bottom and

15508
10:35:50,800 --> 10:35:53,360
then we should find this beautiful uh

15509
10:35:53,360 --> 10:35:56,160
section architecture. So, the sortable

15510
10:35:56,160 --> 10:35:58,640
preset builds on top of the primitives

15511
10:35:58,640 --> 10:36:02,080
exposed by uh the D&D kit core package

15512
10:36:02,080 --> 10:36:05,040
to help building sortable interfaces.

15513
10:36:05,040 --> 10:36:08,080
So, the sortable preset exposes two main

15514
10:36:08,080 --> 10:36:11,436
concepts sortable context and the use

15515
10:36:11,436 --> 10:36:14,160
sortable hook. The sortable context

15516
10:36:14,160 --> 10:36:17,120
provides information via context that is

15517
10:36:17,120 --> 10:36:20,080
consumed in the use sortable hook. The

15518
10:36:20,080 --> 10:36:22,960
use sortable hook is an abstraction that

15519
10:36:22,960 --> 10:36:25,840
composes the use droppable and use

15520
10:36:25,840 --> 10:36:29,040
dragable hooks. So these two hooks I p

15521
10:36:29,040 --> 10:36:32,400
are primarily used when you use dnd kit

15522
10:36:32,400 --> 10:36:35,040
natively. So without this preset which

15523
10:36:35,040 --> 10:36:38,320
is um sortable but sortable just

15524
10:36:38,320 --> 10:36:40,480
abstracts these two hooks and also

15525
10:36:40,480 --> 10:36:42,880
composes them into one hook which is

15526
10:36:42,880 --> 10:36:45,840
called use sortable and as you see we

15527
10:36:45,840 --> 10:36:47,840
use the use sortable hook and this is

15528
10:36:47,840 --> 10:36:50,240
the item and this is the droppable and

15529
10:36:50,240 --> 10:36:52,240
this is the dragable. So this is this

15530
10:36:52,240 --> 10:36:54,640
composition we have two things but they

15531
10:36:54,640 --> 10:36:57,436
are composed in one hook and as you see

15532
10:36:57,436 --> 10:37:00,880
also each use sortable item has its own

15533
10:37:00,880 --> 10:37:03,436
unique ID. So when we for example later

15534
10:37:03,436 --> 10:37:06,240
on will display multiple lessons each

15535
10:37:06,240 --> 10:37:09,756
lesson uh each lesson will have an ID ID

15536
10:37:09,756 --> 10:37:12,960
1 2 3 4 5 and then we will order the

15537
10:37:12,960 --> 10:37:15,520
items using this ID and then as you see

15538
10:37:15,520 --> 10:37:17,596
here they have a section on how to

15539
10:37:17,596 --> 10:37:20,160
implement a single container. So at a

15540
10:37:20,160 --> 10:37:22,640
high level the application structure to

15541
10:37:22,640 --> 10:37:24,720
implement a sortable list with single

15542
10:37:24,720 --> 10:37:27,840
containers looks as follows. We first of

15543
10:37:27,840 --> 10:37:30,000
all have the D&D context. Again, this

15544
10:37:30,000 --> 10:37:32,480
will just create the state management.

15545
10:37:32,480 --> 10:37:34,720
Then we have the sortable context. This

15546
10:37:34,720 --> 10:37:36,800
is also needed. And here we provide all

15547
10:37:36,800 --> 10:37:39,756
of our items. And right here you see we

15548
10:37:39,756 --> 10:37:42,480
provide specifically the ids. And then

15549
10:37:42,480 --> 10:37:45,596
we render all of the individual use or

15550
10:37:45,596 --> 10:37:48,080
the individual sortable items using the

15551
10:37:48,080 --> 10:37:50,880
use sortable hook. And each sortable

15552
10:37:50,880 --> 10:37:53,596
item has its unique ID which has to

15553
10:37:53,596 --> 10:37:56,720
correspond to the items array. as you

15554
10:37:56,720 --> 10:37:58,800
see here. And then when we for example

15555
10:37:58,800 --> 10:38:01,040
restructure this whole layout, so we

15556
10:38:01,040 --> 10:38:03,520
move this one item to the bottom, then

15557
10:38:03,520 --> 10:38:06,400
this ID or these ids or the whole

15558
10:38:06,400 --> 10:38:08,880
arrangement will update. Of course,

15559
10:38:08,880 --> 10:38:11,120
again, it can be a bit complicated at

15560
10:38:11,120 --> 10:38:13,596
the start, but uh once we implement it,

15561
10:38:13,596 --> 10:38:16,320
it won't be that hard anymore. It will

15562
10:38:16,320 --> 10:38:19,120
it won't be that complicated anymore. So

15563
10:38:19,120 --> 10:38:21,120
again, uh we want to first of all start

15564
10:38:21,120 --> 10:38:23,680
with the DND context provider. So in

15565
10:38:23,680 --> 10:38:26,000
addition to the DND context provider,

15566
10:38:26,000 --> 10:38:28,480
the sortable preset requires its own

15567
10:38:28,480 --> 10:38:30,720
context provider that contains the

15568
10:38:30,720 --> 10:38:33,756
sorted array of the unique identifiers

15569
10:38:33,756 --> 10:38:37,200
associated to each sortable item. So we

15570
10:38:37,200 --> 10:38:39,040
can first of all get started with this

15571
10:38:39,040 --> 10:38:41,200
example which means we want to first of

15572
10:38:41,200 --> 10:38:43,916
all implement the DND context. Again

15573
10:38:43,916 --> 10:38:46,720
this is like your global context which

15574
10:38:46,720 --> 10:38:49,120
handles all of the state management. So

15575
10:38:49,120 --> 10:38:51,756
we can first of all get DND context from

15576
10:38:51,756 --> 10:38:54,400
DND kit core. We want to open it and

15577
10:38:54,400 --> 10:38:56,640
here we have to provide a few properties

15578
10:38:56,640 --> 10:38:59,840
and the first one is collision detection

15579
10:38:59,840 --> 10:39:02,960
and collision detection will be equal to

15580
10:39:02,960 --> 10:39:05,840
rect. So recct

15581
10:39:05,840 --> 10:39:09,040
intersection. So rect intersection and

15582
10:39:09,040 --> 10:39:12,800
this is imported from at dnd kit core.

15583
10:39:12,800 --> 10:39:15,840
What is this? Good question. So here's

15584
10:39:15,840 --> 10:39:18,160
the thing. How does um this whole

15585
10:39:18,160 --> 10:39:20,800
sorting thing work? Well, they use an

15586
10:39:20,800 --> 10:39:22,720
algorithm. And to be specific, we use

15587
10:39:22,720 --> 10:39:25,276
this algorithm, direct intersection. If

15588
10:39:25,276 --> 10:39:27,276
we hover over it, it says returns the

15589
10:39:27,276 --> 10:39:29,200
rectangles that has the greatest

15590
10:39:29,200 --> 10:39:32,480
intersection area with a given rectangle

15591
10:39:32,480 --> 10:39:36,560
in an array of rectangles. Wow, this is

15592
10:39:36,560 --> 10:39:39,040
complicated. So, what does this mean? So

15593
10:39:39,040 --> 10:39:41,756
this algorithm detects a collision when

15594
10:39:41,756 --> 10:39:44,480
the rectangular bounding boxes, this

15595
10:39:44,480 --> 10:39:47,040
means the corners of this rectangular

15596
10:39:47,040 --> 10:39:49,680
box of the dragable and droppable

15597
10:39:49,680 --> 10:39:52,720
elements overlap. You can also use other

15598
10:39:52,720 --> 10:39:55,596
collision algorithms. I tested out most

15599
10:39:55,596 --> 10:39:58,000
of them and this one worked the best. So

15600
10:39:58,000 --> 10:40:00,240
for me it was a lot of trial and error

15601
10:40:00,240 --> 10:40:02,320
and at the end this one worked the best

15602
10:40:02,320 --> 10:40:04,080
and that's the reason why we will use

15603
10:40:04,080 --> 10:40:06,000
it. Then we have also a few other

15604
10:40:06,000 --> 10:40:07,756
properties which we have to define but

15605
10:40:07,756 --> 10:40:09,680
for now we will just skip them. Inside

15606
10:40:09,680 --> 10:40:11,520
of here we want to render a cart

15607
10:40:11,520 --> 10:40:13,756
component imported from the components

15608
10:40:13,756 --> 10:40:15,840
and then we want to get the cart header

15609
10:40:15,840 --> 10:40:18,240
imported from the components. So in the

15610
10:40:18,240 --> 10:40:21,120
cart header we will render a car title

15611
10:40:21,120 --> 10:40:23,360
and so we can get the car title and for

15612
10:40:23,360 --> 10:40:25,916
the car title I want to say chapters and

15613
10:40:25,916 --> 10:40:28,320
if we save this and again go back and as

15614
10:40:28,320 --> 10:40:30,320
you see we get an error and this is a

15615
10:40:30,320 --> 10:40:33,520
very weird error because it's kind of a

15616
10:40:33,520 --> 10:40:35,756
lot of gibberish. So what's the problem?

15617
10:40:35,756 --> 10:40:39,200
Well D&D kit itself requires or needs a

15618
10:40:39,200 --> 10:40:41,040
JavaScript bundle. It creates

15619
10:40:41,040 --> 10:40:43,360
interactivity. This means we have to

15620
10:40:43,360 --> 10:40:45,756
mark this with the use or the component

15621
10:40:45,756 --> 10:40:48,160
with the use client directive. This

15622
10:40:48,160 --> 10:40:50,560
means if we again go back we should see

15623
10:40:50,560 --> 10:40:52,480
something and as you see this is the

15624
10:40:52,480 --> 10:40:54,800
card with the title chapters. But you

15625
10:40:54,800 --> 10:40:56,880
know what I want to render a border

15626
10:40:56,880 --> 10:40:58,960
underneath this title. This means we can

15627
10:40:58,960 --> 10:41:01,276
go to the card header itself and we can

15628
10:41:01,276 --> 10:41:04,000
give it a class name which will be flex

15629
10:41:04,000 --> 10:41:06,640
flex which will be row items which will

15630
10:41:06,640 --> 10:41:08,720
be center to center everything in the

15631
10:41:08,720 --> 10:41:11,360
middle vertically. Then also justify

15632
10:41:11,360 --> 10:41:13,276
between because later on I want to

15633
10:41:13,276 --> 10:41:16,000
render um something. So a button next to

15634
10:41:16,000 --> 10:41:17,756
the chapters and I want to align the

15635
10:41:17,756 --> 10:41:19,840
children to the most outer corner so

15636
10:41:19,840 --> 10:41:21,596
that the car title is rendered on the

15637
10:41:21,596 --> 10:41:23,596
left side and then the button itself on

15638
10:41:23,596 --> 10:41:25,916
the right side. Then this should also be

15639
10:41:25,916 --> 10:41:28,160
border of bottom to render the border at

15640
10:41:28,160 --> 10:41:30,320
the bottom and border border. This is

15641
10:41:30,320 --> 10:41:33,120
the color itself. So as you see this is

15642
10:41:33,120 --> 10:41:35,520
this little underline. Um if I go into

15643
10:41:35,520 --> 10:41:37,276
light mode I think you will see it a bit

15644
10:41:37,276 --> 10:41:39,200
better. Yes, I know you don't see

15645
10:41:39,200 --> 10:41:41,120
anything. You want dark mode. But here,

15646
10:41:41,120 --> 10:41:43,120
this is this little line. So, I will

15647
10:41:43,120 --> 10:41:45,436
switch back into dark mode. And as a

15648
10:41:45,436 --> 10:41:47,120
next step, we have to get the cart

15649
10:41:47,120 --> 10:41:49,200
content. So, underneath the cart header,

15650
10:41:49,200 --> 10:41:51,200
we can get the cart content. This is

15651
10:41:51,200 --> 10:41:52,880
imported from the components. And you

15652
10:41:52,880 --> 10:41:54,880
know what? Before I even continue, I

15653
10:41:54,880 --> 10:41:57,360
want to first of all create a diagram to

15654
10:41:57,360 --> 10:41:59,840
showcase the UI itself. So, this is

15655
10:41:59,840 --> 10:42:01,840
first of all, our cut. This is this

15656
10:42:01,840 --> 10:42:03,756
card. And of course, we also have this

15657
10:42:03,756 --> 10:42:06,240
chapters title and then an underline. So

15658
10:42:06,240 --> 10:42:08,240
I can just create this underline. Here's

15659
10:42:08,240 --> 10:42:10,640
the thing. In this card, we will render

15660
10:42:10,640 --> 10:42:13,276
another card. And this card will display

15661
10:42:13,276 --> 10:42:16,400
the chapters. So we can say chapter and

15662
10:42:16,400 --> 10:42:18,720
this will be one. Then we will create

15663
10:42:18,720 --> 10:42:21,276
another underline underneath this. And

15664
10:42:21,276 --> 10:42:23,596
in this card we will render all of the

15665
10:42:23,596 --> 10:42:25,840
lessons. This means I can get the text

15666
10:42:25,840 --> 10:42:28,560
icon and this will be lesson one. And

15667
10:42:28,560 --> 10:42:30,720
then I can just copy paste this and this

15668
10:42:30,720 --> 10:42:32,800
will be lesson two. This will be lesson

15669
10:42:32,800 --> 10:42:35,040
three and then lesson four. And then we

15670
10:42:35,040 --> 10:42:37,276
will have another chapter. So I can just

15671
10:42:37,276 --> 10:42:40,000
copy all of this again. And then we can

15672
10:42:40,000 --> 10:42:42,240
just copy paste it. So down below. And

15673
10:42:42,240 --> 10:42:44,720
this will be chapter 2 for example. And

15674
10:42:44,720 --> 10:42:48,160
then also again lesson 1 2 3 4. So as

15675
10:42:48,160 --> 10:42:50,480
you see we have one big card. And then

15676
10:42:50,480 --> 10:42:53,680
in the card itself we will have more you

15677
10:42:53,680 --> 10:42:56,080
could say more smaller cards with the

15678
10:42:56,080 --> 10:42:58,800
individual chapters and the individual

15679
10:42:58,800 --> 10:43:01,436
lessons. And then in the card content I

15680
10:43:01,436 --> 10:43:04,000
want to continue by using the sortable

15681
10:43:04,000 --> 10:43:06,560
context because as they say the sortable

15682
10:43:06,560 --> 10:43:09,756
context provides information via context

15683
10:43:09,756 --> 10:43:12,000
that is consumed by the use sortable

15684
10:43:12,000 --> 10:43:14,320
hook which is covered in greater detail

15685
10:43:14,320 --> 10:43:16,960
in the next section. That's fine. We

15686
10:43:16,960 --> 10:43:18,720
will come to that in a second. This

15687
10:43:18,720 --> 10:43:20,480
means we can go back and then in the

15688
10:43:20,480 --> 10:43:22,960
cart content we want to get the sortable

15689
10:43:22,960 --> 10:43:26,320
context imported from DND kit sortable.

15690
10:43:26,320 --> 10:43:28,720
Then we want to open this and for the

15691
10:43:28,720 --> 10:43:31,360
sortable context we have to provide two

15692
10:43:31,360 --> 10:43:33,436
key properties. First of all the

15693
10:43:33,436 --> 10:43:36,000
strategy. This means do we want to sort

15694
10:43:36,000 --> 10:43:39,200
our items horizontally or vertically? We

15695
10:43:39,200 --> 10:43:41,276
want to sort them vertically. This means

15696
10:43:41,276 --> 10:43:43,840
we want to use the vertical list sorting

15697
10:43:43,840 --> 10:43:46,560
strategy. We can import it. And then we

15698
10:43:46,560 --> 10:43:49,200
need to also provide items. So here's

15699
10:43:49,200 --> 10:43:50,640
the thing. If we go back to the

15700
10:43:50,640 --> 10:43:53,276
documentation, they have here a little

15701
10:43:53,276 --> 10:43:55,436
use state example, a little demo

15702
10:43:55,436 --> 10:43:57,756
example. We can just copy this use state

15703
10:43:57,756 --> 10:43:59,840
example and paste it above the return

15704
10:43:59,840 --> 10:44:02,560
statement. I can also import use state

15705
10:44:02,560 --> 10:44:05,120
and use state is imported from react. So

15706
10:44:05,120 --> 10:44:08,240
these are our items and as you see ID 1,

15707
10:44:08,240 --> 10:44:11,276
ID2, ID3 and they are also arranged the

15708
10:44:11,276 --> 10:44:12,960
right way. This means we will first of

15709
10:44:12,960 --> 10:44:16,480
all display ID 1 then ID2 then ID3. In

15710
10:44:16,480 --> 10:44:18,480
the sortable context we have to provide

15711
10:44:18,480 --> 10:44:20,800
items. This means if we go back as you

15712
10:44:20,800 --> 10:44:23,120
see we can just copy this uh example

15713
10:44:23,120 --> 10:44:25,520
with the items property and paste it for

15714
10:44:25,520 --> 10:44:27,756
the sortable context. So the sortable

15715
10:44:27,756 --> 10:44:30,960
context needs an array of our items

15716
10:44:30,960 --> 10:44:32,880
which we now pass. Nevertheless, we

15717
10:44:32,880 --> 10:44:35,040
still get one error. What's the problem?

15718
10:44:35,040 --> 10:44:37,680
We are missing children. So we will just

15719
10:44:37,680 --> 10:44:40,160
continue with the documentation itself.

15720
10:44:40,160 --> 10:44:42,240
So it does not expose any call back

15721
10:44:42,240 --> 10:44:44,160
props. To know when a sortable this

15722
10:44:44,160 --> 10:44:46,480
means or a dragable item is being picked

15723
10:44:46,480 --> 10:44:48,880
or moved over another sortable or

15724
10:44:48,880 --> 10:44:51,756
droppable item use the call back props

15725
10:44:51,756 --> 10:44:54,560
of DND context. This means for example

15726
10:44:54,560 --> 10:44:57,200
the DND context provides us with the

15727
10:44:57,200 --> 10:45:00,560
onra and property. And this on drag and

15728
10:45:00,560 --> 10:45:03,756
property is fire or fires whenever we

15729
10:45:03,756 --> 10:45:06,960
drop a sortable into a new or into its

15730
10:45:06,960 --> 10:45:09,756
new place when we restructure our whole

15731
10:45:09,756 --> 10:45:11,840
items. This means we can copy this

15732
10:45:11,840 --> 10:45:14,800
function handle drag and then we can go

15733
10:45:14,800 --> 10:45:16,800
back and we want to paste it above the

15734
10:45:16,800 --> 10:45:18,960
return statement. So function handle

15735
10:45:18,960 --> 10:45:21,680
drag and and then in the D&D context we

15736
10:45:21,680 --> 10:45:24,480
can get the property on drag end and

15737
10:45:24,480 --> 10:45:27,276
this will be equal to handle drag end.

15738
10:45:27,276 --> 10:45:29,520
So this looks good. then we can continue

15739
10:45:29,520 --> 10:45:31,916
with the documentation. So in order for

15740
10:45:31,916 --> 10:45:34,160
the sortable context component to

15741
10:45:34,160 --> 10:45:36,640
function properly, make sure that it's a

15742
10:45:36,640 --> 10:45:39,200
descendant of a D&D context provider.

15743
10:45:39,200 --> 10:45:41,276
That's fine. We already made sure of

15744
10:45:41,276 --> 10:45:43,520
that. Then the next step is to already

15745
10:45:43,520 --> 10:45:46,480
use the use sortable hook. So as

15746
10:45:46,480 --> 10:45:48,720
outlined above, the use sortable hook

15747
10:45:48,720 --> 10:45:51,276
combines both the use dragable and the

15748
10:45:51,276 --> 10:45:53,756
use droppable hook to connect elements

15749
10:45:53,756 --> 10:45:56,480
as both dragable sources and drop

15750
10:45:56,480 --> 10:45:59,120
targets. So this here is a dragable.

15751
10:45:59,120 --> 10:46:01,040
This is a droppable. This means we want

15752
10:46:01,040 --> 10:46:03,680
to take a dragable and drop it into a

15753
10:46:03,680 --> 10:46:06,000
droppable. So the next step is to create

15754
10:46:06,000 --> 10:46:08,880
the individual sortable item. This means

15755
10:46:08,880 --> 10:46:11,200
we can just copy this function sortable

15756
10:46:11,200 --> 10:46:13,680
item. And then we can again go back and

15757
10:46:13,680 --> 10:46:16,000
paste it. For example, yeah, let's paste

15758
10:46:16,000 --> 10:46:18,800
it above the handle drag and function.

15759
10:46:18,800 --> 10:46:21,040
So this is the function sortable item.

15760
10:46:21,040 --> 10:46:23,840
We get props. But we yeah, we can leave

15761
10:46:23,840 --> 10:46:26,000
them. Why not? We want to then import

15762
10:46:26,000 --> 10:46:28,720
use sortable. Use sortable is imported

15763
10:46:28,720 --> 10:46:31,360
from D&D kit. And then we want to also

15764
10:46:31,360 --> 10:46:35,276
import CSS. So here holds useful CSS

15765
10:46:35,276 --> 10:46:37,360
related methods. And we have to also

15766
10:46:37,360 --> 10:46:40,080
first of all import the CSS method. This

15767
10:46:40,080 --> 10:46:43,276
is imported from DND kit utilities. And

15768
10:46:43,276 --> 10:46:45,200
also if this confuses you right now,

15769
10:46:45,200 --> 10:46:47,200
don't worry. I will explain everything

15770
10:46:47,200 --> 10:46:49,276
in a second. Let's for now just do a bit

15771
10:46:49,276 --> 10:46:51,520
of copy pasting. So we want to import

15772
10:46:51,520 --> 10:46:54,880
CSS from DND kit utilities. This means I

15773
10:46:54,880 --> 10:46:57,596
can just paste it on top and this should

15774
10:46:57,596 --> 10:46:59,840
also work. So as you see we don't get

15775
10:46:59,840 --> 10:47:02,160
any error anymore right here. And then

15776
10:47:02,160 --> 10:47:04,880
we have our diff. We pass a ref style

15777
10:47:04,880 --> 10:47:07,200
attributes and listeners. So what do we

15778
10:47:07,200 --> 10:47:09,360
do right here? So I will try to explain

15779
10:47:09,360 --> 10:47:11,276
this code using plain English because

15780
10:47:11,276 --> 10:47:13,520
this here is a bit complicated. So first

15781
10:47:13,520 --> 10:47:15,200
of all as you see we get the use

15782
10:47:15,200 --> 10:47:17,436
sortable hook and this is the core hook

15783
10:47:17,436 --> 10:47:19,840
provided by D&D kit sortable. It

15784
10:47:19,840 --> 10:47:21,916
provides us with all of the necessary

15785
10:47:21,916 --> 10:47:24,240
logic and properties to make the

15786
10:47:24,240 --> 10:47:26,720
component itself sortable so that we can

15787
10:47:26,720 --> 10:47:29,436
drag and drop it. As you see, this use

15788
10:47:29,436 --> 10:47:32,720
sortable hook is called with a unique ID

15789
10:47:32,720 --> 10:47:35,520
for the individual item and it returns

15790
10:47:35,520 --> 10:47:38,720
an object with several key properties

15791
10:47:38,720 --> 10:47:41,436
that we need to attach to our components

15792
10:47:41,436 --> 10:47:44,000
DOM element as you see here. So for

15793
10:47:44,000 --> 10:47:46,400
example, we have the set node ref. So

15794
10:47:46,400 --> 10:47:49,680
set node ref style attributes listeners

15795
10:47:49,680 --> 10:47:52,080
the set node ref this is a function uh

15796
10:47:52,080 --> 10:47:55,360
that we pass as a ref to our DOM element

15797
10:47:55,360 --> 10:47:57,680
that we want to make sortable and this

15798
10:47:57,680 --> 10:48:00,560
allows the indicate internally to access

15799
10:48:00,560 --> 10:48:03,520
the underlying DOM node to measure its

15800
10:48:03,520 --> 10:48:06,480
pos uh position and size. Then we have

15801
10:48:06,480 --> 10:48:08,960
these attributes which we spread. This

15802
10:48:08,960 --> 10:48:11,520
is an object and this makes everything

15803
10:48:11,520 --> 10:48:13,360
accessible and that's why it's called

15804
10:48:13,360 --> 10:48:15,756
attributes. Then we also have these

15805
10:48:15,756 --> 10:48:18,160
listeners which we also spread. This

15806
10:48:18,160 --> 10:48:20,560
means this is an object and it contains

15807
10:48:20,560 --> 10:48:23,916
the event listeners on mouse down on

15808
10:48:23,916 --> 10:48:26,400
touch start and other things. So this is

15809
10:48:26,400 --> 10:48:29,916
required to detect and initiate the drag

15810
10:48:29,916 --> 10:48:32,720
operation and we spread the listeners

15811
10:48:32,720 --> 10:48:35,040
onto the element so that everything is

15812
10:48:35,040 --> 10:48:37,360
applied and here we also for example get

15813
10:48:37,360 --> 10:48:40,080
transform and transform is an object

15814
10:48:40,080 --> 10:48:42,160
that represents the element's current

15815
10:48:42,160 --> 10:48:44,560
position. So is it position number one,

15816
10:48:44,560 --> 10:48:46,400
position number two, number three,

15817
10:48:46,400 --> 10:48:48,160
whatever. And then we also have this

15818
10:48:48,160 --> 10:48:50,640
transition as you see here. So to

15819
10:48:50,640 --> 10:48:53,200
summarize it quickly, this sortable item

15820
10:48:53,200 --> 10:48:55,596
which we just created is a component and

15821
10:48:55,596 --> 10:48:58,000
it's a wrapper to make its children

15822
10:48:58,000 --> 10:48:59,756
dragable. The items, they should be

15823
10:48:59,756 --> 10:49:01,840
dragable. And the use sortable hook

15824
10:49:01,840 --> 10:49:04,400
provides all of the very very complex

15825
10:49:04,400 --> 10:49:06,480
logic for this whole drag and drop

15826
10:49:06,480 --> 10:49:09,360
operation. And the component's only job

15827
10:49:09,360 --> 10:49:11,596
is to correctly apply the props and the

15828
10:49:11,596 --> 10:49:14,160
styles returned by this hook. That's it.

15829
10:49:14,160 --> 10:49:16,080
I know it looks confusing. It might

15830
10:49:16,080 --> 10:49:18,080
sound confusing, but it's not that

15831
10:49:18,080 --> 10:49:20,160
complicated. So, what's the next step?

15832
10:49:20,160 --> 10:49:22,400
We implemented this. We can update the

15833
10:49:22,400 --> 10:49:24,240
transition and stuff like that. We won't

15834
10:49:24,240 --> 10:49:26,000
do that. Not right now. And the next

15835
10:49:26,000 --> 10:49:29,200
step is to add sensors. So, sensors are

15836
10:49:29,200 --> 10:49:31,916
an abstraction to manage and listen to

15837
10:49:31,916 --> 10:49:34,240
different input methods. So, what

15838
10:49:34,240 --> 10:49:36,320
exactly are sensors? So if you're not

15839
10:49:36,320 --> 10:49:38,160
familiar with the concept, don't worry.

15840
10:49:38,160 --> 10:49:40,720
I will explain it. So in DND kit,

15841
10:49:40,720 --> 10:49:43,360
sensors are an abstraction used to

15842
10:49:43,360 --> 10:49:45,680
detect um different types of input

15843
10:49:45,680 --> 10:49:48,400
methods to initiate the drag and drop

15844
10:49:48,400 --> 10:49:50,480
operations. And you know what? You can

15845
10:49:50,480 --> 10:49:52,640
use multiple sensors. You can use one

15846
10:49:52,640 --> 10:49:55,436
sensor which is specifically designed to

15847
10:49:55,436 --> 10:49:58,240
handle mouse um events. So when we drag

15848
10:49:58,240 --> 10:50:00,240
with our mouse, then there's also for

15849
10:50:00,240 --> 10:50:02,400
example the touch sensor which is

15850
10:50:02,400 --> 10:50:04,640
specifically used. So as you see um uh

15851
10:50:04,640 --> 10:50:06,480
for example keyboard sensor but there's

15852
10:50:06,480 --> 10:50:08,720
also a touch sensor which um

15853
10:50:08,720 --> 10:50:11,120
specifically handles touch events. So

15854
10:50:11,120 --> 10:50:13,840
when you use your finger uh on the phone

15855
10:50:13,840 --> 10:50:15,436
and then for example there's also the

15856
10:50:15,436 --> 10:50:17,840
keyboard sensors and they allow you to

15857
10:50:17,840 --> 10:50:20,080
implement this drag and drop operation

15858
10:50:20,080 --> 10:50:22,560
only by using the keyboard. So this

15859
10:50:22,560 --> 10:50:24,720
means we want to set up our sensors and

15860
10:50:24,720 --> 10:50:27,200
we want to specifically say we want to

15861
10:50:27,200 --> 10:50:30,000
specifically define uh what sensors we

15862
10:50:30,000 --> 10:50:32,160
want to use. This means we can just copy

15863
10:50:32,160 --> 10:50:34,560
this code example constant sensors. We

15864
10:50:34,560 --> 10:50:37,596
can go back and paste it just underneath

15865
10:50:37,596 --> 10:50:40,640
this uh function handle track end. So

15866
10:50:40,640 --> 10:50:43,360
use sensors this is imported from D&D

15867
10:50:43,360 --> 10:50:46,080
kit core. Use sensor this is imported

15868
10:50:46,080 --> 10:50:49,200
from D&D kit core. Pointer sensor this

15869
10:50:49,200 --> 10:50:51,520
is also imported from D&D kit core.

15870
10:50:51,520 --> 10:50:53,360
Keyboard sensor this is imported from

15871
10:50:53,360 --> 10:50:56,160
D&D kit core. And then sortable keyboard

15872
10:50:56,160 --> 10:50:58,560
coordinates this is imported from D&D

15873
10:50:58,560 --> 10:51:01,276
kit sortable. So again sensors are there

15874
10:51:01,276 --> 10:51:04,160
to literally just track the movement and

15875
10:51:04,160 --> 10:51:07,436
we have specific um sensors for specific

15876
10:51:07,436 --> 10:51:09,436
use cases. One is there for the mouse,

15877
10:51:09,436 --> 10:51:10,720
the other one is there for the keyboard,

15878
10:51:10,720 --> 10:51:13,360
the other is there for uh touch uh

15879
10:51:13,360 --> 10:51:15,436
sensitive things and stuff like that. So

15880
10:51:15,436 --> 10:51:17,200
with that we just track at the end of

15881
10:51:17,200 --> 10:51:19,916
the day how the user tries to drag our

15882
10:51:19,916 --> 10:51:22,000
item. Then of course we can pass the

15883
10:51:22,000 --> 10:51:25,040
sensors to our D&D context. So here we

15884
10:51:25,040 --> 10:51:27,200
will get a sensors property and this

15885
10:51:27,200 --> 10:51:29,520
will be equal to sensors. to the

15886
10:51:29,520 --> 10:51:32,000
constant which we just created. So

15887
10:51:32,000 --> 10:51:34,000
what's the next step? Well, the next

15888
10:51:34,000 --> 10:51:36,240
step is to right here they say you can

15889
10:51:36,240 --> 10:51:39,360
also update for example the distance and

15890
10:51:39,360 --> 10:51:40,880
delay and stuff like that. We won't do

15891
10:51:40,880 --> 10:51:43,120
that. The default is fine enough. So we

15892
10:51:43,120 --> 10:51:45,040
can skip this section. And then the next

15893
10:51:45,040 --> 10:51:47,120
step is to add the correct sorting

15894
10:51:47,120 --> 10:51:50,000
strategy. So the supported use case um

15895
10:51:50,000 --> 10:51:52,640
of the sortable preset include vertical

15896
10:51:52,640 --> 10:51:55,120
lists, horizontal lists, grids, and

15897
10:51:55,120 --> 10:51:57,596
virtualized lists. Because of the wide

15898
10:51:57,596 --> 10:52:00,400
variety of use cases supported, it would

15899
10:52:00,400 --> 10:52:03,040
be difficult to write a single strategy

15900
10:52:03,040 --> 10:52:05,040
to cover all of these different use

15901
10:52:05,040 --> 10:52:07,840
cases. Instead, the sortable preset

15902
10:52:07,840 --> 10:52:09,756
exposes a number of different

15903
10:52:09,756 --> 10:52:11,840
strategies. And as you see, for our

15904
10:52:11,840 --> 10:52:14,080
sortable context, we use the vertical

15905
10:52:14,080 --> 10:52:16,800
list sorting strategy. And here they say

15906
10:52:16,800 --> 10:52:19,276
this strategy is optimized for vertical

15907
10:52:19,276 --> 10:52:22,560
lists and supports virtualized lists.

15908
10:52:22,560 --> 10:52:24,240
Since we at the end of the day have a

15909
10:52:24,240 --> 10:52:26,000
vertical list. That's also the reason

15910
10:52:26,000 --> 10:52:27,680
why we use it. We don't have a

15911
10:52:27,680 --> 10:52:30,400
horizontal list. We don't need this swap

15912
10:52:30,400 --> 10:52:33,120
swapping strategy. Vertical list sorting

15913
10:52:33,120 --> 10:52:35,596
strategy. This is the correct strategy

15914
10:52:35,596 --> 10:52:38,240
for us. Then the next step is to add a

15915
10:52:38,240 --> 10:52:40,560
collision detection algorithm. As you

15916
10:52:40,560 --> 10:52:42,320
already know, we already implemented

15917
10:52:42,320 --> 10:52:44,800
one. This is the rect intersection

15918
10:52:44,800 --> 10:52:47,200
algorithm. So by default the collision

15919
10:52:47,200 --> 10:52:50,400
detection algorithm of D&D context is

15920
10:52:50,400 --> 10:52:53,276
rectangle intersection algorithm. While

15921
10:52:53,276 --> 10:52:56,000
the rectangle intersection strategy is

15922
10:52:56,000 --> 10:52:58,720
well suited for many use cases, it can

15923
10:52:58,720 --> 10:53:01,200
be unforgiving since it requires both

15924
10:53:01,200 --> 10:53:03,756
the dragable and droable bounding

15925
10:53:03,756 --> 10:53:07,200
rectangles to come in direct contact and

15926
10:53:07,200 --> 10:53:09,436
intersect. But in this case, this is

15927
10:53:09,436 --> 10:53:11,680
fine. And that's also why I use this

15928
10:53:11,680 --> 10:53:14,320
rectangle intersection algorithm or in

15929
10:53:14,320 --> 10:53:17,276
short wacked intersection. And the next

15930
10:53:17,276 --> 10:53:19,200
step is to just connect all of the

15931
10:53:19,200 --> 10:53:21,360
pieces. This means we can map over our

15932
10:53:21,360 --> 10:53:23,360
items and then just display the

15933
10:53:23,360 --> 10:53:25,596
individual sortable item for the

15934
10:53:25,596 --> 10:53:27,916
individual item. This means we can go

15935
10:53:27,916 --> 10:53:30,400
back into the sortable context inside of

15936
10:53:30,400 --> 10:53:32,480
here. We want to map over our items.

15937
10:53:32,480 --> 10:53:35,200
This means items do map as a param or

15938
10:53:35,200 --> 10:53:36,800
you know what I will just copy paste

15939
10:53:36,800 --> 10:53:38,880
this. Why not? So we will copy paste

15940
10:53:38,880 --> 10:53:40,880
this and paste it again inside of here.

15941
10:53:40,880 --> 10:53:43,840
So items do map as a param we get the id

15942
10:53:43,840 --> 10:53:46,240
and then we render the sortable item

15943
10:53:46,240 --> 10:53:48,640
component we pass a key since we have to

15944
10:53:48,640 --> 10:53:51,436
do that when we use react and also for

15945
10:53:51,436 --> 10:53:54,080
the ID we pass the ID because again if

15946
10:53:54,080 --> 10:53:56,480
we go to the sortable item function

15947
10:53:56,480 --> 10:53:58,000
component if you want to call it like

15948
10:53:58,000 --> 10:54:02,080
that it needs the ID the ID is required

15949
10:54:02,080 --> 10:54:04,240
and then if you scroll a bit more to the

15950
10:54:04,240 --> 10:54:06,480
bottom you will find the section. So I

15951
10:54:06,480 --> 10:54:08,000
have scrolled quite a bit through that

15952
10:54:08,000 --> 10:54:10,160
but we already implemented the co uh

15953
10:54:10,160 --> 10:54:11,916
collision detection algorithm. We

15954
10:54:11,916 --> 10:54:13,680
implemented the strategy. We don't need

15955
10:54:13,680 --> 10:54:15,520
to implement everything again. We want

15956
10:54:15,520 --> 10:54:17,436
to find this or you want to go to this

15957
10:54:17,436 --> 10:54:19,916
section. So finally we need to set up

15958
10:54:19,916 --> 10:54:22,320
the event handlers on the D&D context

15959
10:54:22,320 --> 10:54:25,200
provider in order to update the order of

15960
10:54:25,200 --> 10:54:27,840
the items on drag end. This means we

15961
10:54:27,840 --> 10:54:30,320
want to use the handle drag end

15962
10:54:30,320 --> 10:54:32,800
function. So I will just copy paste it

15963
10:54:32,800 --> 10:54:35,040
again. I know we already copied it but

15964
10:54:35,040 --> 10:54:37,200
we will again copy it and paste it for

15965
10:54:37,200 --> 10:54:40,160
this handle drag and function. So this

15966
10:54:40,160 --> 10:54:42,400
is relatively interesting because we

15967
10:54:42,400 --> 10:54:44,640
want to update our items. So first of

15968
10:54:44,640 --> 10:54:46,720
all we can go back to our state. We have

15969
10:54:46,720 --> 10:54:48,720
the getter items. We want to also create

15970
10:54:48,720 --> 10:54:51,520
the setter set items and then let's

15971
10:54:51,520 --> 10:54:54,400
analyze this handle drag and function.

15972
10:54:54,400 --> 10:54:56,960
What does it do? Why do we need it? Good

15973
10:54:56,960 --> 10:54:58,880
question. So first of all where do we

15974
10:54:58,880 --> 10:55:01,276
call or when do we call the handle drag

15975
10:55:01,276 --> 10:55:03,520
and function? Well, if you go back to

15976
10:55:03,520 --> 10:55:05,200
the return statement to the D and D

15977
10:55:05,200 --> 10:55:08,000
context, the on drag and property is set

15978
10:55:08,000 --> 10:55:10,480
equal to the handle drag and function.

15979
10:55:10,480 --> 10:55:12,560
So this means it will fire whenever we

15980
10:55:12,560 --> 10:55:14,960
are finished with dragging our items. So

15981
10:55:14,960 --> 10:55:18,000
when we reorder our structure and we

15982
10:55:18,000 --> 10:55:20,720
need this handle drag and function to

15983
10:55:20,720 --> 10:55:23,200
update our state because we want to then

15984
10:55:23,200 --> 10:55:26,000
rearrange our items. So this event

15985
10:55:26,000 --> 10:55:28,400
itself which we get through the params

15986
10:55:28,400 --> 10:55:31,200
fires when a user finishes dragging an

15987
10:55:31,200 --> 10:55:33,756
item and drops it. The main job is to

15988
10:55:33,756 --> 10:55:36,480
update our application state as you see

15989
10:55:36,480 --> 10:55:39,436
here because we use the set items setup

15990
10:55:39,436 --> 10:55:41,200
the function. So first of all we

15991
10:55:41,200 --> 10:55:43,916
destructure active and over from the

15992
10:55:43,916 --> 10:55:47,040
event itself. Then we check if the item

15993
10:55:47,040 --> 10:55:49,360
was dropped into a new position. This

15994
10:55:49,360 --> 10:55:52,640
means if the new dropped uh ID is not

15995
10:55:52,640 --> 10:55:55,360
equal to the old ID then this means the

15996
10:55:55,360 --> 10:55:58,400
arrangement has changed. If so we then

15997
10:55:58,400 --> 10:56:01,276
use the setter to update our state. We

15998
10:56:01,276 --> 10:56:04,080
first of all find the old index. So this

15999
10:56:04,080 --> 10:56:06,720
means the original index. So if the item

16000
10:56:06,720 --> 10:56:09,360
before had an index of one and has been

16001
10:56:09,360 --> 10:56:11,756
then dropped or sorted to be rendered a

16002
10:56:11,756 --> 10:56:14,000
bit down below. So the new index is

16003
10:56:14,000 --> 10:56:16,320
three and the old index is one. This

16004
10:56:16,320 --> 10:56:19,840
means it moved two numbers right. So

16005
10:56:19,840 --> 10:56:21,840
this means we have the old index the new

16006
10:56:21,840 --> 10:56:24,080
index and then using this array move

16007
10:56:24,080 --> 10:56:26,720
function we can then return the newly

16008
10:56:26,720 --> 10:56:29,596
sorted arrays. So now it will say 1 2 3.

16009
10:56:29,596 --> 10:56:32,000
So this array move function is imported

16010
10:56:32,000 --> 10:56:34,640
from D&D kit sortable and again this

16011
10:56:34,640 --> 10:56:37,276
function takes three events the items

16012
10:56:37,276 --> 10:56:39,840
array in general the old index and then

16013
10:56:39,840 --> 10:56:42,240
the new index. It will then combine

16014
10:56:42,240 --> 10:56:44,240
everything and it will move an array

16015
10:56:44,240 --> 10:56:46,320
item to a different position. It then

16016
10:56:46,320 --> 10:56:49,200
returns a new array with the item moved

16017
10:56:49,200 --> 10:56:51,840
to its new position and it won't break

16018
10:56:51,840 --> 10:56:54,480
anything because it will return a new

16019
10:56:54,480 --> 10:56:56,640
array. So this is what this function

16020
10:56:56,640 --> 10:56:59,200
does and it's very essential to use it.

16021
10:56:59,200 --> 10:57:01,200
And you know what? Let's test it out. So

16022
10:57:01,200 --> 10:57:04,480
if I go back, we see nothing. What's the

16023
10:57:04,480 --> 10:57:06,240
problem? Well, it's quite simple. The

16024
10:57:06,240 --> 10:57:08,480
sortable item returns absolutely

16025
10:57:08,480 --> 10:57:11,200
nothing. And what we want to render or

16026
10:57:11,200 --> 10:57:13,276
we return something the div but for the

16027
10:57:13,276 --> 10:57:15,116
div the item itself there's nothing it's

16028
10:57:15,116 --> 10:57:17,276
an empty div. This means we want to just

16029
10:57:17,276 --> 10:57:20,400
return for example the props do id. This

16030
10:57:20,400 --> 10:57:22,320
means if we again go back we now see and

16031
10:57:22,320 --> 10:57:24,320
if I also do a hard refresh and go back

16032
10:57:24,320 --> 10:57:27,916
to the core structure 1 2 3 and maybe I

16033
10:57:27,916 --> 10:57:30,320
can also zoom in a bit. So if I reorder

16034
10:57:30,320 --> 10:57:32,480
this from one you see this is um

16035
10:57:32,480 --> 10:57:34,960
dragable. I can drag it and I can drop

16036
10:57:34,960 --> 10:57:38,240
it into position number two. Uh-huh. our

16037
10:57:38,240 --> 10:57:40,800
whole array updated. I can then take the

16038
10:57:40,800 --> 10:57:44,160
number three, this item, and drag it and

16039
10:57:44,160 --> 10:57:46,640
drop it right here. So, this works

16040
10:57:46,640 --> 10:57:48,640
beautifully. Wow. So, we just

16041
10:57:48,640 --> 10:57:51,840
implemented a very basic version of drag

16042
10:57:51,840 --> 10:57:53,840
and drop. So, we are finished with drag

16043
10:57:53,840 --> 10:57:56,080
and drop, which means we can uh head

16044
10:57:56,080 --> 10:57:58,800
over to the public facing dashboard,

16045
10:57:58,800 --> 10:58:01,680
right? No. I mean, yes, drag and drop

16046
10:58:01,680 --> 10:58:03,840
works, but we want to reorder our

16047
10:58:03,840 --> 10:58:06,720
chapters and lessons. So before we

16048
10:58:06,720 --> 10:58:09,116
create the real UI for that we have to

16049
10:58:09,116 --> 10:58:11,436
first of all update our schema because

16050
10:58:11,436 --> 10:58:13,436
currently there's no way to create a

16051
10:58:13,436 --> 10:58:15,840
chapter and also no way to create

16052
10:58:15,840 --> 10:58:19,200
lessons. This means underneath this enum

16053
10:58:19,200 --> 10:58:21,276
we can create a new model. This will be

16054
10:58:21,276 --> 10:58:23,840
chapter and as you all know uh in a

16055
10:58:23,840 --> 10:58:25,840
relational database you have to provide

16056
10:58:25,840 --> 10:58:28,320
a primary key in this case this will be

16057
10:58:28,320 --> 10:58:30,800
the id which will be of type string at

16058
10:58:30,800 --> 10:58:34,480
id at default uyu ID. Then what will a

16059
10:58:34,480 --> 10:58:36,880
chapter have? It will have a title. This

16060
10:58:36,880 --> 10:58:38,960
will be of type string. It will also

16061
10:58:38,960 --> 10:58:41,276
have a position. And this will be of

16062
10:58:41,276 --> 10:58:43,680
type int. But now you might ask me, hey

16063
10:58:43,680 --> 10:58:45,840
Jan, position, what is that? Why do we

16064
10:58:45,840 --> 10:58:48,000
need this position integer? Good

16065
10:58:48,000 --> 10:58:50,560
question. So if we go back to the course

16066
10:58:50,560 --> 10:58:53,916
structure, how do we order our items? We

16067
10:58:53,916 --> 10:58:58,000
use this ID 1 2 3. This is the order.

16068
10:58:58,000 --> 10:59:00,480
The problem is this yuyu ID. It won't be

16069
10:59:00,480 --> 10:59:04,240
like 1 2 3. No, the UYU ID will be

16070
10:59:04,240 --> 10:59:06,320
something like gibberish dash gibberish

16071
10:59:06,320 --> 10:59:08,880
dash gibberish. As you see this won't

16072
10:59:08,880 --> 10:59:11,680
work. We want numbers 1 2 3. And for

16073
10:59:11,680 --> 10:59:13,680
that we will create or we will use this

16074
10:59:13,680 --> 10:59:15,436
position. This means for example one

16075
10:59:15,436 --> 10:59:17,436
chapter will have the position one then

16076
10:59:17,436 --> 10:59:20,000
the next chapter position two the next

16077
10:59:20,000 --> 10:59:22,800
chapter position three and so on. So we

16078
10:59:22,800 --> 10:59:25,436
have to have a logical order and we will

16079
10:59:25,436 --> 10:59:28,080
create that using this position integer.

16080
10:59:28,080 --> 10:59:30,640
Then I want to also create created at

16081
10:59:30,640 --> 10:59:33,840
and updated at timestamps. So created at

16082
10:59:33,840 --> 10:59:36,400
will be of type date time at default

16083
10:59:36,400 --> 10:59:38,880
now. And then also we want to create a

16084
10:59:38,880 --> 10:59:41,276
updated at time stamp and this will be

16085
10:59:41,276 --> 10:59:44,880
of type daytime at updated at. So the

16086
10:59:44,880 --> 10:59:47,360
chapter table model is finished. And

16087
10:59:47,360 --> 10:59:49,520
then as a next step we can create a

16088
10:59:49,520 --> 10:59:51,840
lesson model. So underneath this model

16089
10:59:51,840 --> 10:59:53,596
we want to create a new model. This will

16090
10:59:53,596 --> 10:59:56,160
be lesson. We can open it again. We want

16091
10:59:56,160 --> 10:59:58,800
to create an ID. ID will be of type

16092
10:59:58,800 --> 11:00:03,200
string. At id default uyu id. Then what

16093
11:00:03,200 --> 11:00:05,360
fields, what columns will our lesson

16094
11:00:05,360 --> 11:00:07,916
have? It will first of all have a title.

16095
11:00:07,916 --> 11:00:09,840
This will be of type string. It will

16096
11:00:09,840 --> 11:00:12,160
also have a description. It will be of

16097
11:00:12,160 --> 11:00:14,400
type string. But this description will

16098
11:00:14,400 --> 11:00:16,640
be optional. This means if we add this

16099
11:00:16,640 --> 11:00:19,040
question mark at the end, we tell our

16100
11:00:19,040 --> 11:00:21,200
database that this description is

16101
11:00:21,200 --> 11:00:24,160
optional. Then we want to also get a

16102
11:00:24,160 --> 11:00:27,116
thumbnail URL. So this will be like the

16103
11:00:27,116 --> 11:00:29,596
image. This will be of type string also

16104
11:00:29,596 --> 11:00:32,800
optional. And then also a video URL

16105
11:00:32,800 --> 11:00:34,640
because at the end of the day we will

16106
11:00:34,640 --> 11:00:36,880
then showcase a lesson. lesson will

16107
11:00:36,880 --> 11:00:38,960
first of all then have a thumbnail and

16108
11:00:38,960 --> 11:00:41,040
then once the user clicks on play we

16109
11:00:41,040 --> 11:00:43,360
will display the video itself and and

16110
11:00:43,360 --> 11:00:45,520
for that we need the thumbnail and also

16111
11:00:45,520 --> 11:00:48,560
the video URL and this will be of type

16112
11:00:48,560 --> 11:00:50,960
string and then this will be optional

16113
11:00:50,960 --> 11:00:53,520
and also you know what thumbnail URL

16114
11:00:53,520 --> 11:00:56,880
video URL do I want to really store URLs

16115
11:00:56,880 --> 11:00:59,596
I mean it will be at the end a key right

16116
11:00:59,596 --> 11:01:01,680
so maybe this should rather be called

16117
11:01:01,680 --> 11:01:05,360
thumbnail key and then also video key

16118
11:01:05,360 --> 11:01:07,116
and Then we want to also create the

16119
11:01:07,116 --> 11:01:09,680
created add and updated add timestamps.

16120
11:01:09,680 --> 11:01:11,116
This means we can just copy them from

16121
11:01:11,116 --> 11:01:13,200
the chapter and paste them inside of

16122
11:01:13,200 --> 11:01:15,916
here. So our two tables, our two models

16123
11:01:15,916 --> 11:01:17,840
are created. They are finished.

16124
11:01:17,840 --> 11:01:20,240
Nevertheless, we are missing relations.

16125
11:01:20,240 --> 11:01:21,916
So first of all, let's start with the

16126
11:01:21,916 --> 11:01:24,160
chapter. What relations will the chapter

16127
11:01:24,160 --> 11:01:26,000
have? Well, let's for now forget the

16128
11:01:26,000 --> 11:01:28,400
lesson. We have the course and the

16129
11:01:28,400 --> 11:01:30,560
course will have a relationship with the

16130
11:01:30,560 --> 11:01:32,880
chapter. What relationship will this be?

16131
11:01:32,880 --> 11:01:35,200
A onetoone relationship? a one to many

16132
11:01:35,200 --> 11:01:36,720
relationship, a many to many

16133
11:01:36,720 --> 11:01:38,720
relationship. Well, let's go through the

16134
11:01:38,720 --> 11:01:40,640
relationship types. A onetoone

16135
11:01:40,640 --> 11:01:43,276
relationship would mean that one chapter

16136
11:01:43,276 --> 11:01:45,360
could only have one course or in other

16137
11:01:45,360 --> 11:01:47,680
words, one course could only have one

16138
11:01:47,680 --> 11:01:50,400
chapter. That's not the case. One course

16139
11:01:50,400 --> 11:01:53,200
can have many chapters. This means we

16140
11:01:53,200 --> 11:01:55,116
want to create a one to many

16141
11:01:55,116 --> 11:01:57,360
relationship. How do you create a one to

16142
11:01:57,360 --> 11:01:59,680
many relationship in Prisma? You should

16143
11:01:59,680 --> 11:02:01,680
all know it. We want to go into the

16144
11:02:01,680 --> 11:02:03,756
course model. We want to go underneath

16145
11:02:03,756 --> 11:02:06,480
the user ID and then we can say chapter

16146
11:02:06,480 --> 11:02:08,640
this will be lowercased will be equal to

16147
11:02:08,640 --> 11:02:11,360
the chapter model and we want to append

16148
11:02:11,360 --> 11:02:13,436
an array symbol because we want to

16149
11:02:13,436 --> 11:02:16,000
create a one to many relationship. If I

16150
11:02:16,000 --> 11:02:18,320
click on command S it will autogenerate

16151
11:02:18,320 --> 11:02:20,720
the relationship in theory and yes this

16152
11:02:20,720 --> 11:02:23,360
worked nicely. The only problem is it

16153
11:02:23,360 --> 11:02:25,680
made these fields these columns these

16154
11:02:25,680 --> 11:02:28,160
properties um optional. This means we

16155
11:02:28,160 --> 11:02:29,756
can delete these question marks. We

16156
11:02:29,756 --> 11:02:31,840
don't need them. So this is our first

16157
11:02:31,840 --> 11:02:34,240
relationship. But we also have a

16158
11:02:34,240 --> 11:02:36,400
relationship between the chapter and

16159
11:02:36,400 --> 11:02:38,640
lesson. What relationship is this? One

16160
11:02:38,640 --> 11:02:40,880
to one, one to many or many to many?

16161
11:02:40,880 --> 11:02:42,960
Well, it's a one to many relationship

16162
11:02:42,960 --> 11:02:45,596
because each lesson has to be related to

16163
11:02:45,596 --> 11:02:48,480
one chapter. But every chapter can have

16164
11:02:48,480 --> 11:02:51,200
many many lessons. 10 lessons, 20

16165
11:02:51,200 --> 11:02:53,360
lessons, I don't care. This means we can

16166
11:02:53,360 --> 11:02:55,756
go underneath this course ID and then we

16167
11:02:55,756 --> 11:02:58,560
can just say quite simply um lesson

16168
11:02:58,560 --> 11:03:01,436
lowerase will or lessons this will be

16169
11:03:01,436 --> 11:03:03,360
equal to the lesson model we want to

16170
11:03:03,360 --> 11:03:05,520
append array symbols and if I click on

16171
11:03:05,520 --> 11:03:08,080
command s then we will autogenerate the

16172
11:03:08,080 --> 11:03:10,000
relationship of course again this

16173
11:03:10,000 --> 11:03:12,000
shouldn't be optional so we can delete

16174
11:03:12,000 --> 11:03:14,240
the question marks uh in the lesson

16175
11:03:14,240 --> 11:03:16,880
model so in theory this should be

16176
11:03:16,880 --> 11:03:18,960
already it which means we want to sync

16177
11:03:18,960 --> 11:03:21,360
our remote database with our local

16178
11:03:21,360 --> 11:03:23,436
database schema This means we can open

16179
11:03:23,436 --> 11:03:25,360
our terminal, stop the dev server and

16180
11:03:25,360 --> 11:03:29,116
then run pnpm dlx prisma db push. I

16181
11:03:29,116 --> 11:03:31,116
almost forgot the command. My god. And

16182
11:03:31,116 --> 11:03:33,520
yes, your database is now in sync with

16183
11:03:33,520 --> 11:03:35,756
your Prisma schema. This means we can

16184
11:03:35,756 --> 11:03:38,000
restart our dev server. And this is

16185
11:03:38,000 --> 11:03:40,400
finished. So before we continue with our

16186
11:03:40,400 --> 11:03:42,480
course structure, I want to first of all

16187
11:03:42,480 --> 11:03:44,640
fix one problem which I have with my

16188
11:03:44,640 --> 11:03:47,200
edit route because again if we go back,

16189
11:03:47,200 --> 11:03:49,840
we have two sections. the basic info

16190
11:03:49,840 --> 11:03:52,480
section and the course structure. I want

16191
11:03:52,480 --> 11:03:54,320
to first of all again fix one problem

16192
11:03:54,320 --> 11:03:57,200
with the basic info structure or page.

16193
11:03:57,200 --> 11:03:59,200
So here's the thing. If the user or so

16194
11:03:59,200 --> 11:04:01,520
we have a server action as you know this

16195
11:04:01,520 --> 11:04:03,840
server action is a public endpoint even

16196
11:04:03,840 --> 11:04:05,840
though we make sure that the user is

16197
11:04:05,840 --> 11:04:08,080
verified or is authenticated and has an

16198
11:04:08,080 --> 11:04:10,560
admin role. I want you first I want to

16199
11:04:10,560 --> 11:04:13,040
still protect this server action. This

16200
11:04:13,040 --> 11:04:15,200
means I want to implement arcjet again

16201
11:04:15,200 --> 11:04:17,360
and thankfully we already did it in the

16202
11:04:17,360 --> 11:04:19,436
creation route which means we can also

16203
11:04:19,436 --> 11:04:21,916
do a bit of copy pasting. So I want to

16204
11:04:21,916 --> 11:04:24,480
again implement the uh the detect bot

16205
11:04:24,480 --> 11:04:27,436
rule and also the fixed window rule.

16206
11:04:27,436 --> 11:04:29,680
This means we can copy this constant AJ

16207
11:04:29,680 --> 11:04:31,916
from the creation route. Go back to the

16208
11:04:31,916 --> 11:04:35,200
actions uh file to the act to the server

16209
11:04:35,200 --> 11:04:37,680
action for the edit route. Then we can

16210
11:04:37,680 --> 11:04:40,000
paste it above. So we want to of course

16211
11:04:40,000 --> 11:04:42,480
also import everything. Arcjet is

16212
11:04:42,480 --> 11:04:45,116
imported from the lip folder. Detect bot

16213
11:04:45,116 --> 11:04:47,040
this is imported also from the lip

16214
11:04:47,040 --> 11:04:49,916
folder and fixed window is imported from

16215
11:04:49,916 --> 11:04:52,800
the lip folder. So we implemented or we

16216
11:04:52,800 --> 11:04:54,960
defined our rules which means we can

16217
11:04:54,960 --> 11:04:57,680
also now get the decision. So in the try

16218
11:04:57,680 --> 11:04:59,680
statement above the result we can create

16219
11:04:59,680 --> 11:05:02,160
a constant decision and this will be

16220
11:05:02,160 --> 11:05:05,276
equal to a rate arjet or not arjet but

16221
11:05:05,276 --> 11:05:06,880
aj.protect

16222
11:05:06,880 --> 11:05:09,520
and then as an argument we want to pass

16223
11:05:09,520 --> 11:05:11,840
our request. This means if we go back to

16224
11:05:11,840 --> 11:05:14,320
the creation server action, we can just

16225
11:05:14,320 --> 11:05:16,000
copy this code. So we can get the

16226
11:05:16,000 --> 11:05:18,240
request and this will be equal to this

16227
11:05:18,240 --> 11:05:20,560
uh request function. We will paste it

16228
11:05:20,560 --> 11:05:22,640
above the decision. We want to import

16229
11:05:22,640 --> 11:05:26,080
request from um arcjet / next. And then

16230
11:05:26,080 --> 11:05:28,240
we want to create an if statement. As

16231
11:05:28,240 --> 11:05:30,000
you know right here, we already created

16232
11:05:30,000 --> 11:05:32,480
one. So if the decision is denied and if

16233
11:05:32,480 --> 11:05:34,640
the reason is weight limit, then we will

16234
11:05:34,640 --> 11:05:37,040
return this error message. And if it's a

16235
11:05:37,040 --> 11:05:38,640
different error, then we will return

16236
11:05:38,640 --> 11:05:40,560
this error message. This means we can

16237
11:05:40,560 --> 11:05:42,800
just copy this and paste it underneath

16238
11:05:42,800 --> 11:05:45,840
our decision. So um as you see we get

16239
11:05:45,840 --> 11:05:48,000
still one error. What's the problem? We

16240
11:05:48,000 --> 11:05:50,480
well we have to pass the request and as

16241
11:05:50,480 --> 11:05:53,116
an argument and also we have to pass our

16242
11:05:53,116 --> 11:05:54,960
fingerprint. In this case this will be

16243
11:05:54,960 --> 11:05:57,276
the user ID. This means fingerprint will

16244
11:05:57,276 --> 11:06:00,960
be equal to the user dot user id. This

16245
11:06:00,960 --> 11:06:03,596
means we identify the request or yeah we

16246
11:06:03,596 --> 11:06:06,080
identify and we track the request using

16247
11:06:06,080 --> 11:06:08,880
the user ID. So this optimization is

16248
11:06:08,880 --> 11:06:11,360
also finished and we can continue with

16249
11:06:11,360 --> 11:06:13,840
our course structure. So first of all I

16250
11:06:13,840 --> 11:06:15,596
want to get my data. This means we can

16251
11:06:15,596 --> 11:06:17,680
create an interface. This will be called

16252
11:06:17,680 --> 11:06:20,400
I app props. And inside of here we want

16253
11:06:20,400 --> 11:06:23,040
to get data. What type will data have?

16254
11:06:23,040 --> 11:06:25,756
Well if we go back to the page.tsx or if

16255
11:06:25,756 --> 11:06:28,320
we go to the edit course form then you

16256
11:06:28,320 --> 11:06:30,400
will see that we get our data and we

16257
11:06:30,400 --> 11:06:32,960
pass the type admin course singular

16258
11:06:32,960 --> 11:06:35,040
type. This means we can just copy this

16259
11:06:35,040 --> 11:06:37,436
and paste it inside of here. So admin

16260
11:06:37,436 --> 11:06:40,160
course singular type. If you forgot

16261
11:06:40,160 --> 11:06:42,400
about this type, don't worry. In our

16262
11:06:42,400 --> 11:06:44,640
data access layer where we fetch our

16263
11:06:44,640 --> 11:06:47,520
data, we infer the type. So if I find it

16264
11:06:47,520 --> 11:06:49,596
quickly, what was it? Get course. Yes,

16265
11:06:49,596 --> 11:06:52,160
we infer the type as you see. And we

16266
11:06:52,160 --> 11:06:54,400
pass it right here. This means in our

16267
11:06:54,400 --> 11:06:56,400
params we can destructure them. And this

16268
11:06:56,400 --> 11:06:59,116
will be of type I props. And then where

16269
11:06:59,116 --> 11:07:01,596
we the structure, we can get our data.

16270
11:07:01,596 --> 11:07:04,240
If we go back to the page.tsx, we get

16271
11:07:04,240 --> 11:07:06,160
one error. And that's because we have to

16272
11:07:06,160 --> 11:07:08,960
provide the data. So data will be equal

16273
11:07:08,960 --> 11:07:11,436
to data. This means if we go back to the

16274
11:07:11,436 --> 11:07:14,320
course structure, we can use our data.

16275
11:07:14,320 --> 11:07:16,320
So what's the next step? Well, as a next

16276
11:07:16,320 --> 11:07:18,080
step, I have to first of all again

16277
11:07:18,080 --> 11:07:20,480
update my query because our data

16278
11:07:20,480 --> 11:07:23,116
currently only gets uh gets the course

16279
11:07:23,116 --> 11:07:25,276
basic info, but we don't get our

16280
11:07:25,276 --> 11:07:27,360
chapters and we also don't get our

16281
11:07:27,360 --> 11:07:29,276
lessons. This means we can open the

16282
11:07:29,276 --> 11:07:31,916
explorer, go back into our data access

16283
11:07:31,916 --> 11:07:34,560
layer and go into the admin get course

16284
11:07:34,560 --> 11:07:36,800
file. Then inside of here, we want to

16285
11:07:36,800 --> 11:07:39,200
update our select statement. Again, I

16286
11:07:39,200 --> 11:07:41,200
want to get the chapters and I want to

16287
11:07:41,200 --> 11:07:44,160
also get the related lessons. This means

16288
11:07:44,160 --> 11:07:46,400
we can go underneath the category. Then

16289
11:07:46,400 --> 11:07:48,640
we can get the chapter. We can open it.

16290
11:07:48,640 --> 11:07:51,116
We want to select a few properties from

16291
11:07:51,116 --> 11:07:53,200
the chapter model. And this will be the

16292
11:07:53,200 --> 11:07:55,520
ID. So this will be true. And also the

16293
11:07:55,520 --> 11:07:57,916
title, so true. and of course the

16294
11:07:57,916 --> 11:07:59,916
position and we can set this to true.

16295
11:07:59,916 --> 11:08:02,160
Then we can also get the lessons. This

16296
11:08:02,160 --> 11:08:03,680
means underneath the position we will

16297
11:08:03,680 --> 11:08:05,840
get lessons. We can open this. We want

16298
11:08:05,840 --> 11:08:08,000
to again create a select statement. And

16299
11:08:08,000 --> 11:08:09,916
then we want to get an ID. This will be

16300
11:08:09,916 --> 11:08:12,320
true. Then of course the title. Then the

16301
11:08:12,320 --> 11:08:15,596
description of course also the thumbnail

16302
11:08:15,596 --> 11:08:17,596
key. Then we want to also get the

16303
11:08:17,596 --> 11:08:19,596
position and where is my position? Why

16304
11:08:19,596 --> 11:08:21,596
don't I get it? Did I forget to add it

16305
11:08:21,596 --> 11:08:24,320
in my schema? So title, description. Ah,

16306
11:08:24,320 --> 11:08:26,480
I forgot the position. My god. So for

16307
11:08:26,480 --> 11:08:28,480
the lesson we have to also of course add

16308
11:08:28,480 --> 11:08:30,640
a position because we will have to order

16309
11:08:30,640 --> 11:08:32,960
our result. This means underneath the v

16310
11:08:32,960 --> 11:08:36,240
video key we can get a position and this

16311
11:08:36,240 --> 11:08:38,480
will be of type int. Then of course we

16312
11:08:38,480 --> 11:08:40,560
want to again sync our database. This

16313
11:08:40,560 --> 11:08:42,640
means in the terminal we can run pnpm

16314
11:08:42,640 --> 11:08:45,916
dlx prisma db push. This will sync our

16315
11:08:45,916 --> 11:08:48,160
database and in theory everything should

16316
11:08:48,160 --> 11:08:50,720
be successful in a second. Yes,

16317
11:08:50,720 --> 11:08:52,560
everything worked. we can restart our

16318
11:08:52,560 --> 11:08:55,040
dev server and then we can continue with

16319
11:08:55,040 --> 11:08:57,520
this uh query. So we get our thumbnail

16320
11:08:57,520 --> 11:08:59,276
key and then we want to also get the

16321
11:08:59,276 --> 11:09:01,840
position and then also the video key and

16322
11:09:01,840 --> 11:09:04,320
this should be it I think. So yes, then

16323
11:09:04,320 --> 11:09:06,160
we have the if statement return data.

16324
11:09:06,160 --> 11:09:07,756
Yeah, this all looks good. We can again

16325
11:09:07,756 --> 11:09:10,000
close this and we can continue with the

16326
11:09:10,000 --> 11:09:12,240
course structure. So here's the thing.

16327
11:09:12,240 --> 11:09:15,040
Currently for my array I pass this

16328
11:09:15,040 --> 11:09:17,040
default value. Of course this is not

16329
11:09:17,040 --> 11:09:19,116
what we want to pass. We want to pass

16330
11:09:19,116 --> 11:09:21,756
our data. This means what we will do is

16331
11:09:21,756 --> 11:09:24,320
go above this constant items and we will

16332
11:09:24,320 --> 11:09:26,640
create a constant. This will be called

16333
11:09:26,640 --> 11:09:29,436
initial items and this will be equal to

16334
11:09:29,436 --> 11:09:33,200
data dot chapter dot map since we will

16335
11:09:33,200 --> 11:09:35,840
have multiple chapters. Then as a param

16336
11:09:35,840 --> 11:09:37,916
we can get this singular chapter the

16337
11:09:37,916 --> 11:09:40,080
iterator and then we want to just return

16338
11:09:40,080 --> 11:09:42,880
it and open an object inside of here. I

16339
11:09:42,880 --> 11:09:45,276
want to restructure my items because

16340
11:09:45,276 --> 11:09:48,160
currently the data structure is fine but

16341
11:09:48,160 --> 11:09:50,080
it's not that easy to work with it.

16342
11:09:50,080 --> 11:09:51,596
That's why I want to restructure

16343
11:09:51,596 --> 11:09:53,596
everything. So first of all we will have

16344
11:09:53,596 --> 11:09:55,756
an ID. This will be of or this will be

16345
11:09:55,756 --> 11:09:58,640
equal to the chapter do ID. Then we will

16346
11:09:58,640 --> 11:10:00,720
have the title. This will be equal to

16347
11:10:00,720 --> 11:10:02,640
the chapter.title.

16348
11:10:02,640 --> 11:10:04,960
Then also the order itself and this will

16349
11:10:04,960 --> 11:10:07,756
be the chapter.

16350
11:10:07,756 --> 11:10:10,320
Then we will also have an isopen

16351
11:10:10,320 --> 11:10:12,560
boolean. So later on we will have like

16352
11:10:12,560 --> 11:10:14,800
this collapsible element and for that we

16353
11:10:14,800 --> 11:10:17,360
need this state and or this property and

16354
11:10:17,360 --> 11:10:19,436
this will be as a default true. This

16355
11:10:19,436 --> 11:10:21,680
means as a default the chapter will be

16356
11:10:21,680 --> 11:10:24,320
open this collapsible item. We can also

16357
11:10:24,320 --> 11:10:26,560
create a comment and say default

16358
11:10:26,560 --> 11:10:29,436
chapters to open. Yeah I think this is

16359
11:10:29,436 --> 11:10:32,400
fine. Then we can also get our lessons

16360
11:10:32,400 --> 11:10:34,560
and we want to again first of all map

16361
11:10:34,560 --> 11:10:36,640
over our lessons. This means we can get

16362
11:10:36,640 --> 11:10:40,240
the chapter lessons do map as a param.

16363
11:10:40,240 --> 11:10:42,560
We can get a singular lesson. We want to

16364
11:10:42,560 --> 11:10:44,720
return it. Open an object. And then

16365
11:10:44,720 --> 11:10:47,116
inside of here, we will have an ID. This

16366
11:10:47,116 --> 11:10:50,240
will be of or equal to the lesson do ID.

16367
11:10:50,240 --> 11:10:52,800
Then also the title itself. This will be

16368
11:10:52,800 --> 11:10:55,040
equal to the lesson.title.

16369
11:10:55,040 --> 11:10:57,436
And then also the order and the order

16370
11:10:57,436 --> 11:11:00,720
will be equal to the lesson dotposition.

16371
11:11:00,720 --> 11:11:02,320
This should already be it. We get our

16372
11:11:02,320 --> 11:11:05,040
lesson uh initial items. But here's the

16373
11:11:05,040 --> 11:11:06,800
thing. This could be undefined. What I

16374
11:11:06,800 --> 11:11:08,720
mean by that is we could have no

16375
11:11:08,720 --> 11:11:10,800
chapters because when we create our

16376
11:11:10,800 --> 11:11:12,960
initial course it's empty. This means we

16377
11:11:12,960 --> 11:11:14,800
don't have any chapters and we don't

16378
11:11:14,800 --> 11:11:16,880
have any lessons. This means if this is

16379
11:11:16,880 --> 11:11:19,360
not defined we can create an or symbol.

16380
11:11:19,360 --> 11:11:21,360
So or and then this will just be an

16381
11:11:21,360 --> 11:11:23,520
empty array. And then instead of passing

16382
11:11:23,520 --> 11:11:25,840
these initial values we can just delete

16383
11:11:25,840 --> 11:11:28,080
them or this array and we can paste

16384
11:11:28,080 --> 11:11:30,800
instead the initial items array which we

16385
11:11:30,800 --> 11:11:32,880
just configured or in other words

16386
11:11:32,880 --> 11:11:35,436
created. So this is finished. We can

16387
11:11:35,436 --> 11:11:37,596
first of all collapse the initial items.

16388
11:11:37,596 --> 11:11:39,436
We are finished with the use state. We

16389
11:11:39,436 --> 11:11:42,000
will continue with the sortable item in

16390
11:11:42,000 --> 11:11:44,080
a second. So with this function, first

16391
11:11:44,080 --> 11:11:46,080
of all the sensors. Are they configured

16392
11:11:46,080 --> 11:11:48,480
correctly? Pointer sensor, keyboard

16393
11:11:48,480 --> 11:11:50,720
sensor. Yes, this looks good. So this is

16394
11:11:50,720 --> 11:11:53,520
also finished. So I think we want to

16395
11:11:53,520 --> 11:11:56,000
first of all continue with the general

16396
11:11:56,000 --> 11:11:58,880
UI. So with this one. So currently we

16397
11:11:58,880 --> 11:12:01,360
pass our sortable context and then we

16398
11:12:01,360 --> 11:12:03,840
already map over our items. That's not

16399
11:12:03,840 --> 11:12:05,756
what I want to do. This means I can

16400
11:12:05,756 --> 11:12:08,000
delete this mapping first of all and

16401
11:12:08,000 --> 11:12:10,160
inside of here I want to map over my

16402
11:12:10,160 --> 11:12:12,480
items. This means we will get our state

16403
11:12:12,480 --> 11:12:15,360
here items and I want to map over these

16404
11:12:15,360 --> 11:12:17,116
uh items. This means we can get the

16405
11:12:17,116 --> 11:12:20,240
items do map as a param. We will get an

16406
11:12:20,240 --> 11:12:22,800
item and then we can just return this

16407
11:12:22,800 --> 11:12:24,880
inside of here. We want to pass the

16408
11:12:24,880 --> 11:12:26,960
sortable item or we want to render the

16409
11:12:26,960 --> 11:12:29,040
sortable item. So we can get the

16410
11:12:29,040 --> 11:12:31,276
sortable item and then we can open this.

16411
11:12:31,276 --> 11:12:33,040
This won't be self-closing. This will

16412
11:12:33,040 --> 11:12:35,276
just be a standard component. And here's

16413
11:12:35,276 --> 11:12:36,960
the thing. Currently, we get an error

16414
11:12:36,960 --> 11:12:39,116
and it says missing key. No problem.

16415
11:12:39,116 --> 11:12:40,960
Let's pass a key. And the key will be

16416
11:12:40,960 --> 11:12:44,080
equal to our item do ID. So, this error

16417
11:12:44,080 --> 11:12:46,000
is gone. But you know what? Before we

16418
11:12:46,000 --> 11:12:48,400
continue with the UI, I want to first of

16419
11:12:48,400 --> 11:12:50,880
all update the sortable item itself

16420
11:12:50,880 --> 11:12:53,040
because currently it's a bit broken. I

16421
11:12:53,040 --> 11:12:54,960
want to render a lot of things and it

16422
11:12:54,960 --> 11:12:56,640
should look nice. So, this means we can

16423
11:12:56,640 --> 11:12:58,480
again go back to the sortable item

16424
11:12:58,480 --> 11:13:01,116
function. We can again expand it. And as

16425
11:13:01,116 --> 11:13:03,596
you see first of all our props throw an

16426
11:13:03,596 --> 11:13:04,960
error. That's because the type is

16427
11:13:04,960 --> 11:13:06,880
currently just any. This means what we

16428
11:13:06,880 --> 11:13:08,640
will do instead is create a new

16429
11:13:08,640 --> 11:13:10,560
interface so that we know what we get

16430
11:13:10,560 --> 11:13:12,720
here. This means above our export

16431
11:13:12,720 --> 11:13:15,276
function we can create a new interface

16432
11:13:15,276 --> 11:13:18,560
and this will be called sortable item

16433
11:13:18,560 --> 11:13:20,880
props. We can open it and inside of here

16434
11:13:20,880 --> 11:13:23,040
we will first of all get an ID. This

16435
11:13:23,040 --> 11:13:25,276
will be of type string. Then we want to

16436
11:13:25,276 --> 11:13:27,840
also get children because here's the

16437
11:13:27,840 --> 11:13:30,240
thing. You can render the sortable item

16438
11:13:30,240 --> 11:13:32,320
as a self-closing self-closing

16439
11:13:32,320 --> 11:13:33,916
component. That's what we did a second

16440
11:13:33,916 --> 11:13:36,240
ago. But what I want to do is render

16441
11:13:36,240 --> 11:13:38,000
children in this sortable item. This

16442
11:13:38,000 --> 11:13:39,680
means we will open this and inside of

16443
11:13:39,680 --> 11:13:42,000
here render a lot of content. That's why

16444
11:13:42,000 --> 11:13:44,480
I need to get children in the params. So

16445
11:13:44,480 --> 11:13:46,320
in the interface we will get children

16446
11:13:46,320 --> 11:13:48,480
and this will be a standard error

16447
11:13:48,480 --> 11:13:51,840
function and it will return react note.

16448
11:13:51,840 --> 11:13:54,240
So react note is imported from react

16449
11:13:54,240 --> 11:13:56,080
because this is the type for children

16450
11:13:56,080 --> 11:13:59,360
and as a param we can also get listeners

16451
11:13:59,360 --> 11:14:01,756
and this will be of type dragable

16452
11:14:01,756 --> 11:14:04,880
synthetic listeners. What a hard word.

16453
11:14:04,880 --> 11:14:07,200
So we can import this from D&D kit core

16454
11:14:07,200 --> 11:14:10,880
again dragable synhatic listeners. God

16455
11:14:10,880 --> 11:14:13,680
what a word. Then we want to also get

16456
11:14:13,680 --> 11:14:15,840
the class name property. This will be

16457
11:14:15,840 --> 11:14:17,840
optional and of type string. This means

16458
11:14:17,840 --> 11:14:20,400
a user can style the sortable item

16459
11:14:20,400 --> 11:14:22,560
dynamically but he does not have to do

16460
11:14:22,560 --> 11:14:24,160
it or we don't have to do it as

16461
11:14:24,160 --> 11:14:26,320
developers. This will be of type string.

16462
11:14:26,320 --> 11:14:28,400
And then also we want to get data. This

16463
11:14:28,400 --> 11:14:30,400
will be optional and it will be an

16464
11:14:30,400 --> 11:14:32,640
object. And inside of here we will get

16465
11:14:32,640 --> 11:14:35,200
two things. First of all a type because

16466
11:14:35,200 --> 11:14:38,000
we can either drag a chapter or we can

16467
11:14:38,000 --> 11:14:40,080
drag a lesson. And we have to know that.

16468
11:14:40,080 --> 11:14:42,400
This means this will be either a chapter

16469
11:14:42,400 --> 11:14:44,640
or we can get the vertical line. It will

16470
11:14:44,640 --> 11:14:46,560
be a lesson. And here's the thing. If

16471
11:14:46,560 --> 11:14:48,320
this currently confuses you, don't

16472
11:14:48,320 --> 11:14:50,160
worry. I know right now it's a bit hard

16473
11:14:50,160 --> 11:14:52,640
to understand everything, but once we

16474
11:14:52,640 --> 11:14:54,560
write a bit more code, it will become

16475
11:14:54,560 --> 11:14:56,400
clearer or the picture will become

16476
11:14:56,400 --> 11:14:58,240
clearer. And then we want to also get

16477
11:14:58,240 --> 11:15:00,720
the chapter ID. This will be optional

16478
11:15:00,720 --> 11:15:03,200
and of type string. We can also create a

16479
11:15:03,200 --> 11:15:05,520
comment to not get confused. This is

16480
11:15:05,520 --> 11:15:08,560
only relevant for lessons. This means

16481
11:15:08,560 --> 11:15:11,040
when we drag over a lesson or when we

16482
11:15:11,040 --> 11:15:13,116
take a lesson and drag with it, then we

16483
11:15:13,116 --> 11:15:14,880
will need the chapter ID because we have

16484
11:15:14,880 --> 11:15:16,960
to then know where to place it. If we

16485
11:15:16,960 --> 11:15:19,116
only drag a standard chapter, then the

16486
11:15:19,116 --> 11:15:21,276
chapter ID is not important. We can

16487
11:15:21,276 --> 11:15:23,916
again go back to our sortable item.

16488
11:15:23,916 --> 11:15:26,080
Where is it? And then we can delete the

16489
11:15:26,080 --> 11:15:28,320
props. Instead, we will structure this.

16490
11:15:28,320 --> 11:15:30,400
This will be of type sortable item

16491
11:15:30,400 --> 11:15:32,480
props. And then where we the structur we

16492
11:15:32,480 --> 11:15:34,720
can get the children we can get the id

16493
11:15:34,720 --> 11:15:36,800
of course also the class name and then

16494
11:15:36,800 --> 11:15:39,360
also the data as you see we get one

16495
11:15:39,360 --> 11:15:41,436
error for our use sortable hook and

16496
11:15:41,436 --> 11:15:44,080
that's because the ID uh does not exist

16497
11:15:44,080 --> 11:15:46,160
props do ID is not something that we

16498
11:15:46,160 --> 11:15:49,360
have so ID will be equal to ID and then

16499
11:15:49,360 --> 11:15:51,840
also we can get data and data will be

16500
11:15:51,840 --> 11:15:54,160
equal to data then we can continue so

16501
11:15:54,160 --> 11:15:56,400
the use sortable hook seems finished

16502
11:15:56,400 --> 11:15:58,960
right now the style is also finished and

16503
11:15:58,960 --> 11:16:01,840
for the div we pass a ref set note ref.

16504
11:16:01,840 --> 11:16:04,080
Yes, that's fine. For the style style,

16505
11:16:04,080 --> 11:16:06,080
yes, that's fine. We um spread our

16506
11:16:06,080 --> 11:16:08,000
attributes. We spread over our

16507
11:16:08,000 --> 11:16:10,080
listeners. This is not quite what I want

16508
11:16:10,080 --> 11:16:12,160
to do. Instead, we will delete this

16509
11:16:12,160 --> 11:16:14,160
spreading of the listeners. And we will

16510
11:16:14,160 --> 11:16:16,160
do it as a child. I will show it to you

16511
11:16:16,160 --> 11:16:18,000
in a second. For now, we can first of

16512
11:16:18,000 --> 11:16:20,160
all add a class name. Then we can use

16513
11:16:20,160 --> 11:16:22,560
the CN helper function imported from the

16514
11:16:22,560 --> 11:16:25,680
lip folder. And as a default style, this

16515
11:16:25,680 --> 11:16:27,520
will be touch-none.

16516
11:16:27,520 --> 11:16:29,916
And then also um we can add a comma. and

16517
11:16:29,916 --> 11:16:32,240
then pass our class name so that the

16518
11:16:32,240 --> 11:16:35,040
user can then also dynamically style the

16519
11:16:35,040 --> 11:16:37,756
sortable item. Here's also the thing in

16520
11:16:37,756 --> 11:16:39,916
our use um sortable hook where we

16521
11:16:39,916 --> 11:16:42,880
destruct we can also get the is dragging

16522
11:16:42,880 --> 11:16:45,040
boolean and this is dragging boolean

16523
11:16:45,040 --> 11:16:47,596
will be set to true if we take an item

16524
11:16:47,596 --> 11:16:49,596
and just drag with it then this will be

16525
11:16:49,596 --> 11:16:51,680
true and I want to use this boolean to

16526
11:16:51,680 --> 11:16:53,680
update my class name. So we can add

16527
11:16:53,680 --> 11:16:55,680
another comma and then say if is

16528
11:16:55,680 --> 11:16:57,680
dragging is true. So we can create a

16529
11:16:57,680 --> 11:17:00,400
turnary then we want to say uh Z 10 this

16530
11:17:00,400 --> 11:17:02,720
means we want to overlay the item and if

16531
11:17:02,720 --> 11:17:04,880
this is not true then this will just be

16532
11:17:04,880 --> 11:17:06,960
nothing an empty string. Then for the

16533
11:17:06,960 --> 11:17:09,276
value itself instead of rendering props

16534
11:17:09,276 --> 11:17:12,320
do ID we want to get our children we

16535
11:17:12,320 --> 11:17:14,880
want to invoke our children and pass as

16536
11:17:14,880 --> 11:17:17,520
an argument our listeners. This means

16537
11:17:17,520 --> 11:17:19,436
this is finished the sortable item. Do

16538
11:17:19,436 --> 11:17:21,756
we get any errors here? Um no I don't

16539
11:17:21,756 --> 11:17:23,596
think so. This means we can collapse the

16540
11:17:23,596 --> 11:17:25,840
sortable item and then we can continue

16541
11:17:25,840 --> 11:17:28,480
right here with our general UI. And as

16542
11:17:28,480 --> 11:17:30,640
you see the sortable item throws an

16543
11:17:30,640 --> 11:17:32,720
error and it says uh we are missing the

16544
11:17:32,720 --> 11:17:34,400
following properties from the sortable

16545
11:17:34,400 --> 11:17:36,640
item props. And this is the id and then

16546
11:17:36,640 --> 11:17:39,360
also children. So the id will be equal

16547
11:17:39,360 --> 11:17:42,880
to our item do ID. Then we can also pass

16548
11:17:42,880 --> 11:17:45,436
a data prop. And here we have to define

16549
11:17:45,436 --> 11:17:47,916
what type this is. So we can add another

16550
11:17:47,916 --> 11:17:49,916
object and then we can get the type

16551
11:17:49,916 --> 11:17:52,800
itself. So what is this sortable item?

16552
11:17:52,800 --> 11:17:54,880
Well, this sortable item will display

16553
11:17:54,880 --> 11:17:57,276
the chapter. This means type will be

16554
11:17:57,276 --> 11:18:00,560
equal to chapter not lesson. We will

16555
11:18:00,560 --> 11:18:03,276
after or we will render the lesson after

16556
11:18:03,276 --> 11:18:05,756
we defined this chapter. So this is

16557
11:18:05,756 --> 11:18:07,360
finished which means we can open the

16558
11:18:07,360 --> 11:18:09,596
sortable item and inside of here we have

16559
11:18:09,596 --> 11:18:11,596
to pass children and inside of here I

16560
11:18:11,596 --> 11:18:14,240
want to create a standard uh callback

16561
11:18:14,240 --> 11:18:16,320
function. This means inside of here we

16562
11:18:16,320 --> 11:18:18,720
want to get as a param listeners. So

16563
11:18:18,720 --> 11:18:21,200
listen us and then we want to just

16564
11:18:21,200 --> 11:18:23,116
return it. Don't open a standard

16565
11:18:23,116 --> 11:18:25,596
function or object. Just return this.

16566
11:18:25,596 --> 11:18:27,680
And inside of here we can get the cart

16567
11:18:27,680 --> 11:18:29,756
component. It's already imported. Then

16568
11:18:29,756 --> 11:18:32,000
in the cart we can get the collapsible

16569
11:18:32,000 --> 11:18:34,400
component from the components. And what

16570
11:18:34,400 --> 11:18:37,200
is this collapsible component? Very good

16571
11:18:37,200 --> 11:18:40,480
question. We can head over to shy and UI

16572
11:18:40,480 --> 11:18:42,960
and then we can search for collapsible.

16573
11:18:42,960 --> 11:18:45,596
As you see this is collapsible and this

16574
11:18:45,596 --> 11:18:47,916
state is currently collapsed. And if I

16575
11:18:47,916 --> 11:18:50,640
click on this then it will expand as you

16576
11:18:50,640 --> 11:18:53,276
see. So this is what we want to do. Um I

16577
11:18:53,276 --> 11:18:55,360
can show it to you with a little diagram

16578
11:18:55,360 --> 11:18:57,756
again. So this is our card. Uh I can

16579
11:18:57,756 --> 11:19:00,480
zoom in a bit here. We will have chapter

16580
11:19:00,480 --> 11:19:03,360
one as an example. So this is the title.

16581
11:19:03,360 --> 11:19:05,436
Then we will also have a little icon

16582
11:19:05,436 --> 11:19:08,080
here. So I will say icon and if the user

16583
11:19:08,080 --> 11:19:10,400
clicks on the icon then we will collapse

16584
11:19:10,400 --> 11:19:12,400
literally everything inside of here. So

16585
11:19:12,400 --> 11:19:14,640
we won't display any lessons. So I can

16586
11:19:14,640 --> 11:19:17,200
just create a little line here. But if

16587
11:19:17,200 --> 11:19:19,520
the user again clicks on the button then

16588
11:19:19,520 --> 11:19:21,596
we will expand everything and then we

16589
11:19:21,596 --> 11:19:24,080
will again display lesson one, lesson

16590
11:19:24,080 --> 11:19:26,720
two, lesson three blah blah blah. So

16591
11:19:26,720 --> 11:19:28,880
this is this collapsible component. It

16592
11:19:28,880 --> 11:19:31,360
allows us to collapse and then also

16593
11:19:31,360 --> 11:19:34,160
expand content. So this collapsible

16594
11:19:34,160 --> 11:19:36,960
component expects two key properties.

16595
11:19:36,960 --> 11:19:39,200
First of all the open state and open

16596
11:19:39,200 --> 11:19:42,880
will be equal to item is open because

16597
11:19:42,880 --> 11:19:45,360
again as a default we set our item. So

16598
11:19:45,360 --> 11:19:47,840
if I open it as a default it's open the

16599
11:19:47,840 --> 11:19:49,916
chapter but we can also toggle it and

16600
11:19:49,916 --> 11:19:52,080
then set it to I guess false. This means

16601
11:19:52,080 --> 11:19:54,000
that it will be closed and we want to

16602
11:19:54,000 --> 11:19:56,640
also of course get the onopen change

16603
11:19:56,640 --> 11:19:59,200
property and this will fire whenever the

16604
11:19:59,200 --> 11:20:01,200
user clicks on the button. Here's the

16605
11:20:01,200 --> 11:20:03,756
thing. We want to update our state. This

16606
11:20:03,756 --> 11:20:05,916
means what we also have to do is create

16607
11:20:05,916 --> 11:20:08,800
a new function a new toggle chapter

16608
11:20:08,800 --> 11:20:10,880
function. So we can go above the return

16609
11:20:10,880 --> 11:20:13,276
above the sensors and then we can create

16610
11:20:13,276 --> 11:20:15,756
a function which will be called toggle

16611
11:20:15,756 --> 11:20:17,756
chapter and then we can just open this

16612
11:20:17,756 --> 11:20:20,160
function as a param we want to get the

16613
11:20:20,160 --> 11:20:22,960
chapter ID and this will be of type

16614
11:20:22,960 --> 11:20:24,960
string because we want to specifically

16615
11:20:24,960 --> 11:20:27,520
know what chapter the user wants to

16616
11:20:27,520 --> 11:20:29,840
collapse because we will have multiple

16617
11:20:29,840 --> 11:20:31,680
chapters and we don't want to collapse

16618
11:20:31,680 --> 11:20:34,880
any uh chapter but a specific one. This

16619
11:20:34,880 --> 11:20:37,520
means we can get our set items function

16620
11:20:37,520 --> 11:20:39,596
or setter. Then we want to invoke it.

16621
11:20:39,596 --> 11:20:42,240
And inside of here we want to say items

16622
11:20:42,240 --> 11:20:44,800
do map as a param we will get the

16623
11:20:44,800 --> 11:20:47,116
individual chapter. And we want to check

16624
11:20:47,116 --> 11:20:50,240
if the chapter iterator is the same as

16625
11:20:50,240 --> 11:20:52,880
the chapter ID which we pass. So if the

16626
11:20:52,880 --> 11:20:56,480
chapter do ID is equal to the chapter ID

16627
11:20:56,480 --> 11:20:58,720
which we pass through the params then we

16628
11:20:58,720 --> 11:21:01,360
can use a turnary create an object then

16629
11:21:01,360 --> 11:21:04,160
map or spread our chapter properties add

16630
11:21:04,160 --> 11:21:06,800
a comma and then set is open to the

16631
11:21:06,800 --> 11:21:10,240
opposite value of is open right now. So

16632
11:21:10,240 --> 11:21:11,916
this means it will be equal to

16633
11:21:11,916 --> 11:21:15,596
exclamation mark chapter is open. As you

16634
11:21:15,596 --> 11:21:17,436
see we get also one error and that's

16635
11:21:17,436 --> 11:21:19,520
because we are also missing the colon.

16636
11:21:19,520 --> 11:21:21,680
And if the chapter ID is not the same as

16637
11:21:21,680 --> 11:21:23,916
the chapter ID which we pass then we

16638
11:21:23,916 --> 11:21:26,320
will just return the chapter. So what

16639
11:21:26,320 --> 11:21:28,080
did we just do right here? I know this

16640
11:21:28,080 --> 11:21:30,400
kind of looks a bit confusing. So again

16641
11:21:30,400 --> 11:21:32,960
we update our state with the set items

16642
11:21:32,960 --> 11:21:35,200
setup inside of here. We map over our

16643
11:21:35,200 --> 11:21:37,680
items over our chapters because we have

16644
11:21:37,680 --> 11:21:40,320
multiple chapters. We try uh we try to

16645
11:21:40,320 --> 11:21:42,960
find the specific chapter ID which

16646
11:21:42,960 --> 11:21:45,596
matches the chapter ID which we provide.

16647
11:21:45,596 --> 11:21:47,520
If this is true, this means if we find

16648
11:21:47,520 --> 11:21:49,596
the correct chapter, then we will first

16649
11:21:49,596 --> 11:21:52,160
of all spread all of our old properties

16650
11:21:52,160 --> 11:21:54,720
like the title, order, uh ID. We don't

16651
11:21:54,720 --> 11:21:56,560
want to update that. We want to only

16652
11:21:56,560 --> 11:21:59,116
update is open. And is open will be

16653
11:21:59,116 --> 11:22:01,916
equal to the opposite value of is open.

16654
11:22:01,916 --> 11:22:04,240
So if this currently is true, then we

16655
11:22:04,240 --> 11:22:06,400
will set it to false. If it's currently

16656
11:22:06,400 --> 11:22:08,800
set to false, then we will set it to

16657
11:22:08,800 --> 11:22:10,720
true. Then we can use this toggle

16658
11:22:10,720 --> 11:22:12,400
chapter function. We can scroll to the

16659
11:22:12,400 --> 11:22:14,320
top or to the bottom, not to the top.

16660
11:22:14,320 --> 11:22:15,756
And inside of here we can create an

16661
11:22:15,756 --> 11:22:17,756
inline callback function and this will

16662
11:22:17,756 --> 11:22:20,240
be equal to toggle chapter and then as

16663
11:22:20,240 --> 11:22:22,640
an argument we want to provide the item

16664
11:22:22,640 --> 11:22:25,596
do id. So this is finished and then in

16665
11:22:25,596 --> 11:22:28,720
this collapsible component we can render

16666
11:22:28,720 --> 11:22:31,116
a div. So for the div we can give it a

16667
11:22:31,116 --> 11:22:33,840
class name and this will be flex items

16668
11:22:33,840 --> 11:22:36,240
which will be center then justify which

16669
11:22:36,240 --> 11:22:38,960
will be between padding three and then

16670
11:22:38,960 --> 11:22:42,400
border bottom and also border border. So

16671
11:22:42,400 --> 11:22:44,160
what is this div element? Why do we

16672
11:22:44,160 --> 11:22:46,560
create one? Well, this will be a wrapper

16673
11:22:46,560 --> 11:22:48,880
div and we will use it because on the

16674
11:22:48,880 --> 11:22:51,040
left side we will render the title and

16675
11:22:51,040 --> 11:22:53,040
then also like this little dragable

16676
11:22:53,040 --> 11:22:55,360
button which showcase or which shows

16677
11:22:55,360 --> 11:22:57,916
like a little grip button and then on

16678
11:22:57,916 --> 11:23:00,240
the right side or not button but icon

16679
11:23:00,240 --> 11:23:01,756
and then on the right side we want to

16680
11:23:01,756 --> 11:23:03,596
render another button to delete the

16681
11:23:03,596 --> 11:23:05,840
chapter. That's why we have this justify

16682
11:23:05,840 --> 11:23:07,756
between and the border bottom because we

16683
11:23:07,756 --> 11:23:10,160
want to have a nice border. So again if

16684
11:23:10,160 --> 11:23:12,560
we look at this diagram which I closed.

16685
11:23:12,560 --> 11:23:14,880
So as you see we will have a title then

16686
11:23:14,880 --> 11:23:16,480
we have this border then we have this

16687
11:23:16,480 --> 11:23:18,400
button on the right side to delete the

16688
11:23:18,400 --> 11:23:20,240
chapter and stuff like that. So that's

16689
11:23:20,240 --> 11:23:22,720
why we have this div element. Then

16690
11:23:22,720 --> 11:23:24,400
inside of here we want to create another

16691
11:23:24,400 --> 11:23:26,080
div element and this will house the

16692
11:23:26,080 --> 11:23:28,800
button and then also the um content

16693
11:23:28,800 --> 11:23:31,200
itself. So the title in this case. This

16694
11:23:31,200 --> 11:23:33,436
means we can also give it a class name.

16695
11:23:33,436 --> 11:23:35,596
And this will be then flex items which

16696
11:23:35,596 --> 11:23:38,320
will be center and also gap too. Inside

16697
11:23:38,320 --> 11:23:40,240
of here, we want to get a standard

16698
11:23:40,240 --> 11:23:42,320
button. Not a button component, but a

16699
11:23:42,320 --> 11:23:44,320
standard button. And then for the

16700
11:23:44,320 --> 11:23:46,240
button, I want to render the grip

16701
11:23:46,240 --> 11:23:48,880
vertical icon. So the grip vertical icon

16702
11:23:48,880 --> 11:23:51,360
is imported from Lucid React. This is

16703
11:23:51,360 --> 11:23:53,276
self-closing. And of course, we want to

16704
11:23:53,276 --> 11:23:55,436
also style it and give it a class name

16705
11:23:55,436 --> 11:23:57,680
which will be size 4. Then for the

16706
11:23:57,680 --> 11:23:59,756
button, we can also style it. So the

16707
11:23:59,756 --> 11:24:02,160
class, we can give it a class name. This

16708
11:24:02,160 --> 11:24:05,116
will be cursor grab. So we will change

16709
11:24:05,116 --> 11:24:06,880
this um how how do you call it? The

16710
11:24:06,880 --> 11:24:08,720
cursor. Yeah. So instead of having this

16711
11:24:08,720 --> 11:24:10,880
cursor will be like this hand which

16712
11:24:10,880 --> 11:24:13,360
tries to grab something. Then also we

16713
11:24:13,360 --> 11:24:16,240
want to add an opacity which will be 60.

16714
11:24:16,240 --> 11:24:19,436
This means 60%. And then on hover we

16715
11:24:19,436 --> 11:24:22,240
want to say opacity 100. So the full

16716
11:24:22,240 --> 11:24:24,960
opacity. And then we want to also spread

16717
11:24:24,960 --> 11:24:27,040
the listeners for the button. This means

16718
11:24:27,040 --> 11:24:29,436
we can open an object inside of here and

16719
11:24:29,436 --> 11:24:32,800
then spread the listeners. So this in

16720
11:24:32,800 --> 11:24:35,200
theory should already display something

16721
11:24:35,200 --> 11:24:37,520
which means if we again go back and do a

16722
11:24:37,520 --> 11:24:40,400
hard refresh will we see something? I'm

16723
11:24:40,400 --> 11:24:42,240
not even sure to be honest with you. And

16724
11:24:42,240 --> 11:24:44,720
as you see we don't see anything. What's

16725
11:24:44,720 --> 11:24:46,640
the problem? Well the problem is quite

16726
11:24:46,640 --> 11:24:48,880
simple. We don't have any chapters. We

16727
11:24:48,880 --> 11:24:51,360
don't have any items which means we also

16728
11:24:51,360 --> 11:24:54,320
don't display anything. So what we can

16729
11:24:54,320 --> 11:24:57,520
do is open again Prisma Studio. I will

16730
11:24:57,520 --> 11:25:00,240
um stop my def uh def server and then

16731
11:25:00,240 --> 11:25:03,596
inside of here I will run pnpm dx prisma

16732
11:25:03,596 --> 11:25:05,680
studio. Then inside of here I want to

16733
11:25:05,680 --> 11:25:07,916
create a new chapter. So I can go into

16734
11:25:07,916 --> 11:25:10,720
the chapter. I can also collapse this.

16735
11:25:10,720 --> 11:25:12,960
Then we want to add a new record. Then

16736
11:25:12,960 --> 11:25:15,040
for the title this will be chapter

16737
11:25:15,040 --> 11:25:17,436
number one. For the position this will

16738
11:25:17,436 --> 11:25:19,520
just be one. Then for the created at

16739
11:25:19,520 --> 11:25:21,756
time stamp and updated at time stamp we

16740
11:25:21,756 --> 11:25:23,756
don't have to add anything. Then for the

16741
11:25:23,756 --> 11:25:26,320
course I want to select my only course.

16742
11:25:26,320 --> 11:25:29,040
I have only created one. So I can select

16743
11:25:29,040 --> 11:25:30,800
this one. And then for the lessons we

16744
11:25:30,800 --> 11:25:32,960
currently don't have any. So we can just

16745
11:25:32,960 --> 11:25:35,360
save the change. Then we want to also

16746
11:25:35,360 --> 11:25:37,360
create a new lesson. So we can go into

16747
11:25:37,360 --> 11:25:40,160
the lesson model and we want to create a

16748
11:25:40,160 --> 11:25:42,640
new record. For the title this will be

16749
11:25:42,640 --> 11:25:45,200
lesson number one. Then for the

16750
11:25:45,200 --> 11:25:47,200
description some gibberish. Then for the

16751
11:25:47,200 --> 11:25:50,000
thumbnail uh key and file key I or video

16752
11:25:50,000 --> 11:25:52,160
key I will leave it empty. For the

16753
11:25:52,160 --> 11:25:54,160
position, this will be one. For the

16754
11:25:54,160 --> 11:25:56,480
created ad and updated ad timestamps, we

16755
11:25:56,480 --> 11:25:58,560
don't have to add anything. And then for

16756
11:25:58,560 --> 11:26:00,640
the chapter, we can relate it to the

16757
11:26:00,640 --> 11:26:03,596
chapter which we just created. So I can

16758
11:26:03,596 --> 11:26:06,320
select this and then save one change. So

16759
11:26:06,320 --> 11:26:08,240
in theory, we should now have one

16760
11:26:08,240 --> 11:26:10,800
chapter and one lesson. And this chapter

16761
11:26:10,800 --> 11:26:13,276
should also be directly related to this

16762
11:26:13,276 --> 11:26:15,436
one course. This means we can restart

16763
11:26:15,436 --> 11:26:18,560
our dev server again. And if I again go

16764
11:26:18,560 --> 11:26:21,520
back and do a hard refresh in theory, I

16765
11:26:21,520 --> 11:26:23,840
should also get something. And yeah, you

16766
11:26:23,840 --> 11:26:26,400
see absolutely. Well, what do I mean?

16767
11:26:26,400 --> 11:26:27,840
You see something, right? And you know

16768
11:26:27,840 --> 11:26:30,720
what? I can even drag this card. Wow,

16769
11:26:30,720 --> 11:26:33,840
this is fancy. So, we can continue. We

16770
11:26:33,840 --> 11:26:36,080
can again go back and we want to also

16771
11:26:36,080 --> 11:26:38,960
display this collapsible trigger. Uh, so

16772
11:26:38,960 --> 11:26:40,400
to collapse everything even though

16773
11:26:40,400 --> 11:26:42,400
there's nothing to collapse right now.

16774
11:26:42,400 --> 11:26:43,916
This means underneath the button but

16775
11:26:43,916 --> 11:26:45,840
still in this div we want to get the

16776
11:26:45,840 --> 11:26:48,720
collapsible trigger component from the

16777
11:26:48,720 --> 11:26:51,040
components we can open it and inside of

16778
11:26:51,040 --> 11:26:53,276
here we want to render a button element

16779
11:26:53,276 --> 11:26:55,040
we want to also give the collapsible

16780
11:26:55,040 --> 11:26:57,840
trigger an as child property and then

16781
11:26:57,840 --> 11:27:00,080
for the button you know what um I want

16782
11:27:00,080 --> 11:27:02,400
to render an icon but here's the thing

16783
11:27:02,400 --> 11:27:05,840
if our collapsible content is open then

16784
11:27:05,840 --> 11:27:08,640
the icon should be a chevron down icon

16785
11:27:08,640 --> 11:27:11,520
if the item or if this content is not

16786
11:27:11,520 --> 11:27:13,680
collapsed Then I want to showcase a

16787
11:27:13,680 --> 11:27:16,320
chevron right icon. This means we want

16788
11:27:16,320 --> 11:27:19,756
to create a turnary. If item is open is

16789
11:27:19,756 --> 11:27:21,916
true, then we can get the question mark

16790
11:27:21,916 --> 11:27:24,640
and return the chevron down icon

16791
11:27:24,640 --> 11:27:27,360
imported from lucid react. For the class

16792
11:27:27,360 --> 11:27:29,916
name, this will be size 4. And if this

16793
11:27:29,916 --> 11:27:32,560
is not true, we can get a colon and then

16794
11:27:32,560 --> 11:27:35,596
instead return the chevron white icon

16795
11:27:35,596 --> 11:27:37,756
imported from lucid react. And for the

16796
11:27:37,756 --> 11:27:40,640
class name, this will also be size 4. So

16797
11:27:40,640 --> 11:27:42,880
then we can also style the button itself

16798
11:27:42,880 --> 11:27:45,200
and for the class name this will be flex

16799
11:27:45,200 --> 11:27:48,400
and items center. So if we again go back

16800
11:27:48,400 --> 11:27:50,480
we should see something and yes this is

16801
11:27:50,480 --> 11:27:52,960
this collapsible button. If I let me

16802
11:27:52,960 --> 11:27:54,800
also zoom in a bit and as you see if I

16803
11:27:54,800 --> 11:27:56,720
click on this icon it changes to the

16804
11:27:56,720 --> 11:27:59,116
chevron down icon and if I again click

16805
11:27:59,116 --> 11:28:01,916
on it it changes to the chevron right

16806
11:28:01,916 --> 11:28:04,080
icon. This means we can again go back

16807
11:28:04,080 --> 11:28:06,560
and as a next step I want to also render

16808
11:28:06,560 --> 11:28:08,160
the title. This means underneath the

16809
11:28:08,160 --> 11:28:10,640
collapsible trigger we can get a P tag

16810
11:28:10,640 --> 11:28:12,880
inside of here. We want to get the item

16811
11:28:12,880 --> 11:28:15,200
title. This means the chapter title. And

16812
11:28:15,200 --> 11:28:17,436
then we can also add a class name which

16813
11:28:17,436 --> 11:28:20,240
will be cursor pointer hover. And this

16814
11:28:20,240 --> 11:28:22,480
will be text primary. This means this

16815
11:28:22,480 --> 11:28:24,560
orange color. And if we go back you will

16816
11:28:24,560 --> 11:28:26,720
see this. So again this is our toggle.

16817
11:28:26,720 --> 11:28:28,800
This is our collapsible trigger. And

16818
11:28:28,800 --> 11:28:31,276
then this is our text the title of the

16819
11:28:31,276 --> 11:28:33,200
chapter. On the right side I want to

16820
11:28:33,200 --> 11:28:35,596
then also render a button to delete the

16821
11:28:35,596 --> 11:28:37,596
chapter. But for now we will just skip

16822
11:28:37,596 --> 11:28:39,436
this. And you know now where I look at

16823
11:28:39,436 --> 11:28:41,596
the code would it maybe make sense to

16824
11:28:41,596 --> 11:28:43,840
render the button components instead of

16825
11:28:43,840 --> 11:28:46,800
the standard button element? I think so.

16826
11:28:46,800 --> 11:28:48,640
So we can go back to the collapsible

16827
11:28:48,640 --> 11:28:50,160
trigger. Instead of rendering this

16828
11:28:50,160 --> 11:28:51,916
button element, we will get the button

16829
11:28:51,916 --> 11:28:54,240
component. Then we want to add a size

16830
11:28:54,240 --> 11:28:57,116
which will be icon and also a variant

16831
11:28:57,116 --> 11:28:59,520
which will just be ghost. We can do the

16832
11:28:59,520 --> 11:29:01,520
same thing for this button with the grip

16833
11:29:01,520 --> 11:29:03,436
vertical icon. Again, we can get the

16834
11:29:03,436 --> 11:29:05,436
button component. And then for the

16835
11:29:05,436 --> 11:29:07,520
variant, this will also be ghost. And

16836
11:29:07,520 --> 11:29:09,916
for the size, this will be icon. We can

16837
11:29:09,916 --> 11:29:11,840
then also delete the class name. We

16838
11:29:11,840 --> 11:29:14,080
won't need it anymore. And if I hover

16839
11:29:14,080 --> 11:29:16,000
over it, yeah, this looks quite nice.

16840
11:29:16,000 --> 11:29:18,000
So, we can leave it as is. And if I zoom

16841
11:29:18,000 --> 11:29:20,080
out, yeah, I think this is finished. You

16842
11:29:20,080 --> 11:29:22,400
know what? Is the padding the gap too

16843
11:29:22,400 --> 11:29:24,400
big?

16844
11:29:24,400 --> 11:29:26,480
I don't know. I think this text needs a

16845
11:29:26,480 --> 11:29:28,400
bit more margin to the left. This means

16846
11:29:28,400 --> 11:29:31,200
we can say padding left of two. Will

16847
11:29:31,200 --> 11:29:32,800
this look a bit better? Yeah, I think

16848
11:29:32,800 --> 11:29:34,960
this is a bit more proportional as you

16849
11:29:34,960 --> 11:29:37,040
see. And you know what? You could also

16850
11:29:37,040 --> 11:29:39,520
change the variant. I will check later

16851
11:29:39,520 --> 11:29:41,436
on. For now, this is fine enough. Maybe

16852
11:29:41,436 --> 11:29:43,840
I will change it later on. I'm not sure.

16853
11:29:43,840 --> 11:29:45,680
As mentioned on the right side, I will

16854
11:29:45,680 --> 11:29:47,596
also render another button. This means

16855
11:29:47,596 --> 11:29:49,436
we can go underneath the P tag,

16856
11:29:49,436 --> 11:29:51,360
underneath the div, but we want to stay

16857
11:29:51,360 --> 11:29:53,200
in the main div. And we want to again

16858
11:29:53,200 --> 11:29:55,116
get the button component. And inside of

16859
11:29:55,116 --> 11:29:58,320
here, we can just render a delete X or

16860
11:29:58,320 --> 11:30:00,720
is it called X icon? Yeah, I think X

16861
11:30:00,720 --> 11:30:03,680
icon or no trash to icon. Yes, this is

16862
11:30:03,680 --> 11:30:05,680
imported from Lucid React. For the class

16863
11:30:05,680 --> 11:30:07,756
name, this will be size 4. And then for

16864
11:30:07,756 --> 11:30:10,000
the button, we can also give it a size

16865
11:30:10,000 --> 11:30:12,560
which will be icon. And for the variant,

16866
11:30:12,560 --> 11:30:15,040
this will be maybe outline. How does

16867
11:30:15,040 --> 11:30:17,596
this look? Yeah, outline for now is fine

16868
11:30:17,596 --> 11:30:19,916
enough. I will probably change it later

16869
11:30:19,916 --> 11:30:22,000
on. I don't know. Then we want to also

16870
11:30:22,000 --> 11:30:24,080
render the collapsible content because

16871
11:30:24,080 --> 11:30:26,240
currently there is no content. This

16872
11:30:26,240 --> 11:30:27,756
means we can go back. We can go

16873
11:30:27,756 --> 11:30:29,596
underneath this div but we want to stay

16874
11:30:29,596 --> 11:30:32,320
in the collapsible component itself and

16875
11:30:32,320 --> 11:30:34,720
we want to get the collapsible content

16876
11:30:34,720 --> 11:30:36,960
component. This is imported from the

16877
11:30:36,960 --> 11:30:39,040
components. We can open it and inside of

16878
11:30:39,040 --> 11:30:41,200
here we want to render a standard div.

16879
11:30:41,200 --> 11:30:43,116
First of all we want to give the div a

16880
11:30:43,116 --> 11:30:45,200
class name which will be padding one.

16881
11:30:45,200 --> 11:30:47,200
And inside of here we want to again

16882
11:30:47,200 --> 11:30:49,040
first of all render a new sortable

16883
11:30:49,040 --> 11:30:51,116
context because there are two ways to

16884
11:30:51,116 --> 11:30:53,360
sort our items. First of all we can sort

16885
11:30:53,360 --> 11:30:55,916
the chapters but we can also sort the

16886
11:30:55,916 --> 11:30:58,240
items. That's why we need a second

16887
11:30:58,240 --> 11:31:00,560
sortable context. So we can get the

16888
11:31:00,560 --> 11:31:02,240
sortable context. This is already

16889
11:31:02,240 --> 11:31:04,960
imported and as you all know it needs um

16890
11:31:04,960 --> 11:31:07,116
two key properties. First of all the

16891
11:31:07,116 --> 11:31:10,160
items and this will be equal to our item

16892
11:31:10,160 --> 11:31:13,276
dot lessons do map as a param. We can

16893
11:31:13,276 --> 11:31:15,436
get the singular lesson and then we want

16894
11:31:15,436 --> 11:31:18,480
to return the lesson do id. So this

16895
11:31:18,480 --> 11:31:20,320
already looks way better. And then we

16896
11:31:20,320 --> 11:31:22,480
have to also pass the strategy and this

16897
11:31:22,480 --> 11:31:24,960
will be our vertical list sorting

16898
11:31:24,960 --> 11:31:27,436
strategy because we want to sort our

16899
11:31:27,436 --> 11:31:30,000
items vertically. Then in the sortable

16900
11:31:30,000 --> 11:31:32,960
context we want to map over our items.

16901
11:31:32,960 --> 11:31:35,116
This means we can get our item dot

16902
11:31:35,116 --> 11:31:38,720
lessons dot map as a item or as a param

16903
11:31:38,720 --> 11:31:40,640
we will get the lesson and then we can

16904
11:31:40,640 --> 11:31:42,960
just return it inside of here. We have

16905
11:31:42,960 --> 11:31:44,880
to first of all again get the sortable

16906
11:31:44,880 --> 11:31:48,000
item component. This isn't self-closing.

16907
11:31:48,000 --> 11:31:50,240
This is a standard component and as you

16908
11:31:50,240 --> 11:31:52,400
see it complains that's because we have

16909
11:31:52,400 --> 11:31:55,116
to pass a key. This is always important

16910
11:31:55,116 --> 11:31:58,160
when you map over properties over items.

16911
11:31:58,160 --> 11:32:00,080
Then for the key this will be equal to

16912
11:32:00,080 --> 11:32:02,880
the lesson do ID because the ID is

16913
11:32:02,880 --> 11:32:06,000
unique. Then we can also pass um an ID

16914
11:32:06,000 --> 11:32:08,960
and the ID will be equal to lesson do

16915
11:32:08,960 --> 11:32:11,916
ID. Then we want to also pass data and

16916
11:32:11,916 --> 11:32:14,240
data we want to the structured and pass

16917
11:32:14,240 --> 11:32:16,480
the type. The type will be equal to

16918
11:32:16,480 --> 11:32:19,116
lesson because this is a lesson. And

16919
11:32:19,116 --> 11:32:21,916
also we want to pass the chapter ID

16920
11:32:21,916 --> 11:32:24,480
because again the chapter ID is only

16921
11:32:24,480 --> 11:32:27,520
needed if we use it um or if we use

16922
11:32:27,520 --> 11:32:30,160
lessons when we reorder lessons we need

16923
11:32:30,160 --> 11:32:32,240
the chapter ID. This means for the

16924
11:32:32,240 --> 11:32:34,320
chapter ID this will be equal to the

16925
11:32:34,320 --> 11:32:36,960
item do ID because the item is the

16926
11:32:36,960 --> 11:32:39,116
chapter and then the lesson this is the

16927
11:32:39,116 --> 11:32:41,520
individual lesson. So in the sortable

16928
11:32:41,520 --> 11:32:44,000
item itself we want to render children

16929
11:32:44,000 --> 11:32:45,916
and for that we first of all have to get

16930
11:32:45,916 --> 11:32:48,400
the lesson listeners. This means this is

16931
11:32:48,400 --> 11:32:50,640
again we can um as a param get the

16932
11:32:50,640 --> 11:32:53,596
lesson listeners and then we can just

16933
11:32:53,596 --> 11:32:56,080
return it. The code itself will be quite

16934
11:32:56,080 --> 11:32:58,240
similar to the code above. This means we

16935
11:32:58,240 --> 11:33:00,400
want to again render a div element. For

16936
11:33:00,400 --> 11:33:02,400
the div we can give it a class name.

16937
11:33:02,400 --> 11:33:05,116
This will be flex items center. Then

16938
11:33:05,116 --> 11:33:07,520
also justify between to put the children

16939
11:33:07,520 --> 11:33:10,000
to the most outer corner. padding to

16940
11:33:10,000 --> 11:33:12,800
hover which will be BG accent. This is

16941
11:33:12,800 --> 11:33:15,200
like the secondary color and then also

16942
11:33:15,200 --> 11:33:17,840
rounded which will be SM. Then inside of

16943
11:33:17,840 --> 11:33:19,520
here we want to create another div

16944
11:33:19,520 --> 11:33:21,116
element and that's because we want to

16945
11:33:21,116 --> 11:33:23,040
again create the same structure. On the

16946
11:33:23,040 --> 11:33:25,840
left side we will have this drag button.

16947
11:33:25,840 --> 11:33:28,640
Then um an icon or yeah I think an icon

16948
11:33:28,640 --> 11:33:30,720
will work quite good and then also the

16949
11:33:30,720 --> 11:33:32,880
lesson title and then on the right side

16950
11:33:32,880 --> 11:33:35,436
we will again have a delete button. This

16951
11:33:35,436 --> 11:33:37,040
means we want to create a new div

16952
11:33:37,040 --> 11:33:39,840
element. So div and then inside of here

16953
11:33:39,840 --> 11:33:41,436
we can first of all give it a class

16954
11:33:41,436 --> 11:33:44,480
name. This will be flex items center and

16955
11:33:44,480 --> 11:33:47,360
then gap 2. And for the children we want

16956
11:33:47,360 --> 11:33:49,916
to get a button and again we can use the

16957
11:33:49,916 --> 11:33:52,160
button component. Why not? And then for

16958
11:33:52,160 --> 11:33:54,160
the button we want to give it a variant

16959
11:33:54,160 --> 11:33:56,640
which will be ghost. And for the size

16960
11:33:56,640 --> 11:33:59,360
this will be icon and inside of here we

16961
11:33:59,360 --> 11:34:01,360
want to again get the grip vertical

16962
11:34:01,360 --> 11:34:03,360
icon. This is self-closing. We want to

16963
11:34:03,360 --> 11:34:05,276
give it a class name and this will be

16964
11:34:05,276 --> 11:34:08,480
size four. Our button has to also get

16965
11:34:08,480 --> 11:34:11,520
this or these lessons um listeners. This

16966
11:34:11,520 --> 11:34:13,680
means we can again spread the lesson

16967
11:34:13,680 --> 11:34:15,840
listeners. And now you might ask me, hey

16968
11:34:15,840 --> 11:34:18,000
Jan, lesson listeners, what even is

16969
11:34:18,000 --> 11:34:20,000
this? I mean we spread it into our

16970
11:34:20,000 --> 11:34:22,640
button. But what do we really do? Well,

16971
11:34:22,640 --> 11:34:25,680
this lesson listeners is an object. And

16972
11:34:25,680 --> 11:34:27,916
when we spread the lesson listeners, we

16973
11:34:27,916 --> 11:34:30,640
apply the necessary um how do you call

16974
11:34:30,640 --> 11:34:32,480
it? Handlers. This means like the on

16975
11:34:32,480 --> 11:34:35,116
pointer down and on key down. So this is

16976
11:34:35,116 --> 11:34:37,436
there to then detect and manage the drag

16977
11:34:37,436 --> 11:34:39,680
and drop interaction and we applied

16978
11:34:39,680 --> 11:34:41,360
specifically to the button because the

16979
11:34:41,360 --> 11:34:44,400
button is the how would you call it like

16980
11:34:44,400 --> 11:34:46,000
the element which is there to

16981
11:34:46,000 --> 11:34:48,400
specifically then drag the items because

16982
11:34:48,400 --> 11:34:50,640
we don't want to allow a user to drag an

16983
11:34:50,640 --> 11:34:53,360
item if he clicks on the title. No, only

16984
11:34:53,360 --> 11:34:56,160
if the user clicks on this specific

16985
11:34:56,160 --> 11:34:58,480
button. Then this should be it. Um after

16986
11:34:58,480 --> 11:35:00,720
the button we can get a little icon.

16987
11:35:00,720 --> 11:35:03,200
This will be the file text icon imported

16988
11:35:03,200 --> 11:35:05,276
from Lucid React. And then we can give

16989
11:35:05,276 --> 11:35:08,160
it a class name which will be size 4.

16990
11:35:08,160 --> 11:35:10,320
How does this already look? Um, we don't

16991
11:35:10,320 --> 11:35:12,320
see anything. That's because our items

16992
11:35:12,320 --> 11:35:14,720
are collapsed or our content. This means

16993
11:35:14,720 --> 11:35:17,040
if we click on this collapsible trigger

16994
11:35:17,040 --> 11:35:19,360
button thingy, then our items will be

16995
11:35:19,360 --> 11:35:21,200
here again. And as you see, this is the

16996
11:35:21,200 --> 11:35:23,680
icon. We can then also continue after

16997
11:35:23,680 --> 11:35:26,000
the file text icon. I want to also

16998
11:35:26,000 --> 11:35:28,000
render the title. Here's the thing. If

16999
11:35:28,000 --> 11:35:30,080
the user clicks on the title, we will

17000
11:35:30,080 --> 11:35:32,240
redirect the user to then edit the

17001
11:35:32,240 --> 11:35:35,116
specific course structure item if this

17002
11:35:35,116 --> 11:35:36,960
makes sense. Uh to edit the specific

17003
11:35:36,960 --> 11:35:38,800
lesson. That's what I wanted to say.

17004
11:35:38,800 --> 11:35:40,480
This means we can get the link component

17005
11:35:40,480 --> 11:35:43,436
from next /link and inside of here we

17006
11:35:43,436 --> 11:35:46,400
want to get the lesson.

17007
11:35:46,400 --> 11:35:48,720
And then we can give the link and href

17008
11:35:48,720 --> 11:35:51,040
and this will be equal to optics because

17009
11:35:51,040 --> 11:35:53,360
inside of here we will also pass the

17010
11:35:53,360 --> 11:35:55,680
dynamic course ID. This means for the

17011
11:35:55,680 --> 11:35:58,480
href um again optics and then we want to

17012
11:35:58,480 --> 11:36:01,680
say slashadmin slashcourses

17013
11:36:01,680 --> 11:36:05,040
slash the course id this means data do

17014
11:36:05,040 --> 11:36:08,320
id then slash the individual item ID so

17015
11:36:08,320 --> 11:36:11,200
the category ID in this case so dynamic

17016
11:36:11,200 --> 11:36:14,880
value item do ID and then also slash the

17017
11:36:14,880 --> 11:36:17,520
lesson ID so this means again a dynamic

17018
11:36:17,520 --> 11:36:20,480
value and this will be the lesson id so

17019
11:36:20,480 --> 11:36:23,520
the full um href will be slashadmin

17020
11:36:23,520 --> 11:36:24,880
slashcourses

17021
11:36:24,880 --> 11:36:27,680
slash data ID this is the course ID

17022
11:36:27,680 --> 11:36:30,800
slash item ID this is the category ID

17023
11:36:30,800 --> 11:36:33,756
slash lesson ID which is the lesson ID

17024
11:36:33,756 --> 11:36:35,756
and then we pass the lesson title this

17025
11:36:35,756 --> 11:36:38,160
is fine do we need to style it I don't

17026
11:36:38,160 --> 11:36:40,080
think so this means if we go back you

17027
11:36:40,080 --> 11:36:42,960
will see lesson number one on the right

17028
11:36:42,960 --> 11:36:45,360
side we want to again display a button

17029
11:36:45,360 --> 11:36:47,200
this means we can go underneath this div

17030
11:36:47,200 --> 11:36:49,680
but we want to stay in this big div and

17031
11:36:49,680 --> 11:36:51,840
then we want to get a button and for the

17032
11:36:51,840 --> 11:36:53,680
button uh again we can give it first of

17033
11:36:53,680 --> 11:36:56,160
all a variant. This will be for example

17034
11:36:56,160 --> 11:36:58,400
outline. For the size, this will be

17035
11:36:58,400 --> 11:37:00,640
icon. And then inside of here, we can

17036
11:37:00,640 --> 11:37:03,116
get the delete icon from Lucid React.

17037
11:37:03,116 --> 11:37:05,840
And as you see, um, yeah, delete icon

17038
11:37:05,840 --> 11:37:08,080
isn't that nice. I think the trash to

17039
11:37:08,080 --> 11:37:10,080
icon will work a bit better. And then

17040
11:37:10,080 --> 11:37:12,320
for the class name, this will be size 4.

17041
11:37:12,320 --> 11:37:14,480
And yeah, this is way better. And then

17042
11:37:14,480 --> 11:37:17,756
also underneath this sortable context.

17043
11:37:17,756 --> 11:37:19,756
So, or underneath this section. So, if I

17044
11:37:19,756 --> 11:37:22,160
get my line, uh, as you see, this is our

17045
11:37:22,160 --> 11:37:24,320
sortable context. And the thing is here

17046
11:37:24,320 --> 11:37:26,720
I want to render a button which says

17047
11:37:26,720 --> 11:37:28,400
create a new lesson or something like

17048
11:37:28,400 --> 11:37:30,320
that. This means we can go back. We want

17049
11:37:30,320 --> 11:37:32,400
to go underneath the sortable context

17050
11:37:32,400 --> 11:37:35,040
but we want to um stay in this div. We

17051
11:37:35,040 --> 11:37:37,040
want to create a new div and inside of

17052
11:37:37,040 --> 11:37:39,360
here we can use the button component and

17053
11:37:39,360 --> 11:37:42,480
then we can just say new lesson or

17054
11:37:42,480 --> 11:37:45,360
create new lesson. As you see this

17055
11:37:45,360 --> 11:37:47,276
button does not take the whole width and

17056
11:37:47,276 --> 11:37:49,680
I don't know it does not look that nice.

17057
11:37:49,680 --> 11:37:51,840
This means we can give this div first of

17058
11:37:51,840 --> 11:37:54,480
all a class name which will be padding 2

17059
11:37:54,480 --> 11:37:56,480
and then for the button we can give it a

17060
11:37:56,480 --> 11:37:59,116
variant and the variant will be outline.

17061
11:37:59,116 --> 11:38:00,960
I think outline should look quite nice.

17062
11:38:00,960 --> 11:38:03,680
This is uh quite uh appealing. The only

17063
11:38:03,680 --> 11:38:05,040
problem is it does not take the whole

17064
11:38:05,040 --> 11:38:07,520
width. So we can give the button also a

17065
11:38:07,520 --> 11:38:10,320
class name which will be width full. And

17066
11:38:10,320 --> 11:38:12,000
what do you think? Does it look

17067
11:38:12,000 --> 11:38:14,160
beautiful or does it look beautiful? It

17068
11:38:14,160 --> 11:38:16,320
looks very beautiful. We can drag and

17069
11:38:16,320 --> 11:38:18,320
drop. Yes, it's still buggy. That's

17070
11:38:18,320 --> 11:38:20,960
because our on drag end function is

17071
11:38:20,960 --> 11:38:23,040
still not implemented and that's why

17072
11:38:23,040 --> 11:38:24,480
this is kind of buggy. I mean the

17073
11:38:24,480 --> 11:38:26,560
chapter is not buggy but the lesson drag

17074
11:38:26,560 --> 11:38:29,596
and drop is quite um buggy. Don't worry

17075
11:38:29,596 --> 11:38:32,160
we will fix it. Nevertheless, I have one

17076
11:38:32,160 --> 11:38:34,720
problem currently. If I copy this URL

17077
11:38:34,720 --> 11:38:37,596
and open it in a new incognito tab, I

17078
11:38:37,596 --> 11:38:40,000
get redirected. That's very cool. But if

17079
11:38:40,000 --> 11:38:42,480
I go into the dashboard, copy the URL

17080
11:38:42,480 --> 11:38:44,640
and again paste it into my incognito

17081
11:38:44,640 --> 11:38:47,520
tab. I see this. This shouldn't happen.

17082
11:38:47,520 --> 11:38:50,640
only authenticated users and only admins

17083
11:38:50,640 --> 11:38:52,720
should be able to see this route. Even

17084
11:38:52,720 --> 11:38:54,720
though I don't fetch any data and even

17085
11:38:54,720 --> 11:38:57,200
though this is dummy data, I still don't

17086
11:38:57,200 --> 11:38:59,840
want to give the a fake user at the end

17087
11:38:59,840 --> 11:39:02,960
of the day the ability to view this data

17088
11:39:02,960 --> 11:39:04,880
and I don't mean a fake user but a

17089
11:39:04,880 --> 11:39:07,116
nonauthenticated user. So here's the

17090
11:39:07,116 --> 11:39:08,800
thing. How can we make sure that only

17091
11:39:08,800 --> 11:39:12,080
authenticated users and also admins see

17092
11:39:12,080 --> 11:39:15,200
this page? We could for example open the

17093
11:39:15,200 --> 11:39:17,680
page.tsx. This is one idea. So, right

17094
11:39:17,680 --> 11:39:20,320
here, page.tsx. My god, where is it? Um,

17095
11:39:20,320 --> 11:39:22,320
I can open it in a core structure. Why

17096
11:39:22,320 --> 11:39:25,596
not? So, app folder admin page.tsx. And

17097
11:39:25,596 --> 11:39:27,200
we could just go inside of here and say

17098
11:39:27,200 --> 11:39:29,916
constant data or constant session equals

17099
11:39:29,916 --> 11:39:32,720
to array require admin. Then we could

17100
11:39:32,720 --> 11:39:34,800
get the user session and check if the

17101
11:39:34,800 --> 11:39:37,520
user is an admin. Yes, this works. And

17102
11:39:37,520 --> 11:39:39,680
also, this is a server component. So,

17103
11:39:39,680 --> 11:39:42,240
this is all fine. We can do that. But

17104
11:39:42,240 --> 11:39:44,160
what's the problem? Well, currently this

17105
11:39:44,160 --> 11:39:46,480
is all fake data. What I mean by that is

17106
11:39:46,480 --> 11:39:48,560
we don't fetch any data for the section

17107
11:39:48,560 --> 11:39:51,436
cards for the chart area interactive and

17108
11:39:51,436 --> 11:39:53,756
also for this data table. We don't fetch

17109
11:39:53,756 --> 11:39:55,436
any data. So this means when we will

17110
11:39:55,436 --> 11:39:57,756
later on deploy our application this

17111
11:39:57,756 --> 11:40:00,160
data or this page for now later on we

17112
11:40:00,160 --> 11:40:02,160
will fetch data but right now it would

17113
11:40:02,160 --> 11:40:05,040
be a static route because again no data

17114
11:40:05,040 --> 11:40:08,240
is fetched. NextJS will see that next.js

17115
11:40:08,240 --> 11:40:10,800
is smart and it will opt this route into

17116
11:40:10,800 --> 11:40:12,640
static rendering. This means it will be

17117
11:40:12,640 --> 11:40:14,880
pre-generated at buildtime or

17118
11:40:14,880 --> 11:40:17,436
pre-rendered at build time. If we get

17119
11:40:17,436 --> 11:40:19,680
our user session inside of here, it will

17120
11:40:19,680 --> 11:40:21,680
go through the session or through the

17121
11:40:21,680 --> 11:40:24,000
server. This means this page will be

17122
11:40:24,000 --> 11:40:26,560
opted into dynamic rendering. We don't

17123
11:40:26,560 --> 11:40:28,560
want that. So, we need some sort of

17124
11:40:28,560 --> 11:40:31,040
other solution and thankfully there is a

17125
11:40:31,040 --> 11:40:33,200
great solution and the solution is

17126
11:40:33,200 --> 11:40:35,756
called middleware. What is middleware?

17127
11:40:35,756 --> 11:40:38,080
Middleware allows you to run code before

17128
11:40:38,080 --> 11:40:40,960
a request is completed. Then based on

17129
11:40:40,960 --> 11:40:43,276
the incoming request you can modify the

17130
11:40:43,276 --> 11:40:46,080
response by rewriting, redirecting,

17131
11:40:46,080 --> 11:40:48,080
modifying the request or response

17132
11:40:48,080 --> 11:40:51,756
headers or responding directly. So how

17133
11:40:51,756 --> 11:40:54,000
will everything work? Well, we will have

17134
11:40:54,000 --> 11:40:56,320
a request. So you as a client make a

17135
11:40:56,320 --> 11:40:58,800
request to our website in this case kind

17136
11:40:58,800 --> 11:41:01,040
of to our server, right? So you make a

17137
11:41:01,040 --> 11:41:03,040
request and before the middleware uh

17138
11:41:03,040 --> 11:41:05,436
before the request hits the server,

17139
11:41:05,436 --> 11:41:07,596
middleware will intercept the request.

17140
11:41:07,596 --> 11:41:09,840
It's like a layer in front of our

17141
11:41:09,840 --> 11:41:12,000
server. It will intercept the request

17142
11:41:12,000 --> 11:41:14,480
and it will check hm does the user have

17143
11:41:14,480 --> 11:41:17,840
a valid session. Is the user an admin?

17144
11:41:17,840 --> 11:41:20,320
If not then middleware will respond and

17145
11:41:20,320 --> 11:41:23,276
will say hey I will redirect you to /lo

17146
11:41:23,276 --> 11:41:26,000
or/notadmin whatever middleware will

17147
11:41:26,000 --> 11:41:28,560
just respond in some sort of way. If the

17148
11:41:28,560 --> 11:41:30,560
request is fine, this means or in other

17149
11:41:30,560 --> 11:41:32,640
words, if the user session is fine and

17150
11:41:32,640 --> 11:41:34,560
stuff like that, then the request will

17151
11:41:34,560 --> 11:41:36,800
just be forwarded to the server and then

17152
11:41:36,800 --> 11:41:38,560
the server will forward the request to

17153
11:41:38,560 --> 11:41:40,880
the database. We will get all of the our

17154
11:41:40,880 --> 11:41:43,200
data and then return the response. This

17155
11:41:43,200 --> 11:41:45,360
is great. But you know what? Sorry for

17156
11:41:45,360 --> 11:41:47,916
that. The problem with middleware is you

17157
11:41:47,916 --> 11:41:50,000
can create a matcher and then in the

17158
11:41:50,000 --> 11:41:53,040
matcher you specifically define in which

17159
11:41:53,040 --> 11:41:55,436
routes middleware should not run. So for

17160
11:41:55,436 --> 11:41:58,000
example, our index page. So I can go to

17161
11:41:58,000 --> 11:42:01,040
localhost 3000. This is a public route.

17162
11:42:01,040 --> 11:42:03,200
This means even if a user is not

17163
11:42:03,200 --> 11:42:05,520
authenticated, the user should still be

17164
11:42:05,520 --> 11:42:07,756
able to view this data or this page. The

17165
11:42:07,756 --> 11:42:09,840
same thing is also true for courses and

17166
11:42:09,840 --> 11:42:11,680
then the individual page for the

17167
11:42:11,680 --> 11:42:14,080
courses. These are public routes. And

17168
11:42:14,080 --> 11:42:15,916
this means in our matcher we will say

17169
11:42:15,916 --> 11:42:17,756
hey this route is a public route. This

17170
11:42:17,756 --> 11:42:20,640
route is a public route. But what if we

17171
11:42:20,640 --> 11:42:23,840
accidentally also add our admin index

17172
11:42:23,840 --> 11:42:26,640
page? Then this layer of defense will

17173
11:42:26,640 --> 11:42:29,520
pretty much not work and our fake user

17174
11:42:29,520 --> 11:42:31,756
in this case will or not fake user but

17175
11:42:31,756 --> 11:42:34,560
our malicious user will still be able to

17176
11:42:34,560 --> 11:42:37,360
view our page. Now we can't really stop

17177
11:42:37,360 --> 11:42:39,840
this. This is as it is. You shouldn't

17178
11:42:39,840 --> 11:42:42,480
forget it but it can happen. That's why

17179
11:42:42,480 --> 11:42:45,116
we also use the data access layer

17180
11:42:45,116 --> 11:42:47,116
because our middleware is like the first

17181
11:42:47,116 --> 11:42:50,240
line of defense. In case a user forgets

17182
11:42:50,240 --> 11:42:53,116
to add a specific path to middleware,

17183
11:42:53,116 --> 11:42:55,596
then we will still have our data access

17184
11:42:55,596 --> 11:42:57,276
layer. Because here's the thing, we

17185
11:42:57,276 --> 11:42:59,276
still have our client. A client or our

17186
11:42:59,276 --> 11:43:01,680
client makes a request to our server.

17187
11:43:01,680 --> 11:43:03,840
Middleware will still intercept our

17188
11:43:03,840 --> 11:43:05,916
request. But in this case, let's say

17189
11:43:05,916 --> 11:43:08,800
middleware won't work because we forgot

17190
11:43:08,800 --> 11:43:11,840
to add the specific path or middleware

17191
11:43:11,840 --> 11:43:13,680
for example recently had a

17192
11:43:13,680 --> 11:43:15,916
vulnerability. Um I can also open the

17193
11:43:15,916 --> 11:43:18,880
page. Why not? So nextjs middleware

17194
11:43:18,880 --> 11:43:21,596
vulnerability. We can just open it. Uh

17195
11:43:21,596 --> 11:43:23,436
what do we want to open? Which link? I

17196
11:43:23,436 --> 11:43:26,560
think this one. So security alert. How

17197
11:43:26,560 --> 11:43:29,436
attackers can bypass NexJS middleware

17198
11:43:29,436 --> 11:43:32,480
with a single HTTP header. So um

17199
11:43:32,480 --> 11:43:34,640
middleware next.js allows you to run

17200
11:43:34,640 --> 11:43:36,720
code before a request is completed. Yes,

17201
11:43:36,720 --> 11:43:38,560
we know that already. The attack

17202
11:43:38,560 --> 11:43:41,040
exploits the X middleware sub request

17203
11:43:41,040 --> 11:43:43,840
header an internal implementation detail

17204
11:43:43,840 --> 11:43:46,400
that was never meant to be exposed to

17205
11:43:46,400 --> 11:43:49,436
user uh to users. By supplying a

17206
11:43:49,436 --> 11:43:51,840
specific value to this header easily

17207
11:43:51,840 --> 11:43:54,000
inferred from the target application

17208
11:43:54,000 --> 11:43:56,400
structure, attackers can completely

17209
11:43:56,400 --> 11:44:00,320
bypass Nex.js's middleware execution.

17210
11:44:00,320 --> 11:44:02,320
Now this bug has been fixed. Middleware

17211
11:44:02,320 --> 11:44:04,480
is again safe. But let's just imagine

17212
11:44:04,480 --> 11:44:06,320
that your application would have been

17213
11:44:06,320 --> 11:44:08,720
created 3 months ago and the attacker

17214
11:44:08,720 --> 11:44:10,960
could just bypass your middleware. This

17215
11:44:10,960 --> 11:44:13,040
is the reason why we also created this

17216
11:44:13,040 --> 11:44:15,520
data access layer because in case our

17217
11:44:15,520 --> 11:44:18,560
middleware gets um yeah in case our

17218
11:44:18,560 --> 11:44:20,560
middleware just does not work because

17219
11:44:20,560 --> 11:44:22,720
some sort of user passes this X or

17220
11:44:22,720 --> 11:44:25,276
pasted this X request header then our

17221
11:44:25,276 --> 11:44:27,596
data access layer would still function

17222
11:44:27,596 --> 11:44:29,916
because the request will first of all

17223
11:44:29,916 --> 11:44:32,160
hit the server that's fine but before we

17224
11:44:32,160 --> 11:44:35,040
retrieve our data our data access layer

17225
11:44:35,040 --> 11:44:37,200
will again check if the user has the

17226
11:44:37,200 --> 11:44:39,276
correct authorization status. So if the

17227
11:44:39,276 --> 11:44:41,680
user is a real user and has or is an

17228
11:44:41,680 --> 11:44:44,160
admin and stuff like that that's why in

17229
11:44:44,160 --> 11:44:45,916
this application we will implement

17230
11:44:45,916 --> 11:44:48,640
middleware and the data access layer. We

17231
11:44:48,640 --> 11:44:50,560
already implemented the data access

17232
11:44:50,560 --> 11:44:52,480
layer but now we want to also implement

17233
11:44:52,480 --> 11:44:54,400
middleware. At the end of the day this

17234
11:44:54,400 --> 11:44:57,116
will be multi-layered security because

17235
11:44:57,116 --> 11:44:58,720
you don't want to have one line of

17236
11:44:58,720 --> 11:45:01,436
defense. No, the more lines of defense

17237
11:45:01,436 --> 11:45:03,520
you have the better. In case this one

17238
11:45:03,520 --> 11:45:05,680
breaks we still have the data access

17239
11:45:05,680 --> 11:45:07,596
layer. In case the data access layer

17240
11:45:07,596 --> 11:45:09,436
breaks, we still have middleware. And

17241
11:45:09,436 --> 11:45:11,360
the nice thing with middleware is that

17242
11:45:11,360 --> 11:45:14,560
it also preserves static rendering. Um

17243
11:45:14,560 --> 11:45:16,720
because again our index page, so the

17244
11:45:16,720 --> 11:45:19,200
admin index page currently does not

17245
11:45:19,200 --> 11:45:21,596
render or does not fetch any data. This

17246
11:45:21,596 --> 11:45:24,320
means our data access layer won't even

17247
11:45:24,320 --> 11:45:26,320
be in effect because we won't fetch any

17248
11:45:26,320 --> 11:45:28,480
data which means it won't really exist.

17249
11:45:28,480 --> 11:45:30,640
We won't have this line of defense. And

17250
11:45:30,640 --> 11:45:32,320
again we could of course fetch the user

17251
11:45:32,320 --> 11:45:34,480
session in the page but then we would

17252
11:45:34,480 --> 11:45:36,960
opt the route into dynamic rendering and

17253
11:45:36,960 --> 11:45:39,200
with middleware we will preserve static

17254
11:45:39,200 --> 11:45:41,520
rendering. And yeah that's what I wanted

17255
11:45:41,520 --> 11:45:43,200
to explain to you guys. That's the

17256
11:45:43,200 --> 11:45:44,960
reason why we implemented the data

17257
11:45:44,960 --> 11:45:47,360
access layer and why we will now also

17258
11:45:47,360 --> 11:45:49,276
implement middleware. So what we can do

17259
11:45:49,276 --> 11:45:51,360
is go back to better off. Then we can

17260
11:45:51,360 --> 11:45:53,596
head over to the documentation. We want

17261
11:45:53,596 --> 11:45:56,240
to scroll to the bottom. Then we want to

17262
11:45:56,240 --> 11:45:58,640
go to what was it? Integrations or

17263
11:45:58,640 --> 11:46:01,360
guides. Um sometimes this documentation

17264
11:46:01,360 --> 11:46:04,240
is a bit confusing. So it's integrations

17265
11:46:04,240 --> 11:46:07,040
and then we want to go to nextjs.

17266
11:46:07,040 --> 11:46:08,720
So here they again talk about the

17267
11:46:08,720 --> 11:46:11,040
integration, how to create an API route

17268
11:46:11,040 --> 11:46:13,116
and stuff like that. We already did all

17269
11:46:13,116 --> 11:46:15,200
of this annoying stuff and we want to

17270
11:46:15,200 --> 11:46:17,680
scroll a bit further. So on the right

17271
11:46:17,680 --> 11:46:19,680
side we want to go to middleware and

17272
11:46:19,680 --> 11:46:22,480
here they say in nextJS middleware it's

17273
11:46:22,480 --> 11:46:24,720
recommended to only check for the

17274
11:46:24,720 --> 11:46:27,840
existence of a session cookie to handle

17275
11:46:27,840 --> 11:46:30,240
redirection to avoid blocking requests

17276
11:46:30,240 --> 11:46:33,360
by making API or datab uh database

17277
11:46:33,360 --> 11:46:36,080
calls. You can use the get session uh

17278
11:46:36,080 --> 11:46:38,560
cookie helper from better off for this

17279
11:46:38,560 --> 11:46:41,200
purpose. So here's the thing for now we

17280
11:46:41,200 --> 11:46:43,756
will only check if the user has a valid

17281
11:46:43,756 --> 11:46:46,080
session. We will later on also check if

17282
11:46:46,080 --> 11:46:48,080
the user is an admin and stuff like

17283
11:46:48,080 --> 11:46:50,320
that. But this will take a bit of time

17284
11:46:50,320 --> 11:46:52,240
because there's a lot of things that I

17285
11:46:52,240 --> 11:46:54,400
have to explain for that. So for now we

17286
11:46:54,400 --> 11:46:57,040
will just check if the user has a valid

17287
11:46:57,040 --> 11:46:59,436
session. So we can just copy this code

17288
11:46:59,436 --> 11:47:01,520
example which they provide here. So the

17289
11:47:01,520 --> 11:47:03,520
get session cookie function does not

17290
11:47:03,520 --> 11:47:05,756
automatically reference the off config

17291
11:47:05,756 --> 11:47:08,480
specified in off.ts. Therefore if you

17292
11:47:08,480 --> 11:47:10,960
customize the cookie name or prefix, you

17293
11:47:10,960 --> 11:47:12,800
have to do a lot of other things. But we

17294
11:47:12,800 --> 11:47:15,520
don't uh we did not customize anything.

17295
11:47:15,520 --> 11:47:17,916
Everything is set as the default which

17296
11:47:17,916 --> 11:47:19,756
means we can just copy this code

17297
11:47:19,756 --> 11:47:22,240
example. We can then go back open the

17298
11:47:22,240 --> 11:47:24,640
explorer and we want to create a new

17299
11:47:24,640 --> 11:47:26,480
middleware file. This means

17300
11:47:26,480 --> 11:47:28,160
middleware.ts

17301
11:47:28,160 --> 11:47:30,080
and then we can paste uh this code

17302
11:47:30,080 --> 11:47:32,480
example. So here's the thing this uh

17303
11:47:32,480 --> 11:47:34,640
here we define the middleware itself.

17304
11:47:34,640 --> 11:47:36,640
Then we use this get session cookie

17305
11:47:36,640 --> 11:47:39,040
helper function provided by better off

17306
11:47:39,040 --> 11:47:41,040
to check if the user has a valid

17307
11:47:41,040 --> 11:47:43,276
session. If not, if there's no session

17308
11:47:43,276 --> 11:47:45,360
cookie, then we just redirect the user

17309
11:47:45,360 --> 11:47:47,840
back to the index page. We can also

17310
11:47:47,840 --> 11:47:49,680
redirect the user to the login route,

17311
11:47:49,680 --> 11:47:51,756
for example. It does not really matter.

17312
11:47:51,756 --> 11:47:53,436
Let's just redirect the user to the

17313
11:47:53,436 --> 11:47:56,000
login route. Why not? And then we also

17314
11:47:56,000 --> 11:47:58,480
have this matcher. So, export constant

17315
11:47:58,480 --> 11:48:01,520
config matcher. And here you specify the

17316
11:48:01,520 --> 11:48:04,480
routes the middleware applies to. So, we

17317
11:48:04,480 --> 11:48:07,116
want to um apply the middleware to our

17318
11:48:07,116 --> 11:48:09,360
admin route. This means instead of

17319
11:48:09,360 --> 11:48:11,756
saying / dashboard, we want to say

17320
11:48:11,756 --> 11:48:14,960
/admin. But this brings one huge problem

17321
11:48:14,960 --> 11:48:17,840
because this will only run on this admin

17322
11:48:17,840 --> 11:48:20,160
index page. So we can save this right

17323
11:48:20,160 --> 11:48:22,960
now. We can go back and we can just copy

17324
11:48:22,960 --> 11:48:25,040
this index page. Let's do a hard

17325
11:48:25,040 --> 11:48:27,756
refresh. Then we can copy this URL, open

17326
11:48:27,756 --> 11:48:30,400
it in a new incognito tab. And in

17327
11:48:30,400 --> 11:48:32,720
theory, everything should be protected.

17328
11:48:32,720 --> 11:48:35,436
Yes, this works nicely. But if I go for

17329
11:48:35,436 --> 11:48:37,916
example to the creation route. So in the

17330
11:48:37,916 --> 11:48:40,320
creation route we don't fetch any data.

17331
11:48:40,320 --> 11:48:42,800
So again inside of here our data access

17332
11:48:42,800 --> 11:48:44,400
layer does not check anything which

17333
11:48:44,400 --> 11:48:46,800
means this is currently unprotected. But

17334
11:48:46,800 --> 11:48:49,680
in theory we have middleware right? Yeah

17335
11:48:49,680 --> 11:48:51,840
kind of. I mean if I copy this URL and

17336
11:48:51,840 --> 11:48:54,640
again open it in a new incognito tab I

17337
11:48:54,640 --> 11:48:58,080
will see the data. But wait we just uh

17338
11:48:58,080 --> 11:49:00,720
defined middleware right? Yes. But this

17339
11:49:00,720 --> 11:49:03,360
again only applies to the index page.

17340
11:49:03,360 --> 11:49:05,360
This means what what you want to do is

17341
11:49:05,360 --> 11:49:10,000
say /admin then slash colon path star.

17342
11:49:10,000 --> 11:49:12,240
This will then apply to all admin

17343
11:49:12,240 --> 11:49:14,400
routes. This means if I save this again

17344
11:49:14,400 --> 11:49:16,880
and do a hard refresh in this incognito

17345
11:49:16,880 --> 11:49:19,360
tab I will get redirected. This means

17346
11:49:19,360 --> 11:49:22,160
our whole admin page our whole admin

17347
11:49:22,160 --> 11:49:24,720
dashboard is completely protected with

17348
11:49:24,720 --> 11:49:26,960
middleware. And again middleware is now

17349
11:49:26,960 --> 11:49:29,520
applied on the page level itself. It

17350
11:49:29,520 --> 11:49:32,480
protects the pages individually and the

17351
11:49:32,480 --> 11:49:35,436
data access layer protects our data

17352
11:49:35,436 --> 11:49:38,640
double layered security. Very cool. So

17353
11:49:38,640 --> 11:49:41,040
before we continue with our drag and

17354
11:49:41,040 --> 11:49:43,756
drop thingy for our course structure. So

17355
11:49:43,756 --> 11:49:45,916
this here I want to first of all push

17356
11:49:45,916 --> 11:49:48,720
the code into a GitHub repo. So we want

17357
11:49:48,720 --> 11:49:51,520
to store the code in GitHub which means

17358
11:49:51,520 --> 11:49:54,160
we can go to github.com/new

17359
11:49:54,160 --> 11:49:56,320
and we want to create a new GitHub

17360
11:49:56,320 --> 11:49:58,880
repository. For the name this will be

17361
11:49:58,880 --> 11:50:00,560
marshall-l

17362
11:50:00,560 --> 11:50:03,680
at least in my case. Then for the um how

17363
11:50:03,680 --> 11:50:05,680
would you call it visibility this will

17364
11:50:05,680 --> 11:50:08,640
be a private repo and I don't want to do

17365
11:50:08,640 --> 11:50:11,200
anything else and then I can create the

17366
11:50:11,200 --> 11:50:13,756
repository. The next step is to connect

17367
11:50:13,756 --> 11:50:15,756
our codebase or in other words to push

17368
11:50:15,756 --> 11:50:19,520
our code into this remote GitHub repo.

17369
11:50:19,520 --> 11:50:21,756
This means we can go back. We want to

17370
11:50:21,756 --> 11:50:23,916
open the terminal. We want to stop our

17371
11:50:23,916 --> 11:50:26,960
dev server and then run get innit. This

17372
11:50:26,960 --> 11:50:29,276
will reinitialize the existing git

17373
11:50:29,276 --> 11:50:31,840
repository. And then the next step is to

17374
11:50:31,840 --> 11:50:34,720
say get add everything with a dot. This

17375
11:50:34,720 --> 11:50:37,596
will then just add all of our files. And

17376
11:50:37,596 --> 11:50:39,756
then we want to also create a commit

17377
11:50:39,756 --> 11:50:43,116
message. So get commit-m

17378
11:50:43,116 --> 11:50:46,160
and for the message this will be I will

17379
11:50:46,160 --> 11:50:48,960
call it version one. And then I can

17380
11:50:48,960 --> 11:50:51,276
click on enter. As you see all of these

17381
11:50:51,276 --> 11:50:53,596
files have been committed. And then the

17382
11:50:53,596 --> 11:50:56,320
next step is to also add our remote

17383
11:50:56,320 --> 11:50:59,200
origin or to we want to first of all add

17384
11:50:59,200 --> 11:51:01,596
a new branch. So we can go back to this

17385
11:51:01,596 --> 11:51:03,520
quick start guide and then we want to

17386
11:51:03,520 --> 11:51:07,040
copy get branch- m main. So this will

17387
11:51:07,040 --> 11:51:09,916
create a new branch and the name will be

17388
11:51:09,916 --> 11:51:12,880
main. Then we want to also add a remote

17389
11:51:12,880 --> 11:51:15,200
origin. So we can copy this, paste it

17390
11:51:15,200 --> 11:51:17,436
inside of here. This will add the remote

17391
11:51:17,436 --> 11:51:20,080
origin and then we want to push our code

17392
11:51:20,080 --> 11:51:22,720
into the main branch. This means we can

17393
11:51:22,720 --> 11:51:25,200
copy this and paste it inside of here.

17394
11:51:25,200 --> 11:51:27,040
This will take all of our committed

17395
11:51:27,040 --> 11:51:30,800
files and push it into the remote um URL

17396
11:51:30,800 --> 11:51:33,596
or it will push it into the remote repo.

17397
11:51:33,596 --> 11:51:35,756
So if I do again a hard refresh, I

17398
11:51:35,756 --> 11:51:37,916
should get all of my files. And yes,

17399
11:51:37,916 --> 11:51:40,400
this looks absolutely beautiful. So

17400
11:51:40,400 --> 11:51:42,240
version one, version one, and then

17401
11:51:42,240 --> 11:51:45,276
initial commit from create next app. So

17402
11:51:45,276 --> 11:51:49,116
this worked exactly as expected. So here

17403
11:51:49,116 --> 11:51:51,756
are a few things I want to mention.

17404
11:51:51,756 --> 11:51:53,916
First of all, if you bought access to

17405
11:51:53,916 --> 11:51:56,560
this GitHub repository, then thank you.

17406
11:51:56,560 --> 11:51:58,640
I appreciate it. Thank you for

17407
11:51:58,640 --> 11:52:00,560
supporting this channel and thank you

17408
11:52:00,560 --> 11:52:03,276
for supporting me, Jan Marshall. I

17409
11:52:03,276 --> 11:52:06,240
appreciate it very very much. If you are

17410
11:52:06,240 --> 11:52:08,480
a customer, if you bought access to this

17411
11:52:08,480 --> 11:52:10,960
GitHub repository and if you have

17412
11:52:10,960 --> 11:52:14,400
questions or problems, then email me. I

17413
11:52:14,400 --> 11:52:16,400
read emails from customers and I also

17414
11:52:16,400 --> 11:52:19,436
respond instantly. If you are a customer

17415
11:52:19,436 --> 11:52:22,480
again then secondly this video will now

17416
11:52:22,480 --> 11:52:25,200
finish. Stop. Why is that? Here's the

17417
11:52:25,200 --> 11:52:28,880
thing. NextJS has a or not next.js, my

17418
11:52:28,880 --> 11:52:32,480
god, YouTube has a time limit 12 hours.

17419
11:52:32,480 --> 11:52:34,800
I know YouTube or some people upload

17420
11:52:34,800 --> 11:52:37,520
videos which are 20 hours long, 30 hours

17421
11:52:37,520 --> 11:52:40,480
long. I tried it, it never worked. I

17422
11:52:40,480 --> 11:52:43,040
contacted support. They said, "Hey, Jan,

17423
11:52:43,040 --> 11:52:45,756
officially we only allow 12 hours.

17424
11:52:45,756 --> 11:52:48,160
That's it. Not anymore." So, I'm not

17425
11:52:48,160 --> 11:52:50,640
sure how these people upload such long

17426
11:52:50,640 --> 11:52:52,960
videos. I would love to do the same

17427
11:52:52,960 --> 11:52:54,800
thing, but it does not work. I tried it

17428
11:52:54,800 --> 11:52:57,200
once, it never worked. So, that's why I

17429
11:52:57,200 --> 11:53:00,000
will have to create a second part. But

17430
11:53:00,000 --> 11:53:02,320
don't worry, this second part will also

17431
11:53:02,320 --> 11:53:04,720
be free. It will also be uploaded to the

17432
11:53:04,720 --> 11:53:07,040
main YouTube channel, Jan Marshall. You

17433
11:53:07,040 --> 11:53:08,720
don't have to sign up for it. You don't

17434
11:53:08,720 --> 11:53:11,040
have to pay for the video. No, it will

17435
11:53:11,040 --> 11:53:14,320
be a normal free video. The GitHub repo

17436
11:53:14,320 --> 11:53:16,880
access is paid. Yes, but the video

17437
11:53:16,880 --> 11:53:19,276
itself is completely free and it will

17438
11:53:19,276 --> 11:53:22,240
come out in about 3 to 4 days again on

17439
11:53:22,240 --> 11:53:25,040
this channel. Jan Marshall also for

17440
11:53:25,040 --> 11:53:27,680
everybody who bought GitHub or who

17441
11:53:27,680 --> 11:53:30,320
bought access to this GitHub repository.

17442
11:53:30,320 --> 11:53:31,756
Here on the right side you see the

17443
11:53:31,756 --> 11:53:34,240
commits currently there are two commits.

17444
11:53:34,240 --> 11:53:36,480
Later on I will create another commit

17445
11:53:36,480 --> 11:53:39,520
version two once version two or once the

17446
11:53:39,520 --> 11:53:41,116
second part comes out the YouTube video.

17447
11:53:41,116 --> 11:53:42,880
For now, this will only be version one,

17448
11:53:42,880 --> 11:53:45,116
but once the second YouTube video comes

17449
11:53:45,116 --> 11:53:47,840
out, you will also see version two here.

17450
11:53:47,840 --> 11:53:50,000
That's because we will rewrite a lot of

17451
11:53:50,000 --> 11:53:51,916
things in version two. And if you want

17452
11:53:51,916 --> 11:53:55,040
to reference all of the code from this

17453
11:53:55,040 --> 11:53:57,040
part one, then you can just go here,

17454
11:53:57,040 --> 11:53:59,200
click on version one, and then you can

17455
11:53:59,200 --> 11:54:01,200
access the whole code. So you can say

17456
11:54:01,200 --> 11:54:04,080
somewhere, where was it? Browse files.

17457
11:54:04,080 --> 11:54:05,840
So then you will see all of the code

17458
11:54:05,840 --> 11:54:09,116
exactly when we push the code into this

17459
11:54:09,116 --> 11:54:11,680
repo. And also before I let you go off,

17460
11:54:11,680 --> 11:54:13,840
I want to say thank you everybody for

17461
11:54:13,840 --> 11:54:16,320
supporting this channel. It's actually

17462
11:54:16,320 --> 11:54:18,800
the 2-year anniversary of this YouTube

17463
11:54:18,800 --> 11:54:21,116
channel. Yes, two years. Quite some

17464
11:54:21,116 --> 11:54:23,200
time. And yeah, enjoy your day and I

17465
11:54:23,200 --> 11:54:27,360
hope I see you in part two. So, bye-bye.